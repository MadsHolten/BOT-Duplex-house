(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+qE3":function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},"+tJ4":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}}},"+umK":function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},"/WYv":function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},"/pP7":function(e,t,n){"use strict";var r=n("thjG"),i=r,o=r.nextTick,a=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var n=this;this._diskWrite(this.root,function(e){n.root=e,n._updateRootNode(n.root,function(e){n.comparator=function(e,t){return e<t?-1:e>t?1:0},n.merger=null,null!=t&&t(n)})})}};a.prototype._allocateNode=function(){return new s},a.prototype._diskWrite=function(e,t){o(function(){t(e)})},a.prototype._diskRead=function(e,t){o(function(){t(e)})},a.prototype._diskDelete=function(e,t){o(function(){t()})},a.prototype._updateRootNode=function(e,t){t(e)},a.prototype.search=function(e,t,n){this.__search(this,e,this.root,t,n)},a.prototype.__search=function(e,t,n,r,i){for(var o=0;o<n.numberActives&&1===e.comparator(t,n.keys[o].key);)o++;o<n.numberActives&&0===e.comparator(n.keys[o].key,t)?r(null!=i&&1==i||n.keys[o].data):!0===n.isLeaf?r(null):e._diskRead(n.children[o],function(n){e.__search(e,t,n,r,i)})},a.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},a.prototype.__walk=function(e,t,n,r){var o=t.numberActives,a=0;if(t.isLeaf){for(a=0;a<t.numberActives;a++)n(t.keys[a]);return r()}i.whilst(function(){return a<o},function(r){e._diskRead(t.children[a],function(i){e.__walk(e,i,n,function(){e._diskRead(t.keys[a],function(e){n(e),a++,r()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,n,function(){r()})})})},a.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},a.prototype.__walkNodes=function(e,t,n,r){if(t.isLeaf)return n(t),r();n(t);var o=t.numberActives,a=0;i.whilst(function(){return a<o},function(r){e._diskRead(t.children[a],function(t){e.__walkNodes(e,t,n,function(){a++,r()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,n,function(){})})})},a.prototype._splitChild=function(e,t,n,r){var i=this._allocateNode();i.isLeaf=n.isLeaf,i.level=n.level,i.numberActives=this.order-1;var o=n.keys[this.order-1];n.keys[this.order-1]=null;for(var a=0;a<this.order-1;a++)i.keys[a]=n.keys[a+this.order],n.keys[a+this.order]=null,n.isLeaf||(i.children[a]=n.children[a+this.order],n.children[a+this.order]=null);for(n.isLeaf||(i.children[a]=n.children[a+this.order],n.children[a+this.order]=null),n.numberActives=this.order-1,a=e.numberActives+1;a>t+1;a--)e.children[a]=e.children[a-1];for(e.children[t+1]=i,a=e.numberActives;a>t;a--)e.keys[a]=e.keys[a-1];e.keys[t]=o,e.numberActives++;var s=this;this._diskWrite(i,function(i){s._diskWrite(e,function(e){e.children[t+1]=i,s._diskWrite(n,function(t){return r(e)})})})},a.prototype.insert=function(e,t,n){if(this.root.numberActives===2*this.order-1){var r=this._allocateNode();r.isLeaf=!1,r.level=this.root.level+1,r.numberActives=0,r.children[0]=this.root;var i=this;this._splitChild(r,0,this.root,function(o){i.root=r=o,i._updateRootNode(r,function(r){i._insertNonFull(r,e,t,n)})})}else this._insertNonFull(this.root,e,t,n)},a.prototype._insertNonFull=function(e,t,n,r){this.__insertNonFull(this,e,e.numberActives-1,t,n,r)},a.prototype.__insertNonFull=function(e,t,n,r,i,o){if(t.isLeaf){for(;n>=0&&-1===e.comparator(r,t.keys[n].key);)t.keys[n+1]=t.keys[n],n--;n>=0&&0===e.comparator(r,t.keys[n].key)?t.keys[n]={key:r,data:i}:(t.keys[n+1]={key:r,data:i},t.numberActives++),e._diskWrite(t,function(e){return o(e)})}else{for(;n>=0&&-1===e.comparator(r,t.keys[n].key);)n--;var a=e;e._diskRead(t.children[++n],function(s){s.numberActives===2*a.order-1?a._splitChild(t,n,s,function(){1===a.comparator(r,t.keys[n].key)&&n++,a._diskRead(t.children[n],function(t){a.__insertNonFull(e,t,n=t.numberActives-1,r,i,o)})}):a._diskRead(t.children[n],function(t){a.__insertNonFull(e,t,n=t.numberActives-1,r,i,o)})})}},a.prototype.delete=function(e,t){a.prototype.__deleteSearchNode(this,e,this.root,t)},a.prototype.__deleteSearchNode=function(e,t,n,r){var i=0;if(0===n.numberActives)return r(!1);for(;i<n.numberActives&&1===e.comparator(t,n.keys[i].key);)i++;var o=i;if(i<n.numberActives&&0===e.comparator(t,n.keys[i].key))return e.__deleteNodeFound(e,o,t,n,r);if(!0===n.isLeaf)return r(!1);var a=n;e._diskRead(n.children[i],function(n){if(null===n)return r(!1);var s=!1,u=!1,l=null,c=null;o===a.numberActives?(u=!0,c=a.children[o-1],l=a.children[o-1]):0===o?(s=!0,l=a.children[1],c=a.children[1]):(c=a.children[o-1],l=a.children[o+1]),e._diskRead(c,function(o){e._diskRead(l,function(l){!0===u&&(l=null),!0===s&&(o=null),n.numberActives===e.order-1&&null!=a?null!=l&&l.numberActives>e.order-1?e._moveKey(a,i,-1,function(i){e.__deleteSearchNode(e,t,n,r)}):null!=o&&o.numberActives>e.order-1?e._moveKey(a,i,1,function(i){e.__deleteSearchNode(e,t,n,r)}):null!=o&&o.numberActives===e.order-1?e._mergeSiblings(a,i,-1,function(n){e.__deleteSearchNode(e,t,n,r)}):null!=l&&l.numberActives===e.order-1&&e._mergeSiblings(a,i,1,function(n){e.__deleteSearchNode(e,t,n,r)}):e.__deleteSearchNode(e,t,n,r)})})})},a.prototype.__deleteNodeFound=function(e,t,n,r,i){return r.isLeaf&&r.numberActives>e.order-1?(e._deleteKeyFromNode(r,t,function(){i(!0)}),!0):r.isLeaf&&r===e.root?(e._deleteKeyFromNode(r,t,function(){i(!0)}),!0):(!1===r.isLeaf&&e._diskRead(r.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(a){r.keys[t]=n=a.node.keys[a.index],e._diskWrite(r,function(t){e.__deleteSearchNode(e,n=n.key,o,i)})}):e._diskRead(r.children[t+1],function(a){a.numberActives>e.order-1?e._getMinKeyPos(e,a,function(o){r.keys[t]=n=o.node.keys[o.index],e._diskWrite(r,function(t){e.__deleteSearchNode(e,n=n.key,a,i)})}):o.numberActives===e.order-1&&a.numberActives===e.order-1&&e._mergeNodes(o,r.keys[t],a,function(o){r.children[t]=o;for(var a=++t;a<r.numberActives;a++)r.children[a]=r.children[a+1],r.keys[a-1]=r.keys[a];r.children[a]=null,r.keys[a-1]=null,r.numberActives--,0===r.numberActives&&e.root===r&&(e.root=o),e._diskWrite(r,function(t){e.__deleteSearchNode(e,n,o,i)})})})}),void(r.isLeaf&&r.numberActives>e.order-1&&e._deleteKeyFromNode(r,t,function(t){e.__deleteSearchNode(e,n,t,i)})))},a.prototype._moveKey=function(e,t,n,r){1===n&&t--;var i=this;i._diskRead(e.children[t],function(o){i._diskRead(e.children[t+1],function(a){if(-1==n){o.keys[o.numberActives]=e.keys[t],o.children[o.numberActives+1]=a.children[0],a.children[0]=null,o.numberActives++,e.keys[t]=a.keys[0];for(var s=1;s<a.numberActives;s++)a.keys[s-1]=a.keys[s],a.children[s-1]=a.children[s];a.children[a.numberActives-1]=a.children[a.numberActives],a.numberActives--}else{for(a.children[a.numberActives+1]=a.children[a.numberActives],s=a.numberActives;s>0;s--)a.children[s]=a.children[s-1],a.keys[s]=a.keys[s-1];a.keys[0]=null,a.children[0]=null,a.children[0]=o.children[o.numberActives],a.keys[0]=e.keys[t],a.numberActives++,o.children[o.numberActives]=null,e.keys[t]=o.keys[o.numberActives-1],o.keys[o.numberActives-1]=null,o.numberActives--}i._diskWrite(o,function(t){i._diskWrite(a,function(t){i._diskWrite(e,function(e){return r(e)})})})})})},a.prototype._mergeSiblings=function(e,t,n,r){var i,o,a,s;t===e.numberActives?(t--,a=e.children[e.numberActives-1],s=e.children[e.numberActives]):(a=e.children[t],s=e.children[t+1]);var u=this;u._diskRead(a,function(n){u._diskRead(s,function(a){var s=u._allocateNode();for(s.isLeaf=n.isLeaf,s.level=n.level,o=0;o<u.order-1;o++)s.keys[o]=n.keys[o],s.children[o]=n.children[o];for(s.keys[u.order-1]=e.keys[t],s.children[u.order-1]=n.children[u.order-1],o=0;o<u.order-1;o++)s.keys[o+u.order]=a.keys[o],s.children[o+u.order]=a.children[o];for(s.children[2*u.order-1]=a.children[u.order-1],e.children[t]=s,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(s.numberActives=n.numberActives+a.numberActives+1,e.numberActives--,i=e.numberActives;i<2*u.order-1;i++)e.keys[i]=null;0===e.numberActives&&u.root===e&&(u.root=s,s.isLeaf=!s.level),u._diskWrite(s,function(t){u._diskWrite(e,function(e){u._diskDelete(n,function(){u._diskDelete(a,function(){if(u.root!==t)return r(t);u._updateRootNode(u.root,function(){return r(t)})})})})})})})},a.prototype._deleteKeyFromNode=function(e,t,n){var r,i=2*this.order-1;if(e.numberActives<i&&(i=e.numberActives),!1===e.isLeaf)return!1;for(r=t;r<i-1;r++)e.keys[r]=e.keys[r+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return n(e)})},a.prototype._mergeNodes=function(e,t,n,r){var i,o;for((i=this._allocateNode()).isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<n.numberActives;o++)i.keys[o+e.numberActives+1]=n.keys[o],i.children[o+e.numberActives+1]=n.children[o];i.children[2*this.order-1]=n.children[n.numberActives],i.numberActives=e.numberActives+n.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var a=this;this._diskWrite(i,function(t){a._diskDelete(e,function(){a._diskDelete(n,function(){return r(t)})})})},a.prototype.audit=function(e){var t=[],n=[],r=this,i=function(i){for(var o=0;o<n.length;o++)if(0===r.comparator(n[o],i)){var a=" !!! duplicated key "+i;!0===e&&console.log(a),t.push(a)}},o=null;return r=this,this.walkNodes(function(a){!0===e&&(console.log("--- Node at "+a.level+" level"),console.log(" - leaf? "+a.isLeaf),console.log(" - num actives? "+a.numberActives),console.log(" - keys: "));for(var s=a.numberActives;s<a.keys.length;s++)null!=a.keys[s]&&!0===e&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(s=a.numberActives+1;s<a.children.length;s++)null!=a.children[s]&&!0===e&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(!1===a.isLeaf)for(s=0;s<a.numberActives;s++){var u=this._diskRead(a.children[s]).keys[this._diskRead(a.children[s]).numberActives-1].key,l=this._diskRead(a.children[s+1]).keys[0].key;if(!0===e&&console.log("   "+a.keys[s].key+"("+u+","+l+")"),-1===r.comparator(a.keys[s].key,u)){var c=" !!! value max left "+u+" > key "+a.keys[s].key;!0===e&&console.log(c),t.push(c)}1===r.comparator(a.keys[s].key,l)&&(c=" !!! value min right "+l+" < key "+a.keys[s].key,!0===e&&console.log(c),t.push(c)),i(a.keys[s].key),n.push(a.keys[s].key)}else for(null===o?o=a.level:o!=a.level&&(c=" !!! Leaf node with wrong level value",!0===e&&console.log(c),t.push(c)),s=0;s<a.numberActives;s++)!0===e&&console.log(" "+a.keys[s].key),i(a.keys[s].key),n.push(a.keys[s].key);a!=r.root&&(a.numberActives>2*r.order-1&&(!0===e&&(c=" !!!! MAX num keys restriction violated "),console.log(c),t.push(c)),a.numberActives<r.order-1&&(!0===e&&(c=" !!!! MIN num keys restriction violated "),console.log(c),t.push(c)))}),t},a.prototype._getMaxKeyPos=function(e,t,n){var r={};return null===t?n(null):!0===t.isLeaf?(r.node=t,r.index=t.numberActives-1,n(r)):(r.node=t,r.index=t.numberActives-1,void e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,n)}))},a.prototype._getMinKeyPos=function(e,t,n){var r={};if(null===t&&n(null),!0===t.isLeaf)return r.node=t,r.index=0,n(r);r.node=t,r.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,n)})};var s=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};e.exports={Tree:a,Node:s}},"0/uQ":function(e,t,n){"use strict";var r=n("6blF"),i=n("/WYv"),o=n("2ePl"),a=n("xTla"),s=n("En8+"),u=n("IUTb"),l=n("pugT"),c=n("S5XQ"),h=n("u67D"),f=n("JcRv"),d=n("Fxb1");function p(e,t){if(!t)return e instanceof r.a?e:new r.a(Object(d.a)(e));if(null!=e){if(function(e){return e&&"function"==typeof e[a.a]}(e))return function(e,t){return new r.a(t?function(n){var r=new l.a;return r.add(t.schedule(function(){var i=e[a.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:Object(f.a)(e))}(e,t);if(Object(i.a)(e))return function(e,t){return new r.a(t?function(n){var r=new l.a;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:Object(c.a)(e))}(e,t);if(Object(o.a)(e))return Object(u.a)(e,t);if(function(e){return e&&"function"==typeof e[s.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a(t?function(n){var r,i=new l.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[s.a](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i}:Object(h.a)(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",function(){return p})},"0XuU":function(e,t,n){e.exports=n("43KI").Transform},"1IWx":function(e,t,n){e.exports=i;var r=n("+qE3").EventEmitter;function i(){r.call(this)}n("P7XM")(i,r),i.Readable=n("43KI"),i.Writable=n("LGOv"),i.Duplex=n("CWBI"),i.Transform=n("0XuU"),i.PassThrough=n("wq4j"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"2Bdj":function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},"2Tiy":function(e,t,n){var r=n("tjlA").Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},"2ePl":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},3:function(e,t){},"3BRs":function(e,t,n){"use strict";(function(t,r,i){var o=n("lm0R");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=g;var l=n("Onz0");l.inherits=n("P7XM");var c,h={deprecate:n("t9FE")},f=n("QpuX"),d=n("hwdV").Buffer,p=i.Uint8Array||function(){},m=n("RoFp");function v(){}function g(e,t){s=s||n("sZro");var r=t instanceof s;this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(M,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),M(e,t))}(e,n,r,t,i);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?u(_,e,n,a,i):_(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(s=s||n("sZro"),!(c.call(y,this)||this instanceof s))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),M(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=new Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=n;for(var o=0,s=!0;n;)r[o]=n,n.isBuf||(s=!1),n=n.next,o+=1;r.allBuffers=s,b(e,t,!0,t.length,r,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(b(e,t,!1,t.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),M(e,t)})}function M(e,t){var n=w(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(y,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===y&&e&&e._writableState instanceof g}})):c=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(d.isBuffer(r=e)||r instanceof p);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,e,n))&&(i.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,i,o);return u}(this,i,s,e,t,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,M(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("8oxB"),n("URgk").setImmediate,n("yLpj"))},"3aoN":function(e,t,n){var r=n("AoU6");const i=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /;function i(e){this.manager=void 0!==e?e:r.DefaultLoadingManager,this.materials=null}return i.prototype={constructor:i,load:function(e,t,n,i){var o=this,a=new r.FileLoader(o.manager);a.setPath(this.path),a.load(e,function(e){t(o.parse(e))},n,i)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(i){console.time("OBJLoader");var o=new function(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,u){var l=this.vertices.length,c=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),f=this.parseVertexIndex(n,l);if(this.addVertex(c,h,f),void 0!==r&&""!==r){var d=this.uvs.length;c=this.parseUVIndex(r,d),h=this.parseUVIndex(i,d),f=this.parseUVIndex(o,d),this.addUV(c,h,f)}if(void 0!==a&&""!==a){var p=this.normals.length;c=this.parseNormalIndex(a,p),h=a===s?c:this.parseNormalIndex(s,p),f=a===u?c:this.parseNormalIndex(u,p),this.addNormal(c,h,f)}this.colors.length>0&&this.addColor(c,h,f)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e};-1!==i.indexOf("\r\n")&&(i=i.replace(/\r\n/g,"\n")),-1!==i.indexOf("\\\n")&&(i=i.replace(/\\\n/g,""));for(var a=i.split("\n"),s="",u="",l=[],c="function"==typeof"".trimLeft,h=0,f=a.length;h<f;h++)if(s=a[h],0!==(s=c?s.trimLeft():s.trim()).length&&"#"!==(u=s.charAt(0)))if("v"===u){var d=s.split(/\s+/);switch(d[0]){case"v":o.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),8===d.length&&o.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":o.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":o.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===u){for(var p=s.substr(1).trim().split(/\s+/),m=[],v=0,g=p.length;v<g;v++){var y=p[v];if(y.length>0){var b=y.split("/");m.push(b)}}var _=m[0];for(v=1,g=m.length-1;v<g;v++){var x=m[v],w=m[v+1];o.addFace(_[0],x[0],w[0],_[1],x[1],w[1],_[2],x[2],w[2])}}else if("l"===u){var E=s.substring(1).trim().split(" "),M=[],T=[];if(-1===s.indexOf("/"))M=E;else for(var S=0,A=E.length;S<A;S++){var C=E[S].split("/");""!==C[0]&&M.push(C[0]),""!==C[1]&&T.push(C[1])}o.addLineGeometry(M,T)}else if("p"===u){var R=s.substr(1).trim().split(" ");o.addPointGeometry(R)}else if(null!==(l=e.exec(s))){var L=(" "+l[0].substr(1).trim()).substr(1);o.startObject(L)}else if(n.test(s))o.object.startMaterial(s.substring(7).trim(),o.materialLibraries);else if(t.test(s))o.materialLibraries.push(s.substring(7).trim());else{if("s"!==u){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if((l=s.split(" ")).length>1){var P=l[1].trim().toLowerCase();o.object.smooth="0"!==P&&"off"!==P}else o.object.smooth=!0;(W=o.object.currentMaterial())&&(W.smooth=o.object.smooth)}o.finalize();var O=new r.Group;for(O.materialLibraries=[].concat(o.materialLibraries),h=0,f=o.objects.length;h<f;h++){var I=o.objects[h],k=I.geometry,N=I.materials,D="Line"===k.type,F="Points"===k.type,U=!1;if(0!==k.vertices.length){var B=new r.BufferGeometry;B.addAttribute("position",new r.Float32BufferAttribute(k.vertices,3)),k.normals.length>0?B.addAttribute("normal",new r.Float32BufferAttribute(k.normals,3)):B.computeVertexNormals(),k.colors.length>0&&(U=!0,B.addAttribute("color",new r.Float32BufferAttribute(k.colors,3))),k.uvs.length>0&&B.addAttribute("uv",new r.Float32BufferAttribute(k.uvs,2));for(var j,z=[],G=0,V=N.length;G<V;G++){var H=N[G],W=void 0;if(null!==this.materials)if(W=this.materials.create(H.name),!D||!W||W instanceof r.LineBasicMaterial){if(F&&W&&!(W instanceof r.PointsMaterial)){var q=new r.PointsMaterial({size:10,sizeAttenuation:!1});X.copy(W),W=q}}else{var X=new r.LineBasicMaterial;X.copy(W),X.lights=!1,W=X}W||((W=D?new r.LineBasicMaterial:F?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial).name=H.name),W.flatShading=!H.smooth,W.vertexColors=U?r.VertexColors:r.NoColors,z.push(W)}if(z.length>1){for(G=0,V=N.length;G<V;G++)B.addGroup((H=N[G]).groupStart,H.groupCount,G);j=D?new r.LineSegments(B,z):F?new r.Points(B,z):new r.Mesh(B,z)}else j=D?new r.LineSegments(B,z[0]):F?new r.Points(B,z[0]):new r.Mesh(B,z[0]);j.name=I.name,O.add(j)}}return console.timeEnd("OBJLoader"),O}},i}();e.exports=t.default=i},4:function(e,t){},"43KI":function(e,t,n){(t=e.exports=n("rXFu")).Stream=t,t.Readable=t,t.Writable=n("3BRs"),t.Duplex=n("sZro"),t.Transform=n("J78i"),t.PassThrough=n("eA/Y")},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"4JlD":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},5:function(e,t){},6:function(e,t,n){e.exports=n("zUnb")},"67Y/":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}(),s=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.a)},"6ahw":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("iLxQ"),i=n("DKTb"),o={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},"6blF":function(e,t,n){"use strict";var r=n("FFOo"),i=n("L/V9"),o=n("6ahw"),a=n("xTla"),s=n("+umK"),u=n("iLxQ");n.d(t,"a",function(){return l});var l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var a=this.operator,s=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(o.a)}(e,t,n);if(a?a.call(s,this.source):s._addParentTeardownLogic(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){u.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=c(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:((n=e)?1===n.length?n[0]:function(e){return n.reduce(function(e,t){return t(e)},e)}:s.a)(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function c(e){if(e||(e=u.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},"7fXC":function(e,t,n){(function(r,i,o){var a;(function(){"use strict";function s(e){return"function"==typeof e}var u,l,c=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=0,f=function(e,t){S[h]=e,S[h+1]=t,2===(h+=2)&&(l?l(A):b())},d="undefined"!=typeof window?window:void 0,p=d||{},m=p.MutationObserver||p.WebKitMutationObserver,v=void 0!==r&&"[object process]"==={}.toString.call(r),g="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function y(){return function(){setTimeout(A,1)}}var b,_,x,w,E,M,T,S=new Array(1e3);function A(){for(var e=0;e<h;e+=2)(0,S[e])(S[e+1]),S[e]=void 0,S[e+1]=void 0;h=0}function C(){}v?(M=r.nextTick,T=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(T)&&"0"===T[1]&&"10"===T[2]&&(M=i),b=function(){M(A)}):m?(x=0,w=new m(A),E=document.createTextNode(""),w.observe(E,{characterData:!0}),b=function(){E.data=x=++x%2}):g?((_=new MessageChannel).port1.onmessage=A,b=function(){_.port2.postMessage(0)}):b=void 0===d?function(){try{var e=n(3);return u=e.runOnLoop||e.runOnContext,function(){u(A)}}catch(e){return y()}}():y();var R=void 0,L=1,P=2,O=new B;function I(e,t){var n;e===t?D(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?function(e,t){if(t.constructor===e.constructor)!function(e,t){t._state===L?N(e,t._result):t._state===P?D(e,t._result):F(t,void 0,function(t){I(e,t)},function(t){D(e,t)})}(e,t);else{var n=function(e){try{return e.then}catch(e){return O.error=e,O}}(t);n===O?D(e,O.error):void 0===n?N(e,t):s(n)?function(e,t,n){f(function(e){var r=!1,i=function(n,i,o,a){try{n.call(i,function(n){r||(r=!0,t!==n?I(e,n):N(e,n))},function(t){r||(r=!0,D(e,t))})}catch(e){return e}}(n,t);!r&&i&&(r=!0,D(e,i))},e)}(e,t,n):N(e,t)}}(e,t):N(e,t)}function k(e){e._onerror&&e._onerror(e._result),U(e)}function N(e,t){e._state===R&&(e._result=t,e._state=L,0!==e._subscribers.length&&f(U,e))}function D(e,t){e._state===R&&(e._state=P,e._result=t,f(k,e))}function F(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+L]=n,i[o+P]=r,0===o&&e._state&&f(U,e)}function U(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)i=t[a+n],(r=t[a])?z(n,r,i,o):i(o);e._subscribers.length=0}}function B(){this.error=null}var j=new B;function z(e,t,n,r){var i,o,a,u,l=s(n);if(l){if((i=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(n,r))===j?(u=!0,o=i.error,i=null):a=!0,t===i)return void D(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,a=!0;t._state!==R||(l&&a?I(t,i):u?D(t,o):e===L?N(t,i):e===P&&D(t,i))}function G(e,t){this._instanceConstructor=e,this.promise=new e(C),this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&N(this.promise,this._result))):D(this.promise,this._validationError())}G.prototype._validateInput=function(e){return c(e)},G.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},G.prototype._init=function(){this._result=new Array(this.length)};var V=G;G.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,r=0;t._state===R&&r<e;r++)this._eachEntry(n[r],r)},G.prototype._eachEntry=function(e,t){var n,r=this._instanceConstructor;"object"==typeof(n=e)&&null!==n?e.constructor===r&&e._state!==R?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=e)},G.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===R&&(this._remaining--,e===P?D(r,n):this._result[t]=n),0===this._remaining&&N(r,this._result)},G.prototype._willSettleAt=function(e,t){var n=this;F(e,void 0,function(e){n._settledAt(L,t,e)},function(e){n._settledAt(P,t,e)})};var H=0,W=q;function q(e){this._id=H++,this._state=void 0,this._result=void 0,this._subscribers=[],C!==e&&(s(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){try{t(function(t){I(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}(this,e))}q.all=function(e){return new V(this,e).promise},q.race=function(e){var t=new this(C);if(!c(e))return D(t,new TypeError("You must pass an array to race.")),t;var n=e.length;function r(e){I(t,e)}function i(e){D(t,e)}for(var o=0;t._state===R&&o<n;o++)F(this.resolve(e[o]),void 0,r,i);return t},q.resolve=function(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return I(t,e),t},q.reject=function(e){var t=new this(C);return D(t,e),t},q._setScheduler=function(e){l=e},q._setAsap=function(e){f=e},q._asap=f,q.prototype={constructor:q,then:function(e,t){var n=this._state;if(n===L&&!e||n===P&&!t)return this;var r=new this.constructor(C),i=this._result;if(n){var o=arguments[n-1];f(function(){z(n,r,o,i)})}else F(this,r,e,t);return r},catch:function(e){return this.then(null,e)}};var X=function(){var e;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=W)},Q={Promise:W,polyfill:X};void 0===(a=(function(){return Q}).call(t,n,t,e))||(e.exports=a),X()}).call(this)}).call(this,n("8oxB"),n("URgk").setImmediate,n("yLpj"))},"8oxB":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"99Iv":function(e,t,n){var r=n("wq5Q"),i=n("thjG"),o=i;function a(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function s(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}a.prototype=new Error,a.constructor=a,s.prototype=new Error,s.constructor=s,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(e){return r.parse(e)},AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw new Error("unknown executable unit: "+e.kind)},AbstractQueryTree.prototype.parseSelect=function(e){return null==e?(console.log("error parsing query"),null):(e.pattern=this.build(e.pattern,{freshCounter:0}),e)},AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token)return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:e.triplesContext},t);if("graphunionpattern"===e.token)return{kind:"UNION",value:[this.build(e.value[0],t),this.build(e.value[1],t)]};if("graphgraphpattern"===e.token)return{kind:"GRAPH",value:this.build(e.value,t),graph:e.graph};throw null!=e.token?new a(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new s("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var n,r,i,a=[],s=0;s<e.value.length;s++)if(e.value[s].predicate&&"path"===e.value[s].predicate.token){n=e.value[s],r=e.value.slice(s+1);var u=AbstractQueryTree.translatePathExpression(n,t),l=null;if("BGP"!==u.kind){if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){if(i=a.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:a},rvalue:u}:u,"ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].object&&"var"===e.value[c].object.token&&e.value[c].object.value===u.x.value&&((l=o.clone(e.value[c],!0)).object=u.y);else if("var"===u.y.token&&0===u.y.value.indexOf("fresh:"))for(c=0;c<e.value.length;c++)e.value[c].subject&&"var"===e.value[c].subject.token&&e.value[c].subject.value===u.y.value&&((l=o.clone(e.value[c],!0)).subject=u.x);if(r.length>0){var h=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:r},t);return null!=l?{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:h},{kind:"BGP",value:a.concat([l]).concat(r)}]}:{kind:"JOIN",lvalue:i,rvalue:h}}return i}return u}a=a.concat(u.value)}else a.push(e.value[s]);return e.value=a,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind)return"+"===e.predicate.modifier?(e.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(e,t),x:e.subject,y:e.object}):"*"===e.predicate.modifier?(e.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(e,t),x:e.subject,y:e.object}):(e.predicate=e.predicate.value,{kind:"BGP",value:[e]});if("sequence"===e.predicate.kind){for(var n,r,i=e.subject,s=e.object,u=e.graph,l=[],c=0;c<e.predicate.value.length;c++)c!=e.predicate.value.length-1?(n={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):n=s,r={subject:i,predicate:e.predicate.value[c],object:n},null!=u&&(r.graph=o.clone(u,!0)),l.push(r),c!=e.predicate.value.length-1&&(i=o.clone(n,!0));return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:l},t)}throw new a("Non supported path expression "+e.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var n=e.filters||[],r=e.binds||[],i={kind:"EMPTY_PATTERN"},o=0;o<e.patterns.length;o++){var a=e.patterns[o];if("optionalgraphpattern"===a.token)i="FILTER"===(s=this.build(a.value,t)).kind?{kind:"LEFT_JOIN",lvalue:i,rvalue:s.value,filter:s.filter}:{kind:"LEFT_JOIN",lvalue:i,rvalue:s,filter:!0};else{var s=this.build(a,t);i="EMPTY_PATTERN"==i.kind?s:{kind:"JOIN",lvalue:i,rvalue:s}}}if(i.binds=r,0!=n.length){if("EMPTY_PATTERN"===i.kind)return{kind:"FILTER",filter:n,value:i};if("LEFT_JOIN"===i.kind&&!0===i.filter)return{kind:"FILTER",filter:n,value:i};if("LEFT_JOIN"===i.kind)return{kind:"FILTER",filter:n,value:i};if("JOIN"===i.kind)return{kind:"FILTER",filter:n,value:i};if("UNION"===i.kind)return{kind:"FILTER",filter:n,value:i};if("GRAPH"===i.kind)return{kind:"FILTER",filter:n,value:i};if("BGP"===i.kind)return{kind:"FILTER",filter:n,value:i};throw new Error("Unknow kind of algebra expression: "+i.kind)}return i},AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var n=[],r=0;r<e.filter.length;r++)e.filter[r].value=this._bindFilter(e.filter[r].value,t),n.push(e.filter[r]);e.filter=n}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind){var i=this;e.value=this.bind(e.value,t),e.filter=e.filter.map(function(e){return{token:"filter",value:i._bindFilter(e.value,t)}})}else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var n=0;n<e.length;n++)for(var r in delete e[n].graph,delete e[n].variables,e[n]){var i=e[n][r];"var"===i.token&&null!=t[i.value]&&(e[n][r]=t[i.value])}return e},AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var n=e.expressionType;if("relationalexpression"==n)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==n||"conditionaland"==n)for(var r=0;r<e.operands.length;r++)e.operands[r]=this._bindFilter(e.operands[r],t);else if("additiveexpression"==n)for(e.summand=this._bindFilter(e.summand,t),r=0;r<e.summands.length;r++)e.summands[r].expression=this._bindFilter(e.summands[r].expression,t);else if("builtincall"==n)for(r=0;r<e.args.length;r++)e.args[r]=this._bindFilter(e.args[r],t);else if("multiplicativeexpression"==n)for(e.factor=this._bindFilter(e.factor,t),r=0;r<e.factors.length;r++)e.factors[r].expression=this._bindFilter(e.factors[r].expression,t);else if("unaryexpression"==n)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==n)for(r=0;r<e.factors.args;r++)e.args[r]=this._bindFilter(e.args[r],t);else if("atomic"==n&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];e.primaryexpression="uri"===i.token?"iri":"literal",e.value=i}}return e},AbstractQueryTree.prototype.replace=function(e,t,n,r){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=o.clone(n,!0)),null!=e.filter){for(var i=[],a=0;a<e.filter.length;a++)e.filter[a].value=this._replaceFilter(e.filter[a].value,t,n,r),i.push(e.filter[a]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,n,r);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,n,r);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,n,r),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=o.clone(n,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=o.clone(n,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,n,r),e.value[1]=this.replace(e.value[1],t,n,r);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,n);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,n,r),e.rvalue=this.replace(e.rvalue,t,n,r);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,n,r);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._replaceTripleContext=function(e,t,n,r){for(var o=0;o<e.length;o++)for(var a in e[o]){var s=e[o][a];"var"===s.token&&"var"===t.token&&s.value===t.value?e[o][a]=n:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[o][a]=n:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||i.lexicalFormTerm(s,r)[s.token]!==i.lexicalFormTerm(t,r)[s.token]||(e[o][a]=n)}return e},AbstractQueryTree.prototype._replaceFilter=function(e,t,n,r){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,n,r),e.op2=this._replaceFilter(e.op2,t,n,r);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,n,r);else if("additiveexpression"==i)for(e.summand=this._replaceFilter(e.summand,t,n,r),o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,n,r);else if("builtincall"==i)for(o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,n,r);else if("multiplicativeexpression"==i)for(e.factor=this._replaceFilter(e.factor,t,n,r),o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,n,r);else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,n,r);else if("irireforfunction"==i)for(o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,n,r);else if("atomic"==i){var a=null;e.primaryexpression==t.token&&e.value==t.value?a=n.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(a=n.value),null!=a&&(e.primaryexpression="uri"===n.token?"iri":n.token,e.value=a)}}return e},AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return!!this.treeWithUnion(e.value[0])||this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return!1;if(this.treeWithUnion(e.lvalue))return!0;this.treeWithUnion(e.rvalue)}},e.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:a,SparqlParserError:s}},AoU6:function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"WebGLRenderTargetCube",function(){return cn}),n.d(t,"WebGLRenderTarget",function(){return ln}),n.d(t,"WebGLRenderer",function(){return Ni}),n.d(t,"ShaderLib",function(){return En}),n.d(t,"UniformsLib",function(){return wn}),n.d(t,"UniformsUtils",function(){return yn}),n.d(t,"ShaderChunk",function(){return gn}),n.d(t,"FogExp2",function(){return Di}),n.d(t,"Fog",function(){return Fi}),n.d(t,"Scene",function(){return Ui}),n.d(t,"Sprite",function(){return ji}),n.d(t,"LOD",function(){return zi}),n.d(t,"SkinnedMesh",function(){return Hi}),n.d(t,"Skeleton",function(){return Gi}),n.d(t,"Bone",function(){return Vi}),n.d(t,"Mesh",function(){return yr}),n.d(t,"LineSegments",function(){return Xi}),n.d(t,"LineLoop",function(){return Qi}),n.d(t,"Line",function(){return qi}),n.d(t,"Points",function(){return Zi}),n.d(t,"Group",function(){return Pi}),n.d(t,"VideoTexture",function(){return Ji}),n.d(t,"DataTexture",function(){return hn}),n.d(t,"CompressedTexture",function(){return Ki}),n.d(t,"CubeTexture",function(){return _r}),n.d(t,"CanvasTexture",function(){return Ri}),n.d(t,"DepthTexture",function(){return $i}),n.d(t,"Texture",function(){return sn}),n.d(t,"CompressedTextureLoader",function(){return Ca}),n.d(t,"DataTextureLoader",function(){return Ra}),n.d(t,"CubeTextureLoader",function(){return Pa}),n.d(t,"TextureLoader",function(){return Oa}),n.d(t,"ObjectLoader",function(){return Ds}),n.d(t,"MaterialLoader",function(){return Ss}),n.d(t,"BufferGeometryLoader",function(){return As}),n.d(t,"DefaultLoadingManager",function(){return Ta}),n.d(t,"LoadingManager",function(){return Ma}),n.d(t,"JSONLoader",function(){return Ns}),n.d(t,"ImageLoader",function(){return La}),n.d(t,"ImageBitmapLoader",function(){return zs}),n.d(t,"FontLoader",function(){return Ws}),n.d(t,"FileLoader",function(){return Aa}),n.d(t,"Loader",function(){return Is}),n.d(t,"LoaderUtils",function(){return ks}),n.d(t,"Cache",function(){return Ea}),n.d(t,"AudioLoader",function(){return vu}),n.d(t,"SpotLightShadow",function(){return os}),n.d(t,"SpotLight",function(){return as}),n.d(t,"PointLight",function(){return ss}),n.d(t,"RectAreaLight",function(){return hs}),n.d(t,"HemisphereLight",function(){return rs}),n.d(t,"DirectionalLightShadow",function(){return us}),n.d(t,"DirectionalLight",function(){return ls}),n.d(t,"AmbientLight",function(){return cs}),n.d(t,"LightShadow",function(){return is}),n.d(t,"Light",function(){return ns}),n.d(t,"StereoCamera",function(){return gu}),n.d(t,"PerspectiveCamera",function(){return Oi}),n.d(t,"OrthographicCamera",function(){return kn}),n.d(t,"CubeCamera",function(){return yu}),n.d(t,"ArrayCamera",function(){return Ii}),n.d(t,"Camera",function(){return In}),n.d(t,"AudioListener",function(){return bu}),n.d(t,"PositionalAudio",function(){return xu}),n.d(t,"AudioContext",function(){return mu}),n.d(t,"AudioAnalyser",function(){return wu}),n.d(t,"Audio",function(){return _u}),n.d(t,"VectorKeyframeTrack",function(){return Ms}),n.d(t,"StringKeyframeTrack",function(){return fs}),n.d(t,"QuaternionKeyframeTrack",function(){return vs}),n.d(t,"NumberKeyframeTrack",function(){return ys}),n.d(t,"ColorKeyframeTrack",function(){return gs}),n.d(t,"BooleanKeyframeTrack",function(){return ds}),n.d(t,"PropertyMixer",function(){return Eu}),n.d(t,"PropertyBinding",function(){return Tu}),n.d(t,"KeyframeTrack",function(){return Es}),n.d(t,"AnimationUtils",function(){return ws}),n.d(t,"AnimationObjectGroup",function(){return Su}),n.d(t,"AnimationMixer",function(){return Cu}),n.d(t,"AnimationClip",function(){return Ts}),n.d(t,"Uniform",function(){return Ru}),n.d(t,"InstancedBufferGeometry",function(){return Lu}),n.d(t,"BufferGeometry",function(){return $n}),n.d(t,"Geometry",function(){return Bn}),n.d(t,"InterleavedBufferAttribute",function(){return Pu}),n.d(t,"InstancedInterleavedBuffer",function(){return Iu}),n.d(t,"InterleavedBuffer",function(){return Ou}),n.d(t,"InstancedBufferAttribute",function(){return ku}),n.d(t,"Face3",function(){return Nn}),n.d(t,"Object3D",function(){return On}),n.d(t,"Raycaster",function(){return Nu}),n.d(t,"Layers",function(){return Sn}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"Clock",function(){return Uu}),n.d(t,"QuaternionLinearInterpolant",function(){return ms}),n.d(t,"LinearInterpolant",function(){return _s}),n.d(t,"DiscreteInterpolant",function(){return xs}),n.d(t,"CubicInterpolant",function(){return bs}),n.d(t,"Interpolant",function(){return ps}),n.d(t,"Triangle",function(){return gr}),n.d(t,"Math",function(){return Qt}),n.d(t,"Spherical",function(){return Bu}),n.d(t,"Cylindrical",function(){return ju}),n.d(t,"Plane",function(){return pn}),n.d(t,"Frustum",function(){return mn}),n.d(t,"Sphere",function(){return dn}),n.d(t,"Ray",function(){return mr}),n.d(t,"Matrix4",function(){return Zt}),n.d(t,"Matrix3",function(){return $t}),n.d(t,"Box3",function(){return fn}),n.d(t,"Box2",function(){return zu}),n.d(t,"Line3",function(){return vr}),n.d(t,"Euler",function(){return Tn}),n.d(t,"Vector4",function(){return un}),n.d(t,"Vector3",function(){return Kt}),n.d(t,"Vector2",function(){return Yt}),n.d(t,"Quaternion",function(){return Jt}),n.d(t,"Color",function(){return _n}),n.d(t,"ImmediateRenderObject",function(){return Gu}),n.d(t,"VertexNormalsHelper",function(){return Vu}),n.d(t,"SpotLightHelper",function(){return Hu}),n.d(t,"SkeletonHelper",function(){return Wu}),n.d(t,"PointLightHelper",function(){return qu}),n.d(t,"RectAreaLightHelper",function(){return Xu}),n.d(t,"HemisphereLightHelper",function(){return Qu}),n.d(t,"GridHelper",function(){return Yu}),n.d(t,"PolarGridHelper",function(){return Zu}),n.d(t,"FaceNormalsHelper",function(){return Ju}),n.d(t,"DirectionalLightHelper",function(){return Ku}),n.d(t,"CameraHelper",function(){return $u}),n.d(t,"BoxHelper",function(){return el}),n.d(t,"Box3Helper",function(){return tl}),n.d(t,"PlaneHelper",function(){return nl}),n.d(t,"ArrowHelper",function(){return rl}),n.d(t,"AxesHelper",function(){return il}),n.d(t,"Shape",function(){return ts}),n.d(t,"Path",function(){return es}),n.d(t,"ShapePath",function(){return Gs}),n.d(t,"Font",function(){return Vs}),n.d(t,"CurvePath",function(){return $a}),n.d(t,"Curve",function(){return Ia}),n.d(t,"ShapeUtils",function(){return zo}),n.d(t,"WebGLUtils",function(){return Li}),n.d(t,"WireframeGeometry",function(){return eo}),n.d(t,"ParametricGeometry",function(){return to}),n.d(t,"ParametricBufferGeometry",function(){return no}),n.d(t,"TetrahedronGeometry",function(){return oo}),n.d(t,"TetrahedronBufferGeometry",function(){return ao}),n.d(t,"OctahedronGeometry",function(){return so}),n.d(t,"OctahedronBufferGeometry",function(){return uo}),n.d(t,"IcosahedronGeometry",function(){return lo}),n.d(t,"IcosahedronBufferGeometry",function(){return co}),n.d(t,"DodecahedronGeometry",function(){return ho}),n.d(t,"DodecahedronBufferGeometry",function(){return fo}),n.d(t,"PolyhedronGeometry",function(){return ro}),n.d(t,"PolyhedronBufferGeometry",function(){return io}),n.d(t,"TubeGeometry",function(){return po}),n.d(t,"TubeBufferGeometry",function(){return mo}),n.d(t,"TorusKnotGeometry",function(){return vo}),n.d(t,"TorusKnotBufferGeometry",function(){return go}),n.d(t,"TorusGeometry",function(){return yo}),n.d(t,"TorusBufferGeometry",function(){return bo}),n.d(t,"TextGeometry",function(){return Qo}),n.d(t,"TextBufferGeometry",function(){return Yo}),n.d(t,"SphereGeometry",function(){return Zo}),n.d(t,"SphereBufferGeometry",function(){return Jo}),n.d(t,"RingGeometry",function(){return Ko}),n.d(t,"RingBufferGeometry",function(){return $o}),n.d(t,"PlaneGeometry",function(){return nr}),n.d(t,"PlaneBufferGeometry",function(){return rr}),n.d(t,"LatheGeometry",function(){return ea}),n.d(t,"LatheBufferGeometry",function(){return ta}),n.d(t,"ShapeGeometry",function(){return na}),n.d(t,"ShapeBufferGeometry",function(){return ra}),n.d(t,"ExtrudeGeometry",function(){return Ho}),n.d(t,"ExtrudeBufferGeometry",function(){return Wo}),n.d(t,"EdgesGeometry",function(){return oa}),n.d(t,"ConeGeometry",function(){return ua}),n.d(t,"ConeBufferGeometry",function(){return la}),n.d(t,"CylinderGeometry",function(){return aa}),n.d(t,"CylinderBufferGeometry",function(){return sa}),n.d(t,"CircleGeometry",function(){return ca}),n.d(t,"CircleBufferGeometry",function(){return ha}),n.d(t,"BoxGeometry",function(){return er}),n.d(t,"BoxBufferGeometry",function(){return tr}),n.d(t,"ShadowMaterial",function(){return da}),n.d(t,"SpriteMaterial",function(){return Bi}),n.d(t,"RawShaderMaterial",function(){return pa}),n.d(t,"ShaderMaterial",function(){return pr}),n.d(t,"PointsMaterial",function(){return Yi}),n.d(t,"MeshPhysicalMaterial",function(){return va}),n.d(t,"MeshStandardMaterial",function(){return ma}),n.d(t,"MeshPhongMaterial",function(){return ga}),n.d(t,"MeshToonMaterial",function(){return ya}),n.d(t,"MeshNormalMaterial",function(){return ba}),n.d(t,"MeshLambertMaterial",function(){return _a}),n.d(t,"MeshDepthMaterial",function(){return Si}),n.d(t,"MeshDistanceMaterial",function(){return Ai}),n.d(t,"MeshBasicMaterial",function(){return dr}),n.d(t,"LineDashedMaterial",function(){return xa}),n.d(t,"LineBasicMaterial",function(){return Wi}),n.d(t,"Material",function(){return fr}),n.d(t,"Float64BufferAttribute",function(){return Yn}),n.d(t,"Float32BufferAttribute",function(){return Qn}),n.d(t,"Uint32BufferAttribute",function(){return Xn}),n.d(t,"Int32BufferAttribute",function(){return qn}),n.d(t,"Uint16BufferAttribute",function(){return Wn}),n.d(t,"Int16BufferAttribute",function(){return Hn}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Vn}),n.d(t,"Uint8BufferAttribute",function(){return Gn}),n.d(t,"Int8BufferAttribute",function(){return zn}),n.d(t,"BufferAttribute",function(){return jn}),n.d(t,"ArcCurve",function(){return Na}),n.d(t,"CatmullRomCurve3",function(){return za}),n.d(t,"CubicBezierCurve",function(){return Wa}),n.d(t,"CubicBezierCurve3",function(){return qa}),n.d(t,"EllipseCurve",function(){return ka}),n.d(t,"LineCurve",function(){return Xa}),n.d(t,"LineCurve3",function(){return Qa}),n.d(t,"QuadraticBezierCurve",function(){return Ya}),n.d(t,"QuadraticBezierCurve3",function(){return Za}),n.d(t,"SplineCurve",function(){return Ja}),n.d(t,"REVISION",function(){return m}),n.d(t,"MOUSE",function(){return v}),n.d(t,"CullFaceNone",function(){return g}),n.d(t,"CullFaceBack",function(){return y}),n.d(t,"CullFaceFront",function(){return b}),n.d(t,"CullFaceFrontBack",function(){return _}),n.d(t,"FrontFaceDirectionCW",function(){return x}),n.d(t,"FrontFaceDirectionCCW",function(){return w}),n.d(t,"BasicShadowMap",function(){return E}),n.d(t,"PCFShadowMap",function(){return M}),n.d(t,"PCFSoftShadowMap",function(){return T}),n.d(t,"FrontSide",function(){return S}),n.d(t,"BackSide",function(){return A}),n.d(t,"DoubleSide",function(){return C}),n.d(t,"FlatShading",function(){return R}),n.d(t,"SmoothShading",function(){return L}),n.d(t,"NoColors",function(){return P}),n.d(t,"FaceColors",function(){return O}),n.d(t,"VertexColors",function(){return I}),n.d(t,"NoBlending",function(){return k}),n.d(t,"NormalBlending",function(){return N}),n.d(t,"AdditiveBlending",function(){return D}),n.d(t,"SubtractiveBlending",function(){return F}),n.d(t,"MultiplyBlending",function(){return U}),n.d(t,"CustomBlending",function(){return B}),n.d(t,"AddEquation",function(){return j}),n.d(t,"SubtractEquation",function(){return z}),n.d(t,"ReverseSubtractEquation",function(){return G}),n.d(t,"MinEquation",function(){return V}),n.d(t,"MaxEquation",function(){return H}),n.d(t,"ZeroFactor",function(){return W}),n.d(t,"OneFactor",function(){return q}),n.d(t,"SrcColorFactor",function(){return X}),n.d(t,"OneMinusSrcColorFactor",function(){return Q}),n.d(t,"SrcAlphaFactor",function(){return Y}),n.d(t,"OneMinusSrcAlphaFactor",function(){return Z}),n.d(t,"DstAlphaFactor",function(){return J}),n.d(t,"OneMinusDstAlphaFactor",function(){return K}),n.d(t,"DstColorFactor",function(){return $}),n.d(t,"OneMinusDstColorFactor",function(){return ee}),n.d(t,"SrcAlphaSaturateFactor",function(){return te}),n.d(t,"NeverDepth",function(){return ne}),n.d(t,"AlwaysDepth",function(){return re}),n.d(t,"LessDepth",function(){return ie}),n.d(t,"LessEqualDepth",function(){return oe}),n.d(t,"EqualDepth",function(){return ae}),n.d(t,"GreaterEqualDepth",function(){return se}),n.d(t,"GreaterDepth",function(){return ue}),n.d(t,"NotEqualDepth",function(){return le}),n.d(t,"MultiplyOperation",function(){return ce}),n.d(t,"MixOperation",function(){return he}),n.d(t,"AddOperation",function(){return fe}),n.d(t,"NoToneMapping",function(){return de}),n.d(t,"LinearToneMapping",function(){return pe}),n.d(t,"ReinhardToneMapping",function(){return me}),n.d(t,"Uncharted2ToneMapping",function(){return ve}),n.d(t,"CineonToneMapping",function(){return ge}),n.d(t,"UVMapping",function(){return ye}),n.d(t,"CubeReflectionMapping",function(){return be}),n.d(t,"CubeRefractionMapping",function(){return _e}),n.d(t,"EquirectangularReflectionMapping",function(){return xe}),n.d(t,"EquirectangularRefractionMapping",function(){return we}),n.d(t,"SphericalReflectionMapping",function(){return Ee}),n.d(t,"CubeUVReflectionMapping",function(){return Me}),n.d(t,"CubeUVRefractionMapping",function(){return Te}),n.d(t,"RepeatWrapping",function(){return Se}),n.d(t,"ClampToEdgeWrapping",function(){return Ae}),n.d(t,"MirroredRepeatWrapping",function(){return Ce}),n.d(t,"NearestFilter",function(){return Re}),n.d(t,"NearestMipMapNearestFilter",function(){return Le}),n.d(t,"NearestMipMapLinearFilter",function(){return Pe}),n.d(t,"LinearFilter",function(){return Oe}),n.d(t,"LinearMipMapNearestFilter",function(){return Ie}),n.d(t,"LinearMipMapLinearFilter",function(){return ke}),n.d(t,"UnsignedByteType",function(){return Ne}),n.d(t,"ByteType",function(){return De}),n.d(t,"ShortType",function(){return Fe}),n.d(t,"UnsignedShortType",function(){return Ue}),n.d(t,"IntType",function(){return Be}),n.d(t,"UnsignedIntType",function(){return je}),n.d(t,"FloatType",function(){return ze}),n.d(t,"HalfFloatType",function(){return Ge}),n.d(t,"UnsignedShort4444Type",function(){return Ve}),n.d(t,"UnsignedShort5551Type",function(){return He}),n.d(t,"UnsignedShort565Type",function(){return We}),n.d(t,"UnsignedInt248Type",function(){return qe}),n.d(t,"AlphaFormat",function(){return Xe}),n.d(t,"RGBFormat",function(){return Qe}),n.d(t,"RGBAFormat",function(){return Ye}),n.d(t,"LuminanceFormat",function(){return Ze}),n.d(t,"LuminanceAlphaFormat",function(){return Je}),n.d(t,"RGBEFormat",function(){return Ke}),n.d(t,"DepthFormat",function(){return $e}),n.d(t,"DepthStencilFormat",function(){return et}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return tt}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return nt}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return rt}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return it}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return ot}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return at}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return st}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return ut}),n.d(t,"RGB_ETC1_Format",function(){return lt}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return ct}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return ht}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return ft}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return dt}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return pt}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return mt}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return vt}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return gt}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return yt}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return bt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return _t}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return xt}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return wt}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return Et}),n.d(t,"LoopOnce",function(){return Mt}),n.d(t,"LoopRepeat",function(){return Tt}),n.d(t,"LoopPingPong",function(){return St}),n.d(t,"InterpolateDiscrete",function(){return At}),n.d(t,"InterpolateLinear",function(){return Ct}),n.d(t,"InterpolateSmooth",function(){return Rt}),n.d(t,"ZeroCurvatureEnding",function(){return Lt}),n.d(t,"ZeroSlopeEnding",function(){return Pt}),n.d(t,"WrapAroundEnding",function(){return Ot}),n.d(t,"TrianglesDrawMode",function(){return It}),n.d(t,"TriangleStripDrawMode",function(){return kt}),n.d(t,"TriangleFanDrawMode",function(){return Nt}),n.d(t,"LinearEncoding",function(){return Dt}),n.d(t,"sRGBEncoding",function(){return Ft}),n.d(t,"GammaEncoding",function(){return Ut}),n.d(t,"RGBEEncoding",function(){return Bt}),n.d(t,"LogLuvEncoding",function(){return jt}),n.d(t,"RGBM7Encoding",function(){return zt}),n.d(t,"RGBM16Encoding",function(){return Gt}),n.d(t,"RGBDEncoding",function(){return Vt}),n.d(t,"BasicDepthPacking",function(){return Ht}),n.d(t,"RGBADepthPacking",function(){return Wt}),n.d(t,"TangentSpaceNormalMap",function(){return qt}),n.d(t,"ObjectSpaceNormalMap",function(){return Xt}),n.d(t,"CubeGeometry",function(){return er}),n.d(t,"Face4",function(){return ol}),n.d(t,"LineStrip",function(){return al}),n.d(t,"LinePieces",function(){return sl}),n.d(t,"MeshFaceMaterial",function(){return ul}),n.d(t,"MultiMaterial",function(){return ll}),n.d(t,"PointCloud",function(){return cl}),n.d(t,"Particle",function(){return hl}),n.d(t,"ParticleSystem",function(){return fl}),n.d(t,"PointCloudMaterial",function(){return dl}),n.d(t,"ParticleBasicMaterial",function(){return pl}),n.d(t,"ParticleSystemMaterial",function(){return ml}),n.d(t,"Vertex",function(){return vl}),n.d(t,"DynamicBufferAttribute",function(){return gl}),n.d(t,"Int8Attribute",function(){return yl}),n.d(t,"Uint8Attribute",function(){return bl}),n.d(t,"Uint8ClampedAttribute",function(){return _l}),n.d(t,"Int16Attribute",function(){return xl}),n.d(t,"Uint16Attribute",function(){return wl}),n.d(t,"Int32Attribute",function(){return El}),n.d(t,"Uint32Attribute",function(){return Ml}),n.d(t,"Float32Attribute",function(){return Tl}),n.d(t,"Float64Attribute",function(){return Sl}),n.d(t,"ClosedSplineCurve3",function(){return Al}),n.d(t,"SplineCurve3",function(){return Cl}),n.d(t,"Spline",function(){return Rl}),n.d(t,"AxisHelper",function(){return Ll}),n.d(t,"BoundingBoxHelper",function(){return Pl}),n.d(t,"EdgesHelper",function(){return Ol}),n.d(t,"WireframeHelper",function(){return Il}),n.d(t,"XHRLoader",function(){return kl}),n.d(t,"BinaryTextureLoader",function(){return Nl}),n.d(t,"GeometryUtils",function(){return Dl}),n.d(t,"ImageUtils",function(){return Fl}),n.d(t,"Projector",function(){return Ul}),n.d(t,"CanvasRenderer",function(){return Bl}),n.d(t,"SceneUtils",function(){return jl}),n.d(t,"LensFlare",function(){return zl}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var i,o,a,s,u,l,c,h,f,d,p,m="94",v={LEFT:0,MIDDLE:1,RIGHT:2},g=0,y=1,b=2,_=3,x=0,w=1,E=0,M=1,T=2,S=0,A=1,C=2,R=1,L=2,P=0,O=1,I=2,k=0,N=1,D=2,F=3,U=4,B=5,j=100,z=101,G=102,V=103,H=104,W=200,q=201,X=202,Q=203,Y=204,Z=205,J=206,K=207,$=208,ee=209,te=210,ne=0,re=1,ie=2,oe=3,ae=4,se=5,ue=6,le=7,ce=0,he=1,fe=2,de=0,pe=1,me=2,ve=3,ge=4,ye=300,be=301,_e=302,xe=303,we=304,Ee=305,Me=306,Te=307,Se=1e3,Ae=1001,Ce=1002,Re=1003,Le=1004,Pe=1005,Oe=1006,Ie=1007,ke=1008,Ne=1009,De=1010,Fe=1011,Ue=1012,Be=1013,je=1014,ze=1015,Ge=1016,Ve=1017,He=1018,We=1019,qe=1020,Xe=1021,Qe=1022,Ye=1023,Ze=1024,Je=1025,Ke=Ye,$e=1026,et=1027,tt=33776,nt=33777,rt=33778,it=33779,ot=35840,at=35841,st=35842,ut=35843,lt=36196,ct=37808,ht=37809,ft=37810,dt=37811,pt=37812,mt=37813,vt=37814,gt=37815,yt=37816,bt=37817,_t=37818,xt=37819,wt=37820,Et=37821,Mt=2200,Tt=2201,St=2202,At=2300,Ct=2301,Rt=2302,Lt=2400,Pt=2401,Ot=2402,It=0,kt=1,Nt=2,Dt=3e3,Ft=3001,Ut=3007,Bt=3002,jt=3003,zt=3004,Gt=3005,Vt=3006,Ht=3200,Wt=3201,qt=0,Xt=1,Qt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Qt.DEG2RAD},radToDeg:function(e){return e*Qt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Yt(e,t){this.x=e||0,this.y=t||0}function Zt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Jt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Kt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function $t(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Yt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Yt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(i=new Yt,o=new Yt,function(e,t){return i.set(e,e),o.set(t,t),this.clamp(i,o)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(Zt.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Zt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(d=new Kt,function(e){var t=this.elements,n=e.elements,r=1/d.setFromMatrixColumn(e,0).length(),i=1/d.setFromMatrixColumn(e,1).length(),o=1/d.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=u*l;t[0]=(g=s*l)+(y=u*c)*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=m*a-v,t[6]=y+g*a,t[10]=o*s}else if("ZXY"===e.order){var g,y;m=s*c,v=u*l,t[0]=(g=s*l)-(y=u*c)*a,t[4]=-o*c,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*l,t[9]=y-g*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order)h=o*l,f=o*c,d=a*l,p=a*c,t[0]=s*l,t[4]=d*u-f,t[8]=h*u+p,t[1]=s*c,t[5]=p*u+h,t[9]=f*u-d,t[2]=-u,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var b=o*s,_=o*u,x=a*s,w=a*u;t[0]=s*l,t[4]=w-b*c,t[8]=x*c+_,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=_*c+x,t[10]=b-w*c}else"XZY"===e.order&&(b=o*s,_=o*u,x=a*s,w=a*u,t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+w,t[5]=o*l,t[9]=_*c-x,t[2]=x*c-_,t[6]=a*l,t[10]=w*c+b);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(h=new Kt(0,0,0),f=new Kt(1,1,1),function(e){return this.compose(h,e,f)}),lookAt:(u=new Kt,l=new Kt,c=new Kt,function(e,t,n){var r=this.elements;return c.subVectors(e,t),0===c.lengthSq()&&(c.z=1),c.normalize(),u.crossVectors(n,c),0===u.lengthSq()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),u.crossVectors(n,c)),u.normalize(),l.crossVectors(c,u),r[0]=u.x,r[4]=l.x,r[8]=c.x,r[1]=u.y,r[5]=l.y,r[9]=c.y,r[2]=u.z,r[6]=l.z,r[10]=c.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],C=r[13],R=r[2],L=r[6],P=r[10],O=r[14],I=r[3],k=r[7],N=r[11],D=r[15];return i[0]=o*x+a*T+s*R+u*I,i[4]=o*w+a*S+s*L+u*k,i[8]=o*E+a*A+s*P+u*N,i[12]=o*M+a*C+s*O+u*D,i[1]=l*x+c*T+h*R+f*I,i[5]=l*w+c*S+h*L+f*k,i[9]=l*E+c*A+h*P+f*N,i[13]=l*M+c*C+h*O+f*D,i[2]=d*x+p*T+m*R+v*I,i[6]=d*w+p*S+m*L+v*k,i[10]=d*E+p*A+m*P+v*N,i[14]=d*M+p*C+m*O+v*D,i[3]=g*x+y*T+b*R+_*I,i[7]=g*w+y*S+b*L+_*k,i[11]=g*E+y*A+b*P+_*N,i[15]=g*M+y*C+b*O+_*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Kt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*c*m-l*y*m-d*c*b+l*p*b,x=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,w=f*g*h-v*d*h+v*l*m-u*g*m-f*l*b+u*d*b,E=v*d*c-f*g*c-v*l*p+u*g*p+f*l*y-u*d*y,M=i*_+o*x+a*w+s*E;if(0===M){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=_*S,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*S,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*S,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*S,n[4]=x*S,n[5]=(f*y*s-v*p*s+v*a*m-i*y*m-f*a*b+i*p*b)*S,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*b-i*c*b)*S,n[7]=(u*p*s-f*c*s+f*a*h-i*p*h-u*a*m+i*c*m)*S,n[8]=w*S,n[9]=(v*d*s-f*g*s-v*o*m+i*g*m+f*o*b-i*d*b)*S,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*b+i*l*b)*S,n[11]=(f*l*s-u*d*s-f*o*h+i*d*h+u*o*m-i*l*m)*S,n[12]=E*S,n[13]=(f*g*a-v*d*a+v*o*p-i*g*p-f*o*y+i*d*y)*S,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*S,n[15]=(u*d*a-f*l*a+f*o*c-i*d*c-u*o*p+i*l*p)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(a=new Kt,s=new Zt,function(e,t,n){var r=this.elements,i=a.set(r[0],r[1],r[2]).length(),o=a.set(r[4],r[5],r[6]).length(),u=a.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],s.copy(this);var l=1/i,c=1/o,h=1/u;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=c,s.elements[5]*=c,s.elements[6]*=c,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,t.setFromRotationMatrix(s),n.x=i,n.y=o,n.z=u,this}),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Jt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var x=a*g;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Object.defineProperties(Jt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Jt.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"YXZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"ZXY"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"ZYX"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"YZX"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):"XZY"===o&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Kt;return function(n,r){return void 0===t&&(t=new Kt),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize()}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Kt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(p=new Jt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p.setFromEuler(e))}),applyAxisAngle:function(){var e=new Jt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(){var e=new Zt;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Zt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Kt,t=new Kt;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Kt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Kt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Qt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign($t.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Kt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*x,i[6]=o*v+a*b+s*w,i[1]=u*p+l*g+c*_,i[4]=u*m+l*y+c*x,i[7]=u*v+l*b+c*w,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*x,i[8]=h*v+f*b+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,v=i*d+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(l*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var en,tn,nn,rn,on,an=0;function sn(e,t,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:an++}),this.uuid=Qt.generateUUID(),this.name="",this.image=void 0!==e?e:sn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:sn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ae,this.wrapT=void 0!==r?r:Ae,this.magFilter=void 0!==i?i:Oe,this.minFilter=void 0!==o?o:ke,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Ye,this.type=void 0!==s?s:Ne,this.offset=new Yt(0,0),this.repeat=new Yt(1,1),this.center=new Yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Dt,this.version=0,this.onUpdate=null}function un(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function ln(e,t,n){this.width=e,this.height=t,this.scissor=new un(0,0,e,t),this.scissorTest=!1,this.viewport=new un(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Oe),this.texture=new sn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function cn(e,t,n){ln.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function hn(e,t,n,r,i,o,a,s,u,l,c,h){sn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:Re,this.minFilter=void 0!==l?l:Re,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function fn(e,t){this.min=void 0!==e?e:new Kt(1/0,1/0,1/0),this.max=void 0!==t?t:new Kt(-1/0,-1/0,-1/0)}function dn(e,t){this.center=void 0!==e?e:new Kt,this.radius=void 0!==t?t:0}function pn(e,t){this.normal=void 0!==e?e:new Kt(1,0,0),this.constant=void 0!==t?t:0}function mn(e,t,n,r,i,o){this.planes=[void 0!==e?e:new pn,void 0!==t?t:new pn,void 0!==n?n:new pn,void 0!==r?r:new pn,void 0!==i?i:new pn,void 0!==o?o:new pn]}sn.DEFAULT_IMAGE=void 0,sn.DEFAULT_MAPPING=ye,sn.prototype=Object.assign(Object.create(r.prototype),{constructor:sn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];function n(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Qt.generateUUID()),!t&&void 0===e.images[i.uuid]){var o;if(Array.isArray(i)){o=[];for(var a=0,s=i.length;a<s;a++)o.push(n(i[a]))}else o=n(i);e.images[i.uuid]={uuid:i.uuid,url:o}}r.image=i.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ye){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Se:e.x=e.x-Math.floor(e.x);break;case Ae:e.x=e.x<0?0:1;break;case Ce:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Se:e.y=e.y-Math.floor(e.y);break;case Ae:e.y=e.y<0?0:1;break;case Ce:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(sn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(un.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,t),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new un,t=new un),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),ln.prototype=Object.assign(Object.create(r.prototype),{constructor:ln,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(cn.prototype=Object.create(ln.prototype)).constructor=cn,cn.prototype.isWebGLRenderTargetCube=!0,(hn.prototype=Object.create(sn.prototype)).constructor=hn,hn.prototype.isDataTexture=!0,Object.assign(fn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Kt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Kt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Kt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Kt;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Kt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(en=new Kt,function(e){return this.clampPoint(e.center,en),en.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Kt,i=new Kt,o=new Kt,a=new Kt,s=new Kt,u=new Kt,l=new Kt;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),l=e.dot(a),c=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(h)&&!!c(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(h=[l.x,l.y,l.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Kt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Kt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Kt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new dn),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,n=t[0]*this.min.x,r=t[1]*this.min.x,i=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,u=t[4]*this.min.y,l=t[5]*this.min.y,c=t[6]*this.min.y,h=t[4]*this.max.y,f=t[5]*this.max.y,d=t[6]*this.max.y,p=t[8]*this.min.z,m=t[9]*this.min.z,v=t[10]*this.min.z,g=t[8]*this.max.z,y=t[9]*this.max.z,b=t[10]*this.max.z;return this.min.x=Math.min(n,o)+Math.min(u,h)+Math.min(p,g)+t[12],this.min.y=Math.min(r,a)+Math.min(l,f)+Math.min(m,y)+t[13],this.min.z=Math.min(i,s)+Math.min(c,d)+Math.min(v,b)+t[14],this.max.x=Math.max(n,o)+Math.max(u,h)+Math.max(p,g)+t[12],this.max.y=Math.max(r,a)+Math.max(l,f)+Math.max(m,y)+t[13],this.max.z=Math.max(i,s)+Math.max(c,d)+Math.max(v,b)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(dn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(tn=new fn,function(e,t){var n=this.center;void 0!==t?n.copy(t):tn.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Kt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new fn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(pn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Kt,t=new Kt;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Kt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Kt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Kt);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Kt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Kt,t=new $t;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(mn.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+u,p+f,y+v).normalize(),t[3].setComponents(a-i,c-u,p-f,y-v).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this},intersectsObject:(on=new dn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),on.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(on)}),intersectsSprite:function(){var e=new dn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(nn=new Kt,rn=new Kt,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];nn.x=r.normal.x>0?e.min.x:e.max.x,rn.x=r.normal.x>0?e.max.x:e.min.x,nn.y=r.normal.y>0?e.min.y:e.max.y,rn.y=r.normal.y>0?e.max.y:e.min.y,nn.z=r.normal.z>0?e.min.z:e.max.z,rn.z=r.normal.z>0?e.max.z:e.min.z;var i=r.distanceToPoint(nn),o=r.distanceToPoint(rn);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var vn,gn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},yn={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return t}},bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _n(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(_n.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Qt.euclideanModulo(t,1),n=Qt.clamp(n,0,1),r=Qt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,a,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(u=bn[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-r)/l+2;break;case o:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(vn={},function(e,t,n){return this.getHSL(vn),vn.h+=e,vn.s+=t,vn.l+=n,this.setHSL(vn.h,vn.s,vn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var xn,wn={common:{diffuse:{value:new _n(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new $t},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _n(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _n(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new $t}}},En={basic:{uniforms:yn.merge([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:gn.meshbasic_vert,fragmentShader:gn.meshbasic_frag},lambert:{uniforms:yn.merge([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new _n(0)}}]),vertexShader:gn.meshlambert_vert,fragmentShader:gn.meshlambert_frag},phong:{uniforms:yn.merge([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new _n(0)},specular:{value:new _n(1118481)},shininess:{value:30}}]),vertexShader:gn.meshphong_vert,fragmentShader:gn.meshphong_frag},standard:{uniforms:yn.merge([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new _n(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag},points:{uniforms:yn.merge([wn.points,wn.fog]),vertexShader:gn.points_vert,fragmentShader:gn.points_frag},dashed:{uniforms:yn.merge([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gn.linedashed_vert,fragmentShader:gn.linedashed_frag},depth:{uniforms:yn.merge([wn.common,wn.displacementmap]),vertexShader:gn.depth_vert,fragmentShader:gn.depth_frag},normal:{uniforms:yn.merge([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:gn.normal_vert,fragmentShader:gn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gn.cube_vert,fragmentShader:gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gn.equirect_vert,fragmentShader:gn.equirect_frag},distanceRGBA:{uniforms:yn.merge([wn.common,wn.displacementmap,{referencePosition:{value:new Kt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gn.distanceRGBA_vert,fragmentShader:gn.distanceRGBA_frag},shadow:{uniforms:yn.merge([wn.lights,wn.fog,{color:{value:new _n(0)},opacity:{value:1}}]),vertexShader:gn.shadow_vert,fragmentShader:gn.shadow_frag}};function Mn(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Tn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Tn.DefaultOrder}function Sn(){this.mask=1}En.physical={uniforms:yn.merge([En.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag},Tn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Tn.DefaultOrder="XYZ",Object.defineProperties(Tn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Tn.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Qt.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Zt;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(xn=new Jt,function(e){return xn.setFromEuler(this),this.setFromQuaternion(xn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Kt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Sn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var An,Cn,Rn,Ln,Pn=0;function On(){Object.defineProperty(this,"id",{value:Pn++}),this.uuid=Qt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DefaultUp.clone();var e=new Kt,t=new Tn,n=new Jt,r=new Kt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Zt},normalMatrix:{value:new $t}}),this.matrix=new Zt,this.matrixWorld=new Zt,this.matrixAutoUpdate=On.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function In(){On.call(this),this.type="Camera",this.matrixWorldInverse=new Zt,this.projectionMatrix=new Zt}function kn(e,t,n,r,i,o){In.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Nn(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Kt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new _n,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}On.DefaultUp=new Kt(0,1,0),On.DefaultMatrixAutoUpdate=!0,On.prototype=Object.assign(Object.create(r.prototype),{constructor:On,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Ln=new Jt,function(e,t){return Ln.setFromAxisAngle(e,t),this.quaternion.multiply(Ln),this}),rotateOnWorldAxis:function(){var e=new Jt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Kt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Kt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Kt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Kt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Kt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Kt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Kt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Rn=new Zt,function(e){return e.applyMatrix4(Rn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Zt,t=new Kt;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Kt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(An=new Kt,Cn=new Kt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Jt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(An,e,Cn),e}),getWorldScale:function(){var e=new Kt,t=new Jt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Kt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Jt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Kt),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),void 0!==this.geometry){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++)i(e.shapes,a[s]);else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object);if(t){var c=p(e.geometries),h=p(e.materials),f=p(e.textures),d=p(e.images);a=p(e.shapes),c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),f.length>0&&(n.textures=f),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function p(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}),In.prototype=Object.assign(Object.create(On.prototype),{constructor:In,isCamera:!0,copy:function(e,t){return On.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Jt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Kt),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){On.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),kn.prototype=Object.assign(Object.create(In.prototype),{constructor:kn,isOrthographicCamera:!0,copy:function(e,t){return In.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=On.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Nn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Dn,Fn,Un=0;function Bn(){Object.defineProperty(this,"id",{value:Un+=2}),this.uuid=Qt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function jn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function zn(e,t,n){jn.call(this,new Int8Array(e),t,n)}function Gn(e,t,n){jn.call(this,new Uint8Array(e),t,n)}function Vn(e,t,n){jn.call(this,new Uint8ClampedArray(e),t,n)}function Hn(e,t,n){jn.call(this,new Int16Array(e),t,n)}function Wn(e,t,n){jn.call(this,new Uint16Array(e),t,n)}function qn(e,t,n){jn.call(this,new Int32Array(e),t,n)}function Xn(e,t,n){jn.call(this,new Uint32Array(e),t,n)}function Qn(e,t,n){jn.call(this,new Float32Array(e),t,n)}function Yn(e,t,n){jn.call(this,new Float64Array(e),t,n)}function Zn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Jn(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Bn.prototype=Object.assign(Object.create(r.prototype),{constructor:Bn,isGeometry:!0,applyMatrix:function(e){for(var t=(new $t).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Zt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Zt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Zt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Zt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Zt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(Fn=new On,function(e){Fn.lookAt(e),Fn.updateMatrix(),this.applyMatrix(Fn.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],h=[],f=0,d=0;f<i.length;f+=3,d+=2)t.vertices.push(new Kt(i[f],i[f+1],i[f+2])),void 0!==o&&l.push(new Kt(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new _n(a[f],a[f+1],a[f+2])),void 0!==s&&c.push(new Yt(s[d],s[d+1])),void 0!==u&&h.push(new Yt(u[d],u[d+1]));function p(e,n,r,i){var f=new Nn(e,n,r,void 0!==o?[l[e].clone(),l[n].clone(),l[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[n].clone(),c[r].clone()]),void 0!==u&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}var m=e.groups;if(m.length>0)for(f=0;f<m.length;f++)for(var v=m[f],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==n?p(n[d],n[d+1],n[d+2],v.materialIndex):p(d,d+1,d+2,v.materialIndex);else if(void 0!==n)for(f=0;f<n.length;f+=3)p(n[f],n[f+1],n[f+2]);else for(f=0;f<i.length/3;f+=3)p(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Dn=new Kt,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dn).negate(),this.translate(Dn.x,Dn.y,Dn.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Zt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Kt,t=new Kt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Kt;if(e){var s,u,l=new Kt,c=new Kt;for(r=0,i=this.faces.length;r<i;r++)s=this.vertices[(o=this.faces[r]).a],l.subVectors(this.vertices[o.c],u=this.vertices[o.b]),c.subVectors(s,u),l.cross(c),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Bn;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new Kt,l={a:new Kt,b:new Kt,c:new Kt},a.push(u),s.push(l)}var u,l,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)l=c.vertexNormals[n],(u=c.faceNormals[n]).copy((i=this.faces[n]).normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new fn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new dn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new $t).getNormalMatrix(t));for(var d=0,p=a.length;d<p;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,p=f.length;d<p;d++)h.push(f[d].clone());for(d=0,p=u.length;d<p;d++){var v,g,y=u[d],b=y.vertexNormals,_=y.vertexColors;(v=new Nn(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var x=0,w=b.length;x<w;x++)g=b[x].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(y.color),x=0,w=_.length;x<w;x++)v.vertexColors.push(_[x].clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(d=0,p=c.length;d<p;d++){var E=c[d],M=[];if(void 0!==E){for(x=0,w=E.length;x<w;x++)M.push(E[x].clone());l.push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Kt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),a.push(b),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];a.push(S(_[0]),S(_[1]),S(_[2]))}if(m&&a.push(M(d.normal)),v){var x=d.vertexNormals;a.push(M(x[0]),M(x[1]),M(x[2]))}if(g&&a.push(T(d.color)),y){var w=d.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/2,h.push(e.x,e.y),f[t])}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Bn).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++)f.push(h[o].clone());this.faceVertexUvs[t].push(f)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var p={};if(p.name=d[t].name,void 0!==d[t].vertices)for(p.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)p.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(p.normals=[],r=0,i=d[t].normals.length;r<i;r++)p.normals.push(d[t].normals[r].clone());this.morphTargets.push(p)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],r=0,i=m[t].vertexNormals.length;r<i;r++){var g=m[t].vertexNormals[r],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],r=0,i=m[t].faceNormals.length;r<i;r++)v.faceNormals.push(m[t].faceNormals[r].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(jn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(jn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new _n),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Yt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Kt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new un),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(zn.prototype=Object.create(jn.prototype)).constructor=zn,(Gn.prototype=Object.create(jn.prototype)).constructor=Gn,(Vn.prototype=Object.create(jn.prototype)).constructor=Vn,(Hn.prototype=Object.create(jn.prototype)).constructor=Hn,(Wn.prototype=Object.create(jn.prototype)).constructor=Wn,(qn.prototype=Object.create(jn.prototype)).constructor=qn,(Xn.prototype=Object.create(jn.prototype)).constructor=Xn,(Qn.prototype=Object.create(jn.prototype)).constructor=Qn,(Yn.prototype=Object.create(jn.prototype)).constructor=Yn,Object.assign(Zn.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var c,h=e.morphNormals,f=h.length;if(f>0){for(c=[],l=0;l<f;l++)c[l]=[];this.morphTargets.normal=c}var d=e.skinIndices,p=e.skinWeights,m=d.length===r.length,v=p.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Yt,new Yt,new Yt))),!0===a&&(void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Yt,new Yt,new Yt)));for(var E=0;E<u;E++){var M=s[E].vertices;t[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<f;E++){var T=h[E].vertexNormals[l];c[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Kn=1;function $n(){Object.defineProperty(this,"id",{value:Kn+=2}),this.uuid=Qt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function er(e,t,n,r,i,o){Bn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new tr(e,t,n,r,i,o)),this.mergeVertices()}function tr(e,t,n,r,i,o){$n.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function d(e,t,n,r,i,o,d,p,m,v,g){var y,b,_=o/m,x=d/v,w=o/2,E=d/2,M=p/2,T=m+1,S=v+1,A=0,C=0,R=new Kt;for(b=0;b<S;b++){var L=b*x-E;for(y=0;y<T;y++)R[e]=(y*_-w)*r,R[t]=L*i,R[n]=M,u.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=p>0?1:-1,l.push(R.x,R.y,R.z),c.push(y/m),c.push(1-b/v),A+=1}for(b=0;b<v;b++)for(y=0;y<m;y++){var P=h+y+T*(b+1),O=h+(y+1)+T*(b+1),I=h+(y+1)+T*b;s.push(h+y+T*b,P,I),s.push(P,O,I),C+=6}a.addGroup(f,C,g),f+=C,h+=A}d("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Qn(u,3)),this.addAttribute("normal",new Qn(l,3)),this.addAttribute("uv",new Qn(c,2))}function nr(e,t,n,r){Bn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new rr(e,t,n,r)),this.mergeVertices()}function rr(e,t,n,r){$n.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=e/u,d=t/l,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<c;i++)m.push(i*f-a,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}for(o=0;o<l;o++)for(i=0;i<u;i++){var b=i+c*(o+1),_=i+1+c*(o+1),x=i+1+c*o;p.push(i+c*o,b,x),p.push(b,_,x)}this.setIndex(p),this.addAttribute("position",new Qn(m,3)),this.addAttribute("normal",new Qn(v,3)),this.addAttribute("uv",new Qn(g,2))}$n.prototype=Object.assign(Object.create(r.prototype),{constructor:$n,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(Jn(e)>65535?Xn:Wn)(e,1):e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new jn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new $t).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Zt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Zt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Zt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Zt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Zt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new On;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Kt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Qn(3*t.vertices.length,3),r=new Qn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Qn(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Qn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Zn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new jn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new jn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new jn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new jn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new jn(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new Qn(3*h.length,3);s.push(f.copyVector3sArray(h))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new Qn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Qn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new fn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new fn,t=new Kt;return function(){null===this.boundingSphere&&(this.boundingSphere=new dn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new jn(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,u,l,c=t.normal.array,h=new Kt,f=new Kt,d=new Kt,p=new Kt,m=new Kt;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var b=n[g],_=b.start;for(o=_,a=_+b.count;o<a;o+=3)u=3*v[o+1],l=3*v[o+2],h.fromArray(r,s=3*v[o+0]),f.fromArray(r,u),d.fromArray(r,l),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}}else for(o=0,a=r.length;o<a;o+=9)h.fromArray(r,o),f.fromArray(r,o+3),d.fromArray(r,o+6),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[o]=p.x,c[o+1]=p.y,c[o+2]=p.z,c[o+3]=p.x,c[o+4]=p.y,c[o+5]=p.z,c[o+6]=p.x,c[o+7]=p.y,c[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,u=o.itemSize*t;s<a.length;s++,u++)i[u]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Kt;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new $n,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),u=0,l=0,c=0,h=t.length;c<h;c++){u=t[c]*a;for(var f=0;f<a;f++)s[l++]=o[u++]}e.addAttribute(r,new jn(s,a))}var d=this.groups;for(c=0,h=d.length;c<h;c++){var p=d[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new $n).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o)this.addAttribute(t,o[t].clone());var a=e.morphAttributes;for(t in a){var s=[],u=a[t];for(n=0,r=u.length;n<r;n++)s.push(u[n].clone());this.morphAttributes[t]=s}var l=e.groups;for(n=0,r=l.length;n<r;n++){var c=l[n];this.addGroup(c.start,c.count,c.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(er.prototype=Object.create(Bn.prototype)).constructor=er,(tr.prototype=Object.create($n.prototype)).constructor=tr,(nr.prototype=Object.create(Bn.prototype)).constructor=nr,(rr.prototype=Object.create($n.prototype)).constructor=rr;var ir,or,ar,sr,ur,lr,cr,hr=0;function fr(){Object.defineProperty(this,"id",{value:hr++}),this.uuid=Qt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=N,this.side=S,this.flatShading=!1,this.vertexColors=P,this.opacity=1,this.transparent=!1,this.blendSrc=Y,this.blendDst=Z,this.blendEquation=j,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oe,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function dr(e){fr.call(this),this.type="MeshBasicMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function pr(e){fr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function mr(e,t){this.origin=void 0!==e?e:new Kt,this.direction=void 0!==t?t:new Kt}function vr(e,t){this.start=void 0!==e?e:new Kt,this.end=void 0!==t?t:new Kt}function gr(e,t,n){this.a=void 0!==e?e:new Kt,this.b=void 0!==t?t:new Kt,this.c=void 0!==n?n:new Kt}function yr(e,t){On.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new $n,this.material=void 0!==t?t:new dr({color:16777215*Math.random()}),this.drawMode=It,this.updateMorphTargets()}function br(e,t){return Math.abs(t[1])-Math.abs(e[1])}function _r(e,t,n,r,i,o,a,s,u,l){sn.call(this,e=void 0!==e?e:[],t=void 0!==t?t:be,n,r,i,o,a,s,u,l),this.flipY=!1}fr.prototype=Object.assign(Object.create(r.prototype),{constructor:fr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===R;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==N&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==S&&(n.side=this.side),this.vertexColors!==P&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(dr.prototype=Object.create(fr.prototype)).constructor=dr,dr.prototype.isMeshBasicMaterial=!0,dr.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},(pr.prototype=Object.create(fr.prototype)).constructor=pr,pr.prototype.isShaderMaterial=!0,pr.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yn.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},pr.prototype.toJSON=function(e){var t=fr.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(mr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Kt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Kt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Kt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Kt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(or=new Kt,ar=new Kt,sr=new Kt,function(e,t,n,r){or.copy(e).add(t).multiplyScalar(.5),ar.copy(t).sub(e).normalize(),sr.copy(this.origin).sub(or);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(ar),c=sr.dot(this.direction),h=-sr.dot(ar),f=sr.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(ar).multiplyScalar(o).add(or),a}),intersectSphere:function(){var e=new Kt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:this.at(s<0?u:s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(ir=new Kt,function(e){return null!==this.intersectBox(e,ir)}),intersectTriangle:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Kt;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=l*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var d=-l*e.dot(r);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(vr.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Kt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Kt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Kt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(ur=new Kt,lr=new Kt,function(e,t){ur.subVectors(e,this.start),lr.subVectors(this.end,this.start);var n=lr.dot(lr),r=lr.dot(ur)/n;return t&&(r=Qt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Kt),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(gr,{getNormal:(cr=new Kt,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Kt),r.subVectors(n,t),cr.subVectors(e,t),r.cross(cr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new Kt,t=new Kt,n=new Kt;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),c=e.dot(n),h=t.dot(t),f=t.dot(n),d=u*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Kt),0===d)return s.set(-2,-1,-1);var p=1/d,m=(h*c-l*f)*p,v=(u*f-l*c)*p;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new Kt;return function(t,n,r,i){return gr.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(gr.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Kt,t=new Kt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Kt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return gr.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Kt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return gr.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return gr.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new pn,t=[new vr,new vr,new vr],n=new Kt,r=new Kt;return function(i,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new Kt);var a=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<a&&(a=u,o.copy(r))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),yr.prototype=Object.assign(Object.create(On.prototype),{constructor:yr,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return On.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new Zt,t=new mr,n=new dn,r=new Kt,i=new Kt,o=new Kt,a=new Kt,s=new Kt,u=new Kt,l=new Yt,c=new Yt,h=new Yt,f=new Kt,d=new Kt,p=new Kt;function m(e,t,n,r,i,o,a){return gr.getBarycoord(e,t,n,r,f),i.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),i.add(o).add(a),i.clone()}function v(e,t,n,r,i,o,a,s){if(null===(t.side===A?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==C,s)))return null;p.copy(s),p.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(p);return u<n.near||u>n.far?null:{distance:u,point:p.clone(),object:e}}function g(e,t,n,a,s,u,f,p,g){r.fromBufferAttribute(s,f),i.fromBufferAttribute(s,p),o.fromBufferAttribute(s,g);var y=v(e,t,n,a,r,i,o,d);if(y){u&&(l.fromBufferAttribute(u,f),c.fromBufferAttribute(u,p),h.fromBufferAttribute(u,g),y.uv=m(d,r,i,o,l,c,h));var b=new Nn(f,p,g);gr.getNormal(r,i,o,b.normal),y.face=b}return y}return function(f,p){var y,b=this.geometry,_=this.material,x=this.matrixWorld;if(void 0!==_&&(null===b.boundingSphere&&b.computeBoundingSphere(),n.copy(b.boundingSphere),n.applyMatrix4(x),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(f.ray).applyMatrix4(e),null===b.boundingBox||!1!==t.intersectsBox(b.boundingBox))))if(b.isBufferGeometry){var w,E,M,T,S,A,C,R,L,P=b.index,O=b.attributes.position,I=b.attributes.uv,k=b.groups,N=b.drawRange;if(null!==P)if(Array.isArray(_))for(T=0,A=k.length;T<A;T++)for(L=_[(R=k[T]).materialIndex],S=Math.max(R.start,N.start),C=Math.min(R.start+R.count,N.start+N.count);S<C;S+=3)w=P.getX(T),E=P.getX(T+1),M=P.getX(T+2),(y=g(this,L,f,t,O,I,w,E,M))&&(y.faceIndex=Math.floor(T/3),p.push(y));else for(T=Math.max(0,N.start),A=Math.min(P.count,N.start+N.count);T<A;T+=3)w=P.getX(T),E=P.getX(T+1),M=P.getX(T+2),(y=g(this,_,f,t,O,I,w,E,M))&&(y.faceIndex=Math.floor(T/3),p.push(y));else if(void 0!==O)if(Array.isArray(_))for(T=0,A=k.length;T<A;T++)for(L=_[(R=k[T]).materialIndex],S=Math.max(R.start,N.start),C=Math.min(R.start+R.count,N.start+N.count);S<C;S+=3)(y=g(this,L,f,t,O,I,w=S,E=S+1,M=S+2))&&(y.faceIndex=Math.floor(T/3),p.push(y));else for(T=Math.max(0,N.start),A=Math.min(O.count,N.start+N.count);T<A;T+=3)(y=g(this,_,f,t,O,I,w=T,E=T+1,M=T+2))&&(y.faceIndex=Math.floor(T/3),p.push(y))}else if(b.isGeometry){var D,F,U,B,j=Array.isArray(_),z=b.vertices,G=b.faces,V=b.faceVertexUvs[0];V.length>0&&(B=V);for(var H=0,W=G.length;H<W;H++){var q=G[H],X=j?_[q.materialIndex]:_;if(void 0!==X){if(D=z[q.a],F=z[q.b],U=z[q.c],!0===X.morphTargets){var Q=b.morphTargets,Y=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Z=0,J=Q.length;Z<J;Z++){var K=Y[Z];if(0!==K){var $=Q[Z].vertices;r.addScaledVector(a.subVectors($[q.a],D),K),i.addScaledVector(s.subVectors($[q.b],F),K),o.addScaledVector(u.subVectors($[q.c],U),K)}}r.add(D),i.add(F),o.add(U),D=r,F=i,U=o}if(y=v(this,X,f,t,D,F,U,d)){if(B&&B[H]){var ee=B[H];l.copy(ee[0]),c.copy(ee[1]),h.copy(ee[2]),y.uv=m(d,D,F,U,l,c,h)}y.face=q,y.faceIndex=H,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(_r.prototype=Object.create(sn.prototype)).constructor=_r,_r.prototype.isCubeTexture=!0,Object.defineProperty(_r.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var xr=new sn,wr=new _r;function Er(){this.seq=[],this.map={}}var Mr=[],Tr=[],Sr=new Float32Array(16),Ar=new Float32Array(9),Cr=new Float32Array(4);function Rr(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Mr[i];if(void 0===o&&(o=new Float32Array(i),Mr[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)e[a].toArray(o,s+=n)}return o}function Lr(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Pr(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Or(e,t){var n=Tr[t];void 0===n&&(n=new Int32Array(t),Tr[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Ir(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function kr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Nr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Lr(n,t))return;e.uniform2fv(this.addr,t),Pr(n,t)}}function Dr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Lr(n,t))return;e.uniform3fv(this.addr,t),Pr(n,t)}}function Fr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Lr(n,t))return;e.uniform4fv(this.addr,t),Pr(n,t)}}function Ur(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Lr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Pr(n,t)}else{if(Lr(n,r))return;Cr.set(r),e.uniformMatrix2fv(this.addr,!1,Cr),Pr(n,r)}}function Br(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Lr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Pr(n,t)}else{if(Lr(n,r))return;Ar.set(r),e.uniformMatrix3fv(this.addr,!1,Ar),Pr(n,r)}}function jr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Lr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Pr(n,t)}else{if(Lr(n,r))return;Sr.set(r),e.uniformMatrix4fv(this.addr,!1,Sr),Pr(n,r)}}function zr(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||xr,i)}function Gr(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||wr,i)}function Vr(e,t){var n=this.cache;Lr(n,t)||(e.uniform2iv(this.addr,t),Pr(n,t))}function Hr(e,t){var n=this.cache;Lr(n,t)||(e.uniform3iv(this.addr,t),Pr(n,t))}function Wr(e,t){var n=this.cache;Lr(n,t)||(e.uniform4iv(this.addr,t),Pr(n,t))}function qr(e,t){var n=this.cache;Lr(n,t)||(e.uniform1fv(this.addr,t),Pr(n,t))}function Xr(e,t){var n=this.cache;Lr(n,t)||(e.uniform1iv(this.addr,t),Pr(n,t))}function Qr(e,t){var n=this.cache,r=Rr(t,this.size,2);Lr(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Yr(e,t){var n=this.cache,r=Rr(t,this.size,3);Lr(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Zr(e,t){var n=this.cache,r=Rr(t,this.size,4);Lr(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Jr(e,t){var n=this.cache,r=Rr(t,this.size,4);Lr(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Kr(e,t){var n=this.cache,r=Rr(t,this.size,9);Lr(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function $r(e,t){var n=this.cache,r=Rr(t,this.size,16);Lr(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function ei(e,t,n){var r=this.cache,i=t.length,o=Or(n,i);!1===Lr(r,o)&&(e.uniform1iv(this.addr,o),Pr(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||xr,o[a])}function ti(e,t,n){var r=this.cache,i=t.length,o=Or(n,i);!1===Lr(r,o)&&(e.uniform1iv(this.addr,o),Pr(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||wr,o[a])}function ni(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(t.type){case 5126:return Ir;case 35664:return Nr;case 35665:return Dr;case 35666:return Fr;case 35674:return Ur;case 35675:return Br;case 35676:return jr;case 35678:case 36198:return zr;case 35680:return Gr;case 5124:case 35670:return kr;case 35667:case 35671:return Vr;case 35668:case 35672:return Hr;case 35669:case 35673:return Wr}}()}function ri(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return qr;case 35664:return Qr;case 35665:return Yr;case 35666:return Zr;case 35674:return Jr;case 35675:return Kr;case 35676:return $r;case 35678:return ei;case 35680:return ti;case 5124:case 35670:return Xr;case 35667:case 35671:return Vr;case 35668:case 35672:return Hr;case 35669:case 35673:return Wr}}()}function ii(e){this.id=e,Er.call(this)}ri.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Pr(t,e)},ii.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var oi=/([\w\d_]+)(\])?(\[|\.)?/g;function ai(e,t){e.seq.push(t),e.map[t.id]=t}function si(e,t,n){var r=e.name,i=r.length;for(oi.lastIndex=0;;){var o=oi.exec(r),a=o[1],s=o[3];if("]"===o[2]&&(a|=0),void 0===s||"["===s&&oi.lastIndex+2===i){ai(n,void 0===s?new ni(a,e,t):new ri(a,e,t));break}var u=n.map[a];void 0===u&&ai(n,u=new ii(a)),n=u}}function ui(e,t,n){Er.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);si(o,e.getUniformLocation(t,o.name),this)}}function li(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}ui.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},ui.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},ui.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},ui.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var ci=0;function hi(e){switch(e){case Dt:return["Linear","( value )"];case Ft:return["sRGB","( value )"];case Bt:return["RGBE","( value )"];case zt:return["RGBM","( value, 7.0 )"];case Gt:return["RGBM","( value, 16.0 )"];case Vt:return["RGBD","( value, 256.0 )"];case Ut:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function fi(e,t){var n=hi(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function di(e){return""!==e}function pi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function mi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function vi(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=gn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return vi(n)})}function gi(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function yi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function bi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}var _i,xi,wi,Ei,Mi,Ti=0;function Si(e){fr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ht,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Ai(e){fr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Kt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Ci(e,t,n){for(var r=new mn,i=new Zt,o=new Yt,a=new Yt(n,n),s=new Kt,u=new Kt,l=1,c=2,h=1+(l|c),f=new Array(h),d=new Array(h),p={},m={0:A,1:S,2:C},v=[new Kt(1,0,0),new Kt(-1,0,0),new Kt(0,0,1),new Kt(0,0,-1),new Kt(0,1,0),new Kt(0,-1,0)],g=[new Kt(0,1,0),new Kt(0,1,0),new Kt(0,1,0),new Kt(0,1,0),new Kt(0,0,1),new Kt(0,0,-1)],y=[new un,new un,new un,new un,new un,new un],b=0;b!==h;++b){var _=0!=(b&l),x=0!=(b&c),w=new Si({depthPacking:Wt,morphTargets:_,skinning:x});f[b]=w;var E=new Ai({morphTargets:_,skinning:x});d[b]=E}var T=this;function R(t,n,r,i,o,a){var s=t.geometry,u=null,h=f,v=t.customDepthMaterial;if(r&&(h=d,v=t.customDistanceMaterial),v)u=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=0;g&&(y|=l),t.isSkinnedMesh&&n.skinning&&(y|=c),u=h[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=u.uuid,_=n.uuid,x=p[b];void 0===x&&(p[b]=x={});var w=x[_];void 0===w&&(w=u.clone(),x[_]=w),u=w}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function L(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=R(n,p,a,u,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,d)}}else l.visible&&(m=R(n,l,a,u,o.near,o.far),e.renderBufferDirect(o,null,s,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)L(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=M,this.render=function(t,n,l){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==t.length){var c,h=e.state;h.disable(e.context.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,d=t.length;f<d;f++){var p=t[f],m=p.shadow,b=p&&p.isPointLight;if(void 0!==m){var _=m.camera;if(o.copy(m.mapSize),o.min(a),b){var x=o.x,w=o.y;y[0].set(2*x,w,x,w),y[1].set(0,w,x,w),y[2].set(3*x,w,x,w),y[3].set(x,w,x,w),y[4].set(3*x,0,x,w),y[5].set(x,0,x,w),o.x*=4,o.y*=2}null===m.map&&(m.map=new ln(o.x,o.y,{minFilter:Re,magFilter:Re,format:Ye}),m.map.texture.name=p.name+".shadowMap",_.updateProjectionMatrix()),m.isSpotLightShadow&&m.update(p);var E=m.map,M=m.matrix;u.setFromMatrixPosition(p.matrixWorld),_.position.copy(u),b?(c=6,M.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(p.target.matrixWorld),_.lookAt(s),_.updateMatrixWorld(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(_.projectionMatrix),M.multiply(_.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var S=0;S<c;S++)b&&(s.copy(_.position),s.add(v[S]),_.up.copy(g[S]),_.lookAt(s),_.updateMatrixWorld(),h.viewport(y[S])),i.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),r.setFromMatrix(i),L(n,l,_,b)}else console.warn("THREE.WebGLShadowMap:",p,"has no shadow.")}T.needsUpdate=!1}}}function Ri(e,t,n,r,i,o,a,s,u){sn.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function Li(e,t){return{convert:function(n){var r;if(n===Se)return e.REPEAT;if(n===Ae)return e.CLAMP_TO_EDGE;if(n===Ce)return e.MIRRORED_REPEAT;if(n===Re)return e.NEAREST;if(n===Le)return e.NEAREST_MIPMAP_NEAREST;if(n===Pe)return e.NEAREST_MIPMAP_LINEAR;if(n===Oe)return e.LINEAR;if(n===Ie)return e.LINEAR_MIPMAP_NEAREST;if(n===ke)return e.LINEAR_MIPMAP_LINEAR;if(n===Ne)return e.UNSIGNED_BYTE;if(n===Ve)return e.UNSIGNED_SHORT_4_4_4_4;if(n===He)return e.UNSIGNED_SHORT_5_5_5_1;if(n===We)return e.UNSIGNED_SHORT_5_6_5;if(n===De)return e.BYTE;if(n===Fe)return e.SHORT;if(n===Ue)return e.UNSIGNED_SHORT;if(n===Be)return e.INT;if(n===je)return e.UNSIGNED_INT;if(n===ze)return e.FLOAT;if(n===Ge&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(n===Xe)return e.ALPHA;if(n===Qe)return e.RGB;if(n===Ye)return e.RGBA;if(n===Ze)return e.LUMINANCE;if(n===Je)return e.LUMINANCE_ALPHA;if(n===$e)return e.DEPTH_COMPONENT;if(n===et)return e.DEPTH_STENCIL;if(n===j)return e.FUNC_ADD;if(n===z)return e.FUNC_SUBTRACT;if(n===G)return e.FUNC_REVERSE_SUBTRACT;if(n===W)return e.ZERO;if(n===q)return e.ONE;if(n===X)return e.SRC_COLOR;if(n===Q)return e.ONE_MINUS_SRC_COLOR;if(n===Y)return e.SRC_ALPHA;if(n===Z)return e.ONE_MINUS_SRC_ALPHA;if(n===J)return e.DST_ALPHA;if(n===K)return e.ONE_MINUS_DST_ALPHA;if(n===$)return e.DST_COLOR;if(n===ee)return e.ONE_MINUS_DST_COLOR;if(n===te)return e.SRC_ALPHA_SATURATE;if((n===tt||n===nt||n===rt||n===it)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(n===tt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===nt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===rt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===it)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===ot||n===at||n===st||n===ut)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===ot)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===at)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===st)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ut)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===lt&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===ct||n===ht||n===ft||n===dt||n===pt||n===mt||n===vt||n===gt||n===yt||n===bt||n===_t||n===xt||n===wt||n===Et)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return n;if((n===V||n===H)&&null!==(r=t.get("EXT_blend_minmax"))){if(n===V)return r.MIN_EXT;if(n===H)return r.MAX_EXT}return n===qe&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function Pi(){On.call(this),this.type="Group"}function Oi(e,t,n,r){In.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ii(e){Oi.call(this),this.cameras=e||[]}function ki(e){var t=this,n=null,r=null,i=null,o=[],a=new Zt,s=new Zt;"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",g,!1));var u=new Zt,l=new Jt,c=new Kt,h=new Oi;h.bounds=new un(0,0,.5,1),h.layers.enable(1);var f=new Oi;f.bounds=new un(.5,0,.5,1),f.layers.enable(2);var d,p,m=new Ii([h,f]);function v(){return null!==n&&!0===n.isPresenting}function g(){if(v()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;p=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*i,o,1),_.start()}else t.enabled&&(e.setDrawingBufferSize(d.width,d.height,p),_.stop())}m.layers.enable(1),m.layers.enable(2);var y=!1;function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=o[e];return void 0===t&&((t=new Pi).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),_.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e.position.set(0,t.userHeight,0),e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var d=n.stageParameters;d?a.fromArray(d.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var p=r.pose,v=null!==i?i:e;if(v.matrix.copy(a),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==p.orientation&&(l.fromArray(p.orientation),v.quaternion.multiply(l)),null!==p.position&&(l.setFromRotationMatrix(a),c.fromArray(p.position),c.applyQuaternion(l),v.position.add(c)),v.updateMatrixWorld(),!1===n.isPresenting)return e;h.near=e.near,f.near=e.near,h.far=e.far,f.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),h.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),h.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s);var g=v.parent;null!==g&&(u.getInverse(g.matrixWorld),h.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u)),h.matrixWorld.getInverse(h.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),h.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),m.projectionMatrix.copy(h.projectionMatrix);var _=n.getLayers();if(_.length){var x=_[0];null!==x.leftBounds&&4===x.leftBounds.length&&h.bounds.fromArray(x.leftBounds),null!==x.rightBounds&&4===x.rightBounds.length&&f.bounds.fromArray(x.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],n=b(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;y!==n.buttons[i].pressed&&((y=n.buttons[i].pressed)?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=v;var _=new Mn;this.setAnimationLoop=function(e){_.setAnimationLoop(e)},this.submitFrame=function(){v()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",g)}}function Ni(e){console.log("THREE.WebGLRenderer",m);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=pe,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,d,p,v,_,x,w,E,S,R,L,O,I,j,z,G,V,H,W,q=this,X=!1,Q=null,Y=null,Z=null,J=-1,K="",$=null,ee=null,te=new un,ye=new un,Se=null,Ce=0,Ie=t.width,ke=t.height,De=1,Fe=new un(0,0,Ie,ke),Be=new un(0,0,Ie,ke),Ve=!1,He=new mn,We=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new pn,a=new $t,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,r,i){var u=null!==t?t.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==u;++f,d+=4)o.copy(t[f]).applyMatrix4(h,a),o.normal.toArray(l,d),l[d+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=l(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,c,h,f){if(!r||null===e||0===e.length||i&&!a)i?l(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=l(e,c,p,f);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},Xe=!1,Ze=!1,Je=new Zt,Ke=new Kt;function tt(){return null===Y?De:1}try{var nt={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l};if(t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",st,!1),null===(f=n||t.getContext("webgl",nt)||t.getContext("experimental-webgl",nt)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function rt(){(d=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(f)).get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_float_linear"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays"),W=new Li(f,d),p=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=l>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:u,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(f,d,e),(v=new function(e,t,n){var r=new function(){var t=!1,n=new un,r=null,i=new un(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?Q(e.DEPTH_TEST):Y(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ne:e.depthFunc(e.NEVER);break;case re:e.depthFunc(e.ALWAYS);break;case ie:e.depthFunc(e.LESS);break;case oe:e.depthFunc(e.LEQUAL);break;case ae:e.depthFunc(e.EQUAL);break;case se:e.depthFunc(e.GEQUAL);break;case ue:e.depthFunc(e.GREATER);break;case le:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?Q(e.STENCIL_TEST):Y(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},a=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),u=new Uint8Array(a),l=new Uint8Array(a),c={},h=null,f=null,d=null,p=null,m=null,v=null,_=null,x=null,w=null,E=!1,M=null,T=null,S=null,R=null,L=null,P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),O=!1,I=0,j=e.getParameter(e.VERSION);-1!==j.indexOf("WebGL")?(I=parseFloat(/^WebGL\ ([0-9])/.exec(j)[1]),O=I>=1):-1!==j.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(j)[1]),O=I>=2);var z=null,G={},V=new un,H=new un;function W(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var q={};function X(n,r){s[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),l[n]!==r&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),l[n]=r)}function Q(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function Y(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function Z(t,r,i,o,a,s,u,l){if(t!==k?Q(e.BLEND):Y(e.BLEND),t!==B){if(t!==d||l!==E)switch(t){case D:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case F:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case U:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}p=null,m=null,v=null,_=null,x=null,w=null}else a=a||r,s=s||i,u=u||o,r===p&&a===_||(e.blendEquationSeparate(n.convert(r),n.convert(a)),p=r,_=a),i===m&&o===v&&s===x&&u===w||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),m=i,v=o,x=s,w=u);d=t,E=l}function J(t){M!==t&&(e.frontFace(t?e.CW:e.CCW),M=t)}function K(t){t!==g?(Q(e.CULL_FACE),t!==T&&e.cullFace(t===y?e.BACK:t===b?e.FRONT:e.FRONT_AND_BACK)):Y(e.CULL_FACE),T=t}function $(t,n,r){t?(Q(e.POLYGON_OFFSET_FILL),R===n&&L===r||(e.polygonOffset(n,r),R=n,L=r)):Y(e.POLYGON_OFFSET_FILL)}function ee(t){void 0===t&&(t=e.TEXTURE0+P-1),z!==t&&(e.activeTexture(t),z=t)}return q[e.TEXTURE_2D]=W(e.TEXTURE_2D,e.TEXTURE_2D,1),q[e.TEXTURE_CUBE_MAP]=W(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),i.setClear(1),o.setClear(0),Q(e.DEPTH_TEST),i.setFunc(oe),J(!1),K(y),Q(e.CULL_FACE),Q(e.BLEND),Z(N),{buffers:{color:r,depth:i,stencil:o},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(e){X(e,0)},enableAttributeAndDivisor:X,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==s[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:Q,disable:Y,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:Z,setMaterial:function(t,n){t.side===C?Y(e.CULL_FACE):Q(e.CULL_FACE);var o=t.side===A;n&&(o=!o),J(o),t.blending===N&&!1===t.transparent?Z(k):Z(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),r.setMask(t.colorWrite),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:J,setCullFace:K,setLineWidth:function(t){t!==S&&(O&&e.lineWidth(t),S=t)},setPolygonOffset:$,setScissorTest:function(t){t?Q(e.SCISSOR_TEST):Y(e.SCISSOR_TEST)},activeTexture:ee,bindTexture:function(t,n){null===z&&ee();var r=G[z];void 0===r&&(G[z]=r={type:void 0,texture:void 0}),r.type===t&&r.texture===n||(e.bindTexture(t,n||q[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===V.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),V.copy(t))},viewport:function(t){!1===H.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),H.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);c={},h=null,z=null,G={},f=null,d=null,M=null,T=null,r.reset(),i.reset(),o.reset()}}}(f,d,W)).scissor(ye.copy(Be).multiplyScalar(De)),v.viewport(te.copy(Fe).multiplyScalar(De)),_=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(f),x=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&e.set(t,n={}),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}},w=new function(e,t,n,r,i,o,a){var s,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,l={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function h(e){return Qt.isPowerOfTwo(e.width)&&Qt.isPowerOfTwo(e.height)}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==Re&&e.minFilter!==Oe}function d(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(t){return t===Re||t===Le||t===Pe?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete l[n.id],a.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}(n),a.memory.textures--}function g(t,p){var v=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;l[t]!==n&&(l[t]=n,e.update())}(t),t.version>0&&v.__version!==t.version){var g=t.image;if(void 0===g)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==g.complete)return void function(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var p=c(r.image,i.maxTextureSize);(function(e){return e.wrapS!==Ae||e.wrapT!==Ae||e.minFilter!==Re&&e.minFilter!==Oe})(r)&&!1===h(p)&&(p=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Qt.floorPowerOfTwo(e.width),s.height=Qt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(p));var v=h(p),g=o.convert(r.format),b=o.convert(r.type);y(e.TEXTURE_2D,r,v);var _,x=r.mipmaps;if(r.isDepthTexture){var w=e.DEPTH_COMPONENT;if(r.type===ze){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else u&&(w=e.DEPTH_COMPONENT16);r.format===$e&&w===e.DEPTH_COMPONENT&&r.type!==Ue&&r.type!==je&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ue,b=o.convert(r.type)),r.format===et&&(w=e.DEPTH_STENCIL,r.type!==qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=qe,b=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,g,b,null)}else if(r.isDataTexture)if(x.length>0&&v){for(var E=0,M=x.length;E<M;E++)n.texImage2D(e.TEXTURE_2D,E,g,(_=x[E]).width,_.height,0,g,b,_.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,p.width,p.height,0,g,b,p.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,M=x.length;E<M;E++)_=x[E],r.format!==Ye&&r.format!==Qe?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,g,_.width,_.height,0,g,b,_.data);t.__maxMipLevel=x.length-1}else if(x.length>0&&v){for(E=0,M=x.length;E<M;E++)n.texImage2D(e.TEXTURE_2D,E,g,g,b,_=x[E]);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,g,b,p),t.__maxMipLevel=0;f(r,v)&&d(e.TEXTURE_2D,r,p.width,p.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(v,t,p);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,v.__webglTexture)}function y(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Ae&&a.wrapT===Ae||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==Re&&a.minFilter!==Oe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===ze&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ge&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function b(t,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function _(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(t,s){var u=r.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",m),u.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,v=[],g=0;g<6;g++)v[g]=l||p?p?t.image[g].image:t.image[g]:c(t.image[g],i.maxCubemapSize);var b=v[0],_=h(b),x=o.convert(t.format),w=o.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,_),g=0;g<6;g++)if(l)for(var E,M=v[g].mipmaps,T=0,S=M.length;T<S;T++)E=M[T],t.format!==Ye&&t.format!==Qe?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,x,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,x,E.width,E.height,0,x,w,E.data);else p?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,v[g].width,v[g].height,0,x,w,v[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,x,w,v[g]);u.__maxMipLevel=l?M.length-1:0,f(t,_)&&d(e.TEXTURE_CUBE_MAP,t,b.width,b.height),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",v),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,u=h(t);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,u),l=0;l<6;l++)b(i.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);f(t.texture,u)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),y(e.TEXTURE_2D,t.texture,u),b(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),f(t.texture,u)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===$e)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==et)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),_(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),_(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(f(i,h(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),d(o,i,t.width,t.height),n.bindTexture(o,null)}}}(f,d,v,x,p,W,_),E=new function(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var o=n.array,a=n.updateRange;e.bindBuffer(r,i.buffer),!1===n.dynamic?e.bufferData(r,o,e.STATIC_DRAW):-1===a.count?e.bufferSubData(r,0,o):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(0,n,r),i.version=n.version)}}}(f),S=new function(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var l=i[a.id];l&&(t.remove(l),delete i[a.id]),(l=i[s.id])&&(t.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new $n).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,u=n.attributes;if(null!==s)for(var l=0,c=(o=s.array).length;l<c;l+=3)a.push(h=o[l+0],f=o[l+1],f,d=o[l+2],d,h);else for(l=0,c=(o=u.position.array).length/3-1;l<c;l+=3){var h,f,d;a.push(h=l+0,f=l+1,f,d=l+2,d,h)}return r=new(Jn(a)>65535?Xn:Wn)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}(f,E,_),R=new function(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(S,_),z=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,l=t[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];t[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(d=l[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),f&&i.removeAttribute("morphNormal"+c));for(c=0;c<u;c++)(d=l[c])[0]=c,d[1]=s[c];for(l.sort(br),c=0;c<8;c++){var d;if(d=l[c]){var p=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+c,h[p]),f&&i.addAttribute("morphNormal"+c,f[p]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(f),L=new function(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Dt,n===Dt&&t&&(n=Ut),n}this.getParameters=function(t,r,o,s,u,l,c){var h=i[t.type],f=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=Math.floor((n.maxVertexUniforms-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(c):0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Me||t.envMap.mapping===Te),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Xt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===C,flipSided:t.side===A,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,i,o,a){for(var s,u=0,l=r.length;u<l;u++){var c=r[u];if(c.code===a){++(s=c).usedTimes;break}}return void 0===s&&(s=new function(e,t,n,r,i,o){var a=e.context,s=r.defines,u=i.vertexShader,l=i.fragmentShader,c="SHADOWMAP_TYPE_BASIC";o.shadowMapType===M?c="SHADOWMAP_TYPE_PCF":o.shadowMapType===T&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case be:case _e:h="ENVMAP_TYPE_CUBE";break;case Me:case Te:h="ENVMAP_TYPE_CUBE_UV";break;case xe:case we:h="ENVMAP_TYPE_EQUIREC";break;case Ee:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case _e:case we:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ce:d="ENVMAP_BLENDING_MULTIPLY";break;case he:d="ENVMAP_BLENDING_MIX";break;case fe:d="ENVMAP_BLENDING_ADD"}}var p,m,v,g,y,b=e.gammaFactor>0?e.gammaFactor:1,_=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(di).join("\n")}(r.extensions,o,t),x=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),w=a.createProgram();r.isRawShaderMaterial?((p=[x].filter(di).join("\n")).length>0&&(p+="\n"),(m=[_,x].filter(di).join("\n")).length>0&&(m+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(di).join("\n"),m=[_,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==de?"#define TONE_MAPPING":"",o.toneMapping!==de?gn.tonemapping_pars_fragment:"",o.toneMapping!==de?function(e,t){var n;switch(t){case pe:n="Linear";break;case me:n="Reinhard";break;case ve:n="Uncharted2";break;case ge:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?gn.encodings_pars_fragment:"",o.mapEncoding?fi("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?fi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?fi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(v="linearToOutputTexel",g=o.outputEncoding,y=hi(g),"vec4 "+v+"( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(di).join("\n")),u=mi(u=pi(u=vi(u),o),o),l=mi(l=pi(l=vi(l),o),o),u=gi(u);var E=m+(l=gi(l)),S=li(a,a.VERTEX_SHADER,p+u),A=li(a,a.FRAGMENT_SHADER,E);a.attachShader(w,S),a.attachShader(w,A),void 0!==r.index0AttributeName?a.bindAttribLocation(w,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(w,0,"position"),a.linkProgram(w);var C,R,L=a.getProgramInfoLog(w).trim(),P=a.getShaderInfoLog(S).trim(),O=a.getShaderInfoLog(A).trim(),I=!0,k=!0;return!1===a.getProgramParameter(w,a.LINK_STATUS)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(w,a.VALIDATE_STATUS),"gl.getProgramInfoLog",L,P,O)):""!==L?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):""!==P&&""!==O||(k=!1),k&&(this.diagnostics={runnable:I,material:r,programLog:L,vertexShader:{log:P,prefix:p},fragmentShader:{log:O,prefix:m}}),a.deleteShader(S),a.deleteShader(A),this.getUniforms=function(){return void 0===C&&(C=new ui(a,w,e)),C},this.getAttributes=function(){return void 0===R&&(R=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(a,w)),R},this.destroy=function(){a.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=ci++,this.code=n,this.usedTimes=1,this.program=w,this.vertexShader=S,this.fragmentShader=A,this}(e,t,a,n,i,o),r.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}(q,d,p),O=new function(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,u){var l=e[t];void 0===l?e[t]=l={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:u}:(l.id=i.id,l.object=i,l.geometry=o,l.material=a,l.program=a.program,l.renderOrder=i.renderOrder,l.z=s,l.group=u),(!0===a.transparent?r:n).push(l),t++},sort:function(){n.length>1&&n.sort(yi),r.length>1&&r.sort(bi)}}},e[r]=i),i},dispose:function(){e={}}}},I=new function(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=new function(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Kt,color:new _n,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"SpotLight":n={position:new Kt,direction:new Kt,color:new _n,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":n={position:new Kt,color:new _n,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Kt,skyColor:new _n,groundColor:new _n};break;case"RectAreaLight":n={color:new _n,position:new Kt,halfWidth:new Kt,halfHeight:new Kt}}return e[t.id]=n,n}}},t={id:Ti++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Kt,r=new Zt,i=new Zt;return{setup:function(o,a,s){for(var u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var b=o[g],_=b.color,x=b.intensity,w=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*x,l+=_.g*x,c+=_.b*x;else if(b.isDirectionalLight)(T=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.directionalShadowMap[h]=E,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=T,h++;else if(b.isSpotLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_).multiplyScalar(x),T.distance=w,T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(b.angle),T.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.spotShadowMap[d]=E,t.spotShadowMatrix[d]=b.shadow.matrix,t.spot[d]=T,d++;else if(b.isRectAreaLight)(T=e.get(b)).color.copy(_).multiplyScalar(x),T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*b.width,0,0),T.halfHeight.set(0,.5*b.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),t.rectArea[p]=T,p++;else if(b.isPointLight){var M;(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b.color).multiplyScalar(b.intensity),T.distance=b.distance,T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize,T.shadowCameraNear=M.camera.near,T.shadowCameraFar=M.camera.far),t.pointShadowMap[f]=E,t.pointShadowMatrix[f]=b.shadow.matrix,t.point[f]=T,f++}else if(b.isHemisphereLight){var T;(T=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(b.color).multiplyScalar(x),T.groundColor.copy(b.groundColor).multiplyScalar(x),t.hemi[m]=T,m++}}t.ambient[0]=u,t.ambient[1]=l,t.ambient[2]=c,t.directional.length=h,t.spot.length=d,t.rectArea.length=p,t.point.length=f,t.hemi.length=m,t.hash=t.id+","+h+","+f+","+d+","+p+","+m+","+a.length},state:t}},t=[],n=[],r=[];return{init:function(){t.length=0,n.length=0,r.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:r,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){r.push(e)}}},e[r]=i),i},dispose:function(){e={}}}},j=new function(e,t,n,r){var i,o,a,s=new _n(0),u=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),l(s,u=void 0!==t?t:1)},getClearAlpha:function(){return u},setClearAlpha:function(e){l(s,u=e)},render:function(t,r,c,h){var f=r.background;null===f?l(s,u):f&&f.isColor&&(l(f,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===a&&((a=new yr(new tr(1,1,1),new pr({uniforms:En.cube.uniforms,vertexShader:En.cube.vertexShader,fragmentShader:En.cube.fragmentShader,side:A,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=f,t.push(a,a.geometry,a.material,0,null)):f&&f.isTexture&&(void 0===i&&(i=new kn(-1,1,1,-1,0,1),o=new yr(new rr(2,2),new dr({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o)),o.material.map=f,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}(q,v,R,s),G=new function(e,t,n){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(e,i,o){var a=t.get("ANGLE_instanced_arrays");null!==a?(a.drawArraysInstancedANGLE(r,i,o,e.maxInstancedCount),n.update(o,r,e.maxInstancedCount)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(f,d,_),V=new function(e,t,n){var r,i,o;this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.update(a,r)},this.renderInstances=function(e,a,s){var u=t.get("ANGLE_instanced_arrays");null!==u?(u.drawElementsInstancedANGLE(r,s,i,a*o,e.maxInstancedCount),n.update(s,r,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(f,d,_),H=new function(e,t,n,r,i){var o,a,s,u,l,c,h=new Kt,f=new Jt,d=new Kt;function p(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(m,v,g){if(0!==m.length){void 0===s&&function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}(),u={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},l={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var h=r.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),c=new Ri(r)}(),n.useProgram(s),n.initAttributes(),n.enableAttribute(u.position),n.enableAttribute(u.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(u.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(u.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.uniformMatrix4fv(l.projectionMatrix,!1,g.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(l.map,0);var y=0,b=0,_=v.fog;_?(t.uniform3f(l.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(t.uniform1f(l.fogNear,_.near),t.uniform1f(l.fogFar,_.far),t.uniform1i(l.fogType,1),y=1,b=1):_.isFogExp2&&(t.uniform1f(l.fogDensity,_.density),t.uniform1i(l.fogType,2),y=2,b=2)):(t.uniform1i(l.fogType,0),y=0,b=0);for(var x=0,w=m.length;x<w;x++)(T=m[x]).modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,T.matrixWorld),T.z=-T.modelViewMatrix.elements[14];m.sort(p);var E=[],M=[];for(x=0,w=m.length;x<w;x++){var T,S=(T=m[x]).material;if(!1!==S.visible){T.onBeforeRender(e,v,g,void 0,S,void 0),t.uniform1f(l.alphaTest,S.alphaTest),t.uniformMatrix4fv(l.modelViewMatrix,!1,T.modelViewMatrix.elements),T.matrixWorld.decompose(h,f,d),E[0]=d.x,E[1]=d.y,M[0]=T.center.x-.5,M[1]=T.center.y-.5;var A=0;v.fog&&S.fog&&(A=b),y!==A&&(t.uniform1i(l.fogType,A),y=A),null!==S.map?(t.uniform2f(l.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(l.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(l.uvOffset,0,0),t.uniform2f(l.uvScale,1,1)),t.uniform1f(l.opacity,S.opacity),t.uniform3f(l.color,S.color.r,S.color.g,S.color.b),t.uniform1f(l.rotation,S.rotation),t.uniform2fv(l.center,M),t.uniform2fv(l.scale,E),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),r.setTexture2D(S.map||c,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),T.onAfterRender(e,v,g,void 0,S,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}(q,f,v,w,p),_.programs=L.programs,q.context=f,q.capabilities=p,q.extensions=d,q.properties=x,q.renderLists=O,q.state=v,q.info=_}rt();var it="xr"in navigator?new function(e){var t=e.context,n=null,r=null,i=null,o=null,a=[],s=[];function u(){return null!==r&&null!==i}var l=new Oi;l.layers.enable(1),l.viewport=new un;var c=new Oi;c.layers.enable(2),c.viewport=new un;var h=new Ii([l,c]);function f(e){var t=a[s.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function d(){e.setFramebuffer(null),v.stop()}function p(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Pi).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),t.setCompatibleXRDevice(e)},this.setSession=function(n,o){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",d),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(o.frameOfReferenceType).then(function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),v.setContext(r),v.start()}),s=r.getInputSources(),r.addEventListener("inputsourceschange",function(){s=r.getInputSources(),console.log(s)}))},this.getCamera=function(e){if(u()){var t=e.parent,n=h.cameras;p(h,t);for(var r=0;r<n.length;r++)p(n[r],t);e.matrixWorld.copy(h.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return h}return e},this.isPresenting=u;var m=null,v=new Mn;v.setAnimationLoop(function(e,t){if(null!==(o=t.getDevicePose(i)))for(var n=r.baseLayer,u=t.views,l=0;l<u.length;l++){var c=u[l],f=n.getViewport(c),d=o.getViewMatrix(c),p=h.cameras[l];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(c.projectionMatrix),p.viewport.set(f.x,f.y,f.width,f.height),0===l&&(h.matrix.copy(p.matrix),h.projectionMatrix.copy(p.projectionMatrix))}for(l=0;l<a.length;l++){var v=a[l],g=s[l];if(g){var y=t.getInputPose(g,i);if(null!==y){v.matrix.elements=y.pointerMatrix,v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}m&&m(e)}),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(q):new ki(q);this.vr=it;var ot=new Ci(q,R,p.maxTextureSize);function at(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function st(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1,rt()}function ut(e){var t=e.target;t.removeEventListener("dispose",ut),function(e){lt(e),x.remove(e)}(t)}function lt(e){var t=x.get(e).program;e.program=void 0,void 0!==t&&L.releaseProgram(t)}this.shadowMap=ot,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return De},this.setPixelRatio=function(e){void 0!==e&&(De=e,this.setSize(Ie,ke,!1))},this.getSize=function(){return{width:Ie,height:ke}},this.setSize=function(e,n,r){it.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ie=e,ke=n,t.width=e*De,t.height=n*De,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:Ie*De,height:ke*De}},this.setDrawingBufferSize=function(e,n,r){Ie=e,ke=n,De=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return te},this.setViewport=function(e,t,n,r){Fe.set(e,ke-t-r,n,r),v.viewport(te.copy(Fe).multiplyScalar(De))},this.setScissor=function(e,t,n,r){Be.set(e,ke-t-r,n,r),v.scissor(ye.copy(Be).multiplyScalar(De))},this.setScissorTest=function(e){v.setScissorTest(Ve=e)},this.getClearColor=function(){return j.getClearColor()},this.setClearColor=function(){j.setClearColor.apply(j,arguments)},this.getClearAlpha=function(){return j.getClearAlpha()},this.setClearAlpha=function(){j.setClearAlpha.apply(j,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=f.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=f.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=f.STENCIL_BUFFER_BIT),f.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",st,!1),O.dispose(),I.dispose(),x.dispose(),R.dispose(),it.dispose(),ft.stop()},this.renderBufferImmediate=function(e,t,n){v.initAttributes();var r=x.get(e);e.hasPositions&&!r.position&&(r.position=f.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=f.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=f.createBuffer()),e.hasColors&&!r.color&&(r.color=f.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(f.bindBuffer(f.ARRAY_BUFFER,r.position),f.bufferData(f.ARRAY_BUFFER,e.positionArray,f.DYNAMIC_DRAW),v.enableAttribute(i.position),f.vertexAttribPointer(i.position,3,f.FLOAT,!1,0,0)),e.hasNormals){if(f.bindBuffer(f.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=l,s[o+2]=c,s[o+3]=u,s[o+4]=l,s[o+5]=c,s[o+6]=u,s[o+7]=l,s[o+8]=c}f.bufferData(f.ARRAY_BUFFER,e.normalArray,f.DYNAMIC_DRAW),v.enableAttribute(i.normal),f.vertexAttribPointer(i.normal,3,f.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(f.bindBuffer(f.ARRAY_BUFFER,r.uv),f.bufferData(f.ARRAY_BUFFER,e.uvArray,f.DYNAMIC_DRAW),v.enableAttribute(i.uv),f.vertexAttribPointer(i.uv,2,f.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==P&&(f.bindBuffer(f.ARRAY_BUFFER,r.color),f.bufferData(f.ARRAY_BUFFER,e.colorArray,f.DYNAMIC_DRAW),v.enableAttribute(i.color),f.vertexAttribPointer(i.color,3,f.FLOAT,!1,0,0)),v.disableUnusedAttributes(),f.drawArrays(f.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;v.setMaterial(r,a);var s=vt(e,t,r,i),u=n.id+"_"+s.id+"_"+(!0===r.wireframe),l=!1;u!==K&&(K=u,l=!0),i.morphTargetInfluences&&(z.update(i,n,r,s),l=!0);var c,h=n.index,p=n.attributes.position,m=1;!0===r.wireframe&&(h=S.getWireframeAttribute(n),m=2);var g=G;null!==h&&(c=E.get(h),(g=V).setIndex(c)),l&&(function(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===d.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{v.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=E.get(u);if(void 0===h)continue;var p=h.buffer,m=h.type,g=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var y=u.data,b=y.stride,_=u.offset;y&&y.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(s,y.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):v.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,p),f.vertexAttribPointer(s,c,m,l,b*g,_*g)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):v.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,p),f.vertexAttribPointer(s,c,m,l,0,0)}else if(void 0!==o){var x=o[a];if(void 0!==x)switch(x.length){case 2:f.vertexAttrib2fv(s,x);break;case 3:f.vertexAttrib3fv(s,x);break;case 4:f.vertexAttrib4fv(s,x);break;default:f.vertexAttrib1fv(s,x)}}}}v.disableUnusedAttributes()}}(r,s,n),null!==h&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==h?y=h.count:void 0!==p&&(y=p.count);var b=n.drawRange.start*m,_=n.drawRange.count*m,x=null!==o?o.start*m:0,w=null!==o?o.count*m:1/0,M=Math.max(b,x),T=Math.min(y,b+_,x+w)-1,A=Math.max(0,T-M+1);if(0!==A){if(i.isMesh)if(!0===r.wireframe)v.setLineWidth(r.wireframeLinewidth*tt()),g.setMode(f.LINES);else switch(i.drawMode){case It:g.setMode(f.TRIANGLES);break;case kt:g.setMode(f.TRIANGLE_STRIP);break;case Nt:g.setMode(f.TRIANGLE_FAN)}else if(i.isLine){var C=r.linewidth;void 0===C&&(C=1),v.setLineWidth(C*tt()),g.setMode(i.isLineSegments?f.LINES:i.isLineLoop?f.LINE_LOOP:f.LINE_STRIP)}else i.isPoints&&g.setMode(f.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,M,A):g.render(M,A)}},this.compile=function(e,t){(h=I.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)mt(t.material[n],e.fog,t);else mt(t.material,e.fog,t)})};var ct,ht=null,ft=new Mn;function dt(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){ee=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){if("viewport"in p)v.viewport(te.copy(p.viewport));else{var m=p.bounds;v.viewport(te.set(m.x*Ie,m.y*ke,m.z*Ie,m.w*ke).multiplyScalar(De))}pt(s,t,p,u,l,c)}}}else ee=null,pt(s,t,n,u,l,c)}}function pt(e,t,n,r,i,o){if(e.onBeforeRender(q,t,n,r,i,o),h=I.get(t,ee||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;v.setMaterial(i,a);var s=vt(n,t.fog,i,e);K="",function(e,t,n){e.render(function(e){q.renderBufferImmediate(e,t,n)})}(e,s,i)}else q.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(q,t,n,r,i,o),h=I.get(t,ee||n)}function mt(e,t,n){var r=x.get(e),i=h.state.lights,o=L.getParameters(e,i.state,h.state.shadowsArray,t,We.numPlanes,We.numIntersection,n),a=L.getProgramCode(e,o),s=r.program,u=!0;if(void 0===s)e.addEventListener("dispose",ut);else if(s.code!==a)lt(e);else if(r.lightsHash!==i.state.hash)x.update(e,"lightsHash",i.state.hash),u=!1;else{if(void 0!==o.shaderID)return;u=!1}if(u){if(o.shaderID){var l=En[o.shaderID];r.shader={name:e.type,uniforms:yn.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,q),s=L.acquireProgram(e,r.shader,o,a),r.program=s,e.program=s}var c=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<q.maxMorphTargets;f++)c["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<q.maxMorphNormals;f++)c["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var d=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=We.numPlanes,r.numIntersection=We.numIntersection,d.clippingPlanes=We.uniform),r.fog=t,r.lightsHash=i.state.hash,e.lights&&(d.ambientLightColor.value=i.state.ambient,d.directionalLights.value=i.state.directional,d.spotLights.value=i.state.spot,d.rectAreaLights.value=i.state.rectArea,d.pointLights.value=i.state.point,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var p=r.program.getUniforms(),m=ui.seqWithValue(p.seq,d);r.uniformsList=m}function vt(e,t,n,r){Ce=0;var i=x.get(n),o=h.state.lights;Xe&&(Ze||e!==$)&&We.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,e===$&&n.id===J),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===We.numPlanes&&i.numIntersection===We.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(mt(n,t,r),n.needsUpdate=!1);var a,s,u=!1,l=!1,c=!1,d=i.program,m=d.getUniforms(),g=i.shader.uniforms;if(v.useProgram(d.program)&&(u=!0,l=!0,c=!0),n.id!==J&&(J=n.id,l=!0),u||e!==$){if(m.setValue(f,"projectionMatrix",e.projectionMatrix),p.logarithmicDepthBuffer&&m.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),$!==(ee||e)&&($=ee||e,l=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var y=m.map.cameraPosition;void 0!==y&&y.setValue(f,Ke.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(f,r,"bindMatrix"),m.setOptional(f,r,"bindMatrixInverse");var b=r.skeleton;if(b)if(p.floatVertexTextures){if(void 0===b.boneTexture){var _=Math.sqrt(4*b.bones.length);_=Qt.ceilPowerOfTwo(_),_=Math.max(_,4);var w=new Float32Array(_*_*4);w.set(b.boneMatrices);var E=new hn(w,_,_,Ye,ze);E.needsUpdate=!0,b.boneMatrices=w,b.boneTexture=E,b.boneTextureSize=_}m.setValue(f,"boneTexture",b.boneTexture),m.setValue(f,"boneTextureSize",b.boneTextureSize)}else m.setOptional(f,b,"boneMatrices")}return l&&(m.setValue(f,"toneMappingExposure",q.toneMappingExposure),m.setValue(f,"toneMappingWhitePoint",q.toneMappingWhitePoint),n.lights&&((a=g).ambientLightColor.needsUpdate=s=c,a.directionalLights.needsUpdate=s,a.pointLights.needsUpdate=s,a.spotLights.needsUpdate=s,a.rectAreaLights.needsUpdate=s,a.hemisphereLights.needsUpdate=s),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(g,t),n.isMeshBasicMaterial?gt(g,n):n.isMeshLambertMaterial?(gt(g,n),function(e,t){t.emissiveMap&&(g.emissiveMap.value=t.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(gt(g,n),n.isMeshToonMaterial?function(e,t){yt(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(g,n):yt(g,n)):n.isMeshStandardMaterial?(gt(g,n),n.isMeshPhysicalMaterial?function(e,t){bt(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(g,n):bt(g,n)):n.isMeshDepthMaterial?(gt(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isMeshDistanceMaterial?(gt(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(g,n)):n.isMeshNormalMaterial?(gt(g,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===A&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===A&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(g,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(g,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*De,e.scale.value=.5*ke,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(g,n):n.isShadowMaterial&&(g.color.value=n.color,g.opacity.value=n.opacity),void 0!==g.ltc_1&&(g.ltc_1.value=wn.LTC_1),void 0!==g.ltc_2&&(g.ltc_2.value=wn.LTC_2),ui.upload(f,i.uniformsList,g,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ui.upload(f,i.uniformsList,g,q),n.uniformsNeedUpdate=!1),m.setValue(f,"modelViewMatrix",r.modelViewMatrix),m.setValue(f,"normalMatrix",r.normalMatrix),m.setValue(f,"modelMatrix",r.matrixWorld),d}function gt(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=x.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function yt(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===A&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===A&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function bt(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===A&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===A&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ft.setAnimationLoop(function(e){it.isPresenting()||ht&&ht(e)}),"undefined"!=typeof window&&ft.setContext(window),this.setAnimationLoop=function(e){ht=e,it.setAnimationLoop(e),ft.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!X){K="",J=-1,$=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),it.enabled&&(t=it.getCamera(t)),(h=I.get(e,t)).init(),e.onBeforeRender(q,e,t,n),Je.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),He.setFromMatrix(Je),Xe=We.init(this.clippingPlanes,Ze=this.localClippingEnabled,t),(c=O.get(e,t)).init(),function e(t,n,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!He.intersectsSprite(t)||h.pushSprite(t);else if(t.isImmediateRenderObject)r&&Ke.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Je),c.push(t,null,t.material,Ke.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||He.intersectsObject(t))){r&&Ke.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Je);var i=R.update(t),o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],f=o[l.materialIndex];f&&f.visible&&c.push(t,i,f,Ke.z,l)}else o.visible&&c.push(t,i,o,Ke.z,null)}var d=t.children;for(s=0,u=d.length;s<u;s++)e(d[s],n,r)}}(e,t,q.sortObjects),!0===q.sortObjects&&c.sort(),Xe&&We.beginShadows(),ot.render(h.state.shadowsArray,e,t),h.setupLights(t),Xe&&We.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),j.render(c,e,t,r);var i=c.opaque,o=c.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;i.length&&dt(i,e,t,a),o.length&&dt(o,e,t,a)}else i.length&&dt(i,e,t),o.length&&dt(o,e,t);H.render(h.state.spritesArray,e,t),n&&w.updateRenderTargetMipmap(n),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),e.onAfterRender(q,e,t),it.enabled&&it.submitFrame(),c=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=Ce;return e>=p.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+p.maxTextures),Ce+=1,e},this.setTexture2D=(ct=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ct||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ct=!0),e=e.texture),w.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),w.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?w.setTextureCube(t,n):w.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){Q=e},this.getRenderTarget=function(){return Y},this.setRenderTarget=function(e){Y=e,e&&void 0===x.get(e).__webglFramebuffer&&w.setupRenderTarget(e);var t=Q,n=!1;if(e){var r=x.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,te.copy(e.viewport),ye.copy(e.scissor),Se=e.scissorTest}else te.copy(Fe).multiplyScalar(De),ye.copy(Be).multiplyScalar(De),Se=Ve;if(Z!==t&&(f.bindFramebuffer(f.FRAMEBUFFER,t),Z=t),v.viewport(te),v.scissor(ye),v.setScissorTest(Se),n){var i=x.get(e.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=x.get(e).__webglFramebuffer;if(a){var s=!1;a!==Z&&(f.bindFramebuffer(f.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==Ye&&W.convert(l)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Ne||W.convert(c)===f.getParameter(f.IMPLEMENTATION_COLOR_READ_TYPE)||c===ze&&(d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||c===Ge&&d.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&f.readPixels(t,n,r,i,W.convert(l),W.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&f.bindFramebuffer(f.FRAMEBUFFER,Z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=W.convert(t.format);this.setTexture2D(t,0),f.copyTexImage2D(f.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=W.convert(n.format),s=W.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function Di(e,t){this.name="",this.color=new _n(e),this.density=void 0!==t?t:25e-5}function Fi(e,t,n){this.name="",this.color=new _n(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ui(){On.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Bi(e){fr.call(this),this.type="SpriteMaterial",this.color=new _n(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ji(e){On.call(this),this.type="Sprite",this.material=void 0!==e?e:new Bi,this.center=new Yt(.5,.5)}function zi(){On.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Gi(e,t){if(this.bones=(e=e||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Zt)}}function Vi(){On.call(this),this.type="Bone"}function Hi(e,t){yr.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Zt,this.bindMatrixInverse=new Zt;var n=new Gi(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Wi(e){fr.call(this),this.type="LineBasicMaterial",this.color=new _n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function qi(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Xi(e,t);On.call(this),this.type="Line",this.geometry=void 0!==e?e:new $n,this.material=void 0!==t?t:new Wi({color:16777215*Math.random()})}function Xi(e,t){qi.call(this,e,t),this.type="LineSegments"}function Qi(e,t){qi.call(this,e,t),this.type="LineLoop"}function Yi(e){fr.call(this),this.type="PointsMaterial",this.color=new _n(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Zi(e,t){On.call(this),this.type="Points",this.geometry=void 0!==e?e:new $n,this.material=void 0!==t?t:new Yi({color:16777215*Math.random()})}function Ji(e,t,n,r,i,o,a,s,u){sn.call(this,e,t,n,r,i,o,a,s,u),this.generateMipmaps=!1}function Ki(e,t,n,r,i,o,a,s,u,l,c,h){sn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function $i(e,t,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:$e)!==$e&&l!==et)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===$e&&(n=Ue),void 0===n&&l===et&&(n=qe),sn.call(this,null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Re,this.minFilter=void 0!==s?s:Re,this.flipY=!1,this.generateMipmaps=!1}function eo(e){$n.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,l,c,h=[],f=[0,0],d={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[p[n]],u=v[p[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]})}for(l in d)h.push((c=e.vertices[(a=d[l]).index1]).x,c.y,c.z),h.push((c=e.vertices[a.index2]).x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,b,_,x;if(c=new Kt,null!==e.index){for(g=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=x=(_=b[i]).start,r=x+_.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),u=y.getX(t+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]});for(l in d)c.fromBufferAttribute(g,(a=d[l]).index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)c.fromBufferAttribute(g,3*t+n),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,3*t+(n+1)%3),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Qn(h,3))}function to(e,t,n){Bn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new no(e,t,n)),this.mergeVertices()}function no(e,t,n){$n.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=new Kt,c=new Kt,h=new Kt,f=new Kt,d=new Kt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,m,c),a.push(c.x,c.y,c.z),v-1e-5>=0?(e(v-1e-5,m,h),f.subVectors(c,h)):(e(v+1e-5,m,h),f.subVectors(h,c)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(c,h)):(e(v,m+1e-5,h),d.subVectors(h,c)),l.crossVectors(f,d).normalize(),s.push(l.x,l.y,l.z),u.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*p+i+1,y=(r+1)*p+i+1,b=(r+1)*p+i;o.push(r*p+i,g,b),o.push(g,y,b)}this.setIndex(o),this.addAttribute("position",new Qn(a,3)),this.addAttribute("normal",new Qn(s,3)),this.addAttribute("uv",new Qn(u,2))}function ro(e,t,n,r){Bn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new io(e,t,n,r)),this.mergeVertices()}function io(e,t,n,r){$n.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Kt,r=new Kt,i=new Kt,o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Kt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Kt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Kt,t=new Kt,n=new Kt,r=new Kt,a=new Yt,s=new Yt,u=new Yt,h=0,f=0;h<i.length;h+=9,f+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=c(r);l(a,f+0,e,d),l(s,f+2,t,d),l(u,f+4,n,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Qn(i,3)),this.addAttribute("normal",new Qn(i.slice(),3)),this.addAttribute("uv",new Qn(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function oo(e,t){Bn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ao(e,t)),this.mergeVertices()}function ao(e,t){io.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function so(e,t){Bn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new uo(e,t)),this.mergeVertices()}function uo(e,t){io.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function lo(e,t){Bn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new co(e,t)),this.mergeVertices()}function co(e,t){var n=(1+Math.sqrt(5))/2;io.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ho(e,t){Bn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new fo(e,t)),this.mergeVertices()}function fo(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;io.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function po(e,t,n,r,i,o){Bn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new mo(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function mo(e,t,n,r,i){$n.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8;var o=e.computeFrenetFrames(t,i=i||!1);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new Kt,l=new Kt,c=new Yt,h=new Kt,f=[],d=[],p=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,p.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*s+(a-1),n=(r+1)*s+a,i=(r+1)*(s-1)+a;m.push((r+1)*(s-1)+(a-1),e,i),m.push(e,n,i)}}()}(),this.setIndex(m),this.addAttribute("position",new Qn(f,3)),this.addAttribute("normal",new Qn(d,3)),this.addAttribute("uv",new Qn(p,2))}function vo(e,t,n,r,i,o,a){Bn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new go(e,t,n,r,i,o)),this.mergeVertices()}function go(e,t,n,r,i,o){$n.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],f=new Kt,d=new Kt,p=new Kt,m=new Kt,v=new Kt,g=new Kt,y=new Kt;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(S(b,i,o,e,p),S(b+.01,i,o,e,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,x=-t*Math.cos(_),w=t*Math.sin(_);f.x=p.x+(x*y.x+w*v.x),f.y=p.y+(x*y.y+w*v.y),f.z=p.z+(x*y.z+w*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*s+(a-1),M=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push((r+1)*(s-1)+(a-1),E,T),u.push(E,M,T)}function S(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new Qn(l,3)),this.addAttribute("normal",new Qn(c,3)),this.addAttribute("uv",new Qn(h,2))}function yo(e,t,n,r,i){Bn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new bo(e,t,n,r,i)),this.mergeVertices()}function bo(e,t,n,r,i){$n.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new Kt,f=new Kt,d=new Kt;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var p=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(p),f.y=(e+t*Math.cos(m))*Math.sin(p),f.z=t*Math.sin(m),u.push(f.x,f.y,f.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*(o-1)+a-1,g=(r+1)*(o-1)+a,y=(r+1)*o+a;s.push((r+1)*o+a-1,v,y),s.push(v,g,y)}this.setIndex(s),this.addAttribute("position",new Qn(u,3)),this.addAttribute("normal",new Qn(l,3)),this.addAttribute("uv",new Qn(c,2))}function _o(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Uo(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Uo(o,e[o],e[o+1],a);return a&&ko(a,a.next)&&(Bo(a),a=a.next),a}function xo(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!ko(r,r.next)&&0!==Io(r.prev,r,r.next))r=r.next;else{if(Bo(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function wo(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Ro(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Mo(e,r,i,o):Eo(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Bo(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?wo(e=To(e,t,n),t,n,r,i,o,2):2===a&&So(e,t,n,r,i,o):wo(xo(e),t,n,r,i,o,1);break}}}function Eo(e){var t=e.prev,n=e,r=e.next;if(Io(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Po(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Io(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mo(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Io(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Ro(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),c=Ro(s,u,t,n,r),h=e.nextZ;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&Po(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Io(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=e.prevZ;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&Po(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Io(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function To(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!ko(i,o)&&No(i,r,r.next,o)&&Do(i,o)&&Do(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Bo(r),Bo(r.next),r=e=o),r=r.next}while(r!==e);return r}function So(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Oo(a,s)){var u=Fo(a,s);return a=xo(a,a.next),u=xo(u,u.next),wo(a,t,n,r,i,o),void wo(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Ao(e,t){return e.x-t.x}function Co(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Po(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Do(r,e)&&(n=r,f=u),r=r.next;return n}(e,t)){var n=Fo(t,e);xo(n,n.next)}}function Ro(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lo(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Po(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Oo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&No(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Do(e,t)&&Do(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Io(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ko(e,t){return e.x===t.x&&e.y===t.y}function No(e,t,n,r){return!!(ko(e,t)&&ko(n,r)||ko(e,r)&&ko(n,t))||Io(e,t,n)>0!=Io(e,t,r)>0&&Io(n,r,e)>0!=Io(n,r,t)>0}function Do(e,t){return Io(e.prev,e,e.next)<0?Io(e,t,e.next)>=0&&Io(e,e.prev,t)>=0:Io(e,t,e.prev)<0||Io(e,e.next,t)<0}function Fo(e,t){var n=new jo(e.i,e.x,e.y),r=new jo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Uo(e,t,n,r){var i=new jo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}(Si.prototype=Object.create(fr.prototype)).constructor=Si,Si.prototype.isMeshDepthMaterial=!0,Si.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},(Ai.prototype=Object.create(fr.prototype)).constructor=Ai,Ai.prototype.isMeshDistanceMaterial=!0,Ai.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},(Ri.prototype=Object.create(sn.prototype)).constructor=Ri,Ri.prototype.isCanvasTexture=!0,Pi.prototype=Object.assign(Object.create(On.prototype),{constructor:Pi,isGroup:!0}),Oi.prototype=Object.assign(Object.create(In.prototype),{constructor:Oi,isPerspectiveCamera:!0,copy:function(e,t){return In.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Qt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Qt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Qt.RAD2DEG*Math.atan(Math.tan(.5*Qt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Qt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=On.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ii.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Ii,isArrayCamera:!0}),Di.prototype.isFogExp2=!0,Di.prototype.clone=function(){return new Di(this.color,this.density)},Di.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Fi.prototype.isFog=!0,Fi.prototype.clone=function(){return new Fi(this.color,this.near,this.far)},Fi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ui.prototype=Object.assign(Object.create(On.prototype),{constructor:Ui,copy:function(e,t){return On.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=On.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),(Bi.prototype=Object.create(fr.prototype)).constructor=Bi,Bi.prototype.isSpriteMaterial=!0,Bi.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ji.prototype=Object.assign(Object.create(On.prototype),{constructor:ji,isSprite:!0,raycast:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Yt,i=new Yt,o=new Zt,a=new Kt,s=new Kt,u=new Kt;function l(e,t,n,a,s,u){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var c,h,f=this.material.rotation;0!==f&&(h=Math.cos(f),c=Math.sin(f));var d=this.center;l(a.set(-.5,-.5,0),n,d,t,c,h),l(s.set(.5,-.5,0),n,d,t,c,h),l(u.set(.5,.5,0),n,d,t,c,h);var p=r.ray.intersectTriangle(a,s,u,!1,e);if(null!==p||(l(s.set(-.5,.5,0),n,d,t,c,h),null!==(p=r.ray.intersectTriangle(a,u,s,!1,e)))){var m=r.ray.origin.distanceTo(e);m<r.near||m>r.far||i.push({distance:m,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return On.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),zi.prototype=Object.assign(Object.create(On.prototype),{constructor:zi,copy:function(e){On.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(_i=new Kt,function(e,t){_i.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(_i);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new Kt,t=new Kt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=On.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Gi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Zt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(xi=new Zt,wi=new Zt,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++)xi.multiplyMatrices(e[i]?e[i].matrixWorld:wi,t[i]),xi.toArray(n,16*i);void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new Gi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Vi.prototype=Object.assign(Object.create(On.prototype),{constructor:Vi,isBone:!0}),Hi.prototype=Object.assign(Object.create(yr.prototype),{constructor:Hi,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new Vi,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new un,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){yr.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Wi.prototype=Object.create(fr.prototype)).constructor=Wi,Wi.prototype.isLineBasicMaterial=!0,Wi.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},qi.prototype=Object.assign(Object.create(On.prototype),{constructor:qi,isLine:!0,computeLineDistances:(Ei=new Kt,Mi=new Kt,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Ei.fromBufferAttribute(t,r-1),Mi.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Ei.distanceTo(Mi);e.addAttribute("lineDistance",new Qn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var e=new Zt,t=new mr,n=new dn;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var l=new Kt,c=new Kt,h=new Kt,f=new Kt,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=d){var b=v[g+1];l.fromArray(m,3*v[g]),c.fromArray(m,3*b),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=d)l.fromArray(m,3*g),c.fromArray(m,3*g+3),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var _=s.vertices,x=_.length;for(g=0;g<x-1;g+=d){var w;t.distanceSqToSegment(_[g],_[g+1],f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Xi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Xi,isLineSegments:!0,computeLineDistances:function(){var e=new Kt,t=new Kt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new Qn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Qi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Qi,isLineLoop:!0}),(Yi.prototype=Object.create(fr.prototype)).constructor=Yi,Yi.prototype.isPointsMaterial=!0,Yi.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Zi.prototype=Object.assign(Object.create(On.prototype),{constructor:Zi,isPoints:!0,raycast:function(){var e=new Zt,t=new mr,n=new dn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new Kt,f=new Kt;if(a.isBufferGeometry){var d=a.index,p=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(p,3*y),x(h,y)}else{v=0;for(var b=p.length/3;v<b;v++)h.fromArray(p,3*v),x(h,v)}}else{var _=a.vertices;for(v=0,b=_.length;v<b;v++)x(_[v],v)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<c){t.closestPointToPoint(e,f),f.applyMatrix4(s);var u=r.ray.origin.distanceTo(f);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ji.prototype=Object.assign(Object.create(sn.prototype),{constructor:Ji,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(Ki.prototype=Object.create(sn.prototype)).constructor=Ki,Ki.prototype.isCompressedTexture=!0,($i.prototype=Object.create(sn.prototype)).constructor=$i,$i.prototype.isDepthTexture=!0,(eo.prototype=Object.create($n.prototype)).constructor=eo,(to.prototype=Object.create(Bn.prototype)).constructor=to,(no.prototype=Object.create($n.prototype)).constructor=no,(ro.prototype=Object.create(Bn.prototype)).constructor=ro,(io.prototype=Object.create($n.prototype)).constructor=io,(oo.prototype=Object.create(Bn.prototype)).constructor=oo,(ao.prototype=Object.create(io.prototype)).constructor=ao,(so.prototype=Object.create(Bn.prototype)).constructor=so,(uo.prototype=Object.create(io.prototype)).constructor=uo,(lo.prototype=Object.create(Bn.prototype)).constructor=lo,(co.prototype=Object.create(io.prototype)).constructor=co,(ho.prototype=Object.create(Bn.prototype)).constructor=ho,(fo.prototype=Object.create(io.prototype)).constructor=fo,(po.prototype=Object.create(Bn.prototype)).constructor=po,(mo.prototype=Object.create($n.prototype)).constructor=mo,(vo.prototype=Object.create(Bn.prototype)).constructor=vo,(go.prototype=Object.create($n.prototype)).constructor=go,(yo.prototype=Object.create(Bn.prototype)).constructor=yo,(bo.prototype=Object.create($n.prototype)).constructor=bo;var zo={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return zo.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Go(e),Vo(n,e);var o=e.length;t.forEach(Go);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Vo(n,t[a]);var s=function(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=_o(e,0,h,n,!0),d=[];if(!f)return d;if(c&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=_o(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Lo(a));for(s.sort(Ao),i=0;i<s.length;i++)Co(s[i],n),n=xo(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)u=e[p+1],(s=e[p])<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return wo(f,d,n,r,i,l),d}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Go(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Vo(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Ho(e,t){Bn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Wo(e,t)),this.mergeVertices()}function Wo(e,t){$n.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++)s(e[o]);function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,p=void 0!==t.UVGenerator?t.UVGenerator:qo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var m,v,g,y,b,_,x,w,E=!1;d&&(m=d.getSpacedPoints(s),E=!0,l=!1,v=d.computeFrenetFrames(s,!1),g=new Kt,y=new Kt,b=new Kt),l||(f=0,c=0,h=0);var M=e.extractPoints(a),T=M.shape,S=M.holes;if(!zo.isClockWise(T))for(T=T.reverse(),x=0,w=S.length;x<w;x++)zo.isClockWise(_=S[x])&&(S[x]=_.reverse());var A=zo.triangulateShape(T,S),C=T;for(x=0,w=S.length;x<w;x++)T=T.concat(_=S[x]);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,P,O,I,k,N,D=T.length,F=A.length;function U(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s;if(Math.abs(a*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+a/h,m=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(a*l-s*u),v=(r=d+a*m-e.x)*r+(i=p+s*m-e.y)*i;if(v<=2)return new Yt(r,i);o=Math.sqrt(v/2)}else{var g=!1;a>Number.EPSILON?u>Number.EPSILON&&(g=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Yt(r/o,i/o)}for(var B=[],j=0,z=C.length,G=z-1,V=j+1;j<z;j++,G++,V++)G===z&&(G=0),V===z&&(V=0),B[j]=U(C[j],C[G],C[V]);var H,W,q=[],X=B.concat();for(x=0,w=S.length;x<w;x++){for(H=[],G=(z=(_=S[x]).length)-1,V=1+(j=0);j<z;j++,G++,V++)G===z&&(G=0),V===z&&(V=0),H[j]=U(_[j],_[G],_[V]);q.push(H),X=X.concat(H)}for(L=0;L<f;L++){for(O=L/f,I=c*Math.cos(O*Math.PI/2),P=h*Math.sin(O*Math.PI/2),j=0,z=C.length;j<z;j++)Y((k=R(C[j],B[j],P)).x,k.y,-I);for(x=0,w=S.length;x<w;x++)for(H=q[x],j=0,z=(_=S[x]).length;j<z;j++)Y((k=R(_[j],H[j],P)).x,k.y,-I)}for(P=h,j=0;j<D;j++)k=l?R(T[j],X[j],P):T[j],E?(y.copy(v.normals[0]).multiplyScalar(k.x),g.copy(v.binormals[0]).multiplyScalar(k.y),b.copy(m[0]).add(y).add(g),Y(b.x,b.y,b.z)):Y(k.x,k.y,0);for(W=1;W<=s;W++)for(j=0;j<D;j++)k=l?R(T[j],X[j],P):T[j],E?(y.copy(v.normals[W]).multiplyScalar(k.x),g.copy(v.binormals[W]).multiplyScalar(k.y),b.copy(m[W]).add(y).add(g),Y(b.x,b.y,b.z)):Y(k.x,k.y,u/s*W);for(L=f-1;L>=0;L--){for(O=L/f,I=c*Math.cos(O*Math.PI/2),P=h*Math.sin(O*Math.PI/2),j=0,z=C.length;j<z;j++)Y((k=R(C[j],B[j],P)).x,k.y,u+I);for(x=0,w=S.length;x<w;x++)for(H=q[x],j=0,z=(_=S[x]).length;j<z;j++)k=R(_[j],H[j],P),E?Y(k.x,k.y+m[s-1].y,m[s-1].x+I):Y(k.x,k.y,u+I)}function Q(e,t){var n,r;for(j=e.length;--j>=0;){n=j,(r=j-1)<0&&(r=e.length-1);var i=0,o=s+2*f;for(i=0;i<o;i++){var a=D*i,u=D*(i+1);J(t+n+a,t+r+a,t+r+u,t+n+u)}}}function Y(e,t,n){o.push(e),o.push(t),o.push(n)}function Z(e,t,i){K(e),K(t),K(i);var o=r.length/3,a=p.generateTopUV(n,r,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function J(e,t,i,o){K(e),K(t),K(o),K(t),K(i),K(o);var a=r.length/3,s=p.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function K(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function $(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=D*t;for(j=0;j<F;j++)Z((N=A[j])[2]+i,N[1]+i,N[0]+i);for(i=D*(t=s+2*f),j=0;j<F;j++)Z((N=A[j])[0]+i,N[1]+i,N[2]+i)}else{for(j=0;j<F;j++)Z((N=A[j])[2],N[1],N[0]);for(j=0;j<F;j++)Z((N=A[j])[0]+D*s,N[1]+D*s,N[2]+D*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Q(C,t),t+=C.length,x=0,w=S.length;x<w;x++)Q(_=S[x],t),t+=_.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Qn(r,3)),this.addAttribute("uv",new Qn(i,2)),this.computeVertexNormals()}(Ho.prototype=Object.create(Bn.prototype)).constructor=Ho,Ho.prototype.toJSON=function(){var e=Bn.prototype.toJSON.call(this);return Xo(this.parameters.shapes,this.parameters.options,e)},(Wo.prototype=Object.create($n.prototype)).constructor=Wo,Wo.prototype.toJSON=function(){var e=$n.prototype.toJSON.call(this);return Xo(this.parameters.shapes,this.parameters.options,e)};var qo={generateTopUV:function(e,t,n,r,i){var o=t[3*r],a=t[3*r+1],s=t[3*i],u=t[3*i+1];return[new Yt(t[3*n],t[3*n+1]),new Yt(o,a),new Yt(s,u)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<.01?[new Yt(a,1-u),new Yt(l,1-h),new Yt(f,1-p),new Yt(m,1-g)]:[new Yt(s,1-u),new Yt(c,1-h),new Yt(d,1-p),new Yt(v,1-g)]}};function Xo(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Qo(e,t){Bn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Yo(e,t)),this.mergeVertices()}function Yo(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Bn;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Wo.call(this,r,t),this.type="TextBufferGeometry"}function Zo(e,t,n,r,i,o,a){Bn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Jo(e,t,n,r,i,o,a)),this.mergeVertices()}function Jo(e,t,n,r,i,o,a){$n.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,h=[],f=new Kt,d=new Kt,p=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n;for(s=0;s<=t;s++){var _=s/t;f.x=-e*Math.cos(r+_*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+_*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),v.push(d.x,d.y,d.z),g.push(_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var x=h[u][s],w=h[u+1][s],E=h[u+1][s+1];(0!==u||o>0)&&p.push(h[u][s+1],x,E),(u!==n-1||l<Math.PI)&&p.push(x,w,E)}this.setIndex(p),this.addAttribute("position",new Qn(m,3)),this.addAttribute("normal",new Qn(v,3)),this.addAttribute("uv",new Qn(g,2))}function Ko(e,t,n,r,i,o){Bn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new $o(e,t,n,r,i,o)),this.mergeVertices()}function $o(e,t,n,r,i,o){$n.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],f=[],d=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Kt,v=new Yt;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y);d+=p}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=(a=u+g)+n+1,b=a+n+2,_=a+1;l.push(a,y,_),l.push(y,b,_)}}this.setIndex(l),this.addAttribute("position",new Qn(c,3)),this.addAttribute("normal",new Qn(h,3)),this.addAttribute("uv",new Qn(f,2))}function ea(e,t,n,r){Bn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new ta(e,t,n,r)),this.mergeVertices()}function ta(e,t,n,r){$n.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Qt.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/t,h=new Kt,f=new Yt;for(o=0;o<=t;o++){var d=n+o*c*r,p=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,u.push(h.x,h.y,h.z),f.x=o/t,f.y=a/(e.length-1),l.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=(i=a+o*e.length)+e.length,g=i+e.length+1,y=i+1;s.push(i,v,y),s.push(v,g,y)}if(this.setIndex(s),this.addAttribute("position",new Qn(u,3)),this.addAttribute("uv",new Qn(l,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,_=new Kt,x=new Kt,w=new Kt;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],x.x=b[i+a+0],x.y=b[i+a+1],x.z=b[i+a+2],w.addVectors(_,x).normalize(),b[a+0]=b[i+a+0]=w.x,b[a+1]=b[i+a+1]=w.y,b[a+2]=b[i+a+2]=w.z}}function na(e,t){Bn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ra(e,t)),this.mergeVertices()}function ra(e,t){$n.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))l(e);else for(var u=0;u<e.length;u++)l(e[u]),this.addGroup(a,s,u),a+=s,s=0;function l(e){var a,u,l,c=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;if(!1===zo.isClockWise(f))for(f=f.reverse(),a=0,u=d.length;a<u;a++)!0===zo.isClockWise(l=d[a])&&(d[a]=l.reverse());var p=zo.triangulateShape(f,d);for(a=0,u=d.length;a<u;a++)f=f.concat(l=d[a]);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var v=p[a];n.push(v[0]+c,v[1]+c,v[2]+c),s+=3}}this.setIndex(n),this.addAttribute("position",new Qn(r,3)),this.addAttribute("normal",new Qn(i,3)),this.addAttribute("uv",new Qn(o,2))}function ia(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}function oa(e,t){$n.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Qt.DEG2RAD*t),u=[0,0],l={},c=["a","b","c"];e.isBufferGeometry?(o=new Bn).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var g=l[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),a.push((y=h[g.index2]).x,y.y,y.z)}}this.addAttribute("position",new Qn(a,3))}function aa(e,t,n,r,i,o,a,s){Bn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new sa(e,t,n,r,i,o,a,s)),this.mergeVertices()}function sa(e,t,n,r,i,o,a,s){$n.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],d=0,p=[],m=n/2,v=0;function g(n){var i,o,p,g=new Yt,y=new Kt,b=0,_=!0===n?e:t,x=!0===n?1:-1;for(o=d,i=1;i<=r;i++)c.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),d++;for(p=d,i=0;i<=r;i++){var w=i/r*s+a,E=Math.cos(w),M=Math.sin(w);y.x=_*M,y.y=m*x,y.z=_*E,c.push(y.x,y.y,y.z),h.push(0,x,0),g.x=.5*E+.5,g.y=.5*M*x+.5,f.push(g.x,g.y),d++}for(i=0;i<r;i++){var T=o+i,S=p+i;!0===n?l.push(S,S+1,T):l.push(S+1,S,T),b+=3}u.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new Kt,b=new Kt,_=0,x=(t-e)/n;for(g=0;g<=i;g++){var w=[],E=g/i,M=E*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,S=T*s+a,A=Math.sin(S),C=Math.cos(S);b.x=M*A,b.y=-E*n+m,b.z=M*C,c.push(b.x,b.y,b.z),y.set(A,x,C).normalize(),h.push(y.x,y.y,y.z),f.push(T,1-E),w.push(d++)}p.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var R=p[g+1][o],L=p[g+1][o+1],P=p[g][o+1];l.push(p[g][o],R,P),l.push(R,L,P),_+=6}u.addGroup(v,_,0),v+=_}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new Qn(c,3)),this.addAttribute("normal",new Qn(h,3)),this.addAttribute("uv",new Qn(f,2))}function ua(e,t,n,r,i,o,a){aa.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function la(e,t,n,r,i,o,a){sa.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ca(e,t,n,r){Bn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ha(e,t,n,r)),this.mergeVertices()}function ha(e,t,n,r){$n.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new Kt,h=new Yt;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,l.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Qn(s,3)),this.addAttribute("normal",new Qn(u,3)),this.addAttribute("uv",new Qn(l,2))}(Qo.prototype=Object.create(Bn.prototype)).constructor=Qo,(Yo.prototype=Object.create(Wo.prototype)).constructor=Yo,(Zo.prototype=Object.create(Bn.prototype)).constructor=Zo,(Jo.prototype=Object.create($n.prototype)).constructor=Jo,(Ko.prototype=Object.create(Bn.prototype)).constructor=Ko,($o.prototype=Object.create($n.prototype)).constructor=$o,(ea.prototype=Object.create(Bn.prototype)).constructor=ea,(ta.prototype=Object.create($n.prototype)).constructor=ta,(na.prototype=Object.create(Bn.prototype)).constructor=na,na.prototype.toJSON=function(){var e=Bn.prototype.toJSON.call(this);return ia(this.parameters.shapes,e)},(ra.prototype=Object.create($n.prototype)).constructor=ra,ra.prototype.toJSON=function(){var e=$n.prototype.toJSON.call(this);return ia(this.parameters.shapes,e)},(oa.prototype=Object.create($n.prototype)).constructor=oa,(aa.prototype=Object.create(Bn.prototype)).constructor=aa,(sa.prototype=Object.create($n.prototype)).constructor=sa,(ua.prototype=Object.create(aa.prototype)).constructor=ua,(la.prototype=Object.create(sa.prototype)).constructor=la,(ca.prototype=Object.create(Bn.prototype)).constructor=ca,(ha.prototype=Object.create($n.prototype)).constructor=ha;var fa=Object.freeze({WireframeGeometry:eo,ParametricGeometry:to,ParametricBufferGeometry:no,TetrahedronGeometry:oo,TetrahedronBufferGeometry:ao,OctahedronGeometry:so,OctahedronBufferGeometry:uo,IcosahedronGeometry:lo,IcosahedronBufferGeometry:co,DodecahedronGeometry:ho,DodecahedronBufferGeometry:fo,PolyhedronGeometry:ro,PolyhedronBufferGeometry:io,TubeGeometry:po,TubeBufferGeometry:mo,TorusKnotGeometry:vo,TorusKnotBufferGeometry:go,TorusGeometry:yo,TorusBufferGeometry:bo,TextGeometry:Qo,TextBufferGeometry:Yo,SphereGeometry:Zo,SphereBufferGeometry:Jo,RingGeometry:Ko,RingBufferGeometry:$o,PlaneGeometry:nr,PlaneBufferGeometry:rr,LatheGeometry:ea,LatheBufferGeometry:ta,ShapeGeometry:na,ShapeBufferGeometry:ra,ExtrudeGeometry:Ho,ExtrudeBufferGeometry:Wo,EdgesGeometry:oa,ConeGeometry:ua,ConeBufferGeometry:la,CylinderGeometry:aa,CylinderBufferGeometry:sa,CircleGeometry:ca,CircleBufferGeometry:ha,BoxGeometry:er,BoxBufferGeometry:tr});function da(e){fr.call(this),this.type="ShadowMaterial",this.color=new _n(0),this.transparent=!0,this.setValues(e)}function pa(e){pr.call(this,e),this.type="RawShaderMaterial"}function ma(e){fr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _n(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function va(e){ma.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function ga(e){fr.call(this),this.type="MeshPhongMaterial",this.color=new _n(16777215),this.specular=new _n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ya(e){ga.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ba(e){fr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _a(e){fr.call(this),this.type="MeshLambertMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xa(e){Wi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}(da.prototype=Object.create(fr.prototype)).constructor=da,da.prototype.isShadowMaterial=!0,da.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this},(pa.prototype=Object.create(pr.prototype)).constructor=pa,pa.prototype.isRawShaderMaterial=!0,(ma.prototype=Object.create(fr.prototype)).constructor=ma,ma.prototype.isMeshStandardMaterial=!0,ma.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(va.prototype=Object.create(ma.prototype)).constructor=va,va.prototype.isMeshPhysicalMaterial=!0,va.prototype.copy=function(e){return ma.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},(ga.prototype=Object.create(fr.prototype)).constructor=ga,ga.prototype.isMeshPhongMaterial=!0,ga.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(ya.prototype=Object.create(ga.prototype)).constructor=ya,ya.prototype.isMeshToonMaterial=!0,ya.prototype.copy=function(e){return ga.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},(ba.prototype=Object.create(fr.prototype)).constructor=ba,ba.prototype.isMeshNormalMaterial=!0,ba.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(_a.prototype=Object.create(fr.prototype)).constructor=_a,_a.prototype.isMeshLambertMaterial=!0,_a.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(xa.prototype=Object.create(Wi.prototype)).constructor=xa,xa.prototype.isLineDashedMaterial=!0,xa.prototype.copy=function(e){return Wi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var wa=Object.freeze({ShadowMaterial:da,SpriteMaterial:Bi,RawShaderMaterial:pa,ShaderMaterial:pr,PointsMaterial:Yi,MeshPhysicalMaterial:va,MeshStandardMaterial:ma,MeshPhongMaterial:ga,MeshToonMaterial:ya,MeshNormalMaterial:ba,MeshLambertMaterial:_a,MeshDepthMaterial:Si,MeshDistanceMaterial:Ai,MeshBasicMaterial:dr,LineDashedMaterial:xa,LineBasicMaterial:Wi,Material:fr}),Ea={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ma(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Ta=new Ma,Sa={};function Aa(e){this.manager=void 0!==e?e:Ta}function Ca(e){this.manager=void 0!==e?e:Ta,this._parser=null}function Ra(e){this.manager=void 0!==e?e:Ta,this._parser=null}function La(e){this.manager=void 0!==e?e:Ta}function Pa(e){this.manager=void 0!==e?e:Ta}function Oa(e){this.manager=void 0!==e?e:Ta}function Ia(){this.type="Curve",this.arcLengthDivisions=200}function ka(e,t,n,r,i,o,a,s){Ia.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Na(e,t,n,r,i,o){ka.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Da(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(Aa.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ea.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===Sa[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}window.setTimeout(function(){t&&t(c),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{Sa[e]=[],Sa[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Ea.add(e,n);var r=Sa[e];if(delete Sa[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Sa[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Sa[e];delete Sa[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}Sa[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ca.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Ki;a.image=o;var s=new Aa(this.manager);function u(u){s.load(e[u],function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Oe),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,c=0,h=e.length;c<h;++c)u(c);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Oe),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Ra.prototype,{load:function(e,t,n,r){var i=this,o=new hn,a=new Aa(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ae,o.wrapT=void 0!==n.wrapT?n.wrapT:Ae,o.magFilter=void 0!==n.magFilter?n.magFilter:Oe,o.minFilter=void 0!==n.minFilter?n.minFilter:ke,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Oe),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(La.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ea.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Ea.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Pa.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new _r,o=new La(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var u=0;u<e.length;++u)s(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Oa.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new sn,o=new La(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Qe:Ye,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ia.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i=new Kt,o=[],a=[],s=[],u=new Kt,l=new Zt;for(n=0;n<=e;n++)o[n]=this.getTangentAt(n/e),o[n].normalize();a[0]=new Kt,s[0]=new Kt;var c=Number.MAX_VALUE,h=Math.abs(o[0].x),f=Math.abs(o[0].y),d=Math.abs(o[0].z);for(h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),d<=c&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),n=1;n<=e;n++)a[n]=a[n-1].clone(),s[n]=s[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Qt.clamp(o[n-1].dot(o[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(u,r))),s[n].crossVectors(o[n],a[n]);if(!0===t)for(r=Math.acos(Qt.clamp(a[0].dot(a[e]),-1,1)),r/=e,o[0].dot(u.crossVectors(a[0],a[e]))>0&&(r=-r),n=1;n<=e;n++)a[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),s[n].crossVectors(o[n],a[n]);return{tangents:o,normals:a,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),(ka.prototype=Object.create(Ia.prototype)).constructor=ka,ka.prototype.isEllipseCurve=!0,ka.prototype.getPoint=function(e,t){for(var n=t||new Yt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},ka.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ka.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ka.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},(Na.prototype=Object.create(ka.prototype)).constructor=Na,Na.prototype.isArcCurve=!0;var Fa=new Kt,Ua=new Da,Ba=new Da,ja=new Da;function za(e,t,n,r){Ia.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ga(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Va(e,t,n,r){return function(e,n){var r=1-e;return r*r*t}(e)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*r}(e)}function Ha(e,t,n,r,i){return function(e,n){var r=1-e;return r*r*r*t}(e)+function(e,t){var r=1-e;return 3*r*r*e*n}(e)+function(e,t){return 3*(1-e)*e*e*r}(e)+function(e,t){return e*e*e*i}(e)}function Wa(e,t,n,r){Ia.call(this),this.type="CubicBezierCurve",this.v0=e||new Yt,this.v1=t||new Yt,this.v2=n||new Yt,this.v3=r||new Yt}function qa(e,t,n,r){Ia.call(this),this.type="CubicBezierCurve3",this.v0=e||new Kt,this.v1=t||new Kt,this.v2=n||new Kt,this.v3=r||new Kt}function Xa(e,t){Ia.call(this),this.type="LineCurve",this.v1=e||new Yt,this.v2=t||new Yt}function Qa(e,t){Ia.call(this),this.type="LineCurve3",this.v1=e||new Kt,this.v2=t||new Kt}function Ya(e,t,n){Ia.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Yt,this.v1=t||new Yt,this.v2=n||new Yt}function Za(e,t,n){Ia.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Kt,this.v1=t||new Kt,this.v2=n||new Kt}function Ja(e){Ia.call(this),this.type="SplineCurve",this.points=e||[]}(za.prototype=Object.create(Ia.prototype)).constructor=za,za.prototype.isCatmullRomCurve3=!0,za.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Kt,s=this.points,u=s.length,l=(u-(this.closed?0:1))*e,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(Fa.subVectors(s[0],s[1]).add(s[0]),n=Fa),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(Fa.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Fa),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),f),p=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Ua.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,d,p,m),Ba.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,d,p,m),ja.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,d,p,m)}else"catmullrom"===this.curveType&&(Ua.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ba.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),ja.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Ua.calc(h),Ba.calc(h),ja.calc(h)),a},za.prototype.copy=function(e){Ia.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},za.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},za.prototype.fromJSON=function(e){Ia.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Kt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},(Wa.prototype=Object.create(Ia.prototype)).constructor=Wa,Wa.prototype.isCubicBezierCurve=!0,Wa.prototype.getPoint=function(e,t){var n=t||new Yt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ha(e,r.x,i.x,o.x,a.x),Ha(e,r.y,i.y,o.y,a.y)),n},Wa.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Wa.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Wa.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(qa.prototype=Object.create(Ia.prototype)).constructor=qa,qa.prototype.isCubicBezierCurve3=!0,qa.prototype.getPoint=function(e,t){var n=t||new Kt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ha(e,r.x,i.x,o.x,a.x),Ha(e,r.y,i.y,o.y,a.y),Ha(e,r.z,i.z,o.z,a.z)),n},qa.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},qa.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},qa.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(Xa.prototype=Object.create(Ia.prototype)).constructor=Xa,Xa.prototype.isLineCurve=!0,Xa.prototype.getPoint=function(e,t){var n=t||new Yt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Xa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Xa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Xa.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xa.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xa.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Qa.prototype=Object.create(Ia.prototype)).constructor=Qa,Qa.prototype.isLineCurve3=!0,Qa.prototype.getPoint=function(e,t){var n=t||new Kt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Qa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Qa.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qa.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qa.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Ya.prototype=Object.create(Ia.prototype)).constructor=Ya,Ya.prototype.isQuadraticBezierCurve=!0,Ya.prototype.getPoint=function(e,t){var n=t||new Yt,r=this.v0,i=this.v1,o=this.v2;return n.set(Va(e,r.x,i.x,o.x),Va(e,r.y,i.y,o.y)),n},Ya.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ya.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ya.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Za.prototype=Object.create(Ia.prototype)).constructor=Za,Za.prototype.isQuadraticBezierCurve3=!0,Za.prototype.getPoint=function(e,t){var n=t||new Kt,r=this.v0,i=this.v1,o=this.v2;return n.set(Va(e,r.x,i.x,o.x),Va(e,r.y,i.y,o.y),Va(e,r.z,i.z,o.z)),n},Za.prototype.copy=function(e){return Ia.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Za.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Za.prototype.fromJSON=function(e){return Ia.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Ja.prototype=Object.create(Ia.prototype)).constructor=Ja,Ja.prototype.isSplineCurve=!0,Ja.prototype.getPoint=function(e,t){var n=t||new Yt,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Ga(a,s.x,u.x,l.x,c.x),Ga(a,s.y,u.y,l.y,c.y)),n},Ja.prototype.copy=function(e){Ia.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},Ja.prototype.toJSON=function(){var e=Ia.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},Ja.prototype.fromJSON=function(e){Ia.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Yt).fromArray(r))}return this};var Ka=Object.freeze({ArcCurve:Na,CatmullRomCurve3:za,CubicBezierCurve:Wa,CubicBezierCurve3:qa,EllipseCurve:ka,LineCurve:Xa,LineCurve3:Qa,QuadraticBezierCurve:Ya,QuadraticBezierCurve3:Za,SplineCurve:Ja});function $a(){Ia.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function es(e){$a.call(this),this.type="Path",this.currentPoint=new Yt,e&&this.setFromPoints(e)}function ts(e){es.call(this,e),this.uuid=Qt.generateUUID(),this.type="Shape",this.holes=[]}function ns(e,t){On.call(this),this.type="Light",this.color=new _n(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function rs(e,t,n){ns.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(On.DefaultUp),this.updateMatrix(),this.groundColor=new _n(t)}function is(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Yt(512,512),this.map=null,this.matrix=new Zt}function os(){is.call(this,new Oi(50,1,.5,500))}function as(e,t,n,r,i,o){ns.call(this,e,t),this.type="SpotLight",this.position.copy(On.DefaultUp),this.updateMatrix(),this.target=new On,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new os}function ss(e,t,n,r){ns.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new is(new Oi(90,1,.5,500))}function us(){is.call(this,new kn(-5,5,5,-5,.5,500))}function ls(e,t){ns.call(this,e,t),this.type="DirectionalLight",this.position.copy(On.DefaultUp),this.updateMatrix(),this.target=new On,this.shadow=new us}function cs(e,t){ns.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function hs(e,t,n,r){ns.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function fs(e,t,n,r){Es.call(this,e,t,n,r)}function ds(e,t,n){Es.call(this,e,t,n)}function ps(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ms(e,t,n,r){ps.call(this,e,t,n,r)}function vs(e,t,n,r){Es.call(this,e,t,n,r)}function gs(e,t,n,r){Es.call(this,e,t,n,r)}function ys(e,t,n,r){Es.call(this,e,t,n,r)}function bs(e,t,n,r){ps.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function _s(e,t,n,r){ps.call(this,e,t,n,r)}function xs(e,t,n,r){ps.call(this,e,t,n,r)}$a.prototype=Object.assign(Object.create(Ia.prototype),{constructor:$a,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Xa(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-i/a)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e),s=0;s<a.length;s++){var u=a[s];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ia.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ia.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Ia.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Ka[r.type]).fromJSON(r))}return this}}),es.prototype=Object.assign(Object.create($a.prototype),{constructor:es,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Xa(this.currentPoint.clone(),new Yt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Ya(this.currentPoint.clone(),new Yt(e,t),new Yt(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Wa(this.currentPoint.clone(),new Yt(e,t),new Yt(n,r),new Yt(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Ja([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new ka(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return $a.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=$a.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return $a.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ts.prototype=Object.assign(Object.create(es.prototype),{constructor:ts,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){es.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=es.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){es.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new es).fromJSON(r))}return this}}),ns.prototype=Object.assign(Object.create(On.prototype),{constructor:ns,isLight:!0,copy:function(e){return On.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=On.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),rs.prototype=Object.assign(Object.create(ns.prototype),{constructor:rs,isHemisphereLight:!0,copy:function(e){return ns.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(is.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),os.prototype=Object.assign(Object.create(is.prototype),{constructor:os,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Qt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),as.prototype=Object.assign(Object.create(ns.prototype),{constructor:as,isSpotLight:!0,copy:function(e){return ns.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ss.prototype=Object.assign(Object.create(ns.prototype),{constructor:ss,isPointLight:!0,copy:function(e){return ns.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),us.prototype=Object.assign(Object.create(is.prototype),{constructor:us}),ls.prototype=Object.assign(Object.create(ns.prototype),{constructor:ls,isDirectionalLight:!0,copy:function(e){return ns.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),cs.prototype=Object.assign(Object.create(ns.prototype),{constructor:cs,isAmbientLight:!0}),hs.prototype=Object.assign(Object.create(ns.prototype),{constructor:hs,isRectAreaLight:!0,copy:function(e){return ns.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ns.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),fs.prototype=Object.assign(Object.create(Es.prototype),{constructor:fs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ds.prototype=Object.assign(Object.create(Es.prototype),{constructor:ds,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ps.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ps.prototype,{beforeStart_:ps.prototype.copySampleValue_,afterEnd_:ps.prototype.copySampleValue_}),ms.prototype=Object.assign(Object.create(ps.prototype),{constructor:ms,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),l=s+a;s!==l;s+=4)Jt.slerpFlat(i,0,o,s-a,o,s,u);return i}}),vs.prototype=Object.assign(Object.create(Es.prototype),{constructor:vs,ValueTypeName:"quaternion",DefaultInterpolation:Ct,InterpolantFactoryMethodLinear:function(e){return new ms(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),gs.prototype=Object.assign(Object.create(Es.prototype),{constructor:gs,ValueTypeName:"color"}),ys.prototype=Object.assign(Object.create(Es.prototype),{constructor:ys,ValueTypeName:"number"}),bs.prototype=Object.assign(Object.create(ps.prototype),{constructor:bs,DefaultSettings_:{endingStart:Lt,endingEnd:Lt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Pt:i=e,a=2*t-n;break;case Ot:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Pt:o=e,s=2*n-t;break;case Ot:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}),_s.prototype=Object.assign(Object.create(ps.prototype),{constructor:_s,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),xs.prototype=Object.assign(Object.create(ps.prototype),{constructor:xs,interpolate_:function(e){return this.copySampleValue_(e-1)}});var ws={arraySlice:function(e,t,n){return ws.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function Es(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ws.convertArray(t,this.TimeBufferType),this.values=ws.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Ms(e,t,n,r){Es.call(this,e,t,n,r)}function Ts(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Qt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Ss(e){this.manager=void 0!==e?e:Ta,this.textures={}}function As(e){this.manager=void 0!==e?e:Ta}Object.assign(Es,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Es._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];ws.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:ws.convertArray(e.times,Array),values:ws.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ys;case"vector":case"vector2":case"vector3":case"vector4":return Ms;case"color":return gs;case"quaternion":return vs;case"bool":case"boolean":return ds;case"string":return fs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Es.prototype,{constructor:Es,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ct,InterpolantFactoryMethodDiscrete:function(e){return new xs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new _s(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new bs(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case At:t=this.InterpolantFactoryMethodDiscrete;break;case Ct:t=this.InterpolantFactoryMethodLinear;break;case Rt:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return At;case this.InterpolantFactoryMethodLinear:return Ct;case this.InterpolantFactoryMethodSmooth:return Rt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=ws.arraySlice(n,i,o),this.values=ws.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&ws.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Rt,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[p+f]}++i}}if(o>0){for(e[i]=e[o],p=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[p+f];++i}return i!==e.length&&(this.times=ws.arraySlice(e,0,i),this.values=ws.arraySlice(t,0,i*n)),this}}),Ms.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ms,ValueTypeName:"vector"}),Object.assign(Ts,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Es.parse(n[i]).scale(r));return new Ts(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(Es.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=ws.getKeyframeOrder(s);s=ws.sortedArray(s,1,l),u=ws.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ys(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new Ts(e,-1,o)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(Ts.CreateFromMorphTargetSequence(h,r[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];ws.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new ys(".morphTargetInfluence["+d+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(Ms,g+".position",l,"pos",r),n(vs,g+".quaternion",l,"rot",r),n(Ms,g+".scale",l,"scl",r)}}return 0===r.length?null:new Ts(i,o,r)}}),Object.assign(Ts.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Ss.prototype,{load:function(e,t,n,r){var i=this;new Aa(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new wa[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Yt).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(As.prototype,{load:function(e,t,n,r){var i=this;new Aa(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new $n,n=e.data.index;if(void 0!==n){var r=new Os[n.type](n.array);t.setIndex(new jn(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new Os[a.type](a.array),t.addAttribute(o,new jn(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var u=0,l=s.length;u!==l;++u){var c=s[u];t.addGroup(c.start,c.count,c.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var f=new Kt;void 0!==h.center&&f.fromArray(h.center),t.boundingSphere=new dn(f,h.radius)}return t}});var Cs,Rs,Ls,Ps,Os={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Is(){}Is.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n+1];if(t[n].test(e))return i}return null}},Object.assign(Is.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(Cs={NoBlending:k,NormalBlending:N,AdditiveBlending:D,SubtractiveBlending:F,MultiplyBlending:U,CustomBlending:B},Rs=new _n,Ls=new Oa,Ps=new Ss,function(e,t,n){var r={};function i(e,i,o,a,s){var u,l=t+e,c=Is.Handlers.get(l);null!==c?u=c.load(l):(Ls.setCrossOrigin(n),u=Ls.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=Se),1!==i[1]&&(u.wrapT=Se)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=Se),"mirror"===a[0]&&(u.wrapS=Ce),"repeat"===a[1]&&(u.wrapT=Se),"mirror"===a[1]&&(u.wrapT=Ce)),void 0!==s&&(u.anisotropy=s);var h=Qt.generateUUID();return r[h]=u,h}var o={uuid:Qt.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Cs[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=Rs.fromArray(s).getHex();break;case"colorSpecular":o.specular=Rs.fromArray(s).getHex();break;case"colorEmissive":o.emissive=Rs.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=A;break;case"doubleSided":o.side=C;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=I),"face"===s&&(o.vertexColors=O);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ps.setTextures(r),Ps.parse(o)})});var ks={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ns(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Ta,this.withCredentials=!1}function Ds(e){this.manager=void 0!==e?e:Ta,this.texturePath=""}Object.assign(Ns.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ks.extractUrlBase(e),a=new Aa(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,o);t(u.geometry,u.materials)},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0!==e.scale?1/e.scale:1;var n=new Bn;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,x,w,E,M,T,S,A,C=e.faces,R=e.vertices,L=e.normals,P=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(a=0,s=R.length;a<s;)(_=new Kt).x=R[a++]*O,_.y=R[a++]*O,_.z=R[a++]*O,t.vertices.push(_);for(a=0,s=C.length;a<s;)if(d=n(f=C[a++],0),p=n(f,1),m=n(f,3),v=n(f,4),g=n(f,5),y=n(f,6),b=n(f,7),d){if((w=new Nn).a=C[a],w.b=C[a+1],w.c=C[a+3],(E=new Nn).a=C[a+1],E.b=C[a+2],E.c=C[a+3],a+=4,p&&(h=C[a++],w.materialIndex=h,E.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)A=new Yt(S[2*(c=C[a++])],S[2*c+1]),2!==i&&t.faceVertexUvs[r][o].push(A),0!==i&&t.faceVertexUvs[r][o+1].push(A);if(v&&(l=3*C[a++],w.normal.set(L[l++],L[l++],L[l]),E.normal.copy(w.normal)),g)for(r=0;r<4;r++)l=3*C[a++],T=new Kt(L[l++],L[l++],L[l]),2!==r&&w.vertexNormals.push(T),0!==r&&E.vertexNormals.push(T);if(y&&(u=C[a++],w.color.setHex(M=P[u]),E.color.setHex(M)),b)for(r=0;r<4;r++)M=P[u=C[a++]],2!==r&&w.vertexColors.push(new _n(M)),0!==r&&E.vertexColors.push(new _n(M));t.faces.push(w),t.faces.push(E)}else{if((x=new Nn).a=C[a++],x.b=C[a++],x.c=C[a++],p&&(h=C[a++],x.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)A=new Yt(S[2*(c=C[a++])],S[2*c+1]),t.faceVertexUvs[r][o].push(A);if(v&&(l=3*C[a++],x.normal.set(L[l++],L[l++],L[l])),g)for(r=0;r<3;r++)l=3*C[a++],T=new Kt(L[l++],L[l++],L[l]),x.vertexNormals.push(T);if(y&&(u=C[a++],x.color.setHex(P[u])),b)for(r=0;r<3;r++)u=C[a++],x.vertexColors.push(new _n(P[u]));t.faces.push(x)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n)t.skinWeights.push(new un(e.skinWeights[r],n>1?e.skinWeights[r+1]:0,n>2?e.skinWeights[r+2]:0,n>3?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n)t.skinIndices.push(new un(e.skinIndices[r],n>1?e.skinIndices[r+1]:0,n>2?e.skinIndices[r+2]:0,n>3?e.skinIndices[r+3]:0));t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,u=a.length;s<u;s+=3){var l=new Kt;l.x=a[s]*n,l.y=a[s+1]*n,l.z=a[s+2]*n,o.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,h=e.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(h,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=Ts.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=Ts.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Is.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(Ds.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new Aa(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new ts).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Ns,i=new As,o=0,a=e.length;o<a;o++){var s,u=e[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new fa[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new fa[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new fa[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new fa[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new fa[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new fa[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new fa[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new fa[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new fa[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new fa[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new fa[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new fa[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=u.shapes.length;c<h;c++)l.push(t[u.shapes[c]]);s=new fa[u.type](l,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=u.shapes.length;c<h;c++)l.push(t[u.shapes[c]]);var f=u.options.extrudePath;void 0!==f&&(u.options.extrudePath=(new Ka[f.type]).fromJSON(f)),s=new fa[u.type](l,u.options);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Ss;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(r.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Ts.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new La(new Ma(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=l[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.texturePath+f;r[u.uuid].push(i(d))}}else d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url,r[u.uuid]=i(d)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new _r(t[s.image]):new sn(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Us)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Bs),a.wrapT=n(s.wrap[1],Bs)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,js)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,js)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Ui,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new _n(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Fi(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Di(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Oi(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new kn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new cs(e.color,e.intensity);break;case"DirectionalLight":r=new ls(e.color,e.intensity);break;case"PointLight":r=new ss(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new hs(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new as(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new rs(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Hi(a,s):new yr(a,s);break;case"LOD":r=new zi;break;case"Line":r=new qi(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Qi(i(e.geometry),o(e.material));break;case"LineSegments":r=new Xi(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Zi(i(e.geometry),o(e.material));break;case"Sprite":r=new ji(o(e.material));break;case"Group":r=new Pi;break;default:r=new On}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var f=c[h],d=r.getObjectByProperty("uuid",f.object);void 0!==d&&r.addLevel(d,f.distance)}return r}});var Fs,Us={UVMapping:ye,CubeReflectionMapping:be,CubeRefractionMapping:_e,EquirectangularReflectionMapping:xe,EquirectangularRefractionMapping:we,SphericalReflectionMapping:Ee,CubeUVReflectionMapping:Me,CubeUVRefractionMapping:Te},Bs={RepeatWrapping:Se,ClampToEdgeWrapping:Ae,MirroredRepeatWrapping:Ce},js={NearestFilter:Re,NearestMipMapNearestFilter:Le,NearestMipMapLinearFilter:Pe,LinearFilter:Oe,LinearMipMapNearestFilter:Ie,LinearMipMapLinearFilter:ke};function zs(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Ta,this.options=void 0}function Gs(){this.type="ShapePath",this.color=new _n,this.subPaths=[],this.currentPath=null}function Vs(e){this.type="Font",this.data=e}function Hs(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,l,c,h,f,d,p=new Gs;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(a,s);break;case"q":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,f=m[v++]*t+n,d=m[v++]*t+r,p.bezierCurveTo(c,h,f,d,u,l)}return{offsetX:o.ha*t,path:p}}}function Ws(e){this.manager=void 0!==e?e:Ta}zs.prototype={constructor:zs,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ea.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){Ea.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Gs.prototype,{moveTo:function(e,t){this.currentPath=new es,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new ts;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=zo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new ts).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!c&&p[v]&&v++,p[v]={s:new ts,p:h},p[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,_=[],x=0,w=p.length;x<w;x++)d[x]=[];for(x=0,w=p.length;x<w;x++)for(var E=m[x],M=0;M<E.length;M++){for(var T=E[M],S=!0,A=0;A<p.length;A++)r(T.p,p[A].p)&&(x!==A&&_.push({froms:x,tos:A,hole:M}),S?(S=!1,d[A].push(T)):b=!0);S&&d[x].push(T)}_.length>0&&(b||(m=d))}g=0;for(var C=p.length;g<C;g++){l.push(u=p[g].s);for(var R=0,L=(f=m[g]).length;R<L;R++)u.holes.push(f[R].h)}return l}}),Object.assign(Vs.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=Hs(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(Ws.prototype,{load:function(e,t,n,r){var i=this,o=new Aa(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Vs(e)},setPath:function(e){return this.path=e,this}});var qs,Xs,Qs,Ys,Zs,Js,Ks,$s,eu,tu,nu,ru,iu,ou,au,su,uu,lu,cu,hu,fu,du,pu,mu={getContext:function(){return void 0===Fs&&(Fs=new(window.AudioContext||window.webkitAudioContext)),Fs},setContext:function(e){Fs=e}};function vu(e){this.manager=void 0!==e?e:Ta}function gu(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Oi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Oi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function yu(e,t,n){On.call(this),this.type="CubeCamera";var r=new Oi(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Kt(1,0,0)),this.add(r);var i=new Oi(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Kt(-1,0,0)),this.add(i);var o=new Oi(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Kt(0,1,0)),this.add(o);var a=new Oi(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Kt(0,-1,0)),this.add(a);var s=new Oi(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Kt(0,0,1)),this.add(s);var u=new Oi(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Kt(0,0,-1)),this.add(u),this.renderTarget=new cn(n,n,{format:Qe,magFilter:Oe,minFilter:Oe}),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function bu(){On.call(this),this.type="AudioListener",this.context=mu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function _u(e){On.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function xu(e){_u.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function wu(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Eu(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Mu(e,t,n){var r=n||Tu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Tu(e,t,n){this.path=t,this.parsedPath=n||Tu.parseTrackName(t),this.node=Tu.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Su(){this.uuid=Qt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Au(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Lt,endingEnd:Lt},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Tt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Cu(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ru(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Lu(){$n.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Pu(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ou(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Iu(e,t,n){Ou.call(this,e,t),this.meshPerAttribute=n||1}function ku(e,t,n){jn.call(this,e,t),this.meshPerAttribute=n||1}function Nu(e,t,n,r){this.ray=new mr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Du(e,t){return e.distance-t.distance}function Fu(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Fu(i[o],t,n,!0)}function Uu(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Bu(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function ju(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function zu(e,t){this.min=void 0!==e?e:new Yt(1/0,1/0),this.max=void 0!==t?t:new Yt(-1/0,-1/0)}function Gu(e){On.call(this),this.material=e,this.render=function(){}}function Vu(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new $n,l=new Qn(2*a*3,3);u.addAttribute("position",l),Xi.call(this,u,new Wi({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Hu(e,t){On.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new $n,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Qn(r,3));var u=new Wi({fog:!1});this.cone=new Xi(n,u),this.add(this.cone),this.update()}function Wu(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new $n,r=[],i=[],o=new _n(0,0,1),a=new _n(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Qn(r,3)),n.addAttribute("color",new Qn(i,3));var l=new Wi({vertexColors:I,depthTest:!1,depthWrite:!1,transparent:!0});Xi.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function qu(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Jo(t,4,2),i=new dr({wireframe:!0,fog:!1});yr.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xu(e,t){On.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Wi({fog:!1}),r=new $n;r.addAttribute("position",new jn(new Float32Array(15),3)),this.line=new qi(r,n),this.add(this.line),this.update()}function Qu(e,t,n){On.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new uo(t);r.rotateY(.5*Math.PI),this.material=new dr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=I);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new jn(o,3)),this.add(new yr(r,this.material)),this.update()}function Yu(e,t,n,r){e=e||10,t=t||10,n=new _n(void 0!==n?n:4473924),r=new _n(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],l=0,c=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===i?n:r;f.toArray(u,c),f.toArray(u,c+=3),f.toArray(u,c+=3),f.toArray(u,c+=3),c+=3}var d=new $n;d.addAttribute("position",new Qn(s,3)),d.addAttribute("color",new Qn(u,3));var p=new Wi({vertexColors:I});Xi.call(this,d,p)}function Zu(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new _n(void 0!==i?i:4473924),o=new _n(void 0!==o?o:8947848);var a,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(a,0,s),p.push((f=1&l?i:o).r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:o,h=e-e/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new $n;m.addAttribute("position",new Qn(d,3)),m.addAttribute("color",new Qn(p,3));var v=new Wi({vertexColors:I});Xi.call(this,m,v)}function Ju(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new $n,l=new Qn(2*a*3,3);u.addAttribute("position",l),Xi.call(this,u,new Wi({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Ku(e,t,n){On.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new $n;r.addAttribute("position",new Qn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Wi({fog:!1});this.lightPlane=new qi(r,i),this.add(this.lightPlane),(r=new $n).addAttribute("position",new Qn([0,0,0,0,0,1],3)),this.targetLine=new qi(r,i),this.add(this.targetLine),this.update()}function $u(e){var t=new $n,n=new Wi({color:16777215,vertexColors:O}),r=[],i=[],o={},a=new _n(16755200),s=new _n(16711680),u=new _n(43775),l=new _n(16777215),c=new _n(3355443);function h(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.addAttribute("position",new Qn(r,3)),t.addAttribute("color",new Qn(i,3)),Xi.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function el(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new $n;i.setIndex(new jn(n,1)),i.addAttribute("position",new jn(r,3)),Xi.call(this,i,new Wi({color:t})),this.matrixAutoUpdate=!1,this.update()}function tl(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new $n;i.setIndex(new jn(r,1)),i.addAttribute("position",new Qn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Xi.call(this,i,new Wi({color:n})),this.geometry.computeBoundingSphere()}function nl(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new $n;i.addAttribute("position",new Qn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),qi.call(this,i,new Wi({color:r}));var o=new $n;o.addAttribute("position",new Qn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new yr(o,new dr({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function rl(e,t,n,r,i,o){On.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===hu&&((hu=new $n).addAttribute("position",new Qn([0,0,0,0,1,0],3)),(fu=new sa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new qi(hu,new Wi({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new yr(fu,new dr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function il(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new $n;n.addAttribute("position",new Qn(t,3)),n.addAttribute("color",new Qn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Wi({vertexColors:I});Xi.call(this,n,r)}function ol(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Nn(e,t,n,i,o,a)}Object.assign(vu.prototype,{load:function(e,t,n,r){var i=new Aa(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=e.slice(0);mu.getContext().decodeAudioData(n,function(e){t(e)})},n,r)}}),Object.assign(gu.prototype,{update:(eu=new Zt,tu=new Zt,function(e){if(qs!==this||Xs!==e.focus||Qs!==e.fov||Ys!==e.aspect*this.aspect||Zs!==e.near||Js!==e.far||Ks!==e.zoom||$s!==this.eyeSep){qs=this,Xs=e.focus,Qs=e.fov,Ys=e.aspect*this.aspect,Zs=e.near,Js=e.far,Ks=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=($s=this.eyeSep/2)*Zs/Xs,o=Zs*Math.tan(Qt.DEG2RAD*Qs*.5)/Ks;tu.elements[12]=-$s,eu.elements[12]=$s,r.elements[0]=2*Zs/((n=o*Ys+i)-(t=-o*Ys+i)),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*Zs/((n=o*Ys-i)-(t=-o*Ys-i)),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tu),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eu)})}),(yu.prototype=Object.create(On.prototype)).constructor=yu,bu.prototype=Object.assign(Object.create(On.prototype),{constructor:bu,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Kt,t=new Jt,n=new Kt,r=new Kt;return function(i){On.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),_u.prototype=Object.assign(Object.create(On.prototype),{constructor:_u,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),xu.prototype=Object.assign(Object.create(_u.prototype),{constructor:xu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new Kt,t=new Jt,n=new Kt,r=new Kt;return function(i){On.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(wu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Eu.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else this._mixBufferRegion(n,i,0,t/(o+=t),r);this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,i<1&&this._mixBufferRegion(n,r,3*t,1-i,t);for(var a=t,s=t+t;a!==s;++a)if(n[a]!==n[a+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Jt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}}),Object.assign(Mu.prototype,{getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Tu,{Composite:Mu,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Tu.Composite(e,t,n):new Tu(e,t,n)},sanitizeNodeName:(cu=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(cu,"")}),parseTrackName:(nu="[^\\[\\]\\.:\\/]",ru="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",iu=/((?:WC+[\/:])*)/.source.replace("WC",nu),ou=/(WCOD+)?/.source.replace("WCOD",ru),au=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nu),su=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nu),uu=new RegExp("^"+iu+ou+au+su+"$"),lu=["material","materials","bones"],function(e){var t=uu.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==lu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(Tu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Tu.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Tu.prototype,{_getValue_unbound:Tu.prototype.getValue,_setValue_unbound:Tu.prototype.setValue}),Object.assign(Su.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=r[f];if(void 0===d){d=t++,r[f]=d,e.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Tu(h,i[p],o[p]))}else if(d<n){u=e[d];var v=--n,g=e[v];for(r[g.uuid]=d,e[d]=g,r[f]=v,e[v]=h,p=0,m=s;p!==m;++p){var y=a[p],b=y[d];y[d]=y[v],void 0===b&&(b=new Tu(h,i[p],o[p])),y[v]=b}}else e[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=t){var c=t++,h=e[c];n[h.uuid]=l,e[l]=h,n[u]=c,e[c]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[l];p[l]=p[c],p[c]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,l=r[u];if(void 0!==l)if(delete r[u],l<n){var c=--n,h=e[c],f=e[v=--t];r[h.uuid]=l,e[l]=h,r[f.uuid]=c,e[c]=f,e.pop();for(var d=0,p=o;d!==p;++d){var m=(g=i[d])[v];g[l]=g[c],g[c]=m,g.pop()}}else{var v;for(r[(f=e[v=--t]).uuid]=l,e[l]=f,e.pop(),d=0,p=o;d!==p;++d){var g;(g=i[d])[l]=g[v],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[e]=r=i.length,o.push(e),a.push(t),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new Tu(s[c],e,t);return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Au.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=r/i;e.warp(1,i/r,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===Mt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===St;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Pt,r.endingEnd=Pt):(r.endingStart=e?this.zeroSlopeAtStart?Pt:Lt:Ot,r.endingEnd=t?this.zeroSlopeAtEnd?Pt:Lt:Ot)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Cu.prototype=Object.assign(Object.create(r.prototype),{constructor:Cu,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new Eu(Tu.create(n,f,t&&t._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(r[t]=i={}),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i];e:{for(var l in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new _s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Ts.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new Au(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Ts.findByName(n,e):e,o=this._actionsByClip[i?i.uuid:e];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ru.prototype.clone=function(){return new Ru(void 0===this.value.clone?this.value:this.value.clone())},Lu.prototype=Object.assign(Object.create($n.prototype),{constructor:Lu,isInstancedBufferGeometry:!0,copy:function(e){return $n.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Pu.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Pu.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Object.defineProperty(Ou.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ou.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Iu.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Iu,isInstancedInterleavedBuffer:!0,copy:function(e){return Ou.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),ku.prototype=Object.assign(Object.create(jn.prototype),{constructor:ku,isInstancedBufferAttribute:!0,copy:function(e){return jn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Nu.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Fu(e,this,r,t),r.sort(Du),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Fu(e[i],this,r,t);return r.sort(Du),r}}),Object.assign(Uu.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Bu.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Qt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(ju.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(zu.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Yt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Yt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Yt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Yt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Yt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Yt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),(Gu.prototype=Object.create(On.prototype)).constructor=Gu,Gu.prototype.isImmediateRenderObject=!0,(Vu.prototype=Object.create(Xi.prototype)).constructor=Vu,Vu.prototype.update=function(){var e=new Kt,t=new Kt,n=new $t;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=f.vertexNormals[d];e.copy(s[f[r[d]]]).applyMatrix4(i),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,g=a.attributes.normal;for(l=0,d=0,p=v.count;d<p;d++)e.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),t.set(g.getX(d),g.getY(d),g.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}o.needsUpdate=!0}}(),(Hu.prototype=Object.create(On.prototype)).constructor=Hu,Hu.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hu.prototype.update=function(){var e=new Kt,t=new Kt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(Wu.prototype=Object.create(Xi.prototype)).constructor=Wu,Wu.prototype.updateMatrixWorld=function(){var e=new Kt,t=new Zt,n=new Zt;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u+1,e.x,e.y,e.z),u+=2)}o.getAttribute("position").needsUpdate=!0,On.prototype.updateMatrixWorld.call(this,r)}}(),(qu.prototype=Object.create(yr.prototype)).constructor=qu,qu.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qu.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(Xu.prototype=Object.create(On.prototype)).constructor=Xu,Xu.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Xu.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(Qu.prototype=Object.create(On.prototype)).constructor=Qu,Qu.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Qu.prototype.update=function(){var e=new Kt,t=new _n,n=new _n;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(Yu.prototype=Object.create(Xi.prototype)).constructor=Yu,(Zu.prototype=Object.create(Xi.prototype)).constructor=Zu,(Ju.prototype=Object.create(Xi.prototype)).constructor=Ju,Ju.prototype.update=function(){var e=new Kt,t=new Kt,n=new $t;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),i.setXYZ(u+=1,t.x,t.y,t.z),u+=1}i.needsUpdate=!0}}(),(Ku.prototype=Object.create(On.prototype)).constructor=Ku,Ku.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ku.prototype.update=function(){var e=new Kt,t=new Kt,n=new Kt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),($u.prototype=Object.create(Xi.prototype)).constructor=$u,$u.prototype.update=function(){var e,t,n=new Kt,r=new In;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=t[i];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),(el.prototype=Object.create(Xi.prototype)).constructor=el,el.prototype.update=function(){var e=new fn;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),el.prototype.setFromObject=function(e){return this.object=e,this.update(),this},(tl.prototype=Object.create(Xi.prototype)).constructor=tl,tl.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),On.prototype.updateMatrixWorld.call(this,e))},(nl.prototype=Object.create(qi.prototype)).constructor=nl,nl.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?A:S,this.lookAt(this.plane.normal),On.prototype.updateMatrixWorld.call(this,e)},(rl.prototype=Object.create(On.prototype)).constructor=rl,rl.prototype.setDirection=(pu=new Kt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(pu.set(e.z,0,-e.x).normalize(),du=Math.acos(e.y),this.quaternion.setFromAxisAngle(pu,du))}),rl.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},rl.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(il.prototype=Object.create(Xi.prototype)).constructor=il;var al=0,sl=1;function ul(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function ll(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function cl(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Zi(e,t)}function hl(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ji(e)}function fl(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Zi(e,t)}function dl(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Yi(e)}function pl(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Yi(e)}function ml(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Yi(e)}function vl(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Kt(e,t,n)}function gl(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new jn(e,t).setDynamic(!0)}function yl(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new zn(e,t)}function bl(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Gn(e,t)}function _l(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Vn(e,t)}function xl(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Hn(e,t)}function wl(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Wn(e,t)}function El(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new qn(e,t)}function Ml(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Xn(e,t)}function Tl(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Qn(e,t)}function Sl(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Yn(e,t)}function Al(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),za.call(this,e),this.type="catmullrom",this.closed=!0}function Cl(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),za.call(this,e),this.type="catmullrom"}function Rl(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),za.call(this,e),this.type="catmullrom"}function Ll(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new il(e)}function Pl(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new el(e,t)}function Ol(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Xi(new oa(e.geometry),new Wi({color:void 0!==t?t:16777215}))}function Il(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Xi(new eo(e.geometry),new Wi({color:void 0!==t?t:16777215}))}function kl(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Aa(e)}function Nl(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ra(e)}Ia.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ia.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign($a.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Bn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Kt(i.x,i.y,i.z||0))}return t}}),Object.assign(es.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Al.prototype=Object.create(za.prototype),Cl.prototype=Object.create(za.prototype),Rl.prototype=Object.create(za.prototype),Object.assign(Rl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Yu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Is.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ks.extractUrlBase(e)}}),Object.assign(zu.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(fn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),vr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Qt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Qt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Qt.ceilPowerOfTwo(e)}}),Object.assign($t.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Zt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Kt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),pn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Jt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(mr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(gr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(gr,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),gr.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),gr.getNormal(e,t,n,r)}}),Object.assign(ts.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ho(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new na(this,e)}}),Object.assign(Yt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Kt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(un.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Bn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(On.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(On.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(zi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Gi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ia.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Oi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ns.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(jn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign($n.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties($n.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Wo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ru.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(fr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _n}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===R}}}),Object.defineProperties(ga.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(pr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ni.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ni.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ci.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ln.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ki.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),_u.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new vu).load(e,function(e){t.setBuffer(e)}),this},wu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},yu.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Dl={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Fl={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Oa;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Pa;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Ul(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Bl(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var jl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function zl(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},CWBI:function(e,t,n){e.exports=n("sZro")},CcnG:function(e,t,n){"use strict";n.r(t),(function(e){n.d(t,"\u0275angular_packages_core_core_l",function(){return Wr}),n.d(t,"\u0275angular_packages_core_core_i",function(){return Gr}),n.d(t,"\u0275angular_packages_core_core_j",function(){return Vr}),n.d(t,"\u0275angular_packages_core_core_k",function(){return Hr}),n.d(t,"\u0275angular_packages_core_core_f",function(){return Lt}),n.d(t,"\u0275angular_packages_core_core_g",function(){return wr}),n.d(t,"\u0275angular_packages_core_core_h",function(){return Rr}),n.d(t,"\u0275angular_packages_core_core_c",function(){return ft}),n.d(t,"\u0275angular_packages_core_core_d",function(){return tt}),n.d(t,"\u0275angular_packages_core_core_e",function(){return at}),n.d(t,"\u0275angular_packages_core_core_m",function(){return sn}),n.d(t,"\u0275angular_packages_core_core_o",function(){return nn}),n.d(t,"\u0275angular_packages_core_core_n",function(){return tn}),n.d(t,"\u0275angular_packages_core_core_r",function(){return an}),n.d(t,"\u0275angular_packages_core_core_p",function(){return rn}),n.d(t,"\u0275angular_packages_core_core_q",function(){return on}),n.d(t,"\u0275angular_packages_core_core_v",function(){return Wf}),n.d(t,"\u0275angular_packages_core_core_y",function(){return $f}),n.d(t,"\u0275angular_packages_core_core_x",function(){return Jf}),n.d(t,"\u0275angular_packages_core_core_w",function(){return qf}),n.d(t,"\u0275angular_packages_core_core_u",function(){return Df}),n.d(t,"\u0275angular_packages_core_core_z",function(){return td}),n.d(t,"\u0275angular_packages_core_core_ba",function(){return Yh}),n.d(t,"\u0275angular_packages_core_core_bb",function(){return Wu}),n.d(t,"\u0275angular_packages_core_core_a",function(){return g}),n.d(t,"\u0275angular_packages_core_core_b",function(){return y}),n.d(t,"\u0275angular_packages_core_core_s",function(){return ma}),n.d(t,"\u0275angular_packages_core_core_t",function(){return Ri}),n.d(t,"createPlatform",function(){return On}),n.d(t,"assertPlatform",function(){return kn}),n.d(t,"destroyPlatform",function(){return Nn}),n.d(t,"getPlatform",function(){return Dn}),n.d(t,"PlatformRef",function(){return Fn}),n.d(t,"ApplicationRef",function(){return Bn}),n.d(t,"enableProdMode",function(){return Rn}),n.d(t,"isDevMode",function(){return Ln}),n.d(t,"createPlatformFactory",function(){return In}),n.d(t,"NgProbeToken",function(){return Pn}),n.d(t,"APP_ID",function(){return Rt}),n.d(t,"PACKAGE_ROOT_URL",function(){return Dt}),n.d(t,"PLATFORM_INITIALIZER",function(){return It}),n.d(t,"PLATFORM_ID",function(){return kt}),n.d(t,"APP_BOOTSTRAP_LISTENER",function(){return Nt}),n.d(t,"APP_INITIALIZER",function(){return At}),n.d(t,"ApplicationInitStatus",function(){return Ct}),n.d(t,"DebugElement",function(){return cr}),n.d(t,"DebugNode",function(){return lr}),n.d(t,"asNativeElements",function(){return hr}),n.d(t,"getDebugNode",function(){return mr}),n.d(t,"Testability",function(){return xn}),n.d(t,"TestabilityRegistry",function(){return wn}),n.d(t,"setTestabilityGetter",function(){return En}),n.d(t,"TRANSLATIONS",function(){return Br}),n.d(t,"TRANSLATIONS_FORMAT",function(){return jr}),n.d(t,"LOCALE_ID",function(){return Ur}),n.d(t,"MissingTranslationStrategy",function(){return zr}),n.d(t,"ApplicationModule",function(){return qr}),n.d(t,"wtfCreateScope",function(){return ln}),n.d(t,"wtfLeave",function(){return cn}),n.d(t,"wtfStartTimeRange",function(){return hn}),n.d(t,"wtfEndTimeRange",function(){return fn}),n.d(t,"Type",function(){return F}),n.d(t,"EventEmitter",function(){return dn}),n.d(t,"ErrorHandler",function(){return Xe}),n.d(t,"Sanitizer",function(){return xi}),n.d(t,"SecurityContext",function(){return _i}),n.d(t,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return b}),n.d(t,"Attribute",function(){return _}),n.d(t,"ContentChild",function(){return E}),n.d(t,"ContentChildren",function(){return w}),n.d(t,"Query",function(){return x}),n.d(t,"ViewChild",function(){return T}),n.d(t,"ViewChildren",function(){return M}),n.d(t,"Component",function(){return P}),n.d(t,"Directive",function(){return L}),n.d(t,"HostBinding",function(){return N}),n.d(t,"HostListener",function(){return D}),n.d(t,"Input",function(){return I}),n.d(t,"Output",function(){return k}),n.d(t,"Pipe",function(){return O}),n.d(t,"CUSTOM_ELEMENTS_SCHEMA",function(){return Ne}),n.d(t,"NO_ERRORS_SCHEMA",function(){return De}),n.d(t,"NgModule",function(){return Fe}),n.d(t,"ViewEncapsulation",function(){return Ue}),n.d(t,"Version",function(){return Be}),n.d(t,"VERSION",function(){return je}),n.d(t,"defineInjectable",function(){return l}),n.d(t,"defineInjector",function(){return c}),n.d(t,"forwardRef",function(){return ee}),n.d(t,"resolveForwardRef",function(){return te}),n.d(t,"Injectable",function(){return ke}),n.d(t,"inject",function(){return Ce}),n.d(t,"INJECTOR",function(){return ce}),n.d(t,"Injector",function(){return fe}),n.d(t,"ReflectiveInjector",function(){return ht}),n.d(t,"createInjector",function(){return bt}),n.d(t,"ResolvedReflectiveFactory",function(){return it}),n.d(t,"ReflectiveKey",function(){return Ke}),n.d(t,"InjectionToken",function(){return h}),n.d(t,"Inject",function(){return ne}),n.d(t,"Optional",function(){return re}),n.d(t,"Self",function(){return ie}),n.d(t,"SkipSelf",function(){return oe}),n.d(t,"Host",function(){return ae}),n.d(t,"NgZone",function(){return pn}),n.d(t,"\u0275NoopNgZone",function(){return _n}),n.d(t,"RenderComponentType",function(){return zn}),n.d(t,"Renderer",function(){return Vn}),n.d(t,"Renderer2",function(){return Xn}),n.d(t,"RendererFactory2",function(){return Wn}),n.d(t,"RendererStyleFlags2",function(){return qn}),n.d(t,"RootRenderer",function(){return Hn}),n.d(t,"COMPILER_OPTIONS",function(){return zt}),n.d(t,"Compiler",function(){return jt}),n.d(t,"CompilerFactory",function(){return Gt}),n.d(t,"ModuleWithComponentFactories",function(){return Ut}),n.d(t,"ComponentFactory",function(){return Ht}),n.d(t,"ComponentRef",function(){return Vt}),n.d(t,"ComponentFactoryResolver",function(){return Zt}),n.d(t,"ElementRef",function(){return Qn}),n.d(t,"NgModuleFactory",function(){return en}),n.d(t,"NgModuleRef",function(){return $t}),n.d(t,"NgModuleFactoryLoader",function(){return Yn}),n.d(t,"getModuleFactory",function(){return Kn}),n.d(t,"QueryList",function(){return $n}),n.d(t,"SystemJsNgModuleLoader",function(){return nr}),n.d(t,"SystemJsNgModuleLoaderConfig",function(){return er}),n.d(t,"TemplateRef",function(){return ir}),n.d(t,"ViewContainerRef",function(){return or}),n.d(t,"EmbeddedViewRef",function(){return ur}),n.d(t,"ViewRef",function(){return sr}),n.d(t,"ChangeDetectionStrategy",function(){return S}),n.d(t,"ChangeDetectorRef",function(){return ar}),n.d(t,"DefaultIterableDiffer",function(){return Mr}),n.d(t,"IterableDiffers",function(){return Or}),n.d(t,"KeyValueDiffers",function(){return Ir}),n.d(t,"SimpleChange",function(){return br}),n.d(t,"WrappedValue",function(){return yr}),n.d(t,"platformCore",function(){return Fr}),n.d(t,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return Cn}),n.d(t,"\u0275APP_ID_RANDOM_PROVIDER",function(){return Pt}),n.d(t,"\u0275defaultIterableDiffers",function(){return Nr}),n.d(t,"\u0275defaultKeyValueDiffers",function(){return Dr}),n.d(t,"\u0275devModeEqual",function(){return gr}),n.d(t,"\u0275isListLikeIterable",function(){return _r}),n.d(t,"\u0275ChangeDetectorStatus",function(){return A}),n.d(t,"\u0275isDefaultChangeDetectionStrategy",function(){return C}),n.d(t,"\u0275Console",function(){return Ft}),n.d(t,"\u0275inject",function(){return Ce}),n.d(t,"\u0275setCurrentInjector",function(){return Ae}),n.d(t,"\u0275APP_ROOT",function(){return dt}),n.d(t,"\u0275ivyEnabled",function(){return R}),n.d(t,"\u0275ComponentFactory",function(){return Ht}),n.d(t,"\u0275CodegenComponentFactoryResolver",function(){return Jt}),n.d(t,"\u0275resolveComponentResources",function(){return Xr}),n.d(t,"\u0275ReflectionCapabilities",function(){return J}),n.d(t,"\u0275RenderDebugInfo",function(){return Gn}),n.d(t,"\u0275_sanitizeHtml",function(){return mi}),n.d(t,"\u0275_sanitizeStyle",function(){return bi}),n.d(t,"\u0275_sanitizeUrl",function(){return $r}),n.d(t,"\u0275global",function(){return z}),n.d(t,"\u0275looseIdentical",function(){return q}),n.d(t,"\u0275stringify",function(){return X}),n.d(t,"\u0275makeDecorator",function(){return m}),n.d(t,"\u0275isObservable",function(){return St}),n.d(t,"\u0275isPromise",function(){return Tt}),n.d(t,"\u0275clearOverrides",function(){return $s}),n.d(t,"\u0275initServicesIfNeeded",function(){return fs}),n.d(t,"\u0275overrideComponentView",function(){return Ks}),n.d(t,"\u0275overrideProvider",function(){return Js}),n.d(t,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return wa}),n.d(t,"\u0275defineComponent",function(){return df}),n.d(t,"\u0275defineDirective",function(){return bf}),n.d(t,"\u0275definePipe",function(){return _f}),n.d(t,"\u0275defineNgModule",function(){return vf}),n.d(t,"\u0275detectChanges",function(){return Th}),n.d(t,"\u0275renderComponent",function(){return cf}),n.d(t,"\u0275directiveInject",function(){return Bf}),n.d(t,"\u0275injectElementRef",function(){return jf}),n.d(t,"\u0275injectTemplateRef",function(){return zf}),n.d(t,"\u0275injectViewContainerRef",function(){return Gf}),n.d(t,"\u0275injectChangeDetectorRef",function(){return Vf}),n.d(t,"\u0275injectAttribute",function(){return Hf}),n.d(t,"\u0275PublicFeature",function(){return rd}),n.d(t,"\u0275InheritDefinitionFeature",function(){return wf}),n.d(t,"\u0275NgOnChangesFeature",function(){return Mf}),n.d(t,"\u0275markDirty",function(){return Ah}),n.d(t,"\u0275NgModuleFactory",function(){return _d}),n.d(t,"\u0275NC",function(){return Ch}),n.d(t,"\u0275C",function(){return hh}),n.d(t,"\u0275E",function(){return Ic}),n.d(t,"\u0275NH",function(){return Pc}),n.d(t,"\u0275NM",function(){return Lc}),n.d(t,"\u0275NS",function(){return Rc}),n.d(t,"\u0275Ee",function(){return Oc}),n.d(t,"\u0275L",function(){return qc}),n.d(t,"\u0275T",function(){return ah}),n.d(t,"\u0275V",function(){return ph}),n.d(t,"\u0275Q",function(){return qd}),n.d(t,"\u0275Qr",function(){return ef}),n.d(t,"\u0275d",function(){return Hh}),n.d(t,"\u0275P",function(){return _h}),n.d(t,"\u0275b",function(){return Lh}),n.d(t,"\u0275i1",function(){return Nh}),n.d(t,"\u0275i2",function(){return Dh}),n.d(t,"\u0275i3",function(){return Fh}),n.d(t,"\u0275i4",function(){return Uh}),n.d(t,"\u0275i5",function(){return Bh}),n.d(t,"\u0275i6",function(){return jh}),n.d(t,"\u0275i7",function(){return zh}),n.d(t,"\u0275i8",function(){return Gh}),n.d(t,"\u0275iV",function(){return kh}),n.d(t,"\u0275pb1",function(){return Od}),n.d(t,"\u0275pb2",function(){return Id}),n.d(t,"\u0275pb3",function(){return kd}),n.d(t,"\u0275pb4",function(){return Nd}),n.d(t,"\u0275pbV",function(){return Dd}),n.d(t,"\u0275f0",function(){return xd}),n.d(t,"\u0275f1",function(){return wd}),n.d(t,"\u0275f2",function(){return Ed}),n.d(t,"\u0275f3",function(){return Md}),n.d(t,"\u0275f4",function(){return Td}),n.d(t,"\u0275f5",function(){return Sd}),n.d(t,"\u0275f6",function(){return Ad}),n.d(t,"\u0275f7",function(){return Cd}),n.d(t,"\u0275f8",function(){return Rd}),n.d(t,"\u0275fV",function(){return Ld}),n.d(t,"\u0275cR",function(){return fh}),n.d(t,"\u0275cr",function(){return dh}),n.d(t,"\u0275qR",function(){return Xd}),n.d(t,"\u0275ql",function(){return Wh}),n.d(t,"\u0275e",function(){return Yc}),n.d(t,"\u0275p",function(){return Jc}),n.d(t,"\u0275pD",function(){return yh}),n.d(t,"\u0275rS",function(){return Ph}),n.d(t,"\u0275a",function(){return Zc}),n.d(t,"\u0275s",function(){return th}),n.d(t,"\u0275sm",function(){return oh}),n.d(t,"\u0275sp",function(){return ih}),n.d(t,"\u0275sa",function(){return rh}),n.d(t,"\u0275cp",function(){return eh}),n.d(t,"\u0275t",function(){return sh}),n.d(t,"\u0275v",function(){return mh}),n.d(t,"\u0275st",function(){return Vh}),n.d(t,"\u0275ld",function(){return qh}),n.d(t,"\u0275Pp",function(){return Pd}),n.d(t,"\u0275whenRendered",function(){return ff}),n.d(t,"\u0275iA",function(){return sd}),n.d(t,"\u0275iEM",function(){return ud}),n.d(t,"\u0275iI1",function(){return ld}),n.d(t,"\u0275iI2",function(){return cd}),n.d(t,"\u0275iI3",function(){return hd}),n.d(t,"\u0275iI4",function(){return fd}),n.d(t,"\u0275iI5",function(){return dd}),n.d(t,"\u0275iI6",function(){return pd}),n.d(t,"\u0275iI7",function(){return md}),n.d(t,"\u0275iI8",function(){return vd}),n.d(t,"\u0275IV",function(){return gd}),n.d(t,"\u0275iM",function(){return od}),n.d(t,"\u0275sanitizeHtml",function(){return np}),n.d(t,"\u0275sanitizeStyle",function(){return rp}),n.d(t,"\u0275sanitizeUrl",function(){return ip}),n.d(t,"\u0275sanitizeResourceUrl",function(){return op}),n.d(t,"\u0275bypassSanitizationTrustHtml",function(){return Zd}),n.d(t,"\u0275bypassSanitizationTrustStyle",function(){return Jd}),n.d(t,"\u0275bypassSanitizationTrustScript",function(){return Kd}),n.d(t,"\u0275bypassSanitizationTrustUrl",function(){return $d}),n.d(t,"\u0275bypassSanitizationTrustResourceUrl",function(){return ep}),n.d(t,"\u0275registerModuleFactory",function(){return Jn}),n.d(t,"\u0275EMPTY_ARRAY",function(){return bo}),n.d(t,"\u0275EMPTY_MAP",function(){return _o}),n.d(t,"\u0275and",function(){return xo}),n.d(t,"\u0275ccf",function(){return zo}),n.d(t,"\u0275cmf",function(){return eu}),n.d(t,"\u0275crt",function(){return ji}),n.d(t,"\u0275did",function(){return fa}),n.d(t,"\u0275eld",function(){return wo}),n.d(t,"\u0275elementEventFullName",function(){return Ki}),n.d(t,"\u0275getComponentViewDefinitionFactory",function(){return Go}),n.d(t,"\u0275inlineInterpolate",function(){return go}),n.d(t,"\u0275interpolate",function(){return vo}),n.d(t,"\u0275mod",function(){return Oo}),n.d(t,"\u0275mpd",function(){return Po}),n.d(t,"\u0275ncd",function(){return ka}),n.d(t,"\u0275nov",function(){return $o}),n.d(t,"\u0275pid",function(){return da}),n.d(t,"\u0275prd",function(){return pa}),n.d(t,"\u0275pad",function(){return Fa}),n.d(t,"\u0275pod",function(){return Ua}),n.d(t,"\u0275ppd",function(){return Da}),n.d(t,"\u0275qud",function(){return Ra}),n.d(t,"\u0275ted",function(){return ja}),n.d(t,"\u0275unv",function(){return Fi}),n.d(t,"\u0275vid",function(){return Va});var r=n("mrSG"),i=n("pugT"),o=n("K9Ia"),a=n("6blF"),s=n("p0ib"),u=n("S1nX");function l(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function c(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}var h=function(){function e(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?l({providedIn:t.providedIn||"root",factory:t.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),f="__annotations__",d="__parameters__",p="__prop__metadata__";function m(e,t,n,i,o){var a=v(t);function s(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof s)return a.call.apply(a,Object(r.__spread)([this],t)),this;var u=new((e=s).bind.apply(e,Object(r.__spread)([void 0],t))),l=function(e){return o&&o.apply(void 0,Object(r.__spread)([e],t)),(e.hasOwnProperty(f)?e[f]:Object.defineProperty(e,f,{value:[]})[f]).push(u),e};return i&&i(l),l}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}function v(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var i=e.apply(void 0,Object(r.__spread)(t));for(var o in i)this[o]=i[o]}}}function g(e,t,n){var i=v(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return i.apply(this,t),this;var a=new((e=o).bind.apply(e,Object(r.__spread)([void 0],t)));return s.annotation=a,s;function s(e,t,n){for(var r=e.hasOwnProperty(d)?e[d]:Object.defineProperty(e,d,{value:[]})[d];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}function y(e,t,n){var i=v(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return i.apply(this,t),this;var a=new((e=o).bind.apply(e,Object(r.__spread)([void 0],t)));return function(e,t){var n=e.constructor,r=n.hasOwnProperty(p)?n[p]:Object.defineProperty(n,p,{value:{}})[p];r[t]=r.hasOwnProperty(t)&&r[t]||[],r[t].unshift(a)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}var b=new h("AnalyzeForEntryComponents"),_=g("Attribute",function(e){return{attributeName:e}}),x=function(){},w=y("ContentChildren",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)},x),E=y("ContentChild",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)},x),M=y("ViewChildren",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)},x),T=y("ViewChild",function(e,t){return Object(r.__assign)({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)},x),S=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),A=function(e){return e[e.CheckOnce=0]="CheckOnce",e[e.Checked=1]="Checked",e[e.CheckAlways=2]="CheckAlways",e[e.Detached=3]="Detached",e[e.Errored=4]="Errored",e[e.Destroyed=5]="Destroyed",e}({});function C(e){return null==e||e===S.Default}var R=!1,L=m("Directive",function(e){return void 0===e&&(e={}),e},void 0,void 0,function(e,t){}),P=m("Component",function(e){return void 0===e&&(e={}),Object(r.__assign)({changeDetection:S.Default},e)},L,void 0,function(e,t){}),O=m("Pipe",function(e){return Object(r.__assign)({pure:!0},e)},void 0,void 0,function(e,t){}),I=y("Input",function(e){return{bindingPropertyName:e}}),k=y("Output",function(e){return{bindingPropertyName:e}}),N=y("HostBinding",function(e){return{hostPropertyName:e}}),D=y("HostListener",function(e,t){return{eventName:e,args:t}}),F=Function;function U(e){return"function"==typeof e}var B="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,z=void 0!==e&&e||B||j,G=Promise.resolve(0),V=null;function H(){if(!V){var e=z.Symbol;if(e&&e.iterator)V=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(V=r)}}return V}function W(e){"undefined"==typeof Zone?G.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function q(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function X(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(X).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var Q=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Y=/^class\s+[A-Za-z\d$_]*\s*extends\s+[A-Za-z\d$_]+\s*{/,Z=/^class\s+[A-Za-z\d$_]*\s*extends\s+[A-Za-z\d$_]+\s*{[\s\S]*constructor\s*\(/,J=function(){function e(e){this._reflect=e||z.Reflect}return e.prototype.isReflectionEnabled=function(){return!0},e.prototype.factory=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,Object(r.__spread)([void 0],t)))}},e.prototype._zipTypesAndAnnotations=function(e,t){var n;n=void 0===e?new Array(t.length):new Array(e.length);for(var r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n},e.prototype._ownParameters=function(e,t){var n=e.toString();if(Q.exec(n)||Y.exec(n)&&!Z.exec(n))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;var r=e.ctorParameters;if(r&&r!==t.ctorParameters){var i="function"==typeof r?r():r,o=i.map(function(e){return e&&e.type}),a=i.map(function(e){return e&&K(e.decorators)});return this._zipTypesAndAnnotations(o,a)}var s=e.hasOwnProperty(d)&&e[d],u=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return u||s?this._zipTypesAndAnnotations(u,s):new Array(e.length).fill(void 0)},e.prototype.parameters=function(e){if(!U(e))return[];var t=$(e),n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]},e.prototype._ownAnnotations=function(e,t){if(e.annotations&&e.annotations!==t.annotations){var n=e.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return e.decorators&&e.decorators!==t.decorators?K(e.decorators):e.hasOwnProperty(f)?e[f]:null},e.prototype.annotations=function(e){if(!U(e))return[];var t=$(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)},e.prototype._ownPropMetadata=function(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){var n=e.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(e.propDecorators&&e.propDecorators!==t.propDecorators){var r=e.propDecorators,i={};return Object.keys(r).forEach(function(e){i[e]=K(r[e])}),i}return e.hasOwnProperty(p)?e[p]:null},e.prototype.propMetadata=function(e){if(!U(e))return{};var t=$(e),n={};if(t!==Object){var i=this.propMetadata(t);Object.keys(i).forEach(function(e){n[e]=i[e]})}var o=this._ownPropMetadata(e,t);return o&&Object.keys(o).forEach(function(e){var t=[];n.hasOwnProperty(e)&&t.push.apply(t,Object(r.__spread)(n[e])),t.push.apply(t,Object(r.__spread)(o[e])),n[e]=t}),n},e.prototype.hasLifecycleHook=function(e,t){return e instanceof F&&t in e.prototype},e.prototype.guards=function(e){return{}},e.prototype.getter=function(e){return new Function("o","return o."+e+";")},e.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},e.prototype.method=function(e){return new Function("o","args","if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);")},e.prototype.importUri=function(e){return"object"==typeof e&&e.filePath?e.filePath:"./"+X(e)},e.prototype.resourceUri=function(e){return"./"+X(e)},e.prototype.resolveIdentifier=function(e,t,n,r){return r},e.prototype.resolveEnum=function(e,t){return e[t]},e}();function K(e){return e?e.map(function(e){var t=e.type.annotationCls,n=e.args?e.args:[];return new(t.bind.apply(t,Object(r.__spread)([void 0],n)))}):[]}function $(e){var t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}function ee(e){return e.__forward_ref__=ee,e.toString=function(){return X(this())},e}function te(e){return"function"==typeof e&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===ee?e():e}var ne=g("Inject",function(e){return{token:e}}),re=g("Optional"),ie=g("Self"),oe=g("SkipSelf"),ae=g("Host"),se="__source",ue=new Object,le=ue,ce=new h("INJECTOR"),he=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=ue),t===ue)throw new Error("NullInjectorError: No provider for "+X(e)+"!");return t},e}(),fe=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?new we(e,t):new we(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=ue,e.NULL=new he,e.ngInjectableDef=l({providedIn:"any",factory:function(){return Ce(ce)}}),e}(),de=function(e){return e},pe=[],me=de,ve=function(){return Array.prototype.slice.call(arguments)},ge={},ye=function(e){for(var t in e)if(e[t]===ge)return t;throw Error("!prop")}({provide:String,useValue:ge}),be=fe.NULL,_e=/\n/gm,xe="\u0275",we=function(){function e(e,t,n){void 0===t&&(t=be),void 0===n&&(n=null),this.parent=t,this.source=n;var r=this._records=new Map;r.set(fe,{token:fe,fn:de,deps:pe,value:this,useNew:!1}),r.set(ce,{token:ce,fn:de,deps:pe,value:this,useNew:!1}),function e(t,n){if(n)if((n=te(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Te("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Te("Unexpected provider",n);var i=te(n.provide),o=function(e){var t=function(e){var t=pe,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6;if((u=te(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof re||s==re?i|=1:s instanceof oe||s==oe?i&=-3:s instanceof ie||s==ie?i&=-5:u=s instanceof ne?s.token:te(s)}t.push({token:u,options:i})}}else if(e.useExisting){var u;t=[{token:u=te(e.useExisting),options:6}]}else if(!(n||ye in e))throw Te("'deps' required",e);return t}(e),n=de,r=pe,i=!1,o=te(e.provide);if(ye in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=te(e.useClass);else{if("function"!=typeof o)throw Te("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=t.get(i);if(a){if(a.fn!==ve)throw Ee(i)}else t.set(i,a={token:n.provide,deps:[],useNew:!1,fn:ve,value:pe});a.deps.push({token:i=n,options:6})}var s=t.get(i);if(s&&s.fn==ve)throw Ee(i);t.set(i,o)}}(r,e)}return e.prototype.get=function(e,t,n){void 0===n&&(n=0);var i=this._records.get(e);try{return function e(t,n,i,o,a,s){try{return function(t,n,i,o,a,s){var u,l;if(!n||4&s)2&s||(l=o.get(t,a,0));else{if((l=n.value)==me)throw Error(xe+"Circular dependency");if(l===pe){n.value=me;var c=n.useNew,h=n.fn,f=n.deps,d=pe;if(f.length){d=[];for(var p=0;p<f.length;p++){var m=f[p],v=m.options,g=2&v?i.get(m.token):void 0;d.push(e(m.token,g,i,g||4&v?o:be,1&v?null:fe.THROW_IF_NOT_FOUND,0))}}n.value=l=c?new((u=h).bind.apply(u,Object(r.__spread)([void 0],d))):h.apply(void 0,d)}}return l}(t,n,i,o,a,s)}catch(e){throw e instanceof Error||(e=new Error(e)),(e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(t),n&&n.value==me&&(n.value=pe),e}}(e,i,this._records,this.parent,t,n)}catch(t){var o=t.ngTempTokenPath;throw e[se]&&o.unshift(e[se]),t.message=Me("\n"+t.message,o,this.source),t.ngTokenPath=o,t.ngTempTokenPath=null,t}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(X(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function Ee(e){return Te("Cannot mix multi providers and regular providers",e)}function Me(e,t,n){void 0===n&&(n=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==xe?e.substr(2):e;var r=X(t);if(t instanceof Array)r=t.map(X).join(" -> ");else if("object"==typeof t){var i=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):X(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+e.replace(_e,"\n  ")}function Te(e,t){return new Error(Me(e,t))}var Se=void 0;function Ae(e){var t=Se;return Se=e,t}function Ce(e,t){if(void 0===t&&(t=0),void 0===Se)throw new Error("inject() must be called from an injection context");if(null===Se){var n=e.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&t)return null;throw new Error("Injector: NOT_FOUND ["+X(e)+"]")}return Se.get(e,8&t?null:void 0,t)}function Re(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=0,a=0;a<r.length;a++){var s=r[a];s instanceof re||"Optional"===s.ngMetadataName?o|=8:s instanceof oe||"SkipSelf"===s.ngMetadataName?o|=4:s instanceof ie||"Self"===s.ngMetadataName?o|=2:i=s instanceof ne?s.token:s}t.push(Ce(i,o))}else t.push(Ce(r))}return t}var Le={},Pe=function(e,t){for(var n in e)if(e[n]===t)return n;throw Error("Could not find renamed property on target object.")}({provide:String,useValue:Le},Le),Oe=[];function Ie(e,t){if(!t){var n=(l=new J).parameters(e);return function(){return new(e.bind.apply(e,Object(r.__spread)([void 0],Re(n))))}}if(Pe in t){var i=t;return function(){return i.useValue}}if(t.useExisting){var o=t;return function(){return Ce(o.useExisting)}}if(t.useFactory){var a=t;return function(){return a.useFactory.apply(a,Object(r.__spread)(Re(a.deps||Oe)))}}if(t.useClass){var s=t,u=t.deps;if(!u){var l=new J;u=l.parameters(e)}return function(){var e;return new((e=s.useClass).bind.apply(e,Object(r.__spread)([void 0],Re(u))))}}var c=t.deps;return c||(l=new J,c=l.parameters(e)),function(){return new(e.bind.apply(e,Object(r.__spread)([void 0],Re(c))))}}var ke=m("Injectable",void 0,void 0,void 0,function(e,t){return n=e,void((r=t)&&void 0!==r.providedIn&&void 0===n.ngInjectableDef&&(n.ngInjectableDef=l({providedIn:r.providedIn,factory:Ie(n,r)})));var n,r}),Ne={name:"custom-elements"},De={name:"no-errors-schema"},Fe=m("NgModule",function(e){return e},void 0,void 0,function(e,t){return n=e,o=(i=t)&&i.imports||[],i&&i.exports&&(o=Object(r.__spread)(o,[i.exports])),void(n.ngInjectorDef=c({factory:Ie(n,{useClass:n}),providers:i&&i.providers,imports:o}));var n,i,o}),Ue=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),Be=function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},je=new Be("6.1.7"),ze="ngDebugContext",Ge="ngOriginalError",Ve="ngErrorLogger";function He(e){return e[ze]}function We(e){return e[Ge]}function qe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,Object(r.__spread)(t))}var Xe=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Ve]||qe}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?He(e)?He(e):this._findContext(We(e)):null},e.prototype._findOriginalError=function(e){for(var t=We(e);t&&We(t);)t=We(t);return t},e}();function Qe(e){return e.length>1?" ("+function(e){for(var t=[],n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(function(e){return X(e.token)}).join(" -> ")+")":""}function Ye(e,t,n,r){var i=[t],o=n(i),a=r?function(e,t){var n=o+" caused by: "+(t instanceof Error?t.message:t),r=Error(n);return r[Ge]=t,r}(0,r):Error(o);return a.addKey=Ze,a.keys=i,a.injectors=[e],a.constructResolvingMessage=n,a[Ge]=r,a}function Ze(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function Je(e,t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];n.push(o&&0!=o.length?o.map(X).join(" "):"?")}return Error("Cannot resolve all parameters for '"+X(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+X(e)+"' is decorated with Injectable.")}var Ke=function(){function e(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=X(this.token)}return e.get=function(e){return $e.get(te(e))},Object.defineProperty(e,"numberOfKeys",{get:function(){return $e.numberOfKeys},enumerable:!0,configurable:!0}),e}(),$e=new(function(){function e(){this._allKeys=new Map}return e.prototype.get=function(e){if(e instanceof Ke)return e;if(this._allKeys.has(e))return this._allKeys.get(e);var t=new Ke(e,Ke.numberOfKeys);return this._allKeys.set(e,t),t},Object.defineProperty(e.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),e}()),et=new(function(){function e(e){this.reflectionCapabilities=e}return e.prototype.updateCapabilities=function(e){this.reflectionCapabilities=e},e.prototype.factory=function(e){return this.reflectionCapabilities.factory(e)},e.prototype.parameters=function(e){return this.reflectionCapabilities.parameters(e)},e.prototype.annotations=function(e){return this.reflectionCapabilities.annotations(e)},e.prototype.propMetadata=function(e){return this.reflectionCapabilities.propMetadata(e)},e.prototype.hasLifecycleHook=function(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)},e.prototype.getter=function(e){return this.reflectionCapabilities.getter(e)},e.prototype.setter=function(e){return this.reflectionCapabilities.setter(e)},e.prototype.method=function(e){return this.reflectionCapabilities.method(e)},e.prototype.importUri=function(e){return this.reflectionCapabilities.importUri(e)},e.prototype.resourceUri=function(e){return this.reflectionCapabilities.resourceUri(e)},e.prototype.resolveIdentifier=function(e,t,n,r){return this.reflectionCapabilities.resolveIdentifier(e,t,n,r)},e.prototype.resolveEnum=function(e,t){return this.reflectionCapabilities.resolveEnum(e,t)},e}())(new J),tt=function(){function e(e,t,n){this.key=e,this.optional=t,this.visibility=n}return e.fromKey=function(t){return new e(t,!1,null)},e}(),nt=[],rt=function(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]},it=function(e,t){this.factory=e,this.dependencies=t};function ot(e){return new rt(Ke.get(e.provide),[function(e){var t,n;if(e.useClass){var r=te(e.useClass);t=et.factory(r),n=st(r)}else e.useExisting?(t=function(e){return e},n=[tt.fromKey(Ke.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){var n=t.map(function(e){return[e]});return t.map(function(t){return ut(e,t,n)})}return st(e)}(e.useFactory,e.deps)):(t=function(){return e.useValue},n=nt);return new it(t,n)}(e)],e.multi||!1)}function at(e){var t=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else t.set(r.key.id,r)}else{var a;a=r.multiProvider?new rt(r.key,r.resolvedFactories.slice(),r.multiProvider):r,t.set(r.key.id,a)}}return t}(function e(t,n){return t.forEach(function(t){if(t instanceof F)n.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)n.push(t);else{if(!(t instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+t);e(t,n)}}),n}(e,[]).map(ot),new Map);return Array.from(t.values())}function st(e){var t=et.parameters(e);if(!t)return[];if(t.some(function(e){return null==e}))throw Je(e,t);return t.map(function(n){return ut(e,n,t)})}function ut(e,t,n){var r=null,i=!1;if(!Array.isArray(t))return lt(t instanceof ne?t.token:t,i,null);for(var o=null,a=0;a<t.length;++a){var s=t[a];s instanceof F?r=s:s instanceof ne?r=s.token:s instanceof re?i=!0:s instanceof ie||s instanceof oe?o=s:s instanceof h&&(r=s)}if(null!=(r=te(r)))return lt(r,i,o);throw Je(e,n)}function lt(e,t,n){return new tt(Ke.get(e),t,n)}var ct=new Object,ht=function(){function e(){}return e.resolve=function(e){return at(e)},e.resolveAndCreate=function(t,n){var r=e.resolve(t);return e.fromResolvedProviders(r,n)},e.fromResolvedProviders=function(e,t){return new ft(e,t)},e}(),ft=function(){function e(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;var n=e.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=e[r].key.id,this.objs[r]=ct}return e.prototype.get=function(e,t){return void 0===t&&(t=le),this._getByKey(Ke.get(e),null,t)},e.prototype.resolveAndCreateChild=function(e){var t=ht.resolve(e);return this.createChildFromResolved(t)},e.prototype.createChildFromResolved=function(t){var n=new e(t);return n.parent=this,n},e.prototype.resolveAndInstantiate=function(e){return this.instantiateResolved(ht.resolve([e])[0])},e.prototype.instantiateResolved=function(e){return this._instantiateProvider(e)},e.prototype.getProviderAtIndex=function(e){if(e<0||e>=this._providers.length)throw function(e){return Error("Index "+e+" is out-of-bounds.")}(e);return this._providers[e]},e.prototype._new=function(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw Ye(this,e.key,function(e){return"Cannot instantiate cyclic dependency!"+Qe(e)});return this._instantiateProvider(e)},e.prototype._getMaxNumberOfObjects=function(){return this.objs.length},e.prototype._instantiateProvider=function(e){if(e.multiProvider){for(var t=new Array(e.resolvedFactories.length),n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])},e.prototype._instantiate=function(e,t){var n,i,o,a=this,s=t.factory;try{n=t.dependencies.map(function(e){return a._getByReflectiveDependency(e)})}catch(t){throw t.addKey&&t.addKey(this,e.key),t}try{i=s.apply(void 0,Object(r.__spread)(n))}catch(t){throw Ye(this,e.key,function(e){var t=X(e[0].token);return o.message+": Error during instantiation of "+t+"!"+Qe(e)+"."},o=t)}return i},e.prototype._getByReflectiveDependency=function(e){return this._getByKey(e.key,e.visibility,e.optional?null:le)},e.prototype._getByKey=function(t,n,r){return t===e.INJECTOR_KEY?this:n instanceof ie?this._getByKeySelf(t,r):this._getByKeyDefault(t,r,n)},e.prototype._getObjByKeyId=function(e){for(var t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===ct&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return ct},e.prototype._throwOrNull=function(e,t){if(t!==le)return t;throw function(e,t){return Ye(e,t,function(e){return"No provider for "+X(e[0].token)+"!"+Qe(e)})}(this,e)},e.prototype._getByKeySelf=function(e,t){var n=this._getObjByKeyId(e.id);return n!==ct?n:this._throwOrNull(e,t)},e.prototype._getByKeyDefault=function(t,n,r){var i;for(i=r instanceof oe?this.parent:this;i instanceof e;){var o=i,a=o._getObjByKeyId(t.id);if(a!==ct)return a;i=o.parent}return null!==i?i.get(t.token,n):this._throwOrNull(t,n)},Object.defineProperty(e.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(e,t){for(var n=new Array(e._providers.length),r=0;r<e._providers.length;++r)n[r]=' "'+e.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.displayName},e.INJECTOR_KEY=Ke.get(fe),e}(),dt=new h("The presence of this token marks an injector as being the root injector."),pt={},mt={},vt=[],gt=void 0;function yt(){return void 0===gt&&(gt=new he),gt}function bt(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||yt(),new _t(e,n,t)}var _t=function(){function e(e,t,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,Et([e],function(e){return r.processInjectorType(e,new Set)}),t&&Et(t,function(e){return r.processProvider(e)}),this.records.set(ce,wt(void 0,this)),this.isRootInjector=this.records.has(dt),this.injectorDefTypes.forEach(function(e){return r.get(e)})}return e.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},e.prototype.get=function(e,t,n){void 0===t&&(t=le),void 0===n&&(n=0),this.assertNotDestroyed();var r,i=Ae(this);try{if(!(4&n)){var o=this.records.get(e);if(void 0===o){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof h)&&e.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(o=xt(e),this.records.set(e,o))}if(void 0!==o)return this.hydrate(e,o)}return 2&n&&yt(),this.parent.get(e,t)}finally{Ae(i)}},e.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},e.prototype.processInjectorType=function(e,t){var n=this,r=(e=te(e)).ngInjectorDef,i=null==r&&e.ngModule||void 0,o=void 0===i?e:i,a=void 0!==i&&e.providers||vt;if(void 0!==i&&(r=i.ngInjectorDef),null!=r){if(t.has(o))throw new Error("Circular dependency: type "+X(o)+" ends up importing itself.");if(this.injectorDefTypes.add(o),this.records.set(o,wt(r.factory)),null!=r.imports){t.add(o);try{Et(r.imports,function(e){return n.processInjectorType(e,t)})}finally{t.delete(o)}}null!=r.providers&&Et(r.providers,function(e){return n.processProvider(e)}),Et(a,function(e){return n.processProvider(e)})}},e.prototype.processProvider=function(e){var t=Mt(e=te(e))?e:te(e.provide),n=function(e){var t=te(e),n=pt,i=void 0;if(Mt(e))return xt(e);if(t=te(e.provide),ye in e)n=e.useValue;else if(e.useExisting)i=function(){return Ce(e.useExisting)};else if(e.useFactory)i=function(){return e.useFactory.apply(e,Object(r.__spread)(Re(e.deps||[])))};else{var o=e.useClass||t;if(!e.deps)return xt(o);i=function(){return new(o.bind.apply(o,Object(r.__spread)([void 0],Re(e.deps))))}}return wt(i,n)}(e);if(Mt(e)||!0!==e.multi){var i=this.records.get(t);if(i&&void 0!==i.multi)throw new Error("Mixed multi-provider for "+X(t))}else{var o=this.records.get(t);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+t+".")}else(o=wt(void 0,pt,!0)).factory=function(){return Re(o.multi)},this.records.set(t,o);t=e,o.multi.push(e)}this.records.set(t,n)},e.prototype.hydrate=function(e,t){if(t.value===mt)throw new Error("Circular dep for "+X(e));var n;return t.value===pt&&(t.value=mt,t.value=t.factory()),"object"==typeof t.value&&t.value&&"object"==typeof(n=t.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value},e.prototype.injectableDefInScope=function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||"root"===e.providedIn&&this.isRootInjector:this.injectorDefTypes.has(e.providedIn))},e}();function xt(e){var t=e.ngInjectableDef;if(void 0===t){if(e instanceof h)throw new Error("Token "+X(e)+" is missing an ngInjectableDef definition.");return wt(function(){return new e})}return wt(t.factory)}function wt(e,t,n){return void 0===t&&(t=pt),void 0===n&&(n=!1),{factory:e,value:t,multi:n?[]:void 0}}function Et(e,t){e.forEach(function(e){return Array.isArray(e)?Et(e,t):t(e)})}function Mt(e){return"function"==typeof e}function Tt(e){return!!e&&"function"==typeof e.then}function St(e){return!!e&&"function"==typeof e.subscribe}var At=new h("Application Initializer"),Ct=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Tt(i)&&t.push(i)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},e}(),Rt=new h("AppId");function Lt(){return""+Ot()+Ot()+Ot()}var Pt={provide:Rt,useFactory:Lt,deps:[]};function Ot(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var It=new h("Platform Initializer"),kt=new h("Platform ID"),Nt=new h("appBootstrapListener"),Dt=new h("Application Packages Root URL"),Ft=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}(),Ut=function(e,t){this.ngModuleFactory=e,this.componentFactories=t};function Bt(){throw new Error("Runtime compiler is not loaded")}var jt=function(){function e(){}return e.prototype.compileModuleSync=function(e){throw Bt()},e.prototype.compileModuleAsync=function(e){throw Bt()},e.prototype.compileModuleAndAllComponentsSync=function(e){throw Bt()},e.prototype.compileModuleAndAllComponentsAsync=function(e){throw Bt()},e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),zt=new h("compilerOptions"),Gt=function(){},Vt=function(){},Ht=function(){};function Wt(e){var t=Error("No component factory found for "+X(e)+". Did you add it to @NgModule.entryComponents?");return t[Qt]=e,t}var qt,Xt,Qt="ngComponent",Yt=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw Wt(e)},e}(),Zt=function(){function e(){}return e.NULL=new Yt,e}(),Jt=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var r=0;r<e.length;r++){var i=e[r];this._factories.set(i.componentType,i)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw Wt(e);return new Kt(t,this._ngModule)},e}(),Kt=function(e){function t(t,n){var r=e.call(this)||this;return r.factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return Object(r.__extends)(t,e),t.prototype.create=function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)},t}(Ht),$t=function(){},en=function(){};function tn(){var e=z.wtf;return!(!e||!(qt=e.trace)||(Xt=qt.events,0))}function nn(e,t){return void 0===t&&(t=null),Xt.createScope(e,t)}function rn(e,t){return qt.leaveScope(e,t),t}function on(e,t){return qt.beginTimeRange(e,t)}function an(e){qt.endTimeRange(e)}var sn=tn();function un(e,t){return null}var ln=sn?nn:function(e,t){return un},cn=sn?rn:function(e,t){return t},hn=sn?on:function(e,t){return null},fn=sn?an:function(e){return null},dn=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return Object(r.__extends)(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,r){var o,a=function(e){return null},s=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(a=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=e.prototype.subscribe.call(this,o,a,s);return t instanceof i.a&&t.add(u),u},t}(o.a),pn=function(){function e(e){var t,n=e.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn(!1),this.onMicrotaskEmpty=new dn(!1),this.onStable=new dn(!1),this.onError=new dn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,i,o,a){try{return yn(t),e.invokeTask(r,i,o,a)}finally{bn(t)}},onInvoke:function(e,n,r,i,o,a,s){try{return yn(t),e.invoke(r,i,o,a,s)}finally{bn(t)}},onHasTask:function(e,n,r,i){e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,gn(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,n,r,i){return e.handleError(r,i),t.runOutsideAngular(function(){return t.onError.emit(i)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,vn,mn,mn);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function mn(){}var vn={};function gn(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function yn(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bn(e){e._nesting--,gn(e)}var _n=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn,this.onMicrotaskEmpty=new dn,this.onStable=new dn,this.onError=new dn}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),xn=function(){function e(e){var t=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),e.run(function(){t.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){pn.assertNotInAngularZone(),W(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())W(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,isPeriodic:e.data.isPeriodic,delay:e.data.delay,creationLocation:e.creationLocation,xhr:e.data.target}}):[]},e.prototype.addCallback=function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})},e.prototype.whenStable=function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),wn=function(){function e(){this._applications=new Map,Tn.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),Tn.findTestabilityInTree(this,e,t)},e.ctorParameters=function(){return[]},e}();function En(e){Tn=e}var Mn,Tn=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}()),Sn=!0,An=!1,Cn=new h("AllowMultipleToken");function Rn(){if(An)throw new Error("Cannot enable prod mode after platform setup.");Sn=!1}function Ln(){return An=!0,Sn}var Pn=function(e,t){this.name=e,this.token=t};function On(e){if(Mn&&!Mn.destroyed&&!Mn.injector.get(Cn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Mn=e.get(Fn);var t=e.get(It,null);return t&&t.forEach(function(e){return e()}),Mn}function In(e,t,n){void 0===n&&(n=[]);var r="Platform: "+t,i=new h(r);return function(t){void 0===t&&(t=[]);var o=Dn();if(!o||o.injector.get(Cn,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0});On(fe.create({providers:a,name:r}))}return kn(i)}}function kn(e){var t=Dn();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function Nn(){Mn&&!Mn.destroyed&&Mn.destroy()}function Dn(){return Mn&&!Mn.destroyed?Mn:null}var Fn=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new _n:("zone.js"===n?void 0:n)||new pn({enableLongStackTrace:Ln()}),o=[{provide:pn,useValue:i}];return i.run(function(){var t=fe.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(Xe,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return jn(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(e){a.handleError(e)}})}),function(e,t,i){try{var o=((a=n.injector.get(Ct)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Tt(o)?o.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):o}catch(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}var a}(a,i)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var r=this.injector.get(Gt),i=Un({},t);return r.createCompiler([i]).compileModuleAsync(e).then(function(e){return n.bootstrapModuleFactory(e,i)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(Bn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+X(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function Un(e,t){return Array.isArray(t)?t.reduce(Un,e):Object(r.__assign)({},e,t)}var Bn=function(){function e(e,t,n,r,i,o){var l=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ln(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run(function(){l.tick()})}});var c=new a.a(function(e){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular(function(){e.next(l._stable),e.complete()})}),h=new a.a(function(e){var t;l._zone.runOutsideAngular(function(){t=l._zone.onStable.subscribe(function(){pn.assertNotInAngularZone(),W(function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,e.next(!0))})})});var n=l._zone.onUnstable.subscribe(function(){pn.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,h.pipe(Object(u.a)()))}return e.prototype.bootstrap=function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Ht?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof Kt?null:this._injector.get($t),o=n.create(fe.NULL,[],t||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(xn,null);return a&&o.injector.get(wn).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Ln()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},e.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,cn(n)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;jn(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Nt,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),jn(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=ln("ApplicationRef#tick()"),e}();function jn(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var zn=function(e,t,n,r,i,o){this.id=e,this.templateUrl=t,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o},Gn=function(){},Vn=function(){},Hn=function(){},Wn=function(){},qn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Xn=function(){},Qn=function(e){this.nativeElement=e},Yn=function(){},Zn=new Map;function Jn(e,t){var n=Zn.get(e);if(n)throw new Error("Duplicate module registered for "+e+" - "+n.moduleType.name+" vs "+t.moduleType.name);Zn.set(e,t)}function Kn(e){var t=Zn.get(e);if(!t)throw new Error("No module with ID "+e+" loaded");return t}var $n=function(){function e(){this.dirty=!0,this._results=[],this.changes=new dn,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[H()]=function(){return this._results[H()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(t){return t.reduce(function(t,n){var r=Array.isArray(n)?e(n):n;return t.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),er=function(){},tr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},nr=function(){function e(e,t){this._compiler=e,this._config=t||tr}return e.prototype.load=function(e){return this._compiler instanceof jt?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var t=this,i=Object(r.__read)(e.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),n("crnd")(o).then(function(e){return e[a]}).then(function(e){return rr(e,o,a)}).then(function(e){return t._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var t=Object(r.__read)(e.split("#"),2),i=t[0],o=t[1],a="NgFactory";return void 0===o&&(o="default",a=""),n("crnd")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[o+a]}).then(function(e){return rr(e,i,o)})},e}();function rr(e,t,n){if(!e)throw new Error("Cannot find '"+n+"' in '"+t+"'");return e}var ir=function(){},or=function(){},ar=function(){},sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(ar),ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(sr),lr=function(){function e(e,t,n){this._debugContext=n,this.nativeNode=e,t&&t instanceof cr?t.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),cr=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=t,i}return Object(r.__extends)(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,i=this,o=this.childNodes.indexOf(e);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.__spread)([o+1,0],t)),t.forEach(function(e){e.parent&&e.parent.removeChild(e),e.parent=i}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return fr(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return dr(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(lr);function hr(e){return e.map(function(e){return e.nativeElement})}function fr(e,t,n){e.childNodes.forEach(function(e){e instanceof cr&&(t(e)&&n.push(e),fr(e,t,n))})}function dr(e,t,n){e instanceof cr&&e.childNodes.forEach(function(e){t(e)&&n.push(e),e instanceof cr&&dr(e,t,n)})}var pr=new Map;function mr(e){return pr.get(e)||null}function vr(e){pr.set(e.nativeNode,e)}function gr(e,t){var n=_r(e),r=_r(t);return n&&r?function(e,t,n){for(var r=e[H()](),i=t[H()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(e,t,gr):!(n||!e||"object"!=typeof e&&"function"!=typeof e||r||!t||"object"!=typeof t&&"function"!=typeof t)||q(e,t)}var yr=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}(),br=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function _r(e){return!!xr(e)&&(Array.isArray(e)||!(e instanceof Map)&&H()in e)}function xr(e){return null!==e&&("function"==typeof e||"object"==typeof e)}var wr=function(){function e(){}return e.prototype.supports=function(e){return _r(e)},e.prototype.create=function(e){return new Mr(e)},e}(),Er=function(e,t){return t},Mr=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Er}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Cr(n,r,i)?t:n,a=Cr(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;l<=f&&f<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&e(o,a,s)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!_r(e))throw new Error("Error trying to diff '"+X(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=e[s]),null!==o&&q(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),q(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r=e[H()](),i=void 0;!(i=r.next()).done;)t(i.value)}(e,function(e){i=t._trackByFn(n,e),null!==o&&q(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),q(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(q(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(q(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Tr(t,n),i,r),e},e.prototype._verifyReinsertion=function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ar),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ar),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Tr=function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Sr=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&q(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),Ar=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Sr,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Cr(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Rr=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||xr(e)},e.prototype.create=function(){return new Lr},e}(),Lr=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||xr(e)))throw new Error("Error trying to diff '"+X(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Pr(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){q(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),Pr=function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Or=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new re]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e.ngInjectableDef=l({providedIn:"root",factory:function(){return new e([new wr])}}),e}(),Ir=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new oe,new re]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e}(),kr=[new Rr],Nr=new Or([new wr]),Dr=new Ir(kr),Fr=In(null,"core",[{provide:kt,useValue:"unknown"},{provide:Fn,deps:[fe]},{provide:wn,deps:[]},{provide:Ft,deps:[]}]),Ur=new h("LocaleId"),Br=new h("Translations"),jr=new h("TranslationsFormat"),zr=function(e){return e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore",e}({});function Gr(){return Nr}function Vr(){return Dr}function Hr(e){return e||"en-US"}var Wr=[{provide:Bn,useClass:Bn,deps:[pn,Ft,fe,Xe,Zt,Ct]},{provide:Ct,useClass:Ct,deps:[[new re,At]]},{provide:jt,useClass:jt,deps:[]},Pt,{provide:Or,useFactory:Gr,deps:[]},{provide:Ir,useFactory:Vr,deps:[]},{provide:Ur,useFactory:Hr,deps:[[new ne(Ur),new re,new oe]]}],qr=function(e){};function Xr(e){var t=[],n=new Map;function r(r){var i=n.get(r);if(!i){var o=e(r);n.set(r,i=o.then(Yr)),t.push(i)}return i}return Qr.forEach(function(e){e.templateUrl&&r(e.templateUrl).then(function(t){e.template=t,e.templateUrl=void 0});var t=e.styleUrls,n=e.styles||(e.styles=[]),i=e.styles.length;t&&t.forEach(function(o,a){n.push(""),r(o).then(function(r){n[i+a]=r,t.splice(t.indexOf(o),1),0==t.length&&(e.styleUrls=void 0)})})}),Qr.clear(),Promise.all(t).then(function(){return null})}var Qr=new Set;function Yr(e){return"string"==typeof e?e:e.text()}var Zr=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},e}(),Jr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Kr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $r(e){return(e=String(e)).match(Jr)||e.match(Kr)?e:(Ln()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function ei(e){var t,n,i={};try{for(var o=Object(r.__values)(e.split(",")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function ti(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.__values)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o}var ni,ri=ei("area,br,col,hr,img,wbr"),ii=ei("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oi=ei("rp,rt"),ai=ti(oi,ii),si=ti(ri,ti(ii,ei("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ti(oi,ei("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ai),ui=ei("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),li=ei("srcset"),ci=ti(ui,li,ei("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),hi=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var t=e.firstChild;t;)if(t.nodeType===Node.ELEMENT_NODE?this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var n=this.checkClobberedElement(t,t.nextSibling);if(n){t=n;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var t=e.nodeName.toLowerCase();if(si.hasOwnProperty(t)){this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(ci.hasOwnProperty(s)){var u=o.value;ui[s]&&(u=$r(u)),li[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return $r(e.trim())}).join(", ")),this.buf.push(" ",a,'="',pi(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},e.prototype.endElement=function(e){var t=e.nodeName.toLowerCase();si.hasOwnProperty(t)&&!ri.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(pi(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t},e}(),fi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,di=/([^\#-~ |!])/g;function pi(e){return e.replace(/&/g,"&amp;").replace(fi,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(di,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mi(e,t){var n=null;try{ni=ni||new Zr(e);var r=t?String(t):"";n=ni.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ni.getInertBodyElement(r)}while(r!==o);var a=new hi,s=a.sanitizeChildren(vi(n)||n);return Ln()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=vi(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function vi(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var gi=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),yi=/^url\(([^)]+)\)$/;function bi(e){if(!(e=String(e).trim()))return"";var t=e.match(yi);return t&&$r(t[1])===t[1]||e.match(gi)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(Ln()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var _i=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),xi=function(){};function wi(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function Ei(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Mi(e,t){return e.nodes[t]}function Ti(e,t){return e.nodes[t]}function Si(e,t){return e.nodes[t]}function Ai(e,t){return e.nodes[t]}function Ci(e,t){return e.nodes[t]}var Ri=function(){},Li={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Pi(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return Oi(n,t),n}(i,e)}function Oi(e,t){e[ze]=t,e[Ve]=t.logError.bind(t)}function Ii(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var ki=function(){},Ni=new Map;function Di(e){var t=Ni.get(e);return t||(t=X(e)+"_"+Ni.size,Ni.set(e,t)),t}function Fi(e,t,n,r){if(yr.isWrapped(r)){r=yr.unwrap(r);var i=e.def.nodes[t].bindingIndex+n,o=yr.unwrap(e.oldValues[i]);e.oldValues[i]=new yr(o)}return r}var Ui="$$undefined",Bi="$$empty";function ji(e){return{id:Ui,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var zi=0;function Gi(e){if(e&&e.id===Ui){var t=null!=e.encapsulation&&e.encapsulation!==Ue.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+zi++:Bi}return e&&e.id===Bi&&(e=null),e||null}function Vi(e,t,n,r){return!(!(2&e.state)&&q(e.oldValues[t.bindingIndex+n],r))}function Hi(e,t,n,r){return!!Vi(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Wi(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!gr(i,r)){var o=t.bindings[n].name;throw Pi(Li.createDebugContext(e,t.nodeIndex),o+": "+i,o+": "+r,0!=(1&e.state))}}function qi(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Xi(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Qi(e,t,n,r){try{return qi(33554432&e.def.nodes[t].flags?Ti(e,t).componentView:e),Li.handleEvent(e,t,n,r)}catch(t){e.root.errorHandler.handleError(t)}}function Yi(e){return e.parent?Ti(e.parent,e.parentNodeDef.nodeIndex):null}function Zi(e){return e.parent?e.parentNodeDef.parent:null}function Ji(e,t){switch(201347067&t.flags){case 1:return Ti(e,t.nodeIndex).renderElement;case 2:return Mi(e,t.nodeIndex).renderText}}function Ki(e,t){return e?e+":"+t:t}function $i(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function eo(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function to(e){return 1<<e%32}function no(e){var t={},n=0,i={};return e&&e.forEach(function(e){var o=Object(r.__read)(e,2),a=o[0],s=o[1];"number"==typeof a?(t[a]=s,n|=to(a)):i[a]=s}),{matchedQueries:t,references:i,matchedQueryIds:n}}function ro(e,t){return e.map(function(e){var n,i,o;return Array.isArray(e)?(o=(n=Object(r.__read)(e,2))[0],i=n[1]):(o=0,i=e),i&&("function"==typeof i||"object"==typeof i)&&t&&Object.defineProperty(i,se,{value:t,configurable:!0}),{flags:o,token:i,tokenKey:Di(i)}})}function io(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ue.Native?Ti(e,n.renderParent.nodeIndex).renderElement:void 0:t}var oo=new WeakMap;function ao(e){var t=oo.get(e);return t||((t=e(function(){return ki})).factory=e,oo.set(e,t)),t}function so(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(Ji(e,e.def.lastRenderRootNode))),uo(e,t,0,e.def.nodes.length-1,n,r,i)}function uo(e,t,n,r,i,o,a){for(var s=n;s<=r;s++){var u=e.def.nodes[s];11&u.flags&&co(e,u,t,i,o,a),s+=u.childCount}}function lo(e,t,n,r,i,o){for(var a=e;a&&!$i(a);)a=a.parent;for(var s=a.parent,u=Zi(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===t&&co(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var f=e.root.projectableNodes[t];if(f)for(c=0;c<f.length;c++)ho(e,f[c],n,r,i,o)}}function co(e,t,n,r,i,o){if(8&t.flags)lo(e,t.ngContent.index,n,r,i,o);else{var a=Ji(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&ho(e,a,n,r,i,o),32&t.bindingFlags&&ho(Ti(e,t.nodeIndex).componentView,a,n,r,i,o)):ho(e,a,n,r,i,o),16777216&t.flags)for(var s=Ti(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)so(s[u],n,r,i,o);1&t.flags&&!t.element.name&&uo(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function ho(e,t,n,r,i,o){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,i);break;case 3:a.removeChild(r,t);break;case 0:o.push(t)}}var fo=/^:([^:]+):(.+)$/;function po(e){if(":"===e[0]){var t=e.match(fo);return[t[1],t[2]]}return["",e]}function mo(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function vo(e,t){for(var n="",r=0;r<2*e;r+=2)n=n+t[r]+yo(t[r+1]);return n+t[2*e]}function go(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b){switch(e){case 1:return t+yo(n)+r;case 2:return t+yo(n)+r+yo(i)+o;case 3:return t+yo(n)+r+yo(i)+o+yo(a)+s;case 4:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l;case 5:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l+yo(c)+h;case 6:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l+yo(c)+h+yo(f)+d;case 7:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l+yo(c)+h+yo(f)+d+yo(p)+m;case 8:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l+yo(c)+h+yo(f)+d+yo(p)+m+yo(v)+g;case 9:return t+yo(n)+r+yo(i)+o+yo(a)+s+yo(u)+l+yo(c)+h+yo(f)+d+yo(p)+m+yo(v)+g+yo(y)+b;default:throw new Error("Does not support more than 9 expressions")}}function yo(e){return null!=e?e.toString():""}var bo=[],_o={};function xo(e,t,n,r,i,o){e|=1;var a=no(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ao(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||ki},provider:null,text:null,query:null,ngContent:null}}function wo(e,t,n,i,o,a,s,u,l,c,h,f){var d;void 0===s&&(s=[]),c||(c=ki);var p=no(n),m=p.matchedQueries,v=p.references,g=p.matchedQueryIds,y=null,b=null;a&&(y=(d=Object(r.__read)(po(a),2))[0],b=d[1]),u=u||[];for(var _=new Array(u.length),x=0;x<u.length;x++){var w=Object(r.__read)(u[x],3),E=w[0],M=w[1],T=w[2],S=Object(r.__read)(po(M),2),A=S[0],C=S[1],R=void 0,L=void 0;switch(15&E){case 4:L=T;break;case 1:case 8:R=T}_[x]={flags:E,ns:A,name:C,nonMinifiedName:C,securityContext:R,suffix:L}}l=l||[];var P=new Array(l.length);for(x=0;x<l.length;x++){var O=Object(r.__read)(l[x],2);P[x]={type:0,target:O[0],eventName:O[1],propName:null}}var I=(s=s||[]).map(function(e){var t=Object(r.__read)(e,2),n=t[0],i=t[1],o=Object(r.__read)(po(n),2);return[o[0],o[1],i]});return f=Gi(f),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:g,references:v,ngContentIndex:i,childCount:o,bindings:_,bindingFlags:mo(_),outputs:P,element:{ns:y,name:b,attrs:I,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||ki},provider:null,text:null,query:null,ngContent:null}}function Eo(e,t,n){var i,o=n.element,a=e.root.selectorOrNode,s=e.renderer;if(e.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=io(e,t,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=Object(r.__read)(o.attrs[l],3);s.setAttribute(i,c[1],c[2],c[0])}return i}function Mo(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=To(e,n.nodeIndex,Ki(o.target,o.eventName)),s=o.target,u=e;"component"===o.target&&(s=null,u=t);var l=u.renderer.listen(s||r,o.eventName,a);e.disposables[n.outputIndex+i]=l}}function To(e,t,n){return function(r){return Qi(e,t,n,r)}}function So(e,t,n,r){if(!Hi(e,t,n,r))return!1;var i=t.bindings[n],o=Ti(e,t.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=e.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(e,i,a,i.ns,s,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,i){var o=e.root.sanitizer.sanitize(_i.STYLE,i);if(null!=o){o=o.toString();var a=t.suffix;null!=a&&(o+=a)}else o=null;var s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,a,s,r);break;case 8:!function(e,t,n,r,i){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,a,s,r)}return!0}var Ao=new Object,Co=Di(fe),Ro=Di(ce),Lo=Di($t);function Po(e,t,n,r){return n=te(n),{index:-1,deps:ro(r,X(t)),flags:e,token:t,value:n}}function Oo(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var o=e[i];o.token===dt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Di(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}function Io(e,t,n){void 0===n&&(n=fe.THROW_IF_NOT_FOUND);var r,i,o=Ae(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var a=t.tokenKey;switch(a){case Co:case Ro:case Lo:return e}var s=e._def.providersByKey[a];if(s){var u=e._providers[s.index];return void 0===u&&(u=e._providers[s.index]=ko(e,s)),u===Ao?void 0:u}if(t.token.ngInjectableDef&&(r=e,null!=(i=t.token.ngInjectableDef).providedIn&&(function(e,t){return e._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var l=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:t.token.ngInjectableDef.factory,deps:[],index:l,token:t.token},e._providers[l]=Ao,e._providers[l]=ko(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ae(o)}}function ko(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var i=n.length;switch(i){case 0:return new t;case 1:return new t(Io(e,n[0]));case 2:return new t(Io(e,n[0]),Io(e,n[1]));case 3:return new t(Io(e,n[0]),Io(e,n[1]),Io(e,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=Io(e,n[a]);return new(t.bind.apply(t,Object(r.__spread)([void 0],o)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var i=n.length;switch(i){case 0:return t();case 1:return t(Io(e,n[0]));case 2:return t(Io(e,n[0]),Io(e,n[1]));case 3:return t(Io(e,n[0]),Io(e,n[1]),Io(e,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=Io(e,n[a]);return t.apply(void 0,Object(r.__spread)(o))}}(e,t.value,t.deps);break;case 2048:n=Io(e,t.deps[0]);break;case 256:n=t.value}return n===Ao||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?Ao:n}function No(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,Bo(n,t),Li.dirtyParentQueries(r),Fo(r),r}function Do(e,t,n){var r=t?Ji(t,t.def.lastRenderRootNode):e.renderElement;so(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Fo(e){so(e,3,null,null,void 0)}function Uo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Bo(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var jo=new Object;function zo(e,t,n,r,i,o){return new Vo(e,t,n,r,i,o)}function Go(e){return e.viewDefFactory}var Vo=function(e){function t(t,n,r,i,o,a){var s=e.call(this)||this;return s.selector=t,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=ao(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=Li.createRootView(e,t||[],n,i,r,jo),s=Si(a,o).instance;return n&&a.renderer.setAttribute(Ti(a,0).renderElement,"ng-version",je.full),new Ho(a,new Qo(a),s)},t}(Ht),Ho=function(e){function t(t,n,r){var i=e.call(this)||this;return i._view=t,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new Qn(Ti(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Ko(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(Vt);function Wo(e,t,n){return new qo(e,t,n)}var qo=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new Qn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Ko(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=Zi(e),e=e.parent;return e?new Ko(e,t):new Ko(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=No(this._data,e);Li.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new Qo(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r},e.prototype.createComponent=function(e,t,n,r,i){var o=n||this.parentInjector;i||e instanceof Kt||(i=o.get($t));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=e;return i=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=t)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,Uo(o,r,i),function(e,t){var n=Yi(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,t.parentNodeDef)}}(n,i),Li.dirtyParentQueries(i),Do(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(e._view);return i=t,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],Bo(o,r),null==i&&(i=o.length),Uo(o,i,a),Li.dirtyParentQueries(a),Fo(a),Do(n,i>0?o[i-1]:null,a),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=No(this._data,e);t&&Li.destroyView(t)},e.prototype.detach=function(e){var t=No(this._data,e);return t?new Qo(t):null},e}();function Xo(e){return new Qo(e)}var Qo=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return so(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){qi(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{Li.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){Li.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Li.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,Fo(this._view),Li.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function Yo(e,t){return new Zo(e,t)}var Zo=function(e){function t(t,n){var r=e.call(this)||this;return r._parentView=t,r._def=n,r}return Object(r.__extends)(t,e),t.prototype.createEmbeddedView=function(e){return new Qo(Li.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new Qn(Ti(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(ir);function Jo(e,t){return new Ko(e,t)}var Ko=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=fe.THROW_IF_NOT_FOUND),Li.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Di(e)},t)},e}();function $o(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=Ti(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Mi(e,n.nodeIndex).renderText;if(20240&n.flags)return Si(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function ea(e){return new ta(e.renderer)}var ta=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=Object(r.__read)(po(t),2),i=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,i),i},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var i=Object(r.__read)(po(t),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(e,a,n,o):this.delegate.removeAttribute(e,a,o)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function na(e,t,n,r){return new ra(e,t,n,r)}var ra=function(){function e(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=ko(e,i))}}(this)}return e.prototype.get=function(e,t,n){void 0===t&&(t=fe.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Io(this,{token:e,tokenKey:Di(e),flags:r},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(Zt)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+X(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=e._providers[i];if(o&&o!==Ao){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),ia=Di(Vn),oa=Di(Xn),aa=Di(Qn),sa=Di(or),ua=Di(ir),la=Di(ar),ca=Di(fe),ha=Di(ce);function fa(e,t,n,i,o,a,s,u){var l=[];if(s)for(var c in s){var h=Object(r.__read)(s[c],2);l[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var f=[];if(u)for(var d in u)f.push({type:1,propName:d,target:null,eventName:u[d]});return ma(e,t|=16384,n,i,o,o,a,l,f)}function da(e,t,n){return ma(-1,e|=16,null,0,t,t,n)}function pa(e,t,n,r,i){return ma(-1,e,t,0,n,r,i)}function ma(e,t,n,r,i,o,a,s,u){var l=no(n),c=l.matchedQueries,h=l.references,f=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=te(o);var d=ro(a,X(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:mo(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function va(e,t){return _a(e,t)}function ga(e,t){for(var n=e;n.parent&&!$i(n);)n=n.parent;return xa(n.parent,Zi(n),!0,t.provider.value,t.provider.deps)}function ya(e,t){var n=xa(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],o=n[i.propName].subscribe(ba(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=o.unsubscribe.bind(o)}return n}function ba(e,t,n){return function(r){return Qi(e,t,n,r)}}function _a(e,t){var n=(8192&t.flags)>0,i=t.provider;switch(201347067&t.flags){case 512:return xa(e,t.parent,n,i.value,i.deps);case 1024:return function(e,t,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(Ea(e,t,n,o[0]));case 2:return i(Ea(e,t,n,o[0]),Ea(e,t,n,o[1]));case 3:return i(Ea(e,t,n,o[0]),Ea(e,t,n,o[1]),Ea(e,t,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=Ea(e,t,n,o[u]);return i.apply(void 0,Object(r.__spread)(s))}}(e,t.parent,n,i.value,i.deps);case 2048:return Ea(e,t.parent,n,i.deps[0]);case 256:return i.value}}function xa(e,t,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(Ea(e,t,n,o[0]));case 2:return new i(Ea(e,t,n,o[0]),Ea(e,t,n,o[1]));case 3:return new i(Ea(e,t,n,o[0]),Ea(e,t,n,o[1]),Ea(e,t,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=Ea(e,t,n,o[u]);return new(i.bind.apply(i,Object(r.__spread)([void 0],s)))}}var wa={};function Ea(e,t,n,r,i){if(void 0===i&&(i=fe.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=e;2&r.flags&&(i=null);var a=r.tokenKey;a===la&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case ia:return ea(Ma(s,t,n));case oa:return Ma(s,t,n).renderer;case aa:return new Qn(Ti(s,t.nodeIndex).renderElement);case sa:return Ti(s,t.nodeIndex).viewContainer;case ua:if(t.element.template)return Ti(s,t.nodeIndex).template;break;case la:return Xo(Ma(s,t,n));case ca:case ha:return Jo(s,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[a];if(u){var l=Si(s,u.nodeIndex);return l||(l={instance:_a(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=$i(s),t=Zi(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,wa);return c!==wa||i===wa?c:o.root.ngModule.injector.get(r.token,i)}function Ma(e,t,n){var r;if(n)r=Ti(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!$i(r);)r=r.parent;return r}function Ta(e,t,n,r,i,o){if(32768&n.flags){var a=Ti(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=yr.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new br(s,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function Sa(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&t&&Ca(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=Aa(e,a,t,r)),a=a.parent}}function Aa(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var o=e.def.nodes[i];o.flags&n&&Ca(e,i,o.flags&n,r++),i+=o.childCount}return r}function Ca(e,t,n,r){var i=Si(e,t);if(i){var o=i.instance;o&&(Li.setCurrentNode(e,t),1048576&n&&Ei(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ei(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Ra(e,t,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:to(t),bindings:r},ngContent:null}}function La(e){for(var t=e.def.nodeMatchedQueries;e.parent&&eo(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=e.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&Ci(e,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&e.def.nodeFlags)for(i=0;i<e.def.nodes.length;i++){var o;134217728&(o=e.def.nodes[i]).flags&&536870912&o.flags&&Ci(e,i).setDirty(),i+=o.childCount}}function Pa(e,t){var n=Ci(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var o=t.parent.parent;i=Oa(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),r=Si(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=Oa(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var a=t.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Oa(e,t,n,r,i){for(var o=t;o<=n;o++){var a=e.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Ia(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Ti(e,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Oa(e,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],f=Yi(h);f&&f===u&&Oa(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(c=0;c<d.length;c++){var p=d[c];Oa(p,0,p.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Ia(e,t,n){if(null!=n)switch(n){case 1:return Ti(e,t.nodeIndex).renderElement;case 0:return new Qn(Ti(e,t.nodeIndex).renderElement);case 2:return Ti(e,t.nodeIndex).template;case 3:return Ti(e,t.nodeIndex).viewContainer;case 4:return Si(e,t.nodeIndex).instance}}function ka(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Na(e,t,n){var r=io(e,t,n);r&&lo(e,n.ngContent.index,1,r,null,void 0)}function Da(e,t){return Ba(128,e,new Array(t+1))}function Fa(e,t){return Ba(32,e,new Array(t))}function Ua(e,t){for(var n=Object.keys(t),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[t[a]]=a}return Ba(64,e,i)}function Ba(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:mo(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function ja(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function za(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var o=io(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function Ga(e,t){return(null!=e?e.toString():"")+t.suffix}function Va(e,t,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,f=!1,d=null,p=0;p<t.length;p++){var m=t[p];if(m.nodeIndex=p,m.parent=l,m.bindingIndex=i,m.outputIndex=o,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var v=m.element;v.publicProviders=l?l.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,h=!1,f=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Wa(l,m,t.length),i+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(d=m),20224&m.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&m.flags);0==(8192&m.flags)||g?l.element.publicProviders[Di(m.provider.token)]=m:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Di(m.provider.token)]=m),g&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Ha(m)||(c=m);else for(;l&&p===l.nodeIndex+l.childCount;){var y=l.parent;y&&(y.childFlags|=l.childFlags,y.childMatchedQueries|=l.childMatchedQueries),c=(l=y)&&Ha(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||ki,updateRenderer:r||ki,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function Ha(e){return 0!=(1&e.flags)&&null===e.element.name}function Wa(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function qa(e,t,n,r){var i=Ya(e.root,e.renderer,e,t,n);return Za(i,e.component,r),Ja(i),i}function Xa(e,t,n){var r=Ya(e,e.renderer,null,null,t);return Za(r,n,n),Ja(r),r}function Qa(e,t,n,r){var i,o=t.element.componentRendererType;return i=o?e.root.rendererFactory.createRenderer(r,o):e.root.renderer,Ya(e.root,i,e,t.element.componentProvider,n)}function Ya(e,t,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Za(e,t,n){e.component=t,e.context=n}function Ja(e){var t;$i(e)&&(t=Ti(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Li.setCurrentNode(e,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Eo(e,t,o),u=void 0;if(33554432&o.flags){var l=ao(o.element.componentView);u=Li.createComponentView(e,o,l,s)}Mo(e,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Yo(e,o):void 0},16777216&o.flags&&(a.viewContainer=Wo(e,o,a));break;case 2:a=za(e,t,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:va(e,o)});break;case 16:a={instance:ga(e,o)};break;case 16384:(a=r[i])||(a={instance:ya(e,o)}),32768&o.flags&&Za(Ti(e,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new $n;break;case 8:Na(e,t,o),a=void 0}r[i]=a}as(e,os.CreateViewNodes),cs(e,201326592,268435456,0)}function Ka(e){ts(e),Li.updateDirectives(e,1),ss(e,os.CheckNoChanges),Li.updateRenderer(e,1),as(e,os.CheckNoChanges),e.state&=-97}function $a(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,wi(e,0,256),ts(e),Li.updateDirectives(e,0),ss(e,os.CheckAndUpdate),cs(e,67108864,536870912,0);var t=wi(e,256,512);Sa(e,2097152|(t?1048576:0)),Li.updateRenderer(e,0),as(e,os.CheckAndUpdate),cs(e,134217728,536870912,0),Sa(e,8388608|((t=wi(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,wi(e,768,1024)}function es(e,t,n,i,o,a,s,u,l,c,h,f,d){return 0===n?function(e,t,n,r,i,o,a,s,u,l,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,a,s,u,l,c,h){var f=t.bindings.length,d=!1;return f>0&&So(e,t,0,n)&&(d=!0),f>1&&So(e,t,1,r)&&(d=!0),f>2&&So(e,t,2,i)&&(d=!0),f>3&&So(e,t,3,o)&&(d=!0),f>4&&So(e,t,4,a)&&(d=!0),f>5&&So(e,t,5,s)&&(d=!0),f>6&&So(e,t,6,u)&&(d=!0),f>7&&So(e,t,7,l)&&(d=!0),f>8&&So(e,t,8,c)&&(d=!0),f>9&&So(e,t,9,h)&&(d=!0),d}(e,t,n,r,i,o,a,s,u,l,c,h);case 2:return function(e,t,n,r,i,o,a,s,u,l,c,h){var f=!1,d=t.bindings,p=d.length;if(p>0&&Hi(e,t,0,n)&&(f=!0),p>1&&Hi(e,t,1,r)&&(f=!0),p>2&&Hi(e,t,2,i)&&(f=!0),p>3&&Hi(e,t,3,o)&&(f=!0),p>4&&Hi(e,t,4,a)&&(f=!0),p>5&&Hi(e,t,5,s)&&(f=!0),p>6&&Hi(e,t,6,u)&&(f=!0),p>7&&Hi(e,t,7,l)&&(f=!0),p>8&&Hi(e,t,8,c)&&(f=!0),p>9&&Hi(e,t,9,h)&&(f=!0),f){var m=t.text.prefix;p>0&&(m+=Ga(n,d[0])),p>1&&(m+=Ga(r,d[1])),p>2&&(m+=Ga(i,d[2])),p>3&&(m+=Ga(o,d[3])),p>4&&(m+=Ga(a,d[4])),p>5&&(m+=Ga(s,d[5])),p>6&&(m+=Ga(u,d[6])),p>7&&(m+=Ga(l,d[7])),p>8&&(m+=Ga(c,d[8])),p>9&&(m+=Ga(h,d[9]));var v=Mi(e,t.nodeIndex).renderText;e.renderer.setValue(v,m)}return f}(e,t,n,r,i,o,a,s,u,l,c,h);case 16384:return function(e,t,n,r,i,o,a,s,u,l,c,h){var f=Si(e,t.nodeIndex),d=f.instance,p=!1,m=void 0,v=t.bindings.length;return v>0&&Vi(e,t,0,n)&&(p=!0,m=Ta(e,f,t,0,n,m)),v>1&&Vi(e,t,1,r)&&(p=!0,m=Ta(e,f,t,1,r,m)),v>2&&Vi(e,t,2,i)&&(p=!0,m=Ta(e,f,t,2,i,m)),v>3&&Vi(e,t,3,o)&&(p=!0,m=Ta(e,f,t,3,o,m)),v>4&&Vi(e,t,4,a)&&(p=!0,m=Ta(e,f,t,4,a,m)),v>5&&Vi(e,t,5,s)&&(p=!0,m=Ta(e,f,t,5,s,m)),v>6&&Vi(e,t,6,u)&&(p=!0,m=Ta(e,f,t,6,u,m)),v>7&&Vi(e,t,7,l)&&(p=!0,m=Ta(e,f,t,7,l,m)),v>8&&Vi(e,t,8,c)&&(p=!0,m=Ta(e,f,t,8,c,m)),v>9&&Vi(e,t,9,h)&&(p=!0,m=Ta(e,f,t,9,h,m)),m&&d.ngOnChanges(m),65536&t.flags&&Ei(e,256,t.nodeIndex)&&d.ngOnInit(),262144&t.flags&&d.ngDoCheck(),p}(e,t,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,a,s,u,l,c,h){var f=t.bindings,d=!1,p=f.length;if(p>0&&Hi(e,t,0,n)&&(d=!0),p>1&&Hi(e,t,1,r)&&(d=!0),p>2&&Hi(e,t,2,i)&&(d=!0),p>3&&Hi(e,t,3,o)&&(d=!0),p>4&&Hi(e,t,4,a)&&(d=!0),p>5&&Hi(e,t,5,s)&&(d=!0),p>6&&Hi(e,t,6,u)&&(d=!0),p>7&&Hi(e,t,7,l)&&(d=!0),p>8&&Hi(e,t,8,c)&&(d=!0),p>9&&Hi(e,t,9,h)&&(d=!0),d){var m=Ai(e,t.nodeIndex),v=void 0;switch(201347067&t.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=u),p>7&&(v[7]=l),p>8&&(v[8]=c),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=l),p>8&&(v[f[8].name]=c),p>9&&(v[f[9].name]=h);break;case 128:var g=n;switch(p){case 1:v=g.transform(n);break;case 2:v=g.transform(r);break;case 3:v=g.transform(r,i);break;case 4:v=g.transform(r,i,o);break;case 5:v=g.transform(r,i,o,a);break;case 6:v=g.transform(r,i,o,a,s);break;case 7:v=g.transform(r,i,o,a,s,u);break;case 8:v=g.transform(r,i,o,a,s,u,l);break;case 9:v=g.transform(r,i,o,a,s,u,l,c);break;case 10:v=g.transform(r,i,o,a,s,u,l,c,h)}}m.value=v}return d}(e,t,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(e,t,i,o,a,s,u,l,c,h,f,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)So(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)Hi(e,t,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=Ga(n[o],r[o]);a=t.text.prefix+a;var s=Mi(e,t.nodeIndex).renderText;e.renderer.setValue(s,a)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=Si(e,t.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Vi(e,t,s,n[s])&&(o=!0,a=Ta(e,r,t,s,n[s],a));return a&&i.ngOnChanges(a),65536&t.flags&&Ei(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var i=t.bindings,o=!1,a=0;a<n.length;a++)Hi(e,t,a,n[a])&&(o=!0);if(o){var s=Ai(e,t.nodeIndex),u=void 0;switch(201347067&t.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var l=n[0],c=n.slice(1);u=l.transform.apply(l,Object(r.__spread)(c))}s.value=u}return o}(e,t,n);default:throw"unreachable"}}(e,t,i)}function ts(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=Ti(e,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,Xi(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ns(e,t,n,r,i,o,a,s,u,l,c,h,f){return 0===n?function(e,t,n,r,i,o,a,s,u,l,c,h){var f=t.bindings.length;f>0&&Wi(e,t,0,n),f>1&&Wi(e,t,1,r),f>2&&Wi(e,t,2,i),f>3&&Wi(e,t,3,o),f>4&&Wi(e,t,4,a),f>5&&Wi(e,t,5,s),f>6&&Wi(e,t,6,u),f>7&&Wi(e,t,7,l),f>8&&Wi(e,t,8,c),f>9&&Wi(e,t,9,h)}(e,t,r,i,o,a,s,u,l,c,h,f):function(e,t,n){for(var r=0;r<n.length;r++)Wi(e,t,r,n[r])}(e,t,r),!1}function rs(e,t){if(Ci(e,t.nodeIndex).dirty)throw Pi(Li.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function is(e){if(!(128&e.state)){if(ss(e,os.Destroy),as(e,os.Destroy),Sa(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=Yi(e);if(t){var n=t.template._projectedViews;n&&(Bo(n,n.indexOf(e)),Li.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(Ti(e,n).renderElement):2&r.flags?e.renderer.destroyNode(Mi(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&Ci(e,n).destroy()}}(e),$i(e)&&e.renderer.destroy(),e.state|=128}}var os=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function as(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?us(Ti(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ss(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Ti(e,r).viewContainer._embeddedViews,a=0;a<o.length;a++)us(o[a],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function us(e,t){var n=e.state;switch(t){case os.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ka(e):64&n&&ls(e,os.CheckNoChangesProjectedViews));break;case os.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ka(e):64&n&&ls(e,t));break;case os.CheckAndUpdate:0==(128&n)&&(12==(12&n)?$a(e):64&n&&ls(e,os.CheckAndUpdateProjectedViews));break;case os.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?$a(e):64&n&&ls(e,t));break;case os.Destroy:is(e);break;case os.CreateViewNodes:Ja(e)}}function ls(e,t){ss(e,t),as(e,t)}function cs(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,o=0;o<i;o++){var a=e.def.nodes[o];if(a.flags&t&&a.flags&n)switch(Li.setCurrentNode(e,a.nodeIndex),r){case 0:Pa(e,a);break;case 1:rs(e,a)}a.childFlags&t&&a.childFlags&n||(o+=a.childCount)}}var hs=!1;function fs(){if(!hs){hs=!0;var e=Ln()?{setCurrentNode:Ns,createRootView:ps,createEmbeddedView:vs,createComponentView:gs,createNgModuleRef:ys,overrideProvider:ws,overrideComponentView:Es,clearOverrides:Ms,checkAndUpdateView:Cs,checkNoChangesView:Rs,destroyView:Ls,createDebugContext:function(e,t){return new Ws(e,t)},handleEvent:Ds,updateDirectives:Fs,updateRenderer:Us}:{setCurrentNode:function(){},createRootView:ds,createEmbeddedView:qa,createComponentView:Qa,createNgModuleRef:na,overrideProvider:ki,overrideComponentView:ki,clearOverrides:ki,checkAndUpdateView:$a,checkNoChangesView:Ka,destroyView:is,createDebugContext:function(e,t){return new Ws(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?Ss:As,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?Ss:As,e)}};Li.setCurrentNode=e.setCurrentNode,Li.createRootView=e.createRootView,Li.createEmbeddedView=e.createEmbeddedView,Li.createComponentView=e.createComponentView,Li.createNgModuleRef=e.createNgModuleRef,Li.overrideProvider=e.overrideProvider,Li.overrideComponentView=e.overrideComponentView,Li.clearOverrides=e.clearOverrides,Li.checkAndUpdateView=e.checkAndUpdateView,Li.checkNoChangesView=e.checkNoChangesView,Li.destroyView=e.destroyView,Li.resolveDep=Ea,Li.createDebugContext=e.createDebugContext,Li.handleEvent=e.handleEvent,Li.updateDirectives=e.updateDirectives,Li.updateRenderer=e.updateRenderer,Li.dirtyParentQueries=La}}function ds(e,t,n,r,i,o){return Xa(ms(e,i,i.injector.get(Wn),t,n),r,o)}function ps(e,t,n,r,i,o){var a=i.injector.get(Wn),s=ms(e,i,new Ys(a),t,n),u=Ts(r);return Xs(ks.create,Xa,null,[s,u,o])}function ms(e,t,n,r,i){var o=t.injector.get(xi),a=t.injector.get(Xe);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function vs(e,t,n,r){var i=Ts(n);return Xs(ks.create,qa,null,[e,t,i,r])}function gs(e,t,n,r){return n=xs.get(t.element.componentProvider.provider.token)||Ts(n),Xs(ks.create,Qa,null,[e,t,n,r])}function ys(e,t,n,r){return na(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===bs.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var r=bs.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(function(e){_s.forEach(function(r,i){i.ngInjectableDef.providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var r=e.providers[t];n&&(r.flags|=4096);var i=bs.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ro(i.deps),r.value=i.value)}if(_s.size>0){var o=new Set(e.modules);_s.forEach(function(t,r){if(o.has(r.ngInjectableDef.providedIn)){var i={token:r,flags:t.flags|(n?4096:0),deps:ro(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[Di(r)]=i}})}}(e=e.factory(function(){return ki})),e):e}(r))}var bs=new Map,_s=new Map,xs=new Map;function ws(e){bs.set(e.token,e),"function"==typeof e.token&&e.token.ngInjectableDef&&"function"==typeof e.token.ngInjectableDef.providedIn&&_s.set(e.token,e)}function Es(e,t){var n=ao(ao(Go(t)).nodes[0].element.componentView);xs.set(e,n)}function Ms(){bs.clear(),_s.clear(),xs.clear()}function Ts(e){if(0===bs.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&bs.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return ki});for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=bs.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=ro(o.deps),i.value=o.value)}}}}function Ss(e,t,n,r,i,o,a,s,u,l,c,h,f){var d=e.def.nodes[t];return es(e,d,n,r,i,o,a,s,u,l,c,h,f),224&d.flags?Ai(e,t).value:void 0}function As(e,t,n,r,i,o,a,s,u,l,c,h,f){var d=e.def.nodes[t];return ns(e,d,n,r,i,o,a,s,u,l,c,h,f),224&d.flags?Ai(e,t).value:void 0}function Cs(e){return Xs(ks.detectChanges,$a,null,[e])}function Rs(e){return Xs(ks.checkNoChanges,Ka,null,[e])}function Ls(e){return Xs(ks.destroy,is,null,[e])}var Ps,Os,Is,ks=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function Ns(e,t){Os=e,Is=t}function Ds(e,t,n,r){return Ns(e,t),Xs(ks.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function Fs(e,t){if(128&e.state)throw Ii(ks[Ps]);return Ns(e,Vs(e,0)),e.def.updateDirectives(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=e.def.nodes[n];return 0===t?Bs(e,a,r,i):js(e,a,r,i),16384&a.flags&&Ns(e,Vs(e,n)),224&a.flags?Ai(e,a.nodeIndex).value:void 0},e)}function Us(e,t){if(128&e.state)throw Ii(ks[Ps]);return Ns(e,Hs(e,0)),e.def.updateRenderer(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=e.def.nodes[n];return 0===t?Bs(e,a,r,i):js(e,a,r,i),3&a.flags&&Ns(e,Hs(e,n)),224&a.flags?Ai(e,a.nodeIndex).value:void 0},e)}function Bs(e,t,n,i){if(es.apply(void 0,Object(r.__spread)([e,t,n],i))){var o=1===n?i[0]:i;if(16384&t.flags){for(var a={},s=0;s<t.bindings.length;s++){var u=t.bindings[s],l=o[s];8&u.flags&&(a[(d=u.nonMinifiedName,"ng-reflect-"+(d=d.replace(/[$@]/g,"_").replace(zs,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()})))]=Gs(l))}var c=t.parent,h=Ti(e,c.nodeIndex).renderElement;if(c.element.name)for(var f in a)null!=(l=a[f])?e.renderer.setAttribute(h,f,l):e.renderer.removeAttribute(h,f);else e.renderer.setValue(h,"bindings="+JSON.stringify(a,null,2))}}var d}function js(e,t,n,i){ns.apply(void 0,Object(r.__spread)([e,t,n],i))}var zs=/([A-Z])/g;function Gs(e){try{return null!=e?e.toString().slice(0,30):e}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function Vs(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Hs(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Ws=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,r=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Zi(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return Ti(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return Jo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){qs(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&qs(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!$i(e);)e=e.parent;return e.parent?Ti(e.parent,Zi(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Ji(this.view,this.nodeDef):Ji(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var a=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(t,n),s=-1;t.factory(function(){var t;return++s===a?(t=e.error).bind.apply(t,Object(r.__spread)([e],i)):ki}),s<a&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,Object(r.__spread)(i)))},e}();function qs(e,t,n){for(var r in t.references)n[r]=Ia(e,t,t.references[r])}function Xs(e,t,n,r){var i=Ps,o=Os,a=Is;try{Ps=e;var s=t.apply(n,r);return Os=o,Is=a,Ps=i,s}catch(e){if(He(e)||!Os)throw e;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),Oi(e,t),e}(e,Qs())}}function Qs(){return Os?new Ws(Os,Is):null}var Ys=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new Zs(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),Zs=function(){function e(e){this.delegate=e,this.data=this.delegate.data}return e.prototype.destroyNode=function(e){!function(e){pr.delete(e.nativeNode)}(mr(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),r=Qs();if(r){var i=new cr(n,null,r);i.name=e,vr(i)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=Qs();return n&&vr(new lr(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=Qs();return n&&vr(new lr(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=mr(e),r=mr(t);n&&r&&n instanceof cr&&n.addChild(r),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var r=mr(e),i=mr(t),o=mr(n);r&&i&&r instanceof cr&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=mr(e),r=mr(t);n&&r&&n instanceof cr&&n.removeChild(r),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e){var t=this.delegate.selectRootElement(e),n=Qs();return n&&vr(new cr(t,null,n)),t},e.prototype.setAttribute=function(e,t,n,r){var i=mr(e);i&&i instanceof cr&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){var r=mr(e);r&&r instanceof cr&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=mr(e);n&&n instanceof cr&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=mr(e);n&&n instanceof cr&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){var i=mr(e);i&&i instanceof cr&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){var r=mr(e);r&&r instanceof cr&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var r=mr(e);r&&r instanceof cr&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var r=mr(e);r&&r.listeners.push(new function(e,t){this.name=e,this.callback=t}(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}();function Js(e){return fs(),Li.overrideProvider(e)}function Ks(e,t){return fs(),Li.overrideComponentView(e,t)}function $s(){return fs(),Li.clearOverrides()}function eu(e,t,n){return new tu(e,t,n)}var tu=function(e){function t(t,n,r){var i=e.call(this)||this;return i.moduleType=t,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(t,e),t.prototype.create=function(e){fs();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(ao(this._ngModuleDefFactory));return Li.createNgModuleRef(this.moduleType,e||fe.NULL,this._bootstrapComponents,t)},t}(en);function nu(e,t,n){e!=t&&su(n)}function ru(e,t,n){e==t&&su(n)}function iu(e,t,n){e>=t&&su(n)}function ou(e,t){null==e&&su(t)}function au(e,t){void 0===t&&(t="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),e.ngComponentDef||su(t)}function su(e){throw new Error("ASSERTION ERROR: "+e)}var uu=16,lu=0,cu=1,hu=2,fu=3,du=4,pu=5,mu=6,vu=7,gu=8,yu=9,bu=10,_u=11,xu=12,wu=13,Eu=14,Mu=15;function Tu(e,t,n,r){ngDevMode&&nu(r.firstTemplatePass,!0,"Should only be called on first template pass"),t&&(r.initHooks||(r.initHooks=[])).push(e,t),n&&((r.initHooks||(r.initHooks=[])).push(e,n),(r.checkHooks||(r.checkHooks=[])).push(e,n))}function Su(e,t){if(t.firstTemplatePass)for(var n=e>>14,r=n+(4095&e),i=n;i<r;i++){var o=t.directives[i];Au(o,t,i),Cu(o,t,i),Ru(o,t,i)}}function Au(e,t,n){e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked))}function Cu(e,t,n){e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked))}function Ru(e,t,n){null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}function Lu(e,t,n){16&e[du]&&(Pu(e[vu],t.initHooks,t.checkHooks,n),e[du]&=-17)}function Pu(e,t,n,r){var i=r?t:n;i&&Ou(e,i)}function Ou(e,t){for(var n=0;n<t.length;n+=2)t[n+1].call(e[t[n]])}function Iu(e){throw new Error("Multiple components match node with tagname "+e.tagName)}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&window||"undefined"!=typeof self&&self);var ku=0,Nu=4,Du=5,Fu="ngProjectAs",Uu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Bu(e){return!!e.listen}var ju={createRenderer:function(e,t){return document}};function zu(e,t){ou(e,"should be called with a node"),nu(e.tNode.type,t,"should be a "+Vu(t))}function Gu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ou(e,"should be called with a node"),nu(t.some(function(t){return e.tNode.type===t}),!0,"Should be one of "+t.map(Vu).join(", "))}function Vu(e){return 1==e?"Projection":0==e?"Container":2==e?"View":3==e?"Element":"<unknown>"}function Hu(e){return"function"==typeof e?e.name||e:"string"==typeof e?e:null==e?"":""+e}function Wu(e,t){return ngDevMode&&qu(e+uu,t),t[e+uu]}function qu(e,t){iu(e,t?t.length:0,"index expected to be a valid data index")}function Xu(e){return Array.isArray(e)?e[0]:e}function Qu(e){if(2===e.tNode.type){var t=e.data;return t[hu]?t[hu][pu]:null}return e.tNode.next?e.view[e.tNode.next.index]:null}function Yu(e){return e.tNode.child?Xu((2===e.tNode.type?e.data:e.view)[e.tNode.child.index]):null}function Zu(e){if(-1===e.tNode.index&&2===e.tNode.type){var t=e.data[Eu];return-1===t?null:e.view[t].dynamicLContainerNode}var n=e.tNode.parent;return Xu(n?e.view[n.index]:e.view[pu])}var Ju=[];function Ku(e,t,n,r,i,o){for(var a=e,s=-1;a;){var u=null,l=i?i.native:null,c=a.tNode.type;if(3===c)el(n,r,l,a.native,o),a.dynamicLContainerNode&&el(n,r,l,a.dynamicLContainerNode.native,o);else if(0===c){el(n,r,l,a.native,o);var h=a,f=h.dynamicLContainerNode?h.dynamicLContainerNode.data:h.data;i&&(f[Du]=i),(u=f[Nu].length?Yu(f[Nu][0]):null)&&(o=h.dynamicLContainerNode?h.dynamicLContainerNode.native:h.native)}else if(1===c){var d=$u(a.view),p=d.tNode.projection[a.tNode.projection];Ju[++s]=a,u=p?d.data[cu][p.index]:null}else u=Yu(a);if(null===u)for(null===(u=Qu(a))&&8192&a.tNode.flags&&(u=Qu(Ju[s--]));a&&!u;){if(null===(a=Zu(a))||a===t)return null;a.tNode.next||0!==c||(o=a.native),u=Qu(a)}a=u}}function $u(e){for(var t=e[pu];2===t.tNode.type;)ngDevMode&&ou(e[cu],"lViewData.parent"),t=(e=e[cu])[pu];return ngDevMode&&zu(t,3),ngDevMode&&ou(t.data,"node.data"),t}function el(e,t,n,r,i){0===e?Bu(t)?t.insertBefore(n,r,i):n.insertBefore(r,i,!0):1===e?Bu(t)?t.removeChild(n,r):n.removeChild(r):2===e&&(ngDevMode&&ngDevMode.rendererDestroyNode++,t.destroyNode(r))}function tl(e,t){return Bu(t)?t.createText(Hu(e)):t.createTextNode(Hu(e))}function nl(e,t,n,r){ngDevMode&&zu(e,0),ngDevMode&&zu(t,2);var i=e.data[Du];i&&i.native&&Ku(Yu(t),t,n?0:1,e.view[_u],i,r)}function rl(e,t,n){var r=e.data[Nu],i=t.data;return n>0&&(r[n-1].data[hu]=i),n<r.length?(i[hu]=r[n].data,r.splice(n,0,t)):(r.push(t),i[hu]=null),-1===t.tNode.index&&(i[Eu]=e.tNode.parent.index,t.view=e.view),i[fu]&&i[fu].insertView(n),i[du]|=8,t}function il(e,t){var n=e.data[Nu],r=n[t];t>0&&(n[t-1].data[hu]=r.data[hu]),n.splice(t,1),e.tNode.detached||nl(e,r,!1);var i=r.data;return i[fu]&&i[fu].removeView(),i[Eu]=-1,r.view=null,r.data[du]&=-9,r}function ol(e,t){var n=e.data[Nu][t];return il(e,t),sl(n.data),n}function al(e){if(-1===e[lu].childIndex)return null;var t=e[e[lu].childIndex];return t.data?t.data:t.dynamicLContainerNode.data}function sl(e){var t=e[_u];Bu(t)&&t.destroyNode&&Ku(e[pu],e[pu],2,t),function(e){if(-1===e[lu].childIndex)return ll(e);for(var t=al(e);t;){var n=null;if(t.length>=uu?t[lu].childIndex>-1&&(n=al(t)):t[Nu].length&&(n=t[Nu][0].data),null==n){for(;t&&!t[hu]&&t!==e;)ll(t),t=ul(t,e);ll(t||e),n=t&&t[hu]}t=n}}(e),e[du]|=32}function ul(e,t){var n;return(n=e[pu])&&2===n.tNode.type?Zu(n).data:e[cu]===t?null:e[cu]}function ll(e){if(e[lu]){var t=e;!function(e){var t=e[lu].cleanup;if(null!=t){for(var n=0;n<t.length-1;n+=2)"string"==typeof t[n]?(Xu(e[t[n+1]]).native.removeEventListener(t[n],e[gu][t[n+2]],t[n+3]),n+=2):"number"==typeof t[n]?(0,e[gu][t[n]])():t[n].call(e[gu][t[n+1]]);e[gu]=null}}(t),function(e){var t,n=e[lu];null!=n&&null!=(t=n.destroyHooks)&&Ou(e[vu],t)}(t),(r=(n=t)[lu]&&n[lu].pipeDestroyHooks)&&Ou(n,r),-1===t[lu].id&&Bu(t[_u])&&(ngDevMode&&ngDevMode.rendererDestroy++,t[_u].destroy())}var n,r}function cl(e,t){if(ngDevMode&&Gu(e,3,2),3===e.tNode.type)return e.view!==t||null===e.data;ngDevMode&&zu(e,2);var n=Zu(e);return null!=n&&(ngDevMode&&zu(n,0),null!=n.data[Du])}function hl(e,t,n){if(null!==t&&cl(e,n)){var r=n[_u];if(2===e.tNode.type){var i=Zu(e),o=i.data[Du],a=i.data[Nu],s=a.indexOf(e),u=s+1<a.length?Yu(a[s+1]).native:i.native;Bu(r)?r.insertBefore(o.native,t,u):o.native.insertBefore(t,u,!0)}else Bu(r)?r.appendChild(e.native,t):e.native.appendChild(t);return!0}return!1}function fl(e,t,n){if(null!==t&&cl(e,n)){var r=n[_u];return Bu(r)?r.removeChild(e.native,t):e.native.removeChild(t),!0}return!1}function dl(e,t,n,r){if(hl(t,e.native,n),0===e.tNode.type){var i=e.data;i[Du]=r;for(var o=i[Nu],a=0;a<o.length;a++)nl(e,o[a],!0,e.native)}e.dynamicLContainerNode&&(e.dynamicLContainerNode.data[Du]=r,hl(t,e.dynamicLContainerNode.native,n))}function pl(e,t){ngDevMode&&ou(t[0],"Selector should have a tag name");for(var n,r,i,o,a,s=4,u=e.attrs,l=u?u.indexOf(1):-1,c=!1,h=0;h<t.length;h++){var f=t[h];if("number"!=typeof f){if(!c)if(4&s){if(s=2|1&s,""!==f&&f!==e.tagName){if(ml(s))return!1;c=!0}}else{var d=vl(8&s?"class":f,u);if(-1===d){if(ml(s))return!1;c=!0;continue}var p=8&s?f:t[++h];if(""!==p){var m=void 0;if(l>-1&&d>l?m="":(ngDevMode&&ru(u[d],0,"We do not match directives on namespaced attributes"),m=u[d+1]),8&s&&(i=(n=m).length,a=(o=n.indexOf(r=p))+r.length,-1===o||o>0&&" "!==n[o-1]||a<i&&" "!==n[a])||2&s&&p!==m){if(ml(s))return!1;c=!0}}}}else{if(!c&&!ml(s)&&!ml(f))return!1;if(c&&ml(f))continue;c=!1,s=f|1&s}}return ml(s)||c}function ml(e){return 0==(1&e)}function vl(e,t){if(null===t)return-1;for(var n=!1,r=0;r<t.length;){var i=t[r];if(i===e)return r;0===i?r+=4:(1===i&&(n=!0),r+=n?1:2)}return-1}function gl(e,t){for(var n=0;n<t.length;n++)if(pl(e,t[n]))return!0;return!1}function yl(e,t,n){for(var r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(Fu);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++)if(r===n[i]||null===r&&gl(e,t[i]))return i+1;return 0}var bl=[],_l={};function xl(e,t,n){var r=6+3*t,i=Ul(e,r),o=Fl(e,r);if(ql(o,i,n)){Nl(e,r,n);var a=Pl(o),s=Ul(e,a);if(!s||s!==n){var u=!1,l=!0,c=2==(2&o);!Hl(n,c)&&Hl(s,c)&&(u=!0,l=!1),Ml(e,a,u),Ml(e,r,l),jl(e,!0)}}}function wl(e,t,n,r,i,o){n=i&&n?i(t,n):n,o?o[t]=n:n?(ngDevMode&&ngDevMode.rendererSetStyle++,Bu(r)?r.setStyle(e,t,n,Uu.DashCase):e.style.setProperty(t,n)):(ngDevMode&&ngDevMode.rendererRemoveStyle++,Bu(r)?r.removeStyle(e,t,Uu.DashCase):e.style.removeProperty(t))}function El(e,t,n,r,i){i?i[t]=n:n?(ngDevMode&&ngDevMode.rendererAddClass++,Bu(r)?r.addClass(e,t):e.classList.add(t)):(ngDevMode&&ngDevMode.rendererRemoveClass++,Bu(r)?r.removeClass(e,t):e.classList.remove(t))}function Ml(e,t,n){var r=t>=6?t+0:t;n?e[r]|=1:e[r]&=-2}function Tl(e,t){return 1==(1&e[t>=6?t+0:t])}function Sl(e,t){return 2==(2&e[t>=6?t+0:t])}function Al(e,t){return 4==(4&e[t>=6?t+0:t])}function Cl(e,t,n){return 7&e|t<<3|n<<17}function Rl(e,t){var n=Ll(t);return e[2][n]}function Ll(e){return e>>3&16383}function Pl(e){var t=e>>17&16383;return t>=6?t:-1}function Ol(e){return Pl(e[3])}function Il(e){return e[1]}function kl(e,t,n){e[t+1]=n}function Nl(e,t,n){e[t+2]=n}function Dl(e,t,n){e[3===t?t:t+0]=n}function Fl(e,t){return e[3===t?t:t+0]}function Ul(e,t){return e[t+2]}function Bl(e,t){return e[t+1]}function jl(e,t){Ml(e,3,t)}function zl(e,t,n){for(var r=(n||0)+1;r<e.length;r+=3)if(e[r]==t)return r-1;return-1}function Gl(e,t,n){var r=Ul(e,t),i=Bl(e,t),o=Fl(e,t),a=o,s=Fl(e,n),u=Pl(a);u>=0&&Dl(e,u,Cl(l=Fl(e,u),Ll(l),n));var l,c=Pl(s);c>=0&&Dl(e,c,Cl(l=Fl(e,c),Ll(l),t)),Nl(e,t,Ul(e,n)),kl(e,t,Bl(e,n)),Dl(e,t,Fl(e,n)),Nl(e,n,r),kl(e,n,i),Dl(e,n,o)}function Vl(e,t,n,r,i,o){var a=t<e.length;e.splice(t,0,1|i|(n?2:0),r,o),a&&function(e,n){for(var r=t+3;r<e.length;r+=3){var i=Pl(Fl(e,r));if(i>0){var o=Ll(Fl(e,i));Dl(e,i,Cl((Tl(e,i)?1:0)|(Sl(e,i)?2:0)|(Al(e,i)?4:0),o,r))}}}(e)}function Hl(e,t){return t?!!e:null!==e}function Wl(e,t,n){return t?2:n&&n(e)?4:0}function ql(e,t,n){return!(2&e)&&t&&n&&4&e?t.toString()!==n.toString():t!==n}var Xl,Ql,Yl,Zl,Jl,Kl,$l,ec,tc,nc="__ngHostLNode__",rc=Promise.resolve(null),ic=[0,0],oc=new Array(uu).fill(null),ac="__CIRCULAR__",sc=null;function uc(){return Xl}function lc(){return ec&&ec[xu]}function cc(){return ec}function hc(){return Yl}function fc(e){return e[gu]||(e[gu]=[])}function dc(e){return e[lu].cleanup||(e[lu].cleanup=[])}var pc=!1,mc=!0;function vc(e,t){var n=ec;return tc=e&&e[vu],Jl=e&&e[lu],$l=e&&1==(1&e[du]),mc=e&&Jl.firstTemplatePass,Xl=e&&e[_u],null!=t&&(Yl=t,Zl=!0),ec=e,Kl=e&&e[fu],n}function gc(e,t){t||(pc||Pu(tc,Jl.viewHooks,Jl.viewCheckHooks,$l),ec[du]&=-6),ec[du]|=16,ec[mu]=-1,vc(e,null)}function yc(){pc||Lu(ec,Jl,$l),function(e){for(var t=al(ec);null!==t;t=t[hu])if(t.length<uu&&null===t[ku])for(var n=t,r=0;r<n[Nu].length;r++){var i=n[Nu][r],o=i.data;ngDevMode&&ou(o[lu],"TView must be allocated"),Tc(i,o[lu],o[yu],2)}}(),pc||Pu(tc,Jl.contentHooks,Jl.contentCheckHooks,$l),Jl.firstTemplatePass=mc=!1,bc(Jl.hostBindings),function(e){if(null!=e.contentQueries)for(var t=0;t<e.contentQueries.length;t+=2){var n=e.contentQueries[t];e.directives[n].contentQueriesRefresh(n,e.contentQueries[t+1])}}(Jl),function(e){if(null!=e)for(var t=0;t<e.length;t+=2)vh(e[t],e[t+1])}(Jl.components)}function bc(e){if(null!=e)for(var t=Jl.directives,n=0;n<e.length;n+=2){var r=e[n],i=t[r];i.hostBindings&&i.hostBindings(r,e[n+1])}}function _c(){pc||(Lu(ec,Jl,$l),Pu(tc,Jl.contentHooks,Jl.contentCheckHooks,$l))}function xc(e,t,n,r,i){return[t,ec,null,null,25|r,null,-1,null,null,n,ec&&ec[bu],e,i||null,null,-1,null]}function wc(e,t,n,r,i,o){return{native:r,view:t,nodeInjector:n?n.nodeInjector:null,data:i,queries:o,tNode:null,dynamicLContainerNode:null}}function Ec(e,t,n,r,i,o){var a=Zl?Yl:Yl&&Zu(Yl),s=a&&a.view===ec?a.tNode:null,u=(Zl?Kl:Yl&&Yl.queries)||a&&a.queries&&a.queries.child(),l=null!=o,c=wc(0,ec,a,n,l?o:null,u);if(-1===e||2===t)c.tNode=(o?o[lu].node:null)||Kc(t,e,null,null,s,null);else{var h=e+uu;ngDevMode&&of(h);var f=Jl.data;if(ec[h]=c,h>=f.length){var d=f[h]=Kc(t,h,r,i,s,null);if(!Zl&&Yl){var p=Yl.tNode;p.next=d,p.dynamicContainerNode&&(p.dynamicContainerNode.next=d)}}c.tNode=f[h],Zl&&(Kl=null,(null==Yl.tNode.child&&Yl.view===ec||2===Yl.tNode.type)&&(Yl.tNode.child=c.tNode))}if(2==(2&t)&&l){var m=o;ngDevMode&&null!=m[pu]&&su("lViewData[HOST_NODE] should not have been initialized"),m[pu]=c,mc&&(m[lu].node=c.tNode)}return Yl=c,Zl=!0,c}function Mc(){Zl=!1,Yl=null}function Tc(e,t,n,r){var i,o=Zl,a=Yl;if(null==e.data[cu]&&e.data[yu]&&!t.template)Eh(e.data[yu]);else try{Zl=!0,Yl=null,i=vc(e.data,e),Pc(),t.template(r,n),2&r?yc():e.data[lu].firstTemplatePass=mc=!1}finally{gc(i,1==(1&r)),Zl=o,Yl=a}return e}function Sc(e,t,n,r){var i=vc(t,e);try{Ql.begin&&Ql.begin(),r?(Pc(),r(Ac(t),n),yc()):(_c(),bc(ic),vh(0,uu))}finally{Ql.end&&Ql.end(),gc(i)}}function Ac(e){return 1&e[du]?3:2}var Cc=null;function Rc(){Cc="http://www.w3.org/2000/svg/"}function Lc(){Cc="http://www.w3.org/1998/MathML/"}function Pc(){Cc=null}function Oc(e,t,n,r){Ic(e,t,n,r),Yc()}function Ic(e,t,n,r){ngDevMode&&nu(ec[mu],-1,"elements should be created before any bindings"),ngDevMode&&ngDevMode.rendererCreateElement++;var i=kc(t);ngDevMode&&rf(e-1);var o=Ec(e,3,i,t,n||null,null);return sc=o,n&&Vc(i,n),hl(Zu(o),i,ec),Nc(r),i}function kc(e,t){var n=t||Xl;return Bu(n)?n.createElement(e,Cc):null===Cc?n.createElement(e):n.createElementNS(Cc,e)}function Nc(e){var t=Yl;mc?(ngDevMode&&ngDevMode.firstTemplatePass++,function(e,t,n){var r=n?{"":-1}:null,i=t.currentMatches=Dc(e);if(i)for(var o=0;o<i.length;o+=2){var a=i[o],s=o+1;Fc(a,s,i,t),jc(i[s],a,r)}r&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new Error("Export of name '"+t[i+1]+"' not found!");r.push(t[i],o)}}(e,n,r)}(t.tNode,Jl,e||null)):function(){var e=Yl.tNode,t=4095&e.flags;if(t>0)for(var n=e.flags>>14,r=n+t,i=Jl.directives,o=n;o<r;o++){var a=i[o];uh(o,a.factory(),a)}}(),function(){var e=Yl.tNode.localNames;if(e)for(var t=0;t<e.length;t+=2){var n=e[t+1];ec.push(-1===n?Yl.native:tc[n])}}()}function Dc(e){var t=Jl.directiveRegistry,n=null;if(t)for(var r=0;r<t.length;r++){var i=t[r];gl(e,i.selectors)&&(i.template&&(4096&e.flags&&Iu(e),e.flags=4096),i.diPublic&&i.diPublic(i),(n||(n=[])).push(i,null))}return n}function Fc(e,t,n,r){if(null===n[t]){n[t]=ac;var i=e.factory();return(r.directives||(r.directives=[])).push(e),uh(n[t]=r.directives.length-1,i,e)}return n[t]===ac&&function(t){throw new Error("Cannot instantiate cyclic dependency! "+e.type)}(),null}function Uc(e){mc&&(Jl.components||(Jl.components=[])).push(e,ec.length-1)}function Bc(e,t,n){e&&null!=e.changeDetectorRef&&e.changeDetectorRef._setComponentContext(n,t)}function jc(e,t,n){n&&(t.exportAs&&(n[t.exportAs]=e),t.template&&(n[""]=e))}function zc(e,t,n,r){return e.ngPrivateData||(e.ngPrivateData=Gc(-1,e,t,n,r))}function Gc(e,t,n,r,i){return ngDevMode&&ngDevMode.tView++,{id:e,template:t,viewQuery:i,node:null,data:oc.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function Vc(e,t){for(var n=Bu(Xl),r=0;r<t.length;){var i=t[r];if(1===i)break;if(i===Fu)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===i){var o=t[r+1],a=t[r+2],s=t[r+3];n?Xl.setAttribute(e,a,s,o):e.setAttributeNS(o,a,s),r+=4}else s=t[r+1],n?Xl.setAttribute(e,i,s):e.setAttribute(i,s),r+=2}}function Hc(e,t){ngDevMode&&rf(-1),Ql=e;var n=e.createRenderer(null,null),r="string"==typeof t?Bu(n)?n.selectRootElement(t):n.querySelector(t):t;if(ngDevMode&&!r)throw new Error("Renderer: "+("string"==typeof t?"Host node with selector not found:":"Host node is required:")+" ["+Hu(t)+"]");return r}function Wc(e,t,n,r){Mc();var i=Ec(0,3,t,null,null,xc(Xl,zc(n.template,n.directiveDefs,n.pipeDefs,n.viewQuery),null,n.onPush?4:2,r));return mc&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),Jl.directives=[n]),i}function qc(e,t,n){void 0===n&&(n=!1),ngDevMode&&tf();var r=Yl,i=r.native;if(ngDevMode&&ngDevMode.rendererAddEventListener++,Bu(Xl)){var o=function(e,t){return function(n){return wh(e),t(n)}}(ec,t),a=Xl.listen(i,e,o);Qc(ec,a)}else{o=function(e,t){return function(n){wh(e),!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}(ec,t),i.addEventListener(e,o,n);var s=fc(ec);s.push(o),mc&&dc(ec).push(e,r.tNode.index,s.length-1,n)}var u=r.tNode;void 0===u.outputs&&(u.outputs=$c(r.tNode.flags,1));var l,c=u.outputs;c&&(l=c[e])&&function(e,t){for(var n=0;n<e.length;n+=2){ngDevMode&&rf(e[n],tc);var r=tc[e[n]][e[n+1]].subscribe(t);Xc(ec,r,r.unsubscribe)}}(l,t)}function Xc(e,t,n){e||(e=ec),fc(e).push(t),e[lu].firstTemplatePass&&dc(e).push(n,e[gu].length-1)}function Qc(e,t){fc(e).push(t),e[lu].firstTemplatePass&&dc(e).push(e[gu].length-1,null)}function Yc(){Zl?Zl=!1:(ngDevMode&&nf(),Yl=Zu(Yl)),ngDevMode&&zu(Yl,3);var e=Yl.queries;e&&e.addNode(Yl),Su(Yl.tNode.flags,Jl),sc=null}function Zc(e,t,n,r){if(n!==Ch){var i=Xh(e);if(null==n)ngDevMode&&ngDevMode.rendererRemoveAttribute++,Bu(Xl)?Xl.removeAttribute(i.native,t):i.native.removeAttribute(t);else{ngDevMode&&ngDevMode.rendererSetAttribute++;var o=null==r?Hu(n):r(n);Bu(Xl)?Xl.setAttribute(i.native,t,o):i.native.setAttribute(t,o)}}}function Jc(e,t,n,r){if(n!==Ch){var i=Xh(e),o=i.tNode;o&&void 0===o.inputs&&(o.inputs=$c(i.tNode.flags,0));var a,s=o&&o.inputs;if(s&&(a=s[t]))!function(e,t){for(var n=0;n<e.length;n+=2)ngDevMode&&rf(e[n],tc),tc[e[n]][e[n+1]]=t}(a,n),function(e){!e.data||2&e.data[du]||(e.data[du]|=4)}(i);else{n=null!=r?r(n):n;var u=i.native;ngDevMode&&ngDevMode.rendererSetProperty++,Bu(Xl)?Xl.setProperty(u,t,n):u.setProperty?u.setProperty(t,n):u[t]=n}}}function Kc(e,t,n,r,i,o){return ngDevMode&&ngDevMode.tNode++,{type:e,index:t,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:o,next:null,child:null,parent:i,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function $c(e,t){var n=4095&e,r=null;if(n>0)for(var i=e>>14,o=i+n,a=0===t,s=Jl.directives,u=i;u<o;u++){var l=s[u],c=a?l.inputs:l.outputs;for(var h in c)if(c.hasOwnProperty(h)){var f=c[h];(r=r||{}).hasOwnProperty(h)?r[h].push(u,f):r[h]=[u,f]}}return r}function eh(e,t,n){var r;xl(r=nh(e),t+r[4],!!n)}function th(e,t,n){var r=sc.tNode;r.stylingTemplate||(r.stylingTemplate=function(e,t,n){var r=[null],i=[null,n||null,r,0,0,null],o={},a={},s=0;if(t)for(var u=!1,l=0;l<t.length;l++)if(1===(f=t[l]))u=!0;else{var c=f;if(u){var h=t[++l];r.push(h),o[c]=r.length-1}else s++,o[c]=0}if(i[4]=s,e)for(u=!1,l=0;l<e.length;l++){var f;if(1===(f=e[l]))u=!0;else{var d=f;u?(h=e[++l],r.push(h),a[d]=r.length-1):a[d]=0}}var p=Object.keys(o),m=Object.keys(a),v=p.length,g=p.length+m.length,y=3*g*2+6;for(l=6;l<y;l++)i.push(null);var b=3*g+6;for(l=0;l<g;l++){var _=l>=v,x=(c=_?m[l-v]:p[l],_?a[c]:o[c]),w=r[x],E=3*l+b,M=3*l+6,T=Wl(c,_,n||null);Dl(i,M,Cl(T,x,E)),kl(i,M,c),Nl(i,M,null),Dl(i,E,Cl(T|(null!==w?1:0),x,M)),kl(i,E,c),Nl(i,E,null)}return Dl(i,3,Cl(0,0,b)),jl(i,r.length>1),i}(e,t,n)),(t&&t.length||e&&e.length)&&rh(r.index-uu)}function nh(e){var t=qh(e);if(!Array.isArray(t)){var n=t,r=n.tNode;ngDevMode&&ou(r.stylingTemplate,"getStylingContext() called before elementStyling()"),t=ec[e+uu]=function(e,t){var n=r.stylingTemplate.slice();return n[0]=e,n}(n)}return t}function rh(e){!function(e,t,n,r){if(function(e){return Tl(e,3)}(e)){for(var i=e[0].native,o=Ol(e),a=Il(e),s=6;s<e.length;s+=3)if(Tl(e,s)){var u=Bl(e,s),l=Ul(e,s),c=Fl(e,s),h=!!(2&c),f=l;s<o&&!Hl(f,h)&&(f=Ul(e,Pl(c))),Hl(f,h)||(f=Rl(e,c)),h?El(i,u,!!f,t,void 0):wl(i,u,f,t,4&c?a:null,void 0),Ml(e,s,!1)}jl(e,!1)}}(nh(e),Xl)}function ih(e,t,n,r){var i=null;n&&(i=r?Hu(n)+r:n),xl(nh(e),t,i)}function oh(e,t,n){!function(e,t,n){var r=bl,i=!1,o=!1;if("string"==typeof t){var a=e[5];a&&a===t?o=!0:(e[5]=t,r=t.split(/\s+/),i=!0)}else r=t?Object.keys(t):bl,e[5]=null;t=t||_l;var s=n?Object.keys(n):bl;n=n||_l;for(var u=s.length,l=!1,c=Ol(e),h=0,f=s.length+r.length;c<e.length&&h<f;){var d=h>=u;if(!o||!d){var p=d?h-u:h,m=d?r[p]:s[p],v=d?!!i||t[m]:n[m];if((T=Bl(e,c))===m){var g=Ul(e,c);ql(S=Fl(e,c),g,v)&&(Nl(e,c,v),(x=Rl(e,S))!==v&&(Ml(e,c,!0),l=!0))}else{var y=zl(e,m,c);if(y>0){var b=Ul(e,y),_=Fl(e,y);if(Gl(e,c,y),b!==v){var x=Rl(e,_);Nl(e,c,v),x!==v&&(Ml(e,c,!0),l=!0)}}else Vl(e,c,d,m,Wl(m,d,Il(e)),v),l=!0}}c+=3,h++}for(;c<e.length;){var w=2==(2&(S=Fl(e,c)));if(o&&w)break;Hl(g=Ul(e,c),w)&&(Ml(e,c,!0),Nl(e,c,null),l=!0),c+=3}for(var E=Il(e);h<f;){var M=h>=u;if(o&&M)break;p=M?h-u:h;var T=M?r[p]:s[p],S=(g=M?!!i||t[T]:n[T],1|Wl(T,M,E));e.push(S,T,g),h++,l=!0}l&&jl(e,!0)}(nh(e),t,n)}function ah(e,t){ngDevMode&&nu(ec[mu],-1,"text nodes should be created before bindings"),ngDevMode&&ngDevMode.rendererCreateTextNode++;var n=tl(t,Xl),r=Ec(e,3,n,null,null);Zl=!1,hl(Zu(r),n,ec)}function sh(e,t){if(t!==Ch){ngDevMode&&rf(e+uu);var n=Xh(e);ngDevMode&&ou(n,"LNode should exist"),ngDevMode&&ou(n.native,"native element should exist"),ngDevMode&&ngDevMode.rendererSetText++,Bu(Xl)?Xl.setValue(n.native,Hu(t)):n.native.textContent=Hu(t)}}function uh(e,t,n){var r=lh(e,t,n);ngDevMode&&ou(Yl.tNode,"previousOrParentNode.tNode");var i,o=Yl.tNode;return n.template&&function(e,t,n){var r=zc(n.template,n.directiveDefs,n.pipeDefs,n.viewQuery),i=xh(ec,Yl.tNode.index,xc(Ql.createRenderer(Yl.native,n.rendererType),r,null,n.onPush?4:2,lc()));Yl.data=i,i[pu]=Yl,Bc(Yl.nodeInjector,t,i),mc&&Uc(e)}(e,t,n),mc&&(Tu(e,n.onInit,n.doCheck,Jl),n.hostBindings&&(i=e,ngDevMode&&nu(mc,!0,"Should only be called in first template pass."),(Jl.hostBindings||(Jl.hostBindings=[])).push(i,ec.length-1-uu))),o&&o.attrs&&function(e,t,r,i){var o=i.initialInputs;(void 0===o||e>=o.length)&&(o=function(e,t,n){var r=n.initialInputs||(n.initialInputs=[]);r[e]=null;for(var i=n.attrs,o=0;o<i.length;){var a=i[o];if(1===a)break;if(0!==a){var s=t[a],u=i[o+1];void 0!==s&&(r[e]||(r[e]=[])).push(s,u),o+=2}else o+=4}return r}(e,n.inputs,i));var a=o[e];if(a)for(var s=0;s<a.length;s+=2)t[a[s]]=a[s+1]}(e,r,0,o),n.contentQueries&&n.contentQueries(),r}function lh(e,t,n){if(ngDevMode&&nu(ec[mu],-1,"directives should be created before any bindings"),ngDevMode&&tf(),Object.defineProperty(t,nc,{enumerable:!1,value:Yl}),null==tc&&(ec[vu]=tc=[]),ngDevMode&&of(e,tc),tc[e]=t,mc){var r=Yl.tNode.flags;0==(4095&r)?Yl.tNode.flags=e<<14|4096&r|1:(ngDevMode&&ru(4095&r,4095,"Reached the max number of directives"),Yl.tNode.flags++)}else{var i=n.diPublic;i&&i(n)}return null!=n.attributes&&3==Yl.tNode.type&&Vc(Yl.native,n.attributes),t}function ch(e,t,n){ngDevMode&&ou(e,"containers should have a parent");var r=cl(e,t)?e:null;return r&&2===r.tNode.type&&(r=Zu(r).data[Du]),[n?null:0,t,null,null,[],r]}function hh(e,t,n,r,i){ngDevMode&&nu(ec[mu],-1,"container nodes should be created before any bindings");var o=ch(Zl?Yl:Zu(Yl),ec),a=Xl.createComment(ngDevMode?"container":""),s=Ec(e,0,a,n||null,r||null,o);hl(Zu(s),a,ec),mc&&(s.tNode.tViews=t?Gc(-1,t,Jl.directiveRegistry,Jl.pipeRegistry,null):[]),xh(ec,e+uu,s.data);var u=s.queries;u&&(o[fu]=u.container()),Nc(i),Zl=!1,ngDevMode&&zu(Yl,0),u&&u.addNode(s),Su(s.tNode.flags,Jl)}function fh(e){Yl=Xh(e),ngDevMode&&zu(Yl,0),Zl=!0,Yl.data[ku]=0,pc||Lu(ec,Jl,$l)}function dh(){Zl?Zl=!1:(ngDevMode&&zu(Yl,2),ngDevMode&&nf(),Yl=Zu(Yl)),ngDevMode&&zu(Yl,0);var e=Yl;ngDevMode&&zu(e,0);for(var t=e.data[ku];t<e.data[Nu].length;)ol(e,t)}function ph(e){var t=Zl?Yl:Zu(Yl);ngDevMode&&zu(t,0);var n=t.data,r=function(e,t,r){for(var i=e.data[Nu],o=n[ku];o<i.length;o++){var a=i[o].data[lu].id;if(a===r)return i[o];if(!(a<r))break;ol(e,o)}return null}(t,0,e);if(r)Yl=r,ngDevMode&&zu(Yl,2),Zl=!0,vc(r.data,r);else{var i=xc(Xl,function(e,t){ngDevMode&&zu(t,0);var n=t.tNode.tViews;return ngDevMode&&ou(n,"TView expected"),ngDevMode&&nu(Array.isArray(n),!0,"TViews should be in an array"),(e>=n.length||null==n[e])&&(n[e]=Gc(e,null,Jl.directiveRegistry,Jl.pipeRegistry,null)),n[e]}(e,t),null,2,lc());n[fu]&&(i[fu]=n[fu].createView()),vc(i,r=Ec(e,2,null,null,null,i))}return t&&($l&&rl(t,r,n[ku]),n[ku]++),Ac(r.data)}function mh(){yc(),Zl=!1,Yl=ec[pu],gc(ec[cu]),ngDevMode&&nu(Zl,!1,"isParent"),ngDevMode&&zu(Yl,2)}function vh(e,t){ngDevMode&&rf(t);var n=ec[t];ngDevMode&&zu(n,3),ngDevMode&&ou(n.data,"Component's host node should have an LViewData attached.");var r=n.data;gh(r)&&6&r[du]&&(ngDevMode&&rf(e,tc),Sh(r,n,tc[e]))}function gh(e){return 8==(8&e[du])}function yh(e,t){var n=$u(ec);if(!n.tNode.projection)for(var r=n.tNode.projection=new Array(e?e.length+1:1).fill(null),i=r.slice(),o=n.tNode.child;null!==o;){var a=e?yl(o,e,t):0,s=o.next;i[a]?i[a].next=o:(r[a]=o,o.next=null),i[a]=o,o=s}}var bh=[];function _h(e,t,n){void 0===t&&(t=0);var r=Ec(e,1,null,null,n||null,null);null===r.tNode.projection&&(r.tNode.projection=t),Zl=!1;var i=Zu(r);if(cl(i,ec))for(var o=$u(ec),a=o.tNode.projection[t],s=o.view,u=-1,l=void 0,c=2===i.tNode.type?(l=Zu(i))&&l.data[Du]:i;a;){if(1===a.type){var h=$u(s),f=h.tNode.projection[a.projection];if(f){bh[++u]=s[a.index],a=f,s=h.view;continue}}else(d=s[a.index]).tNode.flags|=8192,dl(d,i,ec,c);var d;null===a.next&&s!==o.view&&(a=(d=bh[u--]).tNode,s=d.view),a=a.next}}function xh(e,t,n){return e[wu]?e[wu][hu]=n:mc&&(Jl.childIndex=t),e[wu]=n,n}function wh(e){for(var t=e;null!=t[cu];)t[du]|=4,t=t[cu];var n,r;t[du]|=4,ngDevMode&&ou(t[yu],"rootContext"),(n=t[yu]).clean==rc&&(n.clean=new Promise(function(e){return r=e}),n.scheduler(function(){Eh(n),r(null),n.clean=rc}))}function Eh(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=sf(n);ngDevMode&&ou(r.data,"Component host node should be attached to an LView"),Sc(r,Mh(n),n)}}function Mh(e){ngDevMode&&ou(e,"component");for(var t=sf(e).view;t[cu];)t=t[cu];return t}function Th(e){var t=sf(e);ngDevMode&&ou(t.data,"Component host node should be attached to an LViewData instance."),Sh(t.data,t,e)}function Sh(e,t,n){var r=vc(e,t),i=e[lu],o=i.template,a=i.viewQuery;try{Pc(),function(t,n,r){t&&1&e[du]&&t(1,r)}(a,0,n),o(Ac(e),n),yc(),function(e,t){e&&e(2,t)}(a,n)}finally{gc(r)}}function Ah(e){ngDevMode&&ou(e,"component"),wh(sf(e).view)}var Ch={};function Rh(){ngDevMode&&nu(ec[mu],-1,"Binding index should not yet be set "+ec[mu]),-1===Jl.bindingStartIndex&&(Jl.bindingStartIndex=ec.length),ec[mu]=Jl.bindingStartIndex}function Lh(e){return Yh(e)?e:Ch}function Ph(e){ec.length+=e,ec.fill(Ch,-e),Rh()}function Oh(e){var t=ec[mu];return ec[mu]=Jl.bindingStartIndex-e,t}function Ih(e){ec[mu]=e}function kh(e){ngDevMode&&iu(2,e.length,"should have at least 3 values"),ngDevMode&&nu(e.length%2,1,"should have an odd number of values");for(var t=!1,n=1;n<e.length;n+=2)Yh(e[n])&&(t=!0);if(!t)return Ch;var r=e[0];for(n=1;n<e.length;n+=2)r+=Hu(e[n])+e[n+1];return r}function Nh(e,t,n){return Yh(t)?e+Hu(t)+n:Ch}function Dh(e,t,n,r,i){return Jh(t,r)?e+Hu(t)+n+Hu(r)+i:Ch}function Fh(e,t,n,r,i,o,a){var s=Jh(t,r);return(s=Yh(o)||s)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a:Ch}function Uh(e,t,n,r,i,o,a,s,u){return Kh(t,r,o,s)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a+Hu(s)+u:Ch}function Bh(e,t,n,r,i,o,a,s,u,l,c){var h=Kh(t,r,o,s);return(h=Yh(l)||h)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a+Hu(s)+u+Hu(l)+c:Ch}function jh(e,t,n,r,i,o,a,s,u,l,c,h,f){var d=Kh(t,r,o,s);return(d=Jh(l,h)||d)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a+Hu(s)+u+Hu(l)+c+Hu(h)+f:Ch}function zh(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p){var m=Kh(t,r,o,s);return m=Jh(l,h)||m,(m=Yh(d)||m)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a+Hu(s)+u+Hu(l)+c+Hu(h)+f+Hu(d)+p:Ch}function Gh(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m,v){var g=Kh(t,r,o,s);return(g=Kh(l,h,d,m)||g)?e+Hu(t)+n+Hu(r)+i+Hu(o)+a+Hu(s)+u+Hu(l)+c+Hu(h)+f+Hu(d)+p+Hu(m)+v:Ch}function Vh(e,t){var n=e+uu;n>=Jl.data.length&&(Jl.data[n]=null),ec[n]=t}function Hh(e){return ngDevMode&&ou(tc,"Directives array should be defined if reading a dir."),ngDevMode&&rf(e,tc),tc[e]}function Wh(e){return ngDevMode&&ou(ec[Mu],"Content QueryList array should be defined if reading a query."),ngDevMode&&rf(e,ec[Mu]),ec[Mu][e]}function qh(e){return Wu(e,ec)}function Xh(e){return function(e,t){return Xu(Wu(e,ec))}(e)}function Qh(){return ngDevMode&&rf(ec[mu]),ngDevMode&&ru(ec[ec[mu]],Ch,"Stored value should never be NO_CHANGE."),ec[ec[mu]++]}function Yh(e){ngDevMode&&ru(e,Ch,"Incoming value should never be NO_CHANGE."),-1===ec[mu]&&Rh();var t,n,r=ec[mu];if(r>=ec.length)ec[ec[mu]++]=e;else{if(n=e,(t=ec[r])!=t&&n!=n||t===n)return ec[mu]++,!1;!function(t,n,i,o){if(n){var a="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+ec[r]+"'. Current value: '"+e+"'.";throw t&&(a+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),new Error(a)}}($l,pc),ec[ec[mu]++]=e}return!0}function Zh(e){return Yh(e),e}function Jh(e,t){var n=Yh(e);return Yh(t)||n}function Kh(e,t,n,r){var i=Jh(e,t);return Jh(n,r)||i}function $h(){return Jl}function ef(e){var t=(ec[Mu]||(ec[Mu]=[])).push(e);if(mc){var n=tc.length-1,r=Jl.contentQueries||(Jl.contentQueries=[]);n!==(Jl.contentQueries.length?Jl.contentQueries[Jl.contentQueries.length-2]:-1)&&r.push(n,t-1)}}function tf(){nu(Zl,!0,"previousOrParentNode should be a parent")}function nf(){ou(Zu(Yl),"previousOrParentNode should have a parent")}function rf(e,t){null==t&&(t=ec),qu(e,t||ec)}function of(e,t){null==t&&(t=ec),nu(t.length,e,"index "+e+" expected to be at the end of arr (length "+t.length+")")}function af(e,t){if(mc)for(var n=Jl.bindingStartIndex-e,r=0;r<t;r++)nu(ec[n+r],Ch,"The reserved slots should be set to `NO_CHANGE` on first template pass")}function sf(e){ngDevMode&&ou(e,"expecting component got null");var t=e[nc];return ngDevMode&&ou(e,"object is not a component"),t}var uf=rc,lf=ic;function cf(e,t){void 0===t&&(t={}),ngDevMode&&au(e);var n,r=t.rendererFactory||ju,i=t.sanitizer||null,o=e.ngComponentDef;o.type!=e&&(o.type=e);var a=Hc(r,t.host||o.selectors[0][0]),s=hf(t.scheduler||requestAnimationFrame.bind(window)),u=xc(r.createRenderer(a,o.rendererType),Gc(-1,null,null,null,null),s,o.onPush?4:2);u[bu]=t.injector||null;var l,c=vc(u,null);try{r.begin&&r.begin(),l=Wc(0,a,o,i),s.components.push(n=lh(0,o.factory(),o)),Bc(l.nodeInjector,n,l.data),t.hostFeatures&&t.hostFeatures.forEach(function(e){return e(n,o)}),_c(),bc(lf),Sh(l.data,l,n)}finally{gc(c),r.end&&r.end()}return n}function hf(e){return{components:[],scheduler:e,clean:uf}}function ff(e){return function(e){var t=Mh(e)[yu];return ngDevMode&&ou(t,"rootContext"),t}(e).clean}function df(e){var t=e.type,n=e.pipes,r=e.directives,i={},o={type:t,diPublic:null,factory:e.factory,template:e.template||null,hostBindings:e.hostBindings||null,contentQueries:e.contentQueries||null,contentQueriesRefresh:e.contentQueriesRefresh||null,attributes:e.attributes||null,inputs:yf(e.inputs,i),declaredInputs:i,outputs:yf(e.outputs),rendererType:Gi(e.rendererType)||null,exportAs:e.exportAs||null,onInit:t.prototype.ngOnInit||null,doCheck:t.prototype.ngDoCheck||null,afterContentInit:t.prototype.ngAfterContentInit||null,afterContentChecked:t.prototype.ngAfterContentChecked||null,afterViewInit:t.prototype.ngAfterViewInit||null,afterViewChecked:t.prototype.ngAfterViewChecked||null,onDestroy:t.prototype.ngOnDestroy||null,onPush:e.changeDetection===S.OnPush,directiveDefs:r?function(){return("function"==typeof r?r():r).map(pf)}:null,pipeDefs:n?function(){return("function"==typeof n?n():n).map(mf)}:null,selectors:e.selectors,viewQuery:e.viewQuery||null,features:e.features||null},a=e.features;return a&&a.forEach(function(e){return e(o)}),o}function pf(e){var t=e.ngComponentDef||e.ngDirectiveDef;if(ngDevMode&&!t)throw new Error("'"+e.name+"' is neither 'ComponentType' or 'DirectiveType'.");return t}function mf(e){var t=e.ngPipeDef;if(ngDevMode&&!t)throw new Error("'"+e.name+"' is not a 'PipeType'.");return t}function vf(e){return{type:e.type,bootstrap:e.bootstrap||[],declarations:e.declarations||[],imports:e.imports||[],exports:e.exports||[],transitiveCompileScopes:null}}var gf={};function yf(e,t){if(null==e)return gf;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[o]=r)}return n}var bf=df;function _f(e){return{name:e.name,factory:e.factory,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function xf(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function wf(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=void 0,i=function(){var i,o;if(function(e){return"function"==typeof e.template}(e))n=t.ngComponentDef||t.ngDirectiveDef;else{if(t.ngComponentDef)throw new Error("Directives cannot inherit Components");n=t.ngDirectiveDef}if(n){xf(e.inputs,n.inputs),xf(e.declaredInputs,n.declaredInputs),xf(e.outputs,n.outputs);var a=e.hostBindings,s=n.hostBindings;s&&(e.hostBindings=a?function(e,t){s(e,t),a(e,t)}:s),e.afterContentChecked=e.afterContentChecked||n.afterContentChecked,e.afterContentInit=e.afterContentInit||n.afterContentInit,e.afterViewChecked=e.afterViewChecked||n.afterViewChecked,e.afterViewInit=e.afterViewInit||n.afterViewInit,e.doCheck=e.doCheck||n.doCheck,e.onDestroy=e.onDestroy||n.onDestroy,e.onInit=e.onInit||n.onInit;var u=n.features;if(u)try{for(var l=Object(r.__values)(u),c=l.next();!c.done;c=l.next()){var h=c.value;h&&h!==wf&&h(e)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}else{var f=t.prototype;f&&(e.afterContentChecked=e.afterContentChecked||f.afterContentChecked,e.afterContentInit=e.afterContentInit||f.afterContentInit,e.afterViewChecked=e.afterViewChecked||f.afterViewChecked,e.afterViewInit=e.afterViewInit||f.afterViewInit,e.doCheck=e.doCheck||f.doCheck,e.onDestroy=e.onDestroy||f.onDestroy,e.onInit=e.onInit||f.onInit)}t=Object.getPrototypeOf(t)};t&&!n;)i()}var Ef="__ngOnChanges_";function Mf(e){var t=e.declaredInputs,n=e.type.prototype,r=function(e){if(t.hasOwnProperty(e)){for(var r=t[e],i=Ef+r,o=void 0,a=n;!o&&a&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(Object.prototype);)o=Object.getOwnPropertyDescriptor(a,r),a=Object.getPrototypeOf(a);var s=o&&o.set;Object.defineProperty(n,r,{get:o&&o.get||(s?void 0:function(){return this[i]}),set:function(t){var n=this[Ef];n||(n={},Object.defineProperty(this,Ef,{value:n,writable:!0}));var r=!this.hasOwnProperty(i),o=n[e];o?o.currentValue=t:n[e]=new br(this[i],t,r),r?Object.defineProperty(this,i,{value:t,writable:!0}):this[i]=t,s&&s.call(this,t)}})}};for(var i in t)r(i);null!=e.onInit&&(e.onInit=Tf(e.onInit)),e.doCheck=Tf(e.doCheck)}function Tf(e){return function(){var t=this[Ef];null!=t&&(this.ngOnChanges(t),this[Ef]=null),e&&e.apply(this)}}var Sf=function(){function e(e,t){this._view=e,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=t}return e.prototype._setComponentContext=function(e,t){this._view=e,this.context=t},Object.defineProperty(e.prototype,"destroyed",{get:function(){return 32==(32&this._view[du])},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewContainerRef&&gh(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),sl(this._view)},e.prototype.onDestroy=function(e){Qc(this._view,e)},e.prototype.markForCheck=function(){wh(this._view)},e.prototype.detach=function(){this._view[du]&=-9},e.prototype.reattach=function(){this._view[du]|=8},e.prototype.detectChanges=function(){Th(this.context)},e.prototype.checkNoChanges=function(){!function(e){pc=!0;try{Th(e)}finally{pc=!1}}(this.context)},e.prototype.attachToViewContainerRef=function(e){this._viewContainerRef=e},e.prototype.detachFromAppRef=function(){this._appRef=null},e.prototype.attachToAppRef=function(e){this._appRef=e},e}(),Af=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveComponentFactory=function(e){return ngDevMode&&au(e),new Pf(e.ngComponentDef)},t}(Zt);function Cf(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Rf=new h("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return hf(Ce(Lf))}}),Lf=new h("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),Pf=function(e){function t(t){var n=e.call(this)||this;return n.componentDef=t,n.componentType=t.type,n.selector=t.selectors[0][0],n.ngContentSelectors=[],n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return Cf(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return Cf(this.componentDef.outputs)},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){var i=void 0===n,o=r?r.injector.get(Wn):ju,a=i?kc(this.selector,o.createRenderer(null,this.componentDef.rendererType)):Hc(o,n),s=r&&!i?r.injector.get(Rf):hf(requestAnimationFrame.bind(window)),u=xc(o.createRenderer(a,this.componentDef.rendererType),Gc(-1,null,null,null,null),s,this.componentDef.onPush?4:2);u[bu]=r&&r.injector||null;var l,c,h=vc(u,null);try{if(o.begin&&o.begin(),c=Wc(0,a,this.componentDef),s.components.push(l=lh(0,this.componentDef.factory(),this.componentDef)),Bc(c.nodeInjector,l,c.data),function(e,t){var n=sf(e),r=n.view[lu];Tu(0,t.onInit,t.doCheck,r),Su(n.tNode.flags,r)}(l,this.componentDef),t)for(var f=0,d=c.tNode.projection=[],p=0;p<t.length;p++){for(var m=t[p],v=null,g=null,y=0;y<m.length;y++){var b=Ec(++f,3,m[y],null,null);g?g.next=b.tNode:v=b.tNode,g=b.tNode}d.push(v)}Tc(c,c.data[lu],l,1),c.data[du]&=-2}finally{vc(h,null),o.end&&o.end()}var _=new Of(this.componentType,l,u,e,a);return i&&(_.hostView._lViewNode.tNode.child=c.tNode),_},t}(Ht),Of=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new Sf(r,n),a.hostView._lViewNode=Ec(-1,2,null,null,null,r),a.injector=i,a.location=new Qn(o),a.componentType=t,a}return Object(r.__extends)(t,e),t.prototype.destroy=function(){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)},t}(Vt),If="__NG_ELEMENT_ID__",kf=256,Nf=0;function Df(){return ngDevMode&&tf(),Ff(hc())}function Ff(e){var t=e.nodeInjector,n=Zu(e),r=n&&n.nodeInjector;return t!=r?t:e.nodeInjector={parent:r,node:e,bf0:0,bf1:0,bf2:0,bf3:0,bf4:0,bf5:0,bf6:0,bf7:0,cbf0:null==r?0:r.cbf0|r.bf0,cbf1:null==r?0:r.cbf1|r.bf1,cbf2:null==r?0:r.cbf2|r.bf2,cbf3:null==r?0:r.cbf3|r.bf3,cbf4:null==r?0:r.cbf4|r.bf4,cbf5:null==r?0:r.cbf5|r.bf5,cbf6:null==r?0:r.cbf6|r.bf6,cbf7:null==r?0:r.cbf7|r.bf7,templateRef:null,viewContainerRef:null,elementRef:null,changeDetectorRef:null}}function Uf(e){!function(e,t){!function(e,t){var n=t[If];null==n&&(n=t[If]=Nf++);var r=n%kf,i=1<<r;r<128?r<64?r<32?e.bf0|=i:e.bf1|=i:r<96?e.bf2|=i:e.bf3|=i:r<192?r<160?e.bf4|=i:e.bf5|=i:r<224?e.bf6|=i:e.bf7|=i}(e,t.type)}(Df(),e)}function Bf(e,t){return void 0===t&&(t=0),qf(Df(),e,t)}function jf(){return Jf(Df())}function zf(){return td(Df())}function Gf(){return $f(Df())}function Vf(){return Wf(Df(),null)}function Hf(e){ngDevMode&&tf();var t=hc();ngDevMode&&zu(t,3);var n=t.tNode;ngDevMode&&ou(n,"expecting tNode");var r=n.attrs;if(r)for(var i=0;i<r.length;i+=2){var o=r[i];if(1===o)break;if(o==e)return r[i+1]}}function Wf(e,t){if(e.changeDetectorRef)return e.changeDetectorRef;var n=e.node;return 4096==(4096&n.tNode.flags)?e.changeDetectorRef=new Sf(n.data,t):3===n.tNode.type?e.changeDetectorRef=function(e){var t=function(e){for(;2===e.tNode.type;)e=e.view[pu];return e}(e),n=t.nodeInjector;return n&&n.changeDetectorRef||new Sf(t.data,t.view[vu][t.tNode.flags>>14])}(n.view[pu]):null}function qf(e,t,n){void 0===n&&(n=0);var r,i="number"==typeof(r=t[If])?r%kf:null;if(null===i){var o=Ae(hc().view[bu]);try{return Ce(t,n)}finally{Ae(o)}}else for(var a=e;a&&(a=Qf(a,i,n));){var s=a.node,u=s.tNode.flags,l=4095&u;if(0!==l)for(var c=u>>14,h=c+l,f=s.view[lu].directives,d=c;d<h;d++){var p=f[d];if(p.type===t&&p.diPublic)return s.view[vu][d]}var m=void 0;if(a===e&&(m=Xf(s,t)))return m;a=2&n||1&n&&!Yf(a)?null:a.parent}if(8&n)return null;throw new Error("Injector: NOT_FOUND ["+Hu(t)+"]")}function Xf(e,t){var n=e.view[lu].currentMatches;if(n)for(var r=0;r<n.length;r+=2){var i=n[r];if(i.type===t)return Fc(i,r+1,n,e.view[lu])}return null}function Qf(e,t,n){for(var r=1<<t,i=4&n?e.parent:e;i;){if(((t<128?t<64?t<32?i.bf0:i.bf1:t<96?i.bf2:i.bf3:t<192?t<160?i.bf4:i.bf5:t<224?i.bf6:i.bf7)&r)===r)return i;if(2&n||1&n&&!Yf(i))return null;i=(t<128?t<64?t<32?i.cbf0:i.cbf1:t<96?i.cbf2:i.cbf3:t<192?t<160?i.cbf4:i.cbf5:t<224?i.cbf6:i.cbf7)&r?i.parent:null}return null}function Yf(e){return!!e.parent&&e.parent.node.view===e.node.view}var Zf=function(e){this.read=e};function Jf(e){return e.elementRef||(e.elementRef=new Kf(e.node.native))}var Kf=function(e){this.nativeElement=e};function $f(e){if(!e.viewContainerRef){var t=e.node;ngDevMode&&Gu(t,0,3);var n=Zu(t),r=ch(n,t.view,!0),i=t.view[_u].createComment(ngDevMode?"container":""),o=wc(0,t.view,n,i,r,null);hl(n,i,t.view),t.queries&&(o.queries=t.queries.container());var a=t.tNode;a.dynamicContainerNode||(a.dynamicContainerNode=Kc(0,-1,null,null,a,null)),o.tNode=a.dynamicContainerNode,t.dynamicLContainerNode=o,xh(t.view,a.index,r),e.viewContainerRef=new ed(o)}return e.viewContainerRef}var ed=function(){function e(e){this._lContainerNode=e,this._viewRefs=[]}return e.prototype.clear=function(){for(var e=this._lContainerNode.data;e[Nu].length;)this.remove(0)},e.prototype.get=function(e){return this._viewRefs[e]||null},Object.defineProperty(e.prototype,"length",{get:function(){return this._lContainerNode.data[Nu].length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=this._adjustIndex(n),i=e.createEmbeddedView(t||{},this._lContainerNode,r);return i.attachToViewContainerRef(this),this._viewRefs.splice(r,0,i),i},e.prototype.createComponent=function(e,t,n,r,i){var o=n||this.parentInjector;!i&&o&&(i=o.get($t));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n=e._lViewNode,r=this._adjustIndex(t);rl(this._lContainerNode,n,r);var i=this._lContainerNode.data[Nu],o=r+1<i.length?Yu(i[r+1]).native:this._lContainerNode.native;return nl(this._lContainerNode,n,!0,o),e.attachToViewContainerRef(this),this._viewRefs.splice(r,0,e),e},e.prototype.move=function(e,t){var n=this.indexOf(e);return this.detach(n),this.insert(e,this._adjustIndex(t)),e},e.prototype.indexOf=function(e){return this._viewRefs.indexOf(e)},e.prototype.remove=function(e){var t=this._adjustIndex(e,-1);ol(this._lContainerNode,t),this._viewRefs.splice(t,1)},e.prototype.detach=function(e){var t=this._adjustIndex(e,-1);return il(this._lContainerNode,t),this._viewRefs.splice(t,1)[0]||null},e.prototype._adjustIndex=function(e,t){return void 0===t&&(t=0),null==e?this._lContainerNode.data[Nu].length+t:(ngDevMode&&(e<=-1&&su("index must be positive"),iu(e,this._lContainerNode.data[Nu].length+1+t,"index")),e)},e}();function td(e){if(!e.templateRef){ngDevMode&&zu(e.node,0);var t=e.node,n=t.tNode;ngDevMode&&ou(n.tViews,"TView must be allocated"),e.templateRef=new nd(Jf(e),n.tViews,uc(),t.data[fu])}return e.templateRef}var nd=function(){function e(e,t,n,r){this._tView=t,this._renderer=n,this._queries=r,this.elementRef=e}return e.prototype.createEmbeddedView=function(e,t,n){var r=function(e,t,n,r){var i=Zl,o=Yl;Zl=!0,Yl=null;var a=xc(n,e,t,2,lc());r&&(a[fu]=r.createView());var s=Ec(-1,2,null,null,null,a);return Zl=i,Yl=o,s}(this._tView,e,this._renderer,this._queries);t&&rl(t,r,n),Tc(r,this._tView,e,1);var i=new Sf(r.data,e);return i._lViewNode=r,i},e}();function rd(e){e.diPublic=Uf}var id=/{\$([^}]+)}/g;function od(e,t,n,r,i){var o=e.split(id),a=new Array(r?r.length+1:1).fill(void 0);return function e(t,n,r,i,o,a,s,u){var l=[],c=[],h=0,f=0,d=o&&o[t]?o[t]:null,p=a&&a[t]?a[t]:null;for(i[t]=l;n<r.length;n++){var m=r[n];if(1&n){var v=void 0;if(d&&void 0!==d[m]){v=d[m];var g=s?s.indexOf(m):-1;-1!==g&&g+1!==t?l.push(-2147483648|v):(l.push(1073741824|v),h++),c.push(m)}else if(p&&void 0!==p[m])l.push(1610612736|(v=p[m])),c.push(m);else if(l.push(-1073741824),t>0&&0==--h)break;if(void 0!==v&&v>f&&(f=v),s){var y=s.indexOf(m)+1;0!==y&&y!==t&&(n=e(y,n,r,i,o,a,s,u))}}else m&&l.push(536870912,m)}if(o){var b=o[t];if(b)for(var _=Object.keys(b),x=0;x<_.length;x++)-1===c.indexOf(E=_[x])&&(l.push(-536870912|(M=b[E])),M>f&&(f=M))}if(a){var w=a[t];if(w)for(_=Object.keys(w),x=0;x<_.length;x++){var E;if(-1===c.indexOf(E=_[x])){var M=w[E];ngDevMode&&iu(M.toString(2).length,28,"Index "+M+" is too big and will overflow"),l.push(-536870912|M),M>f&&(f=M)}}}if(0===t&&"number"==typeof u)for(x=f+1;x<=u;x++)ngDevMode&&iu(x.toString(2).length,28,"Index "+x+" is too big and will overflow"),l.push(-1610612736|x);return n}(0,0,o,a,t,n,r,i),a}function ad(e,t,n){ngDevMode&&ngDevMode.rendererMoveNode++;var r=cc();hl(t,e.native||null,r);var i=e.view[lu].firstTemplatePass;return i&&(n===t&&e.tNode!==t.tNode.child?(e.tNode.next=t.tNode.child,t.tNode.child=e.tNode):n!==t&&e.tNode!==n.tNode.next?(e.tNode.next=n.tNode.next,n.tNode.next=e.tNode):e.tNode.next=null,t.view===e.view&&(e.tNode.parent=t.tNode)),0===e.tNode.type&&e.dynamicLContainerNode?(hl(t,e.dynamicLContainerNode.native||null,r),i&&(e.tNode.dynamicContainerNode=e.dynamicLContainerNode.tNode,e.dynamicLContainerNode.tNode.parent=e.tNode),e.dynamicLContainerNode):e}function sd(e,t){var n=cc();if(ngDevMode&&nu(n[mu],-1,"i18nApply should be called before any binding"),t){var r=uc(),i=Zu(qh(e))||hc(),o=i;Mc();for(var a=0;a<t.length;a++){var s=t[a];switch(-536870912&s){case 1073741824:var u=qh(536870911&s);o=ad(u,i,o),i=u;break;case 1610612736:case-2147483648:case-1610612736:o=ad(qh(536870911&s),i,o);break;case 536870912:ngDevMode&&ngDevMode.rendererCreateTextNode++;var l=tl(t[++a],r);o=ad(Ec(n.length-uu,3,l,null,null),i,o),Mc();break;case-1073741824:o=i,i=Zu(i);break;case-536870912:ngDevMode&&ngDevMode.rendererRemoveNode++;var c=qh(536870911&s),h=Zu(c);fl(h,c.native||null,n),0===c.tNode.type&&c.dynamicLContainerNode&&(fl(h,c.dynamicLContainerNode.native||null,n),c.dynamicLContainerNode.tNode.detached=!0,c.dynamicLContainerNode.data[Du]=null)}}}}function ud(e,t){for(var n=e.split(id),r=1;r<n.length;r+=2)n[r]=t[n[r]];return n}function ld(e,t){if(!Yh(t))return Ch;for(var n="",r=0;r<e.length;r++)n+=1&r?Hu(t):e[r];return n}function cd(e,t,n){if(!Jh(t,n))return Ch;for(var r="",i=0;i<e.length;i++)r+=1&i?Hu(1&e[i]?n:t):e[i];return r}function hd(e,t,n,r){var i=Jh(t,n);if(!(i=Yh(r)||i))return Ch;for(var o="",a=0;a<e.length;a++)if(1&a){var s=e[a];o+=Hu(2&s?r:1&s?n:t)}else o+=e[a];return o}function fd(e,t,n,r,i){if(!Kh(t,n,r,i))return Ch;for(var o="",a=0;a<e.length;a++)if(1&a){var s=e[a],u=1&s;o+=Hu(2&s?u?i:r:u?n:t)}else o+=e[a];return o}function dd(e,t,n,r,i,o){var a=Kh(t,n,r,i);if(!(a=Yh(o)||a))return Ch;for(var s="",u=0;u<e.length;u++)if(1&u){var l=e[u],c=1&l;s+=Hu(4&l?o:2&l?c?i:r:c?n:t)}else s+=e[u];return s}function pd(e,t,n,r,i,o,a){var s=Kh(t,n,r,i);if(!(s=Jh(o,a)||s))return Ch;for(var u="",l=0;l<e.length;l++)if(1&l){var c=e[l],h=1&c;u+=Hu(4&c?h?a:o:2&c?h?i:r:h?n:t)}else u+=e[l];return u}function md(e,t,n,r,i,o,a,s){var u=Kh(t,n,r,i);if(u=Jh(o,a)||u,!(u=Yh(s)||u))return Ch;for(var l="",c=0;c<e.length;c++)if(1&c){var h=e[c],f=2&h,d=1&h;l+=Hu(4&h?f?s:d?a:o:f?d?i:r:d?n:t)}else l+=e[c];return l}function vd(e,t,n,r,i,o,a,s,u){var l=Kh(t,n,r,i);if(!(l=Kh(o,a,s,u)||l))return Ch;for(var c="",h=0;h<e.length;h++)if(1&h){var f=e[h],d=2&f,p=1&f;c+=Hu(4&f?d?p?u:s:p?a:o:d?p?i:r:p?n:t)}else c+=e[h];return c}function gd(e,t){for(var n=!1,r=0;r<t.length;r++)Yh(t[r])&&(n=!0);if(!n)return Ch;var i="";for(r=0;r<e.length;r++)i+=1&r?Hu(t[e[r]]):e[r];return i}var yd={provide:Zt,useFactory:function(){return new Af},deps:[]},bd=function(e){function t(t,n){var r=e.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var i=t.ngModuleDef;return ngDevMode&&ou(i,"NgModule '"+X(t)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=i.bootstrap,r.injector=bt(t,n,[yd,{provide:$t,useValue:r}]),r.instance=r.injector.get(t),r.componentFactoryResolver=new Af,r}return Object(r.__extends)(t,e),t.prototype.destroy=function(){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)},t}($t),_d=function(e){function t(t){var n=e.call(this)||this;return n.moduleType=t,n}return Object(r.__extends)(t,e),t.prototype.create=function(e){return new bd(this.moduleType,e)},t}(en);function xd(e,t,n){ngDevMode&&af(e,1);var r=Oh(e),i=$l?Zh(n?t.call(n):t()):Qh();return Ih(r),i}function wd(e,t,n,r){ngDevMode&&af(e,2);var i=Oh(e),o=Yh(n)?Zh(r?t.call(r,n):t(n)):Qh();return Ih(i),o}function Ed(e,t,n,r,i){ngDevMode&&af(e,3);var o=Oh(e),a=Jh(n,r)?Zh(i?t.call(i,n,r):t(n,r)):Qh();return Ih(o),a}function Md(e,t,n,r,i,o){ngDevMode&&af(e,4);var a=Oh(e),s=Jh(n,r),u=Yh(i)||s?Zh(o?t.call(o,n,r,i):t(n,r,i)):Qh();return Ih(a),u}function Td(e,t,n,r,i,o,a){ngDevMode&&af(e,5);var s=Oh(e),u=Kh(n,r,i,o)?Zh(a?t.call(a,n,r,i,o):t(n,r,i,o)):Qh();return Ih(s),u}function Sd(e,t,n,r,i,o,a,s){ngDevMode&&af(e,6);var u=Oh(e),l=Kh(n,r,i,o),c=Yh(a)||l?Zh(s?t.call(s,n,r,i,o,a):t(n,r,i,o,a)):Qh();return Ih(u),c}function Ad(e,t,n,r,i,o,a,s,u){ngDevMode&&af(e,7);var l=Oh(e),c=Kh(n,r,i,o),h=Jh(a,s)||c?Zh(u?t.call(u,n,r,i,o,a,s):t(n,r,i,o,a,s)):Qh();return Ih(l),h}function Cd(e,t,n,r,i,o,a,s,u,l){ngDevMode&&af(e,8);var c=Oh(e),h=Kh(n,r,i,o);h=Jh(a,s)||h;var f=Yh(u)||h?Zh(l?t.call(l,n,r,i,o,a,s,u):t(n,r,i,o,a,s,u)):Qh();return Ih(c),f}function Rd(e,t,n,r,i,o,a,s,u,l,c){ngDevMode&&af(e,9);var h=Oh(e),f=Kh(n,r,i,o),d=Kh(a,s,u,l)||f?Zh(c?t.call(c,n,r,i,o,a,s,u,l):t(n,r,i,o,a,s,u,l)):Qh();return Ih(h),d}function Ld(e,t,n,r){ngDevMode&&af(e,n.length+1);for(var i=Oh(e),o=!1,a=0;a<n.length;a++)Yh(n[a])&&(o=!0);var s=o?Zh(t.apply(r,n)):Qh();return Ih(i),s}function Pd(e,t){var n,r=$h(),i=e+uu;r.firstTemplatePass?(n=function(e,t){if(t)for(var n=0;n<t.length;n++){var r=t[n];if(e===r.name)return r}throw new Error("Pipe with name '"+e+"' not found!")}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.pipeDestroyHooks||(r.pipeDestroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory();return Vh(e,o),o}function Od(e,t,n){var r=qh(e);return Fd(e)?wd(t,r.transform,n,r):r.transform(n)}function Id(e,t,n,r){var i=qh(e);return Fd(e)?Ed(t,i.transform,n,r,i):i.transform(n,r)}function kd(e,t,n,r,i){var o=qh(e);return Fd(e)?Md(t,o.transform,n,r,i,o):o.transform(n,r,i)}function Nd(e,t,n,r,i,o){var a=qh(e);return Fd(e)?Td(t,a.transform,n,r,i,o,a):a.transform(n,r,i,o)}function Dd(e,t,n){var r=qh(e);return Fd(e)?Ld(t,r.transform,n,r):r.transform.apply(r,n)}function Fd(e){return $h().data[e+uu].pure}var Ud=function(){function e(e){this.shallow=null,this.deep=null,this.deep=null==e?null:e}return e.prototype.track=function(e,t,n,r){n?this.deep=Hd(this.deep,e,t,null!=r?r:null):this.shallow=Hd(this.shallow,e,t,null!=r?r:null)},e.prototype.clone=function(){return this.deep?new e(this.deep):null},e.prototype.child=function(){return null===this.deep?null:null===this.shallow?this:new e(this.deep)},e.prototype.container=function(){for(var t=null,n=this.deep;n;){var r=[];n.values.push(r);var i={next:null,list:n.list,predicate:n.predicate,values:r,containerValues:null};i.next=t,t=i,n=n.next}return t?new e(t):null},e.prototype.createView=function(){for(var t=null,n=this.deep;n;){var r={next:null,list:n.list,predicate:n.predicate,values:[],containerValues:n.values};r.next=t,t=r,n=n.next}return t?new e(t):null},e.prototype.insertView=function(e){for(var t=this.deep;t;)ngDevMode&&ou(t.containerValues,"View queries need to have a pointer to container values."),t.containerValues.splice(e,0,t.values),t=t.next},e.prototype.addNode=function(e){Gd(this.shallow,e),Gd(this.deep,e)},e.prototype.removeView=function(){for(var e=this.deep;e;){ngDevMode&&ou(e.containerValues,"View queries need to have a pointer to container values.");var t=e.containerValues,n=t.indexOf(e.values),r=t.splice(n,1);ngDevMode&&nu(r.length,1,"removed.length"),r[0].length&&e.list.setDirty(),e=e.next}},e}();function Bd(e,t){var n=e.localNames;if(n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function jd(e,t){for(var n=e.view[lu].directives,r=e.tNode.flags,i=r>>14,o=i+(4095&r),a=i;a<o;a++){var s=n[a];if(s.type===t&&s.diPublic)return a}return null}function zd(e,t,n,r){if(n instanceof Zf)return n.read(e,t,r);var i=jd(t,n);return null!==i?t.view[vu][i]:null}function Gd(e,t){for(var n=Ff(t);e;){var r=e.predicate,i=r.type;if(i)null!==(s=jd(t,i))&&null!==(u=zd(n,t,r.read||i,s))&&Vd(e,u);else for(var o=r.selector,a=0;a<o.length;a++){var s,u;null!==(s=Bd(t.tNode,o[a]))&&(ngDevMode&&ou(r.read,"the node should have a predicate"),null!==(u=zd(n,t,r.read,s))&&Vd(e,u))}e=e.next}}function Vd(e,t){e.values.push(t),e.list.setDirty()}function Hd(e,t,n,r){return{next:e,list:t,predicate:function(e,t){var n=Array.isArray(e);return{type:n?null:e,selector:n?e:null,read:t}}(n,r),values:t._valuesTree,containerValues:null}}var Wd=function(){function e(){this.dirty=!0,this.changes=new dn,this._values=[],this._valuesTree=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var e=this._values;return e.length?e[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=this._values;return e.length?e[e.length-1]:null},enumerable:!0,configurable:!0}),e.prototype.map=function(e){return this._values.map(e)},e.prototype.filter=function(e){return this._values.filter(e)},e.prototype.find=function(e){return this._values.find(e)},e.prototype.reduce=function(e,t){return this._values.reduce(e,t)},e.prototype.forEach=function(e){this._values.forEach(e)},e.prototype.some=function(e){return this._values.some(e)},e.prototype.toArray=function(){return this._values.slice(0)},e.prototype[H()]=function(){return this._values[H()]()},e.prototype.toString=function(){return this._values.toString()},e.prototype.reset=function(e){this._values=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];Array.isArray(r)?r.length>0?(e=r.concat(e.slice(n+1)),n=0):n++:(t.push(r),n++)}return t}(e),this.dirty=!1},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}();function qd(e,t,n,r){ngDevMode&&tf();var i,o=new Wd;return(i=Ud,Kl||(Kl=Yl.queries&&Yl.queries.clone()||new i)).track(o,t,n,r),Xc(null,o,o.destroy),null!=e&&Vh(e,o),o}function Xd(e){return!!e.dirty&&(e.reset(e._valuesTree),e.notifyOnChanges(),!0)}var Qd="__SANITIZER_TRUSTED_BRAND__";function Yd(e,t){return e instanceof String&&e[Qd]===t}function Zd(e){return tp(e,"Html")}function Jd(e){return tp(e,"Style")}function Kd(e){return tp(e,"Script")}function $d(e){return tp(e,"Url")}function ep(e){return tp(e,"ResourceUrl")}function tp(e,t){var n=new String(e);return n[Qd]=t,n}function np(e){var t=lc();return t?t.sanitize(_i.HTML,e)||"":Yd(e,"Html")?e.toString():mi(document,Hu(e))}function rp(e){var t=lc();return t?t.sanitize(_i.STYLE,e)||"":Yd(e,"Style")?e.toString():bi(Hu(e))}function ip(e){var t=lc();return t?t.sanitize(_i.URL,e)||"":Yd(e,"Url")?e.toString():$r(Hu(e))}function op(e){var t=lc();if(t)return t.sanitize(_i.RESOURCE_URL,e)||"";if(Yd(e,"ResourceUrl"))return e.toString();throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}}).call(this,n("yLpj"))},CxY0:function(e,t,n){"use strict";var r=n("GYWy"),i=n("Nehr");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n("s4NR");function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=u.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=a.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||x&&v[x]||(b=b.substr(2),this.slashes=!0)}if(!v[x]&&(E||x&&!g[x])){for(var M,T,S=-1,A=0;A<f.length;A++)-1!==(C=b.indexOf(f[A]))&&(-1===S||C<S)&&(S=C);for(-1!==(T=-1===S?b.lastIndexOf("@"):b.lastIndexOf("@",S))&&(M=b.slice(0,T),b=b.slice(T+1),this.auth=decodeURIComponent(M)),S=-1,A=0;A<h.length;A++){var C;-1!==(C=b.indexOf(h[A]))&&(-1===S||C<S)&&(S=C)}-1===S&&(S=b.length),this.host=b.slice(0,S),b=b.slice(S),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var L=this.hostname.split(/\./),P=(A=0,L.length);A<P;A++){var O=L[A];if(O&&!O.match(d)){for(var I="",k=0,N=O.length;k<N;k++)O.charCodeAt(k)>127?I+="x":I+=O[k];if(!I.match(d)){var D=L.slice(0,A),F=L.slice(A+1),U=O.match(p);U&&(D.push(U[1]),F.unshift(U[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=D.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"";this.host=(this.hostname||"")+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[w])for(A=0,P=c.length;A<P;A++){var j=c[A];if(-1!==b.indexOf(j)){var z=encodeURIComponent(j);z===j&&(z=escape(j)),b=b.split(j).join(z)}}var G=b.indexOf("#");-1!==G&&(this.hash=b.substr(G),b=b.slice(0,G));var V=b.indexOf("?");return-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,V)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(B=this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var d=h[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}return n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||m||n.host&&e.pathname,_=b,x=n.pathname&&n.pathname.split("/")||[],w=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===x[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return w&&(n.hostname=n.host=x.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var E=x.slice(-1)[0],M=(n.host||e.host||x.length>1)&&("."===E||".."===E)||""===E,T=0,S=x.length;S>=0;S--)"."===(E=x[S])?x.splice(S,1):".."===E?(x.splice(S,1),T++):T&&(x.splice(S,1),T--);if(!b&&!_)for(;T--;T)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),M&&"/"!==x.join("/").substr(-1)&&x.push("");var A,C=""===x[0]||x[0]&&"/"===x[0].charAt(0);return w&&(n.hostname=n.host=C?"":x.length?x.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(b=b||n.host&&x.length)&&!C&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},CyhQ:function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"WebGLRenderTargetCube",function(){return Bt}),n.d(t,"WebGLRenderTarget",function(){return Ut}),n.d(t,"WebGLRenderer",function(){return ei}),n.d(t,"ShaderLib",function(){return kn}),n.d(t,"UniformsLib",function(){return In}),n.d(t,"UniformsUtils",function(){return Cn}),n.d(t,"ShaderChunk",function(){return Rn}),n.d(t,"FogExp2",function(){return ti}),n.d(t,"Fog",function(){return ni}),n.d(t,"Scene",function(){return ri}),n.d(t,"LensFlare",function(){return ii}),n.d(t,"Sprite",function(){return ai}),n.d(t,"LOD",function(){return si}),n.d(t,"SkinnedMesh",function(){return ci}),n.d(t,"Skeleton",function(){return ui}),n.d(t,"Bone",function(){return li}),n.d(t,"Mesh",function(){return Dr}),n.d(t,"LineSegments",function(){return di}),n.d(t,"Line",function(){return fi}),n.d(t,"Points",function(){return mi}),n.d(t,"Group",function(){return vi}),n.d(t,"VideoTexture",function(){return gi}),n.d(t,"DataTexture",function(){return On}),n.d(t,"CompressedTexture",function(){return yi}),n.d(t,"CubeTexture",function(){return Vt}),n.d(t,"CanvasTexture",function(){return bi}),n.d(t,"DepthTexture",function(){return _i}),n.d(t,"Texture",function(){return Dt}),n.d(t,"CompressedTextureLoader",function(){return xo}),n.d(t,"DataTextureLoader",function(){return wo}),n.d(t,"CubeTextureLoader",function(){return Mo}),n.d(t,"TextureLoader",function(){return To}),n.d(t,"ObjectLoader",function(){return oa}),n.d(t,"MaterialLoader",function(){return ta}),n.d(t,"BufferGeometryLoader",function(){return na}),n.d(t,"DefaultLoadingManager",function(){return bo}),n.d(t,"LoadingManager",function(){return yo}),n.d(t,"JSONLoader",function(){return ia}),n.d(t,"ImageLoader",function(){return Eo}),n.d(t,"FontLoader",function(){return wa}),n.d(t,"FileLoader",function(){return _o}),n.d(t,"Loader",function(){return ra}),n.d(t,"Cache",function(){return go}),n.d(t,"AudioLoader",function(){return Ba}),n.d(t,"SpotLightShadow",function(){return Ro}),n.d(t,"SpotLight",function(){return Lo}),n.d(t,"PointLight",function(){return Po}),n.d(t,"RectAreaLight",function(){return ja}),n.d(t,"HemisphereLight",function(){return Ao}),n.d(t,"DirectionalLightShadow",function(){return Oo}),n.d(t,"DirectionalLight",function(){return Io}),n.d(t,"AmbientLight",function(){return ko}),n.d(t,"LightShadow",function(){return Co}),n.d(t,"Light",function(){return So}),n.d(t,"StereoCamera",function(){return za}),n.d(t,"PerspectiveCamera",function(){return Gr}),n.d(t,"OrthographicCamera",function(){return Vr}),n.d(t,"CubeCamera",function(){return Ga}),n.d(t,"Camera",function(){return zr}),n.d(t,"AudioListener",function(){return Va}),n.d(t,"PositionalAudio",function(){return Wa}),n.d(t,"AudioContext",function(){return Ua}),n.d(t,"AudioAnalyser",function(){return qa}),n.d(t,"Audio",function(){return Ha}),n.d(t,"VectorKeyframeTrack",function(){return qo}),n.d(t,"StringKeyframeTrack",function(){return Zo}),n.d(t,"QuaternionKeyframeTrack",function(){return Qo}),n.d(t,"NumberKeyframeTrack",function(){return Yo}),n.d(t,"ColorKeyframeTrack",function(){return Ko}),n.d(t,"BooleanKeyframeTrack",function(){return Jo}),n.d(t,"PropertyMixer",function(){return Xa}),n.d(t,"PropertyBinding",function(){return Qa}),n.d(t,"KeyframeTrack",function(){return $o}),n.d(t,"AnimationUtils",function(){return jo}),n.d(t,"AnimationObjectGroup",function(){return Ya}),n.d(t,"AnimationMixer",function(){return Ja}),n.d(t,"AnimationClip",function(){return ea}),n.d(t,"Uniform",function(){return Ka}),n.d(t,"InstancedBufferGeometry",function(){return $a}),n.d(t,"BufferGeometry",function(){return Nr}),n.d(t,"GeometryIdCount",function(){return Ir}),n.d(t,"Geometry",function(){return kr}),n.d(t,"InterleavedBufferAttribute",function(){return es}),n.d(t,"InstancedInterleavedBuffer",function(){return ns}),n.d(t,"InterleavedBuffer",function(){return ts}),n.d(t,"InstancedBufferAttribute",function(){return rs}),n.d(t,"Face3",function(){return gr}),n.d(t,"Object3D",function(){return pr}),n.d(t,"Raycaster",function(){return is}),n.d(t,"Layers",function(){return or}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"Clock",function(){return ss}),n.d(t,"QuaternionLinearInterpolant",function(){return Xo}),n.d(t,"LinearInterpolant",function(){return Vo}),n.d(t,"DiscreteInterpolant",function(){return Ho}),n.d(t,"CubicInterpolant",function(){return Go}),n.d(t,"Interpolant",function(){return zo}),n.d(t,"Triangle",function(){return vr}),n.d(t,"Math",function(){return At}),n.d(t,"Spherical",function(){return us}),n.d(t,"Cylindrical",function(){return ls}),n.d(t,"Plane",function(){return er}),n.d(t,"Frustum",function(){return tr}),n.d(t,"Sphere",function(){return Kn}),n.d(t,"Ray",function(){return rr}),n.d(t,"Matrix4",function(){return Gt}),n.d(t,"Matrix3",function(){return $n}),n.d(t,"Box3",function(){return Jn}),n.d(t,"Box2",function(){return Nn}),n.d(t,"Line3",function(){return mr}),n.d(t,"Euler",function(){return ir}),n.d(t,"Vector4",function(){return Ft}),n.d(t,"Vector3",function(){return zt}),n.d(t,"Vector2",function(){return Ct}),n.d(t,"Quaternion",function(){return jt}),n.d(t,"Color",function(){return Ln}),n.d(t,"MorphBlendMesh",function(){return cs}),n.d(t,"ImmediateRenderObject",function(){return hs}),n.d(t,"VertexNormalsHelper",function(){return fs}),n.d(t,"SpotLightHelper",function(){return ds}),n.d(t,"SkeletonHelper",function(){return ps}),n.d(t,"PointLightHelper",function(){return ms}),n.d(t,"RectAreaLightHelper",function(){return vs}),n.d(t,"HemisphereLightHelper",function(){return gs}),n.d(t,"GridHelper",function(){return ys}),n.d(t,"PolarGridHelper",function(){return bs}),n.d(t,"FaceNormalsHelper",function(){return _s}),n.d(t,"DirectionalLightHelper",function(){return xs}),n.d(t,"CameraHelper",function(){return ws}),n.d(t,"BoxHelper",function(){return Es}),n.d(t,"ArrowHelper",function(){return Ms}),n.d(t,"AxisHelper",function(){return Ts}),n.d(t,"CatmullRomCurve3",function(){return Ps}),n.d(t,"CubicBezierCurve3",function(){return Os}),n.d(t,"QuadraticBezierCurve3",function(){return Is}),n.d(t,"LineCurve3",function(){return ks}),n.d(t,"ArcCurve",function(){return Ns}),n.d(t,"EllipseCurve",function(){return fa}),n.d(t,"SplineCurve",function(){return da}),n.d(t,"CubicBezierCurve",function(){return pa}),n.d(t,"QuadraticBezierCurve",function(){return ma}),n.d(t,"LineCurve",function(){return ca}),n.d(t,"Shape",function(){return ba}),n.d(t,"Path",function(){return ya}),n.d(t,"ShapePath",function(){return _a}),n.d(t,"Font",function(){return xa}),n.d(t,"CurvePath",function(){return ha}),n.d(t,"Curve",function(){return la}),n.d(t,"ShapeUtils",function(){return ji}),n.d(t,"SceneUtils",function(){return Ds}),n.d(t,"WireframeGeometry",function(){return xi}),n.d(t,"ParametricGeometry",function(){return wi}),n.d(t,"ParametricBufferGeometry",function(){return Ei}),n.d(t,"TetrahedronGeometry",function(){return Si}),n.d(t,"TetrahedronBufferGeometry",function(){return Ai}),n.d(t,"OctahedronGeometry",function(){return Ci}),n.d(t,"OctahedronBufferGeometry",function(){return Ri}),n.d(t,"IcosahedronGeometry",function(){return Li}),n.d(t,"IcosahedronBufferGeometry",function(){return Pi}),n.d(t,"DodecahedronGeometry",function(){return Oi}),n.d(t,"DodecahedronBufferGeometry",function(){return Ii}),n.d(t,"PolyhedronGeometry",function(){return Mi}),n.d(t,"PolyhedronBufferGeometry",function(){return Ti}),n.d(t,"TubeGeometry",function(){return ki}),n.d(t,"TubeBufferGeometry",function(){return Ni}),n.d(t,"TorusKnotGeometry",function(){return Di}),n.d(t,"TorusKnotBufferGeometry",function(){return Fi}),n.d(t,"TorusGeometry",function(){return Ui}),n.d(t,"TorusBufferGeometry",function(){return Bi}),n.d(t,"TextGeometry",function(){return Gi}),n.d(t,"SphereGeometry",function(){return Vi}),n.d(t,"SphereBufferGeometry",function(){return Hi}),n.d(t,"RingGeometry",function(){return Wi}),n.d(t,"RingBufferGeometry",function(){return qi}),n.d(t,"PlaneGeometry",function(){return Br}),n.d(t,"PlaneBufferGeometry",function(){return jr}),n.d(t,"LatheGeometry",function(){return Xi}),n.d(t,"LatheBufferGeometry",function(){return Qi}),n.d(t,"ShapeGeometry",function(){return Yi}),n.d(t,"ShapeBufferGeometry",function(){return Zi}),n.d(t,"ExtrudeGeometry",function(){return zi}),n.d(t,"EdgesGeometry",function(){return Ji}),n.d(t,"ConeGeometry",function(){return eo}),n.d(t,"ConeBufferGeometry",function(){return to}),n.d(t,"CylinderGeometry",function(){return Ki}),n.d(t,"CylinderBufferGeometry",function(){return $i}),n.d(t,"CircleGeometry",function(){return no}),n.d(t,"CircleBufferGeometry",function(){return ro}),n.d(t,"BoxGeometry",function(){return Fr}),n.d(t,"BoxBufferGeometry",function(){return Ur}),n.d(t,"ShadowMaterial",function(){return oo}),n.d(t,"SpriteMaterial",function(){return oi}),n.d(t,"RawShaderMaterial",function(){return ao}),n.d(t,"ShaderMaterial",function(){return Yn}),n.d(t,"PointsMaterial",function(){return pi}),n.d(t,"MultiMaterial",function(){return so}),n.d(t,"MeshPhysicalMaterial",function(){return lo}),n.d(t,"MeshStandardMaterial",function(){return uo}),n.d(t,"MeshPhongMaterial",function(){return co}),n.d(t,"MeshToonMaterial",function(){return ho}),n.d(t,"MeshNormalMaterial",function(){return fo}),n.d(t,"MeshLambertMaterial",function(){return po}),n.d(t,"MeshDepthMaterial",function(){return Zn}),n.d(t,"MeshBasicMaterial",function(){return yr}),n.d(t,"LineDashedMaterial",function(){return mo}),n.d(t,"LineBasicMaterial",function(){return hi}),n.d(t,"Material",function(){return Qn}),n.d(t,"Float64BufferAttribute",function(){return Cr}),n.d(t,"Float32BufferAttribute",function(){return Ar}),n.d(t,"Uint32BufferAttribute",function(){return Sr}),n.d(t,"Int32BufferAttribute",function(){return Tr}),n.d(t,"Uint16BufferAttribute",function(){return Mr}),n.d(t,"Int16BufferAttribute",function(){return Er}),n.d(t,"Uint8ClampedBufferAttribute",function(){return wr}),n.d(t,"Uint8BufferAttribute",function(){return xr}),n.d(t,"Int8BufferAttribute",function(){return _r}),n.d(t,"BufferAttribute",function(){return br}),n.d(t,"REVISION",function(){return c}),n.d(t,"MOUSE",function(){return h}),n.d(t,"CullFaceNone",function(){return f}),n.d(t,"CullFaceBack",function(){return d}),n.d(t,"CullFaceFront",function(){return p}),n.d(t,"CullFaceFrontBack",function(){return m}),n.d(t,"FrontFaceDirectionCW",function(){return v}),n.d(t,"FrontFaceDirectionCCW",function(){return g}),n.d(t,"BasicShadowMap",function(){return y}),n.d(t,"PCFShadowMap",function(){return b}),n.d(t,"PCFSoftShadowMap",function(){return _}),n.d(t,"FrontSide",function(){return x}),n.d(t,"BackSide",function(){return w}),n.d(t,"DoubleSide",function(){return E}),n.d(t,"FlatShading",function(){return M}),n.d(t,"SmoothShading",function(){return T}),n.d(t,"NoColors",function(){return S}),n.d(t,"FaceColors",function(){return A}),n.d(t,"VertexColors",function(){return C}),n.d(t,"NoBlending",function(){return R}),n.d(t,"NormalBlending",function(){return L}),n.d(t,"AdditiveBlending",function(){return P}),n.d(t,"SubtractiveBlending",function(){return O}),n.d(t,"MultiplyBlending",function(){return I}),n.d(t,"CustomBlending",function(){return k}),n.d(t,"AddEquation",function(){return N}),n.d(t,"SubtractEquation",function(){return D}),n.d(t,"ReverseSubtractEquation",function(){return F}),n.d(t,"MinEquation",function(){return U}),n.d(t,"MaxEquation",function(){return B}),n.d(t,"ZeroFactor",function(){return j}),n.d(t,"OneFactor",function(){return z}),n.d(t,"SrcColorFactor",function(){return G}),n.d(t,"OneMinusSrcColorFactor",function(){return V}),n.d(t,"SrcAlphaFactor",function(){return H}),n.d(t,"OneMinusSrcAlphaFactor",function(){return W}),n.d(t,"DstAlphaFactor",function(){return q}),n.d(t,"OneMinusDstAlphaFactor",function(){return X}),n.d(t,"DstColorFactor",function(){return Q}),n.d(t,"OneMinusDstColorFactor",function(){return Y}),n.d(t,"SrcAlphaSaturateFactor",function(){return Z}),n.d(t,"NeverDepth",function(){return J}),n.d(t,"AlwaysDepth",function(){return K}),n.d(t,"LessDepth",function(){return $}),n.d(t,"LessEqualDepth",function(){return ee}),n.d(t,"EqualDepth",function(){return te}),n.d(t,"GreaterEqualDepth",function(){return ne}),n.d(t,"GreaterDepth",function(){return re}),n.d(t,"NotEqualDepth",function(){return ie}),n.d(t,"MultiplyOperation",function(){return oe}),n.d(t,"MixOperation",function(){return ae}),n.d(t,"AddOperation",function(){return se}),n.d(t,"NoToneMapping",function(){return ue}),n.d(t,"LinearToneMapping",function(){return le}),n.d(t,"ReinhardToneMapping",function(){return ce}),n.d(t,"Uncharted2ToneMapping",function(){return he}),n.d(t,"CineonToneMapping",function(){return fe}),n.d(t,"UVMapping",function(){return de}),n.d(t,"CubeReflectionMapping",function(){return pe}),n.d(t,"CubeRefractionMapping",function(){return me}),n.d(t,"EquirectangularReflectionMapping",function(){return ve}),n.d(t,"EquirectangularRefractionMapping",function(){return ge}),n.d(t,"SphericalReflectionMapping",function(){return ye}),n.d(t,"CubeUVReflectionMapping",function(){return be}),n.d(t,"CubeUVRefractionMapping",function(){return _e}),n.d(t,"RepeatWrapping",function(){return xe}),n.d(t,"ClampToEdgeWrapping",function(){return we}),n.d(t,"MirroredRepeatWrapping",function(){return Ee}),n.d(t,"NearestFilter",function(){return Me}),n.d(t,"NearestMipMapNearestFilter",function(){return Te}),n.d(t,"NearestMipMapLinearFilter",function(){return Se}),n.d(t,"LinearFilter",function(){return Ae}),n.d(t,"LinearMipMapNearestFilter",function(){return Ce}),n.d(t,"LinearMipMapLinearFilter",function(){return Re}),n.d(t,"UnsignedByteType",function(){return Le}),n.d(t,"ByteType",function(){return Pe}),n.d(t,"ShortType",function(){return Oe}),n.d(t,"UnsignedShortType",function(){return Ie}),n.d(t,"IntType",function(){return ke}),n.d(t,"UnsignedIntType",function(){return Ne}),n.d(t,"FloatType",function(){return De}),n.d(t,"HalfFloatType",function(){return Fe}),n.d(t,"UnsignedShort4444Type",function(){return Ue}),n.d(t,"UnsignedShort5551Type",function(){return Be}),n.d(t,"UnsignedShort565Type",function(){return je}),n.d(t,"UnsignedInt248Type",function(){return ze}),n.d(t,"AlphaFormat",function(){return Ge}),n.d(t,"RGBFormat",function(){return Ve}),n.d(t,"RGBAFormat",function(){return He}),n.d(t,"LuminanceFormat",function(){return We}),n.d(t,"LuminanceAlphaFormat",function(){return qe}),n.d(t,"RGBEFormat",function(){return Xe}),n.d(t,"DepthFormat",function(){return Qe}),n.d(t,"DepthStencilFormat",function(){return Ye}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Ze}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return Je}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Ke}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return $e}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return et}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return tt}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return nt}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return rt}),n.d(t,"RGB_ETC1_Format",function(){return it}),n.d(t,"LoopOnce",function(){return ot}),n.d(t,"LoopRepeat",function(){return at}),n.d(t,"LoopPingPong",function(){return st}),n.d(t,"InterpolateDiscrete",function(){return ut}),n.d(t,"InterpolateLinear",function(){return lt}),n.d(t,"InterpolateSmooth",function(){return ct}),n.d(t,"ZeroCurvatureEnding",function(){return ht}),n.d(t,"ZeroSlopeEnding",function(){return ft}),n.d(t,"WrapAroundEnding",function(){return dt}),n.d(t,"TrianglesDrawMode",function(){return pt}),n.d(t,"TriangleStripDrawMode",function(){return mt}),n.d(t,"TriangleFanDrawMode",function(){return vt}),n.d(t,"LinearEncoding",function(){return gt}),n.d(t,"sRGBEncoding",function(){return yt}),n.d(t,"GammaEncoding",function(){return bt}),n.d(t,"RGBEEncoding",function(){return _t}),n.d(t,"LogLuvEncoding",function(){return xt}),n.d(t,"RGBM7Encoding",function(){return wt}),n.d(t,"RGBM16Encoding",function(){return Et}),n.d(t,"RGBDEncoding",function(){return Mt}),n.d(t,"BasicDepthPacking",function(){return Tt}),n.d(t,"RGBADepthPacking",function(){return St}),n.d(t,"CubeGeometry",function(){return Fr}),n.d(t,"Face4",function(){return Fs}),n.d(t,"LineStrip",function(){return Us}),n.d(t,"LinePieces",function(){return Bs}),n.d(t,"MeshFaceMaterial",function(){return js}),n.d(t,"PointCloud",function(){return zs}),n.d(t,"Particle",function(){return Gs}),n.d(t,"ParticleSystem",function(){return Vs}),n.d(t,"PointCloudMaterial",function(){return Hs}),n.d(t,"ParticleBasicMaterial",function(){return Ws}),n.d(t,"ParticleSystemMaterial",function(){return qs}),n.d(t,"Vertex",function(){return Xs}),n.d(t,"DynamicBufferAttribute",function(){return Qs}),n.d(t,"Int8Attribute",function(){return Ys}),n.d(t,"Uint8Attribute",function(){return Zs}),n.d(t,"Uint8ClampedAttribute",function(){return Js}),n.d(t,"Int16Attribute",function(){return Ks}),n.d(t,"Uint16Attribute",function(){return $s}),n.d(t,"Int32Attribute",function(){return eu}),n.d(t,"Uint32Attribute",function(){return tu}),n.d(t,"Float32Attribute",function(){return nu}),n.d(t,"Float64Attribute",function(){return ru}),n.d(t,"ClosedSplineCurve3",function(){return iu}),n.d(t,"SplineCurve3",function(){return ou}),n.d(t,"Spline",function(){return au}),n.d(t,"BoundingBoxHelper",function(){return su}),n.d(t,"EdgesHelper",function(){return uu}),n.d(t,"WireframeHelper",function(){return lu}),n.d(t,"XHRLoader",function(){return cu}),n.d(t,"BinaryTextureLoader",function(){return hu}),n.d(t,"GeometryUtils",function(){return fu}),n.d(t,"ImageUtils",function(){return du}),n.d(t,"Projector",function(){return pu}),n.d(t,"CanvasRenderer",function(){return mu}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),r.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;var n=[],r=0,i=t.length;for(r=0;r<i;r++)n[r]=t[r];for(r=0;r<i;r++)n[r].call(this,e)}}}};var i,o,a,s,u,l,c="84",h={LEFT:0,MIDDLE:1,RIGHT:2},f=0,d=1,p=2,m=3,v=0,g=1,y=0,b=1,_=2,x=0,w=1,E=2,M=1,T=2,S=0,A=1,C=2,R=0,L=1,P=2,O=3,I=4,k=5,N=100,D=101,F=102,U=103,B=104,j=200,z=201,G=202,V=203,H=204,W=205,q=206,X=207,Q=208,Y=209,Z=210,J=0,K=1,$=2,ee=3,te=4,ne=5,re=6,ie=7,oe=0,ae=1,se=2,ue=0,le=1,ce=2,he=3,fe=4,de=300,pe=301,me=302,ve=303,ge=304,ye=305,be=306,_e=307,xe=1e3,we=1001,Ee=1002,Me=1003,Te=1004,Se=1005,Ae=1006,Ce=1007,Re=1008,Le=1009,Pe=1010,Oe=1011,Ie=1012,ke=1013,Ne=1014,De=1015,Fe=1016,Ue=1017,Be=1018,je=1019,ze=1020,Ge=1021,Ve=1022,He=1023,We=1024,qe=1025,Xe=He,Qe=1026,Ye=1027,Ze=2001,Je=2002,Ke=2003,$e=2004,et=2100,tt=2101,nt=2102,rt=2103,it=2151,ot=2200,at=2201,st=2202,ut=2300,lt=2301,ct=2302,ht=2400,ft=2401,dt=2402,pt=0,mt=1,vt=2,gt=3e3,yt=3001,bt=3007,_t=3002,xt=3003,wt=3004,Et=3005,Mt=3006,Tt=3200,St=3201,At={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=new Array(36),s=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?a[e]="-":14===e?a[e]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),i=15&s,s>>=4,a[e]=o[19===e?3&i|8:i]);return a.join("")}),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*At.DEG2RAD},radToDeg:function(e){return e*At.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function Ct(e,t){this.x=e||0,this.y=t||0}Ct.prototype={constructor:Ct,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return void 0===u&&(u=new Ct,l=new Ct),u.set(e,e),l.set(t,t),this.clamp(u,l)},clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}};var Rt,Lt,Pt,Ot,It,kt,Nt=0;function Dt(e,t,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:Nt++}),this.uuid=At.generateUUID(),this.name="",this.image=void 0!==e?e:Dt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Dt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:we,this.wrapT=void 0!==r?r:we,this.magFilter=void 0!==i?i:Ae,this.minFilter=void 0!==o?o:Re,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:He,this.type=void 0!==s?s:Le,this.offset=new Ct(0,0),this.repeat=new Ct(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:gt,this.version=0,this.onUpdate=null}function Ft(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Ut(e,t,n){this.uuid=At.generateUUID(),this.width=e,this.height=t,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Ae),this.texture=new Dt(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Bt(e,t,n){Ut.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function jt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function zt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Gt(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Vt(e,t,n,r,i,o,a,s,u,l){Dt.call(this,e=void 0!==e?e:[],t=void 0!==t?t:pe,n,r,i,o,a,s,u,l),this.flipY=!1}Dt.DEFAULT_IMAGE=void 0,Dt.DEFAULT_MAPPING=de,Dt.prototype={constructor:Dt,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=At.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(n)}),t.image=n.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===de){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case xe:e.x=e.x-Math.floor(e.x);break;case we:e.x=e.x<0?0:1;break;case Ee:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case xe:e.y=e.y-Math.floor(e.y);break;case we:e.y=e.y<0?0:1;break;case Ee:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(Dt.prototype,r.prototype),Ft.prototype={constructor:Ft,isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,t),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Ft,t=new Ft),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},Ut.prototype={constructor:Ut,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Ut.prototype,r.prototype),(Bt.prototype=Object.create(Ut.prototype)).constructor=Bt,Bt.prototype.isWebGLRenderTargetCube=!0,jt.prototype={constructor:jt,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),u=e.order;return"XYZ"===u?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===u?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===u?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===u?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===u?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===u&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,r){return void 0===e&&(e=new zt),(t=n.dot(r)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=o*l+this._w*c,this._x=n*l+this._x*c,this._y=r*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(jt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var x=a*g;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),zt.prototype={constructor:zt,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===Pt&&(Pt=new jt),this.applyQuaternion(Pt.setFromEuler(e))},applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new jt),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this.divideScalar(i[3]*t+i[7]*n+i[11]*r+i[15])},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(e){return void 0===Lt&&(Lt=new Gt),Lt.multiplyMatrices(e.projectionMatrix,Lt.getInverse(e.matrixWorld)),this.applyMatrix4(Lt)},unproject:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new zt,t=new zt),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return void 0===Rt&&(Rt=new zt),Rt.copy(this).projectOnVector(e),this.sub(Rt)},reflect:function(){var e;return function(t){return void 0===e&&(e=new zt),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(At.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},Gt.prototype={constructor:Gt,isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Gt).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new zt);var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=u*l;t[0]=(g=s*l)+(y=u*c)*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=m*a-v,t[6]=y+g*a,t[10]=o*s}else if("ZXY"===e.order){var g,y;m=s*c,v=u*l,t[0]=(g=s*l)-(y=u*c)*a,t[4]=-o*c,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*l,t[9]=y-g*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order)h=o*l,f=o*c,d=a*l,p=a*c,t[0]=s*l,t[4]=d*u-f,t[8]=h*u+p,t[1]=s*c,t[5]=p*u+h,t[9]=f*u-d,t[2]=-u,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var b=o*s,_=o*u,x=a*s,w=a*u;t[0]=s*l,t[4]=w-b*c,t[8]=x*c+_,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=_*c+x,t[10]=b-w*c}else"XZY"===e.order&&(b=o*s,_=o*u,x=a*s,w=a*u,t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+w,t[5]=o*l,t[9]=_*c-x,t[2]=x*c-_,t[6]=a*l,t[10]=w*c+b);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,u=i+i,l=n*a,c=n*s,h=n*u,f=r*s,d=r*u,p=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-(f+p),t[4]=c-g,t[8]=h+v,t[1]=c+g,t[5]=1-(l+p),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(l+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,n){void 0===Ot&&(Ot=new zt,It=new zt,kt=new zt);var r=this.elements;return kt.subVectors(e,t).normalize(),0===kt.lengthSq()&&(kt.z=1),Ot.crossVectors(n,kt).normalize(),0===Ot.lengthSq()&&(kt.z+=1e-4,Ot.crossVectors(n,kt).normalize()),It.crossVectors(kt,Ot),r[0]=Ot.x,r[4]=It.x,r[8]=kt.x,r[1]=Ot.y,r[5]=It.y,r[9]=kt.y,r[2]=Ot.z,r[6]=It.z,r[10]=kt.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],C=r[13],R=r[2],L=r[6],P=r[10],O=r[14],I=r[3],k=r[7],N=r[11],D=r[15];return i[0]=o*x+a*T+s*R+u*I,i[4]=o*w+a*S+s*L+u*k,i[8]=o*E+a*A+s*P+u*N,i[12]=o*M+a*C+s*O+u*D,i[1]=l*x+c*T+h*R+f*I,i[5]=l*w+c*S+h*L+f*k,i[9]=l*E+c*A+h*P+f*N,i[13]=l*M+c*C+h*O+f*D,i[2]=d*x+p*T+m*R+v*I,i[6]=d*w+p*S+m*L+v*k,i[10]=d*E+p*A+m*P+v*N,i[14]=d*M+p*C+m*O+v*D,i[3]=g*x+y*T+b*R+_*I,i[7]=g*w+y*S+b*L+_*k,i[11]=g*E+y*A+b*P+_*N,i[15]=g*M+y*C+b*O+_*D,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new zt);for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*c*m-l*y*m-d*c*b+l*p*b,x=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,w=f*g*h-v*d*h+v*l*m-u*g*m-f*l*b+u*d*b,E=v*d*c-f*g*c-v*l*p+u*g*p+f*l*y-u*d*y,M=i*_+o*x+a*w+s*E;if(0===M){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=_*S,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*S,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*S,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*S,n[4]=x*S,n[5]=(f*y*s-v*p*s+v*a*m-i*y*m-f*a*b+i*p*b)*S,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*b-i*c*b)*S,n[7]=(u*p*s-f*c*s+f*a*h-i*p*h-u*a*m+i*c*m)*S,n[8]=w*S,n[9]=(v*d*s-f*g*s-v*o*m+i*g*m+f*o*b-i*d*b)*S,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*b+i*l*b)*S,n[11]=(f*l*s-u*d*s-f*o*h+i*d*h+u*o*m-i*l*m)*S,n[12]=E*S,n[13]=(f*g*a-v*d*a+v*o*p-i*g*p-f*o*y+i*d*y)*S,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*S,n[15]=(u*d*a-f*l*a+f*o*c-i*d*c-u*o*p+i*l*p)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new zt,t=new Gt);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements);var l=1/a,c=1/s,h=1/u;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},(Vt.prototype=Object.create(Dt.prototype)).constructor=Vt,Vt.prototype.isCubeTexture=!0,Object.defineProperty(Vt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ht=new Dt,Wt=new Vt;function qt(){this.seq=[],this.map={}}var Xt=[],Qt=[];function Yt(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Xt[i];if(void 0===o&&(o=new Float32Array(i),Xt[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)e[a].toArray(o,s+=n)}return o}function Zt(e,t){var n=Qt[t];void 0===n&&(n=new Int32Array(t),Qt[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Jt(e,t){e.uniform1f(this.addr,t)}function Kt(e,t){e.uniform1i(this.addr,t)}function $t(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function en(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function tn(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function nn(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function rn(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function on(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function an(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Ht,r)}function sn(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Wt,r)}function un(e,t){e.uniform2iv(this.addr,t)}function ln(e,t){e.uniform3iv(this.addr,t)}function cn(e,t){e.uniform4iv(this.addr,t)}function hn(e,t){e.uniform1fv(this.addr,t)}function fn(e,t){e.uniform1iv(this.addr,t)}function dn(e,t){e.uniform2fv(this.addr,Yt(t,this.size,2))}function pn(e,t){e.uniform3fv(this.addr,Yt(t,this.size,3))}function mn(e,t){e.uniform4fv(this.addr,Yt(t,this.size,4))}function vn(e,t){e.uniformMatrix2fv(this.addr,!1,Yt(t,this.size,4))}function gn(e,t){e.uniformMatrix3fv(this.addr,!1,Yt(t,this.size,9))}function yn(e,t){e.uniformMatrix4fv(this.addr,!1,Yt(t,this.size,16))}function bn(e,t,n){var r=t.length,i=Zt(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Ht,i[o])}function _n(e,t,n){var r=t.length,i=Zt(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||Wt,i[o])}function xn(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(t.type){case 5126:return Jt;case 35664:return $t;case 35665:return en;case 35666:return tn;case 35674:return nn;case 35675:return rn;case 35676:return on;case 35678:return an;case 35680:return sn;case 5124:case 35670:return Kt;case 35667:case 35671:return un;case 35668:case 35672:return ln;case 35669:case 35673:return cn}}()}function wn(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return hn;case 35664:return dn;case 35665:return pn;case 35666:return mn;case 35674:return vn;case 35675:return gn;case 35676:return yn;case 35678:return bn;case 35680:return _n;case 5124:case 35670:return fn;case 35667:case 35671:return un;case 35668:case 35672:return ln;case 35669:case 35673:return cn}}()}function En(e){this.id=e,qt.call(this)}En.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var Mn=/([\w\d_]+)(\])?(\[|\.)?/g;function Tn(e,t){e.seq.push(t),e.map[t.id]=t}function Sn(e,t,n){var r=e.name,i=r.length;for(Mn.lastIndex=0;;){var o=Mn.exec(r),a=o[1],s=o[3];if("]"===o[2]&&(a|=0),void 0===s||"["===s&&Mn.lastIndex+2===i){Tn(n,void 0===s?new xn(a,e,t):new wn(a,e,t));break}var u=n.map[a];void 0===u&&Tn(n,u=new En(a)),n=u}}function An(e,t,n){qt.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);Sn(o,e.getUniformLocation(t,o.name),this)}}An.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},An.prototype.set=function(e,t,n){var r=this.map[n];void 0!==r&&r.setValue(e,t[n],this.renderer)},An.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},An.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},An.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Cn={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return t}},Rn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function Ln(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Ln.prototype={constructor:Ln,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=At.euclideanModulo(t,1),n=At.clamp(n,0,1),r=At.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,a,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(u=Pn[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),u=Math.min(i,o,a),l=(u+s)/2;if(u===s)t=0,n=0;else{var c=s-u;switch(n=l<=.5?c/(s+u):c/(2-s-u),s){case i:t=(o-a)/c+(o<a?6:0);break;case o:t=(a-i)/c+2;break;case a:t=(i-o)/c+4}t/=6}return r.h=t,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function On(e,t,n,r,i,o,a,s,u,l,c,h){Dt.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:Me,this.minFilter=void 0!==l?l:Me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(On.prototype=Object.create(Dt.prototype)).constructor=On,On.prototype.isDataTexture=!0;var In={common:{diffuse:{value:new Ln(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ft(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ln(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ln(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ft(0,0,1,1)}}},kn={basic:{uniforms:Cn.merge([In.common,In.aomap,In.lightmap,In.fog]),vertexShader:Rn.meshbasic_vert,fragmentShader:Rn.meshbasic_frag},lambert:{uniforms:Cn.merge([In.common,In.aomap,In.lightmap,In.emissivemap,In.fog,In.lights,{emissive:{value:new Ln(0)}}]),vertexShader:Rn.meshlambert_vert,fragmentShader:Rn.meshlambert_frag},phong:{uniforms:Cn.merge([In.common,In.aomap,In.lightmap,In.emissivemap,In.bumpmap,In.normalmap,In.displacementmap,In.gradientmap,In.fog,In.lights,{emissive:{value:new Ln(0)},specular:{value:new Ln(1118481)},shininess:{value:30}}]),vertexShader:Rn.meshphong_vert,fragmentShader:Rn.meshphong_frag},standard:{uniforms:Cn.merge([In.common,In.aomap,In.lightmap,In.emissivemap,In.bumpmap,In.normalmap,In.displacementmap,In.roughnessmap,In.metalnessmap,In.fog,In.lights,{emissive:{value:new Ln(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rn.meshphysical_vert,fragmentShader:Rn.meshphysical_frag},points:{uniforms:Cn.merge([In.points,In.fog]),vertexShader:Rn.points_vert,fragmentShader:Rn.points_frag},dashed:{uniforms:Cn.merge([In.common,In.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rn.linedashed_vert,fragmentShader:Rn.linedashed_frag},depth:{uniforms:Cn.merge([In.common,In.displacementmap]),vertexShader:Rn.depth_vert,fragmentShader:Rn.depth_frag},normal:{uniforms:Cn.merge([In.common,In.bumpmap,In.normalmap,In.displacementmap,{opacity:{value:1}}]),vertexShader:Rn.normal_vert,fragmentShader:Rn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rn.cube_vert,fragmentShader:Rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Rn.equirect_vert,fragmentShader:Rn.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new zt}},vertexShader:Rn.distanceRGBA_vert,fragmentShader:Rn.distanceRGBA_frag}};function Nn(e,t){this.min=void 0!==e?e:new Ct(1/0,1/0),this.max=void 0!==t?t:new Ct(-1/0,-1/0)}kn.physical={uniforms:Cn.merge([kn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Rn.meshphysical_vert,fragmentShader:Rn.meshphysical_frag},Nn.prototype={constructor:Nn,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ct;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Ct;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Ct;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new Ct).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new Ct).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ct;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var Dn,Fn,Un,Bn,jn,zn,Gn,Vn,Hn,Wn,qn,Xn=0;function Qn(){Object.defineProperty(this,"id",{value:Xn++}),this.uuid=At.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=L,this.side=x,this.shading=T,this.vertexColors=S,this.opacity=1,this.transparent=!1,this.blendSrc=H,this.blendDst=W,this.blendEquation=N,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ee,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Yn(e){Qn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Zn(e){Qn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Tt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Jn(e,t){this.min=void 0!==e?e:new zt(1/0,1/0,1/0),this.max=void 0!==t?t:new zt(-1/0,-1/0,-1/0)}function Kn(e,t){this.center=void 0!==e?e:new zt,this.radius=void 0!==t?t:0}function $n(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function er(e,t){this.normal=void 0!==e?e:new zt(1,0,0),this.constant=void 0!==t?t:0}function tr(e,t,n,r,i,o){this.planes=[void 0!==e?e:new er,void 0!==t?t:new er,void 0!==n?n:new er,void 0!==r?r:new er,void 0!==i?i:new er,void 0!==o?o:new er]}function nr(e,t,n,r){var i=e.context,o=e.state,a=new tr,s=new Gt,u=t.shadows,l=new Ct,c=new Ct(r.maxTextureSize,r.maxTextureSize),h=new zt,f=new zt,d=[],p=1,m=2,v=1+(p|m),g=new Array(v),y=new Array(v),_={},M=[new zt(1,0,0),new zt(-1,0,0),new zt(0,0,1),new zt(0,0,-1),new zt(0,1,0),new zt(0,-1,0)],T=[new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,0,1),new zt(0,0,-1)],S=[new Ft,new Ft,new Ft,new Ft,new Ft,new Ft],A=new Zn;A.depthPacking=St,A.clipping=!0;for(var C=kn.distanceRGBA,R=Cn.clone(C.uniforms),L=0;L!==v;++L){var P=0!=(L&p),O=0!=(L&m),I=A.clone();I.morphTargets=P,I.skinning=O,g[L]=I;var k=new Yn({defines:{USE_SHADOWMAP:""},uniforms:R,vertexShader:C.vertexShader,fragmentShader:C.fragmentShader,morphTargets:P,skinning:O,clipping:!0});y[L]=k}var N=this;function D(t,n,r,i){var o=t.geometry,a=null,s=g,u=t.customDepthMaterial;if(r&&(s=y,u=t.customDistanceMaterial),u)a=u;else{var l=!1;n.morphTargets&&(o&&o.isBufferGeometry?l=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(l=o.morphTargets&&o.morphTargets.length>0));var c=0;l&&(c|=p),t.isSkinnedMesh&&n.skinning&&(c|=m),a=s[c]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var h=a.uuid,f=n.uuid,d=_[h];void 0===d&&(_[h]=d={});var v=d[f];void 0===v&&(v=a.clone(),d[f]=v),a=v}a.visible=n.visible,a.wireframe=n.wireframe;var b=n.side;return N.renderSingleSided&&b==E&&(b=x),N.renderReverseSided&&(b===x?b=w:b===w&&(b=x)),a.side=b,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function F(e,t,n){if(!1!==e.visible){0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&(!e.castShadow||!1!==e.frustumCulled&&!0!==a.intersectsObject(e)||!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),d.push(e)));for(var r=e.children,i=0,o=r.length;i<o;i++)F(r[i],t,n)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==u.length){var p,m;o.buffers.color.setClear(1,1,1,1),o.disable(i.BLEND),o.setDepthTest(!0),o.setScissorTest(!1);for(var v=0,g=u.length;v<g;v++){var y=u[v],b=y.shadow;if(void 0!==b){var _=b.camera;if(l.copy(b.mapSize),l.min(c),y&&y.isPointLight){p=6,m=!0;var x=l.x,w=l.y;S[0].set(2*x,w,x,w),S[1].set(0,w,x,w),S[2].set(3*x,w,x,w),S[3].set(x,w,x,w),S[4].set(3*x,0,x,w),S[5].set(x,0,x,w),l.x*=4,l.y*=2}else p=1,m=!1;null===b.map&&(b.map=new Ut(l.x,l.y,{minFilter:Me,magFilter:Me,format:He}),_.updateProjectionMatrix()),b.isSpotLightShadow&&b.update(y),b&&b.isRectAreaLightShadow&&b.update(y);var E=b.map,A=b.matrix;f.setFromMatrixPosition(y.matrixWorld),_.position.copy(f),e.setRenderTarget(E),e.clear();for(var C=0;C<p;C++){m?(h.copy(_.position),h.add(M[C]),_.up.copy(T[C]),_.lookAt(h),o.viewport(S[C])):(h.setFromMatrixPosition(y.target.matrixWorld),_.lookAt(h)),_.updateMatrixWorld(),_.matrixWorldInverse.getInverse(_.matrixWorld),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(_.projectionMatrix),A.multiply(_.matrixWorldInverse),s.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),a.setFromMatrix(s),d.length=0,F(t,r,_);for(var R=0,L=d.length;R<L;R++){var P=d[R],O=n.update(P),I=P.material;if(I&&I.isMultiMaterial)for(var k=O.groups,U=I.materials,B=0,j=k.length;B<j;B++){var z=k[B],G=U[z.materialIndex];if(!0===G.visible){var V=D(P,G,m,f);e.renderBufferDirect(_,null,O,V,P,z)}}else V=D(P,I,m,f),e.renderBufferDirect(_,null,O,V,P,null)}}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}var H=e.getClearColor(),W=e.getClearAlpha();e.setClearColor(H,W),N.needsUpdate=!1}}}function rr(e,t){this.origin=void 0!==e?e:new zt,this.direction=void 0!==t?t:new zt}function ir(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ir.DefaultOrder}function or(){this.mask=1}Qn.prototype={constructor:Qn,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==L&&(n.blending=this.blending),this.shading!==T&&(n.shading=this.shading),this.side!==x&&(n.side=this.side),this.vertexColors!==S&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Qn.prototype,r.prototype),(Yn.prototype=Object.create(Qn.prototype)).constructor=Yn,Yn.prototype.isShaderMaterial=!0,Yn.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cn.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Yn.prototype.toJSON=function(e){var t=Qn.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},(Zn.prototype=Object.create(Qn.prototype)).constructor=Zn,Zn.prototype.isMeshDepthMaterial=!0,Zn.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Jn.prototype={constructor:Jn,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new zt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new zt;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new zt;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new zt;return function(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var r,i,o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(r=0,i=a.length;r<i;r++)e.copy(a[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(r=0,i=s.count;r<i;r++)e.fromBufferAttribute(s,r).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new zt).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return void 0===Fn&&(Fn=new zt),this.clampPoint(e.center,Fn),Fn.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){return(t||new zt).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new zt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new zt;return function(t){var n=t||new Kn;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Dn=[new zt,new zt,new zt,new zt,new zt,new zt,new zt,new zt],function(e){return this.isEmpty()?this:(Dn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Dn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Dn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Dn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Dn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Dn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Dn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Dn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Dn),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Kn.prototype={constructor:Kn,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){void 0===Un&&(Un=new Jn);var n=this.center;void 0!==t?n.copy(t):Un.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new zt;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Jn;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},$n.prototype={constructor:$n,isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new zt);for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,v=i*d+o*p+a*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(l*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},er.prototype={constructor:er,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new zt,t=new zt;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new zt).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new zt;return function(t,n){var r=n||new zt,i=t.delta(e),o=this.normal.dot(i);if(0===o)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/o;return a<0||a>1?void 0:r.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new zt).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new zt,t=new $n;return function(n,r){var i=this.coplanarPoint(e).applyMatrix4(n),o=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},tr.prototype={constructor:tr,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+u,p+f,y+v).normalize(),t[3].setComponents(a-i,c-u,p-f,y-v).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this},intersectsObject:(zn=new Kn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),zn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(zn)}),intersectsSprite:function(){var e=new Kn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Bn=new zt,jn=new zt,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];Bn.x=r.normal.x>0?e.min.x:e.max.x,jn.x=r.normal.x>0?e.max.x:e.min.x,Bn.y=r.normal.y>0?e.min.y:e.max.y,jn.y=r.normal.y>0?e.max.y:e.min.y,Bn.z=r.normal.z>0?e.min.z:e.max.z,jn.z=r.normal.z>0?e.max.z:e.min.z;var i=r.distanceToPoint(Bn),o=r.distanceToPoint(jn);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},rr.prototype={constructor:rr,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new zt).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new zt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new zt;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new zt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Vn=new zt,Hn=new zt,Wn=new zt,function(e,t,n,r){Vn.copy(e).add(t).multiplyScalar(.5),Hn.copy(t).sub(e).normalize(),Wn.copy(this.origin).sub(Vn);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(Hn),c=Wn.dot(this.direction),h=-Wn.dot(Hn),f=Wn.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Hn).multiplyScalar(o).add(Vn),a}),intersectSphere:function(){var e=new zt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:this.at(s<0?u:s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(Gn=new zt,function(e){return null!==this.intersectBox(e,Gn)}),intersectTriangle:function(){var e=new zt,t=new zt,n=new zt,r=new zt;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=l*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var d=-l*e.dot(r);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},ir.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ir.DefaultOrder="XYZ",ir.prototype={constructor:ir,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=At.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new Gt),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(qn=new jt,function(e){return qn.setFromEuler(this),this.setFromQuaternion(qn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new zt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},or.prototype={constructor:or,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}};var ar,sr,ur,lr,cr,hr,fr,dr=0;function pr(){Object.defineProperty(this,"id",{value:dr++}),this.uuid=At.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pr.DefaultUp.clone();var e=new zt,t=new ir,n=new jt,r=new zt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Gt},normalMatrix:{value:new $n}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=pr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new or,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function mr(e,t){this.start=void 0!==e?e:new zt,this.end=void 0!==t?t:new zt}function vr(e,t,n){this.a=void 0!==e?e:new zt,this.b=void 0!==t?t:new zt,this.c=void 0!==n?n:new zt}function gr(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new zt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Ln,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function yr(e){Qn.call(this),this.type="MeshBasicMaterial",this.color=new Ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function br(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=At.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _r(e,t){br.call(this,new Int8Array(e),t)}function xr(e,t){br.call(this,new Uint8Array(e),t)}function wr(e,t){br.call(this,new Uint8ClampedArray(e),t)}function Er(e,t){br.call(this,new Int16Array(e),t)}function Mr(e,t){br.call(this,new Uint16Array(e),t)}function Tr(e,t){br.call(this,new Int32Array(e),t)}function Sr(e,t){br.call(this,new Uint32Array(e),t)}function Ar(e,t){br.call(this,new Float32Array(e),t)}function Cr(e,t){br.call(this,new Float64Array(e),t)}function Rr(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Lr(e){for(var t=e.length,n=-1/0;t--;)e[t]>n&&(n=e[t]);return n}pr.DefaultUp=new zt(0,1,0),pr.DefaultMatrixAutoUpdate=!0,pr.prototype={constructor:pr,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(lr=new jt,function(e,t){return lr.setFromAxisAngle(e,t),this.quaternion.multiply(lr),this}),rotateX:function(){var e=new zt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new zt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new zt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new zt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new zt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new zt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new zt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(ur=new Gt,function(e){return e.applyMatrix4(ur.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Gt;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new zt;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ar=new zt,sr=new zt,function(e){var t=e||new jt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(ar,t,sr),t}),getWorldRotation:function(){var e=new jt;return function(t){var n=t||new ir;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new zt,t=new jt;return function(n){var r=n||new zt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new jt;return function(t){var n=t||new zt;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||""===e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var i=0;i<this.children.length;i++)r.children.push(this.children[i].toJSON(e).object)}if(t){var o=l(e.geometries),a=l(e.materials),s=l(e.textures),u=l(e.images);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),s.length>0&&(n.textures=s),u.length>0&&(n.images=u)}return n.object=r,n;function l(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}},Object.assign(pr.prototype,r.prototype),mr.prototype={constructor:mr,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new zt).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new zt).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new zt;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(cr=new zt,hr=new zt,function(e,t){cr.subVectors(e,this.start),hr.subVectors(this.end,this.start);var n=hr.dot(hr),r=hr.dot(cr)/n;return t&&(r=At.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new zt;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},vr.normal=(fr=new zt,function(e,t,n,r){var i=r||new zt;i.subVectors(n,t),fr.subVectors(e,t),i.cross(fr);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}),vr.barycoordFromPoint=function(){var e=new zt,t=new zt,n=new zt;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),c=e.dot(n),h=t.dot(t),f=t.dot(n),d=u*h-l*l,p=s||new zt;if(0===d)return p.set(-2,-1,-1);var m=1/d,v=(h*c-l*f)*m,g=(u*f-l*c)*m;return p.set(1-v-g,g,v)}}(),vr.containsPoint=function(){var e=new zt;return function(t,n,r,i){var o=vr.barycoordFromPoint(t,n,r,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),vr.prototype={constructor:vr,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new zt,t=new zt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new zt).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return vr.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new er).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return vr.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return vr.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,n,r;return function(i,o){void 0===e&&(e=new er,t=[new mr,new mr,new mr],n=new zt,r=new zt);var a=o||new zt,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(n,!0,r);var l=n.distanceToSquared(r);l<s&&(s=l,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},gr.prototype={constructor:gr,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},(yr.prototype=Object.create(Qn.prototype)).constructor=yr,yr.prototype.isMeshBasicMaterial=!0,yr.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},br.prototype={constructor:br,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ln),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ct),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new zt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Ft),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},(_r.prototype=Object.create(br.prototype)).constructor=_r,(xr.prototype=Object.create(br.prototype)).constructor=xr,(wr.prototype=Object.create(br.prototype)).constructor=wr,(Er.prototype=Object.create(br.prototype)).constructor=Er,(Mr.prototype=Object.create(br.prototype)).constructor=Mr,(Tr.prototype=Object.create(br.prototype)).constructor=Tr,(Sr.prototype=Object.create(br.prototype)).constructor=Sr,(Ar.prototype=Object.create(br.prototype)).constructor=Ar,(Cr.prototype=Object.create(br.prototype)).constructor=Cr,Object.assign(Rr.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var c,h=e.morphNormals,f=h.length;if(f>0){for(c=[],l=0;l<f;l++)c[l]=[];this.morphTargets.normal=c}var d=e.skinIndices,p=e.skinWeights,m=d.length===r.length,v=p.length===r.length;for(l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Ct,new Ct,new Ct))),!0===a&&(void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Ct,new Ct,new Ct)));for(var E=0;E<u;E++){var M=s[E].vertices;t[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<f;E++){var T=h[E].vertexNormals[l];c[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Pr,Or=0;function Ir(){return Or++}function kr(){Object.defineProperty(this,"id",{value:Ir()}),this.uuid=At.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Nr(){Object.defineProperty(this,"id",{value:Ir()}),this.uuid=At.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Dr(e,t){pr.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Nr,this.material=void 0!==t?t:new yr({color:16777215*Math.random()}),this.drawMode=pt,this.updateMorphTargets()}function Fr(e,t,n,r,i,o){kr.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Ur(e,t,n,r,i,o)),this.mergeVertices()}function Ur(e,t,n,r,i,o){Nr.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function d(e,t,n,r,i,o,d,p,m,v,g){var y,b,_=o/m,x=d/v,w=o/2,E=d/2,M=p/2,T=m+1,S=v+1,A=0,C=0,R=new zt;for(b=0;b<S;b++){var L=b*x-E;for(y=0;y<T;y++)R[e]=(y*_-w)*r,R[t]=L*i,R[n]=M,u.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=p>0?1:-1,l.push(R.x,R.y,R.z),c.push(y/m),c.push(1-b/v),A+=1}for(b=0;b<v;b++)for(y=0;y<m;y++){var P=h+y+T*(b+1),O=h+(y+1)+T*(b+1),I=h+(y+1)+T*b;s.push(h+y+T*b,P,I),s.push(P,O,I),C+=6}a.addGroup(f,C,g),f+=C,h+=A}d("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Ar(u,3)),this.addAttribute("normal",new Ar(l,3)),this.addAttribute("uv",new Ar(c,2))}function Br(e,t,n,r){kr.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new jr(e,t,n,r))}function jr(e,t,n,r){Nr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=e/2,s=t/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=e/u,d=t/l,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<c;i++)m.push(i*f-a,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}for(o=0;o<l;o++)for(i=0;i<u;i++){var b=i+c*(o+1),_=i+1+c*(o+1),x=i+1+c*o;p.push(i+c*o,b,x),p.push(b,_,x)}this.setIndex(p),this.addAttribute("position",new Ar(m,3)),this.addAttribute("normal",new Ar(v,3)),this.addAttribute("uv",new Ar(g,2))}function zr(){pr.call(this),this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt}function Gr(e,t,n,r){zr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Vr(e,t,n,r,i,o){zr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Hr(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}kr.prototype={constructor:kr,isGeometry:!0,applyMatrix:function(e){for(var t=(new $n).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new Gt),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new Gt),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(e){void 0===Pr&&(Pr=new pr),Pr.lookAt(e),Pr.updateMatrix(),this.applyMatrix(Pr.matrix)},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],h=[],f=0,d=0;f<i.length;f+=3,d+=2)t.vertices.push(new zt(i[f],i[f+1],i[f+2])),void 0!==o&&l.push(new zt(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new Ln(a[f],a[f+1],a[f+2])),void 0!==s&&c.push(new Ct(s[d],s[d+1])),void 0!==u&&h.push(new Ct(u[d],u[d+1]));function p(e,n,r,i){var f=new gr(e,n,r,void 0!==o?[l[e].clone(),l[n].clone(),l[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[n].clone(),c[r].clone()]),void 0!==u&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}if(void 0!==n){var m=e.groups;if(m.length>0)for(f=0;f<m.length;f++)for(var v=m[f],g=v.start,y=(d=g,g+v.count);d<y;d+=3)p(n[d],n[d+1],n[d+2],v.materialIndex);else for(f=0;f<n.length;f+=3)p(n[f],n[f+1],n[f+2])}else for(f=0;f<i.length/3;f+=3)p(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Gt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new zt,t=new zt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new zt;if(e){var s,u,l=new zt,c=new zt;for(r=0,i=this.faces.length;r<i;r++)s=this.vertices[(o=this.faces[r]).a],l.subVectors(this.vertices[o.c],u=this.vertices[o.b]),c.subVectors(s,u),l.cross(c),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new kr;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new zt,l={a:new zt,b:new zt,c:new zt},a.push(u),s.push(l)}var u,l,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)l=c.vertexNormals[n],(u=c.faceNormals[n]).copy((i=this.faces[n]).normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Jn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Kn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1!==(e&&e.isGeometry)){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new $n).getNormalMatrix(t));for(var d=0,p=a.length;d<p;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,p=f.length;d<p;d++)h.push(f[d].clone());for(d=0,p=u.length;d<p;d++){var v,g,y=u[d],b=y.vertexNormals,_=y.vertexColors;(v=new gr(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var x=0,w=b.length;x<w;x++)g=b[x].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(y.color),x=0,w=_.length;x<w;x++)v.vertexColors.push(_[x].clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(d=0,p=c.length;d<p;d++){var E=c[d],M=[];if(void 0!==E){for(x=0,w=E.length;x<w;x++)M.push(E[x].clone());l.push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){!1!==(e&&e.isMesh)?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),a.push(b),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];a.push(S(_[0]),S(_[1]),S(_[2]))}if(m&&a.push(M(d.normal)),v){var x=d.vertexNormals;a.push(M(x[0]),M(x[1]),M(x[2]))}if(g&&a.push(T(d.color)),y){var w=d.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/2,h.push(e.x,e.y),f[t])}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new kr).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++)f.push(h[o].clone());this.faceVertexUvs[t].push(f)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var p={};if(p.name=d[t].name,void 0!==d[t].vertices)for(p.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)p.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(p.normals=[],r=0,i=d[t].normals.length;r<i;r++)p.normals.push(d[t].normals[r].clone());this.morphTargets.push(p)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],r=0,i=m[t].vertexNormals.length;r<i;r++){var g=m[t].vertexNormals[r],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],r=0,i=m[t].faceNormals.length;r<i;r++)v.faceNormals.push(m[t].faceNormals[r].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(kr.prototype,r.prototype),Nr.prototype={constructor:Nr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(Lr(e)>65535?Sr:Mr)(e,1):e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new br(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new $n).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new Gt),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new Gt),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new Gt),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new pr),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Ar(3*t.vertices.length,3),r=new Ar(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Ar(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Rr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new br(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new br(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new br(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new br(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new br(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=new(Lr(e.indices)>65535?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new br(a,1).copyIndicesArray(e.indices))}for(var s in this.groups=e.groups,e.morphTargets){for(var u=[],l=e.morphTargets[s],c=0,h=l.length;c<h;c++){var f=l[c],d=new Ar(3*f.length,3);u.push(d.copyVector3sArray(f))}this.morphAttributes[s]=u}if(e.skinIndices.length>0){var p=new Ar(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new Ar(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Jn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Jn,t=new zt;return function(){null===this.boundingSphere&&(this.boundingSphere=new Kn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new br(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,u,l,c=t.normal.array,h=new zt,f=new zt,d=new zt,p=new zt,m=new zt;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var b=n[g],_=b.start;for(o=_,a=_+b.count;o<a;o+=3)u=3*v[o+1],l=3*v[o+2],h.fromArray(r,s=3*v[o+0]),f.fromArray(r,u),d.fromArray(r,l),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}}else for(o=0,a=r.length;o<a;o+=9)h.fromArray(r,o),f.fromArray(r,o+3),d.fromArray(r,o+6),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[o]=p.x,c[o+1]=p.y,c[o+2]=p.z,c[o+3]=p.x,c[o+4]=p.y,c[o+5]=p.z,c[o+6]=p.x,c[o+7]=p.y,c[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,u=o.itemSize*t;s<a.length;s++,u++)i[u]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Nr,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),u=0,l=0,c=0,h=t.length;c<h;c++){u=t[c]*a;for(var f=0;f<a;f++)s[l++]=o[u++]}e.addAttribute(r,new br(s,a))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new Nr).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o)this.addAttribute(t,o[t].clone());var a=e.morphAttributes;for(t in a){var s=[],u=a[t];for(n=0,r=u.length;n<r;n++)s.push(u[n].clone());this.morphAttributes[t]=s}var l=e.groups;for(n=0,r=l.length;n<r;n++){var c=l[n];this.addGroup(c.start,c.count,c.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Nr.MaxIndex=65535,Object.assign(Nr.prototype,r.prototype),Dr.prototype=Object.assign(Object.create(pr.prototype),{constructor:Dr,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return pr.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new Gt,t=new rr,n=new Kn,r=new zt,i=new zt,o=new zt,a=new zt,s=new zt,u=new zt,l=new Ct,c=new Ct,h=new Ct,f=new zt,d=new zt,p=new zt;function m(e,t,n,r,i,o,a){return vr.barycoordFromPoint(e,t,n,r,f),i.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),i.add(o).add(a),i.clone()}function v(e,t,n,r,i,o,a){var s=e.material;if(null===(s.side===w?n.intersectTriangle(o,i,r,!0,a):n.intersectTriangle(r,i,o,s.side!==E,a)))return null;p.copy(a),p.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(p);return u<t.near||u>t.far?null:{distance:u,point:p.clone(),object:e}}function g(e,t,n,a,s,u,f,p){r.fromBufferAttribute(a,u),i.fromBufferAttribute(a,f),o.fromBufferAttribute(a,p);var g=v(e,t,n,r,i,o,d);return g&&(s&&(l.fromBufferAttribute(s,u),c.fromBufferAttribute(s,f),h.fromBufferAttribute(s,p),g.uv=m(d,r,i,o,l,c,h)),g.face=new gr(u,f,p,vr.normal(r,i,o)),g.faceIndex=u),g}return function(f,p){var y,b=this.geometry,_=this.material,x=this.matrixWorld;if(void 0!==_&&(null===b.boundingSphere&&b.computeBoundingSphere(),n.copy(b.boundingSphere),n.applyMatrix4(x),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(f.ray).applyMatrix4(e),null===b.boundingBox||!1!==t.intersectsBox(b.boundingBox))))if(b.isBufferGeometry){var w,E,M,T,S,A=b.index,C=b.attributes.position,R=b.attributes.uv;if(null!==A)for(T=0,S=A.count;T<S;T+=3)w=A.getX(T),E=A.getX(T+1),M=A.getX(T+2),(y=g(this,f,t,C,R,w,E,M))&&(y.faceIndex=Math.floor(T/3),p.push(y));else for(T=0,S=C.count;T<S;T+=3)(y=g(this,f,t,C,R,w=T,E=T+1,M=T+2))&&(y.index=w,p.push(y))}else if(b.isGeometry){var L,P,O,I,k=_&&_.isMultiMaterial,N=!0===k?_.materials:null,D=b.vertices,F=b.faces,U=b.faceVertexUvs[0];U.length>0&&(I=U);for(var B=0,j=F.length;B<j;B++){var z=F[B],G=!0===k?N[z.materialIndex]:_;if(void 0!==G){if(L=D[z.a],P=D[z.b],O=D[z.c],!0===G.morphTargets){var V=b.morphTargets,H=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var W=0,q=V.length;W<q;W++){var X=H[W];if(0!==X){var Q=V[W].vertices;r.addScaledVector(a.subVectors(Q[z.a],L),X),i.addScaledVector(s.subVectors(Q[z.b],P),X),o.addScaledVector(u.subVectors(Q[z.c],O),X)}}r.add(L),i.add(P),o.add(O),L=r,P=i,O=o}if(y=v(this,f,t,L,P,O,d)){if(I){var Y=I[B];l.copy(Y[0]),c.copy(Y[1]),h.copy(Y[2]),y.uv=m(d,L,P,O,l,c,h)}y.face=z,y.faceIndex=B,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Fr.prototype=Object.create(kr.prototype)).constructor=Fr,(Ur.prototype=Object.create(Nr.prototype)).constructor=Ur,(Br.prototype=Object.create(kr.prototype)).constructor=Br,(jr.prototype=Object.create(Nr.prototype)).constructor=jr,(zr.prototype=Object.create(pr.prototype)).constructor=zr,zr.prototype.isCamera=!0,zr.prototype.getWorldDirection=function(){var e=new jt;return function(t){var n=t||new zt;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),zr.prototype.lookAt=function(){var e=new Gt;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),zr.prototype.clone=function(){return(new this.constructor).copy(this)},zr.prototype.copy=function(e){return pr.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Gr.prototype=Object.assign(Object.create(zr.prototype),{constructor:Gr,isPerspectiveCamera:!0,copy:function(e){return zr.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*At.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*At.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*At.RAD2DEG*Math.atan(Math.tan(.5*At.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*At.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Vr.prototype=Object.assign(Object.create(zr.prototype),{constructor:Vr,isOrthographicCamera:!0,copy:function(e){return zr.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Wr,qr,Xr=0;function Qr(e){switch(e){case gt:return["Linear","( value )"];case yt:return["sRGB","( value )"];case _t:return["RGBE","( value )"];case wt:return["RGBM","( value, 7.0 )"];case Et:return["RGBM","( value, 16.0 )"];case Mt:return["RGBD","( value, 256.0 )"];case bt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Yr(e,t){var n=Qr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Zr(e){return""!==e}function Jr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Kr(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var n=Rn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Kr(n)})}function $r(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function ei(e){console.log("THREE.WebGLRenderer",c);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=[],h=[],m=-1,g=[],y=-1,x=new Float32Array(8),T=[],A=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=le,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var C,de=this,Xe=null,ot=null,at=null,st=-1,ut="",lt=null,ct=new Ft,ht=null,ft=new Ft,dt=0,yt=new Ln(0),_t=0,xt=t.width,wt=t.height,Et=1,Mt=new Ft(0,0,xt,wt),Tt=!1,St=new Ft(0,0,xt,wt),Rt=new tr,Lt=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new er,a=new $n,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,r,i){var u=null!==t?t.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==u;++f,d+=4)o.copy(t[f]).applyMatrix4(h,a),o.normal.toArray(l,d),l[d+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=l(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,c,h,f){if(!r||null===e||0===e.length||i&&!a)i?l(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=l(e,c,p,f);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},Pt=!1,Ot=!1,It=new Kn,kt=new Gt,Nt=new zt,Ut=new Gt,Bt=new Gt,Vt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ht={calls:0,vertices:0,faces:0,points:0};this.info={render:Ht,memory:{geometries:0,textures:0},programs:null};try{var Wt={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u};if(null===(C=n||t.getContext("webgl",Wt)||t.getContext("experimental-webgl",Wt)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===C.getShaderPrecisionFormat&&(C.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",pn,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var qt=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(C);qt.get("WEBGL_depth_texture"),qt.get("OES_texture_float"),qt.get("OES_texture_float_linear"),qt.get("OES_texture_half_float"),qt.get("OES_texture_half_float_linear"),qt.get("OES_standard_derivatives"),qt.get("ANGLE_instanced_arrays"),qt.get("OES_element_index_uint")&&(Nr.MaxIndex=4294967296);var Xt=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=l>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:u,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(C,qt,e),Qt=new function(e,t,n){var r=new function(){var t=!1,n=new Ft,r=null,i=new Ft;return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(0,0,0,1)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):W(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case J:e.depthFunc(e.NEVER);break;case K:e.depthFunc(e.ALWAYS);break;case $:e.depthFunc(e.LESS);break;case ee:e.depthFunc(e.LEQUAL);break;case te:e.depthFunc(e.EQUAL);break;case ne:e.depthFunc(e.GEQUAL);break;case re:e.depthFunc(e.GREATER);break;case ie:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?H(e.STENCIL_TEST):W(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},a=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),u=new Uint8Array(a),l=new Uint8Array(a),c={},h=null,m=null,v=null,g=null,y=null,b=null,_=null,x=null,w=!1,E=null,M=null,T=null,S=null,A=null,C=null,N=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),D=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),F=parseFloat(D)>=1,U=null,B={},j=new Ft,z=new Ft;function G(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var V={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function W(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function q(t,r,i,o,a,s,u,l){t!==R?H(e.BLEND):W(e.BLEND),t===m&&l===w||(t===P?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===O?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===I?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),m=t,w=l),t===k?(a=a||r,s=s||i,u=u||o,r===v&&a===b||(e.blendEquationSeparate(n(r),n(a)),v=r,b=a),i===g&&o===y&&s===_&&u===x||(e.blendFuncSeparate(n(i),n(o),n(s),n(u)),g=i,y=o,_=s,x=u)):(v=null,g=null,y=null,b=null,_=null,x=null)}function X(e){i.setFunc(e)}function Q(t){E!==t&&(e.frontFace(t?e.CW:e.CCW),E=t)}function Y(t){t!==f?(H(e.CULL_FACE),t!==M&&e.cullFace(t===d?e.BACK:t===p?e.FRONT:e.FRONT_AND_BACK)):W(e.CULL_FACE),M=t}function Z(t){void 0===t&&(t=e.TEXTURE0+N-1),U!==t&&(e.activeTexture(t),U=t)}return V[e.TEXTURE_2D]=G(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=G(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:r,depth:i,stencil:o},init:function(){r.setClear(0,0,0,1),i.setClear(1),o.setClear(0),H(e.DEPTH_TEST),X(ee),Q(!1),Y(d),H(e.CULL_FACE),H(e.BLEND),q(L)},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(n){s[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),0!==l[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),l[n]=0)},enableAttributeAndDivisor:function(t,n,r){s[t]=1,0===u[t]&&(e.enableVertexAttribArray(t),u[t]=1),l[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),l[t]=n)},disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==s[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:H,disable:W,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},setBlending:q,setColorWrite:function(e){r.setMask(e)},setDepthTest:function(e){i.setTest(e)},setDepthWrite:function(e){i.setMask(e)},setDepthFunc:X,setStencilTest:function(e){o.setTest(e)},setStencilWrite:function(e){o.setMask(e)},setStencilFunc:function(e,t,n){o.setFunc(e,t,n)},setStencilOp:function(e,t,n){o.setOp(e,t,n)},setFlipSided:Q,setCullFace:Y,setLineWidth:function(t){t!==T&&(F&&e.lineWidth(t),T=t)},setPolygonOffset:function(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),S===n&&A===r||(e.polygonOffset(n,r),S=n,A=r)):W(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return C},setScissorTest:function(t){C=t,t?H(e.SCISSOR_TEST):W(e.SCISSOR_TEST)},activeTexture:Z,bindTexture:function(t,n){null===U&&Z();var r=B[U];void 0===r&&(B[U]=r={type:void 0,texture:void 0}),r.type===t&&r.texture===n||(e.bindTexture(t,n||V[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},scissor:function(t){!1===j.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),j.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);c={},h=null,U=null,B={},m=null,E=null,M=null,r.reset(),i.reset(),o.reset()}}}(C,qt,On),Yt=new function(){var e={};return{get:function(t){var n=t.uuid,r=e[n];return void 0===r&&(e[n]=r={}),r},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}},Zt=new function(e,t,n,r,i,o,a){var s=a.memory,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;function l(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function c(e){return At.isPowerOfTwo(e.width)&&At.isPowerOfTwo(e.height)}function h(t){return t===Me||t===Te||t===Se?e.NEAREST:e.LINEAR}function f(t){var n=t.target;n.removeEventListener("dispose",f),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.delete(t)}(n),s.textures--}function d(t){var n=t.target;n.removeEventListener("dispose",d),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(t.texture),r.delete(t)}}(n),s.textures--}function p(t,a){var h=r.get(t);if(t.version>0&&h.__version!==t.version){var d=t.image;if(void 0===d)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==d.complete)return void function(t,r,a){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",f),t.__webglTexture=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var h=l(r.image,i.maxTextureSize);(function(e){return e.wrapS!==we||e.wrapT!==we||e.minFilter!==Me&&e.minFilter!==Ae})(r)&&!1===c(h)&&(h=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=At.nearestPowerOfTwo(e.width),t.height=At.nearestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(h));var d=c(h),p=o(r.format),v=o(r.type);m(e.TEXTURE_2D,r,d);var g,y=r.mipmaps;if(r.isDepthTexture){var b=e.DEPTH_COMPONENT;if(r.type===De){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");b=e.DEPTH_COMPONENT32F}else u&&(b=e.DEPTH_COMPONENT16);r.format===Qe&&b===e.DEPTH_COMPONENT&&r.type!==Ie&&r.type!==Ne&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ie,v=o(r.type)),r.format===Ye&&(b=e.DEPTH_STENCIL,r.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ze,v=o(r.type))),n.texImage2D(e.TEXTURE_2D,0,b,h.width,h.height,0,p,v,null)}else if(r.isDataTexture)if(y.length>0&&d){for(var _=0,x=y.length;_<x;_++)n.texImage2D(e.TEXTURE_2D,_,p,(g=y[_]).width,g.height,0,p,v,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,h.width,h.height,0,p,v,h.data);else if(r.isCompressedTexture)for(_=0,x=y.length;_<x;_++)g=y[_],r.format!==He&&r.format!==Ve?n.getCompressedTextureFormats().indexOf(p)>-1?n.compressedTexImage2D(e.TEXTURE_2D,_,p,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,_,p,g.width,g.height,0,p,v,g.data);else if(y.length>0&&d){for(_=0,x=y.length;_<x;_++)n.texImage2D(e.TEXTURE_2D,_,p,p,v,g=y[_]);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,p,v,h);r.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(h,t,a);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,h.__webglTexture)}function m(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===we&&a.wrapT===we||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,h(a.minFilter)),a.minFilter!==Me&&a.minFilter!==Ae&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===De&&null===t.get("OES_texture_float_linear"))return;if(a.type===Fe&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function v(t,i,a,s){var u=o(i.texture.format),l=o(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function g(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=p,this.setTextureCube=function(t,a){var u=r.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",f),u.__image__webglTextureCube=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,d=t.image[0]&&t.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=h||d?d?t.image[v].image:t.image[v]:l(t.image[v],i.maxCubemapSize);var g=c(p[0]),y=o(t.format),b=o(t.type);for(m(e.TEXTURE_CUBE_MAP,t,g),v=0;v<6;v++)if(h)for(var _,x=p[v].mipmaps,w=0,E=x.length;w<E;w++)_=x[w],t.format!==He&&t.format!==Ve?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,y,_.width,_.height,0,y,b,_.data);else d?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,y,p[v].width,p[v].height,0,y,b,p[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,y,y,b,p[v]);t.generateMipmaps&&g&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),s.textures++;var a=!0===t.isWebGLRenderTargetCube,u=c(t);if(a){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),m(e.TEXTURE_CUBE_MAP,t.texture,u),l=0;l<6;l++)v(i.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),m(e.TEXTURE_2D,t.texture,u),v(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),p(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Qe)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),g(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),g(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(i.generateMipmaps&&c(t)&&i.minFilter!==Me&&i.minFilter!==Ae){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),e.generateMipmap(o),n.bindTexture(o,null)}}}(C,qt,Qt,Yt,Xt,On,this.info),Jt=new function(e,t,n){var r=new function(e,t,n){var r={};function i(e){var a=e.target,s=r[a.id];null!==s.index&&o(s.index),function(e){for(var t in e)o(e[t])}(s.attributes),a.removeEventListener("dispose",i),delete r[a.id];var u=t.get(a);u.wireframe&&o(u.wireframe),t.delete(a);var l=t.get(s);l.wireframe&&o(l.wireframe),t.delete(s),n.memory.geometries--}function o(n){var r=function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}(n);void 0!==r&&(e.deleteBuffer(r),function(e){t.delete(e.isInterleavedBufferAttribute?e.data:e)}(n))}return{get:function(e){var t,o=e.geometry;return void 0!==r[o.id]?r[o.id]:(o.addEventListener("dispose",i),o.isBufferGeometry?t=o:o.isGeometry&&(void 0===o._bufferGeometry&&(o._bufferGeometry=(new Nr).setFromObject(e)),t=o._bufferGeometry),r[o.id]=t,n.memory.geometries++,t)}}}(e,t,n);function i(n,r){var i=n.isInterleavedBufferAttribute?n.data:n,o=t.get(i);void 0===o.__webglBuffer?function(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer),e.bufferData(r,n.array,n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW);var i=e.FLOAT,o=n.array;o instanceof Float32Array?i=e.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?i=e.UNSIGNED_SHORT:o instanceof Int16Array?i=e.SHORT:o instanceof Uint32Array?i=e.UNSIGNED_INT:o instanceof Int32Array?i=e.INT:o instanceof Int8Array?i=e.BYTE:o instanceof Uint8Array&&(i=e.UNSIGNED_BYTE),t.bytesPerElement=o.BYTES_PER_ELEMENT,t.type=i,t.version=n.version,n.onUploadCallback()}(o,i,r):o.version!==i.version&&function(t,n,r){e.bindBuffer(r,t.__webglBuffer),!1===n.dynamic?e.bufferData(r,n.array,e.STATIC_DRAW):-1===n.updateRange.count?e.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}(o,i,r)}return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return t.get(e.isInterleavedBufferAttribute?e.data:e)},getWireframeAttribute:function(n){var r=t.get(n);if(void 0!==r.wireframe)return r.wireframe;var o,a=[],s=n.index,u=n.attributes;if(null!==s)for(var l=0,c=(o=s.array).length;l<c;l+=3)a.push(h=o[l+0],f=o[l+1],f,d=o[l+2],d,h);else for(l=0,c=(o=u.position.array).length/3-1;l<c;l+=3){var h,f,d;a.push(h=l+0,f=l+1,f,d=l+2,d,h)}var p=new(Lr(a)>65535?Sr:Mr)(a,1);return i(p,e.ELEMENT_ARRAY_BUFFER),r.wireframe=p,p},update:function(t){var n=r.get(t);t.geometry.isGeometry&&n.updateFromObject(t);var o=n.index,a=n.attributes;for(var s in null!==o&&i(o,e.ELEMENT_ARRAY_BUFFER),a)i(a[s],e.ARRAY_BUFFER);var u=n.morphAttributes;for(var s in u)for(var l=u[s],c=0,h=l.length;c<h;c++)i(l[c],e.ARRAY_BUFFER);return n}}}(C,Yt,this.info),Kt=new function(e,t){var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=gt,n===gt&&t&&(n=bt),n}this.getParameters=function(n,i,a,s,u,l){var c=r[n.type],h=function(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=Math.floor((t.maxVertexUniforms-20)/4);return void 0!==e&&e&&e.isSkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)"),n}(l),f=e.getPrecision();null!==n.precision&&(f=t.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",f,"instead.");var d=e.getCurrentRenderTarget();return{shaderID:c,precision:f,supportsVertexTextures:t.vertexTextures,outputEncoding:o(d?d.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:o(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:o(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===be||n.envMap.mapping===_e),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:o(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!a,useFog:n.fog,fogExp:a&&a.isFogExp2,flatShading:n.shading===M,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:h,useVertexTexture:t.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:s,numClipIntersection:u,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&i.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===E,flipSided:n.side===w,depthPacking:void 0!==n.depthPacking&&n.depthPacking}},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var o=0;o<i.length;o++)n.push(t[i[o]]);return n.join()},this.acquireProgram=function(t,r,i){for(var o,a=0,s=n.length;a<s;a++){var u=n[a];if(u.code===i){++(o=u).usedTimes;break}}return void 0===o&&(o=new function(e,t,n,r){var i=e.context,o=n.extensions,a=n.defines,s=n.__webglShader.vertexShader,u=n.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";r.shadowMapType===b?l="SHADOWMAP_TYPE_PCF":r.shadowMapType===_&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case pe:case me:c="ENVMAP_TYPE_CUBE";break;case be:case _e:c="ENVMAP_TYPE_CUBE_UV";break;case ve:case ge:c="ENVMAP_TYPE_EQUIREC";break;case ye:c="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case me:case ge:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case oe:f="ENVMAP_BLENDING_MULTIPLY";break;case ae:f="ENVMAP_BLENDING_MIX";break;case se:f="ENVMAP_BLENDING_ADD"}}var d,p,m,v,g,y=e.gammaFactor>0?e.gammaFactor:1,x=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Zr).join("\n")}(o,r,e.extensions),w=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),E=i.createProgram();n.isRawShaderMaterial?(d=[w,"\n"].filter(Zr).join("\n"),p=[x,w,"\n"].filter(Zr).join("\n")):(d=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,w,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Zr).join("\n"),p=[x,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,w,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+y,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==ue?"#define TONE_MAPPING":"",r.toneMapping!==ue?Rn.tonemapping_pars_fragment:"",r.toneMapping!==ue?function(e,t){var n;switch(t){case le:n="Linear";break;case ce:n="Reinhard";break;case he:n="Uncharted2";break;case fe:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Rn.encodings_pars_fragment:"",r.mapEncoding?Yr("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Yr("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Yr("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(m="linearToOutputTexel",v=r.outputEncoding,g=Qr(v),"vec4 "+m+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Zr).join("\n")),s=Jr(s=Kr(s),r),u=Jr(u=Kr(u),r),n.isShaderMaterial||(s=$r(s),u=$r(u));var M=p+u,T=Hr(i,i.VERTEX_SHADER,d+s),S=Hr(i,i.FRAGMENT_SHADER,M);i.attachShader(E,T),i.attachShader(E,S),void 0!==n.index0AttributeName?i.bindAttribLocation(E,0,n.index0AttributeName):!0===r.morphTargets&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);var A,C,R=i.getProgramInfoLog(E),L=i.getShaderInfoLog(T),P=i.getShaderInfoLog(S),O=!0,I=!0;return!1===i.getProgramParameter(E,i.LINK_STATUS)?(O=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(E,i.VALIDATE_STATUS),"gl.getProgramInfoLog",R,L,P)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==L&&""!==P||(I=!1),I&&(this.diagnostics={runnable:O,material:n,programLog:R,vertexShader:{log:L,prefix:d},fragmentShader:{log:P,prefix:p}}),i.deleteShader(T),i.deleteShader(S),this.getUniforms=function(){return void 0===A&&(A=new An(i,E,e)),A},this.getAttributes=function(){return void 0===C&&(C=function(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o).name;r[a]=e.getAttribLocation(t,a)}return r}(i,E)),C},this.destroy=function(){i.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Xr++,this.code=t,this.usedTimes=1,this.program=E,this.vertexShader=T,this.fragmentShader=S,this}(e,i,t,r),n.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}(this,Xt),$t=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new zt,color:new Ln,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"SpotLight":n={position:new zt,direction:new zt,color:new Ln,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"PointLight":n={position:new zt,color:new Ln,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"HemisphereLight":n={direction:new zt,skyColor:new Ln,groundColor:new Ln};break;case"RectAreaLight":n={color:new Ln,position:new zt,halfWidth:new zt,halfHeight:new zt}}return e[t.id]=n,n}}};this.info.programs=Kt.programs;var en,tn,nn,rn,on=new function(e,t,n){var r;return{setMode:function(e){r=e},render:function(t,i){e.drawArrays(r,t,i),n.calls++,n.vertices+=i,r===e.TRIANGLES&&(n.faces+=i/3)},renderInstances:function(i){var o=t.get("ANGLE_instanced_arrays");if(null!==o){var a,s=i.attributes.position;o.drawArraysInstancedANGLE(r,0,a=s.isInterleavedBufferAttribute?s.data.count:s.count,i.maxInstancedCount),n.calls++,n.vertices+=a*i.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=i.maxInstancedCount*a/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(C,qt,Ht),an=new function(e,t,n){var r,i,o;return{setMode:function(e){r=e},setIndex:function(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(i=e.UNSIGNED_INT,o=4):n.array instanceof Uint16Array?(i=e.UNSIGNED_SHORT,o=2):(i=e.UNSIGNED_BYTE,o=1)},render:function(t,a){e.drawElements(r,a,i,t*o),n.calls++,n.vertices+=a,r===e.TRIANGLES&&(n.faces+=a/3)},renderInstances:function(a,s,u){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(r,u,i,s*o,a.maxInstancedCount),n.calls++,n.vertices+=u*a.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=a.maxInstancedCount*u/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(C,qt,Ht);function sn(){return null===ot?Et:1}function un(){Qt.init(),Qt.scissor(ct.copy(Mt).multiplyScalar(Et)),Qt.viewport(ft.copy(St).multiplyScalar(Et)),Qt.buffers.color.setClear(yt.r,yt.g,yt.b,_t,s)}function ln(){Xe=null,lt=null,ut="",st=-1,Qt.reset()}un(),this.context=C,this.capabilities=Xt,this.extensions=qt,this.properties=Yt,this.state=Qt;var cn=new nr(this,Vt,Jt,Xt);this.shadowMap=cn;var hn,fn=new function(e,t){var n,r,i,o,a,s,u=e.context,l=e.state,c=new zt,h=new jt,f=new zt;function d(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(p,m){if(0!==t.length){void 0===i&&function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),l=new Uint16Array([0,1,2,0,2,3]);n=u.createBuffer(),r=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,n),u.bufferData(u.ARRAY_BUFFER,t,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),u.bufferData(u.ELEMENT_ARRAY_BUFFER,l,u.STATIC_DRAW),i=function(){var t=u.createProgram(),n=u.createShader(u.VERTEX_SHADER),r=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),u.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),u.compileShader(n),u.compileShader(r),u.attachShader(t,n),u.attachShader(t,r),u.linkProgram(t),t}(),o={position:u.getAttribLocation(i,"position"),uv:u.getAttribLocation(i,"uv")},a={uvOffset:u.getUniformLocation(i,"uvOffset"),uvScale:u.getUniformLocation(i,"uvScale"),rotation:u.getUniformLocation(i,"rotation"),scale:u.getUniformLocation(i,"scale"),color:u.getUniformLocation(i,"color"),map:u.getUniformLocation(i,"map"),opacity:u.getUniformLocation(i,"opacity"),modelViewMatrix:u.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:u.getUniformLocation(i,"projectionMatrix"),fogType:u.getUniformLocation(i,"fogType"),fogDensity:u.getUniformLocation(i,"fogDensity"),fogNear:u.getUniformLocation(i,"fogNear"),fogFar:u.getUniformLocation(i,"fogFar"),fogColor:u.getUniformLocation(i,"fogColor"),alphaTest:u.getUniformLocation(i,"alphaTest")};var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=8,c.height=8;var h=c.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),(s=new Dt(c)).needsUpdate=!0}(),u.useProgram(i),l.initAttributes(),l.enableAttribute(o.position),l.enableAttribute(o.uv),l.disableUnusedAttributes(),l.disable(u.CULL_FACE),l.enable(u.BLEND),u.bindBuffer(u.ARRAY_BUFFER,n),u.vertexAttribPointer(o.position,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(o.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),u.uniformMatrix4fv(a.projectionMatrix,!1,m.projectionMatrix.elements),l.activeTexture(u.TEXTURE0),u.uniform1i(a.map,0);var v=0,g=0,y=p.fog;y?(u.uniform3f(a.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(u.uniform1f(a.fogNear,y.near),u.uniform1f(a.fogFar,y.far),u.uniform1i(a.fogType,1),v=1,g=1):y.isFogExp2&&(u.uniform1f(a.fogDensity,y.density),u.uniform1i(a.fogType,2),v=2,g=2)):(u.uniform1i(a.fogType,0),v=0,g=0);for(var b=0,_=t.length;b<_;b++)(w=t[b]).modelViewMatrix.multiplyMatrices(m.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];t.sort(d);var x=[];for(b=0,_=t.length;b<_;b++){var w,E=(w=t[b]).material;if(!1!==E.visible){u.uniform1f(a.alphaTest,E.alphaTest),u.uniformMatrix4fv(a.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(c,h,f),x[0]=f.x,x[1]=f.y;var M=0;p.fog&&E.fog&&(M=g),v!==M&&(u.uniform1i(a.fogType,M),v=M),null!==E.map?(u.uniform2f(a.uvOffset,E.map.offset.x,E.map.offset.y),u.uniform2f(a.uvScale,E.map.repeat.x,E.map.repeat.y)):(u.uniform2f(a.uvOffset,0,0),u.uniform2f(a.uvScale,1,1)),u.uniform1f(a.opacity,E.opacity),u.uniform3f(a.color,E.color.r,E.color.g,E.color.b),u.uniform1f(a.rotation,E.rotation),u.uniform2fv(a.scale,x),l.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst),l.setDepthTest(E.depthTest),l.setDepthWrite(E.depthWrite),e.setTexture2D(E.map?E.map:s,0),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0)}}l.enable(u.CULL_FACE),e.resetGLState()}}}(this,T),dn=new function(e,t){var n,r,i,o,a,s,u,l,c=e.context,h=e.state;this.render=function(f,d,p){if(0!==t.length){var m=new zt,v=p.w/p.z,g=.5*p.z,y=.5*p.w,b=16/p.w,_=new Ct(b*v,b),x=new zt(1,1,0),w=new Ct(1,1),E=new Nn;E.min.set(p.x,p.y),E.max.set(p.x+(p.z-16),p.y+(p.w-16)),void 0===o&&(L=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),P=new Uint16Array([0,1,2,0,2,3]),n=c.createBuffer(),r=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,L,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.bufferData(c.ELEMENT_ARRAY_BUFFER,P,c.STATIC_DRAW),u=c.createTexture(),l=c.createTexture(),h.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),h.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),i={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=function(t){var n=c.createProgram(),r=c.createShader(c.FRAGMENT_SHADER),i=c.createShader(c.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return c.shaderSource(r,o+t.fragmentShader),c.shaderSource(i,o+t.vertexShader),c.compileShader(r),c.compileShader(i),c.attachShader(n,r),c.attachShader(n,i),c.linkProgram(n),n}(i),a={vertex:c.getAttribLocation(o,"position"),uv:c.getAttribLocation(o,"uv")},s={renderType:c.getUniformLocation(o,"renderType"),map:c.getUniformLocation(o,"map"),occlusionMap:c.getUniformLocation(o,"occlusionMap"),opacity:c.getUniformLocation(o,"opacity"),color:c.getUniformLocation(o,"color"),scale:c.getUniformLocation(o,"scale"),rotation:c.getUniformLocation(o,"rotation"),screenPosition:c.getUniformLocation(o,"screenPosition")}),c.useProgram(o),h.initAttributes(),h.enableAttribute(a.vertex),h.enableAttribute(a.uv),h.disableUnusedAttributes(),c.uniform1i(s.occlusionMap,0),c.uniform1i(s.map,1),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(a.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(a.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),h.disable(c.CULL_FACE),h.setDepthWrite(!1);for(var M=0,T=t.length;M<T;M++){_.set((b=16/p.w)*v,b);var S=t[M];if(m.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),m.applyMatrix4(d.matrixWorldInverse),m.applyMatrix4(d.projectionMatrix),x.copy(m),w.x=p.x+x.x*g+g-8,w.y=p.y+x.y*y+y-8,!0===E.containsPoint(w)){h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,null),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,w.x,w.y,16,16,0),c.uniform1i(s.renderType,0),c.uniform2f(s.scale,_.x,_.y),c.uniform3f(s.screenPosition,x.x,x.y,x.z),h.disable(c.BLEND),h.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,l),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,w.x,w.y,16,16,0),c.uniform1i(s.renderType,1),h.disable(c.DEPTH_TEST),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,u),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),S.positionScreen.copy(x),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),c.uniform1i(s.renderType,2),h.enable(c.BLEND);for(var A=0,C=S.lensFlares.length;A<C;A++){var R=S.lensFlares[A];R.opacity>.001&&R.scale>.001&&(x.x=R.x,x.y=R.y,x.z=R.z,_.x=(b=R.size*R.scale/p.w)*v,_.y=b,c.uniform3f(s.screenPosition,x.x,x.y,x.z),c.uniform2f(s.scale,_.x,_.y),c.uniform1f(s.rotation,R.rotation),c.uniform1f(s.opacity,R.opacity),c.uniform3f(s.color,R.color.r,R.color.g,R.color.b),h.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),e.setTexture2D(R.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}h.enable(c.CULL_FACE),h.enable(c.DEPTH_TEST),h.setDepthWrite(!0),e.resetGLState()}var L,P}}(this,A);function pn(e){e.preventDefault(),ln(),un(),Yt.clear()}function mn(e){var t=e.target;t.removeEventListener("dispose",mn),function(e){vn(e),Yt.delete(e)}(t)}function vn(e){var t=Yt.get(e).program;e.program=void 0,void 0!==t&&Kt.releaseProgram(t)}function gn(e,t){return Math.abs(t[0])-Math.abs(e[0])}function yn(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function bn(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function _n(e,t,n,r,i){var o,a;n.transparent?(o=g,a=++y):(o=h,a=++m);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=Nt.z,s.group=i):o.push(s={id:e.id,object:e,geometry:t,material:n,z:Nt.z,group:i})}function xn(e){if(!Rt.intersectsSphere(e))return!1;var t=Lt.numPlanes;if(0===t)return!0;var n=de.clippingPlanes,r=e.center,i=-e.radius,o=0;do{if(n[o].distanceToPoint(r)<i)return!1}while(++o!==t);return!0}function wn(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(de,t,n,u,l,c),s.isImmediateRenderObject){En(l);var h=Mn(n,t.fog,l,s);ut="",s.render(function(e){de.renderBufferImmediate(e,h,l)})}else de.renderBufferDirect(n,t.fog,u,l,s,c);s.onAfterRender(de,t,n,u,l,c)}}function En(e){e.side===E?Qt.disable(C.CULL_FACE):Qt.enable(C.CULL_FACE),Qt.setFlipSided(e.side===w),!0===e.transparent?Qt.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Qt.setBlending(R),Qt.setDepthFunc(e.depthFunc),Qt.setDepthTest(e.depthTest),Qt.setDepthWrite(e.depthWrite),Qt.setColorWrite(e.colorWrite),Qt.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function Mn(e,t,n,r){dt=0;var i=Yt.get(n);Pt&&(Ot||e!==lt)&&Lt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,e===lt&&n.id===st),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==Vt.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Lt.numPlanes&&i.numIntersection===Lt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(function(e,t,n){var r=Yt.get(e),i=Kt.getParameters(e,Vt,t,Lt.numPlanes,Lt.numIntersection,n),o=Kt.getProgramCode(e,i),a=r.program,s=!0;if(void 0===a)e.addEventListener("dispose",mn);else if(a.code!==o)vn(e);else{if(void 0!==i.shaderID)return;s=!1}if(s){if(i.shaderID){var u=kn[i.shaderID];r.__webglShader={name:e.type,uniforms:Cn.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,a=Kt.acquireProgram(e,i,o),r.program=a,e.program=a}var l=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<de.maxMorphTargets;c++)l["morphTarget"+c]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,c=0;c<de.maxMorphNormals;c++)l["morphNormal"+c]>=0&&e.numSupportedMorphNormals++;var h=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Lt.numPlanes,r.numIntersection=Lt.numIntersection,h.clippingPlanes=Lt.uniform),r.fog=t,r.lightsHash=Vt.hash,e.lights&&(h.ambientLightColor.value=Vt.ambient,h.directionalLights.value=Vt.directional,h.spotLights.value=Vt.spot,h.rectAreaLights.value=Vt.rectArea,h.pointLights.value=Vt.point,h.hemisphereLights.value=Vt.hemi,h.directionalShadowMap.value=Vt.directionalShadowMap,h.directionalShadowMatrix.value=Vt.directionalShadowMatrix,h.spotShadowMap.value=Vt.spotShadowMap,h.spotShadowMatrix.value=Vt.spotShadowMatrix,h.pointShadowMap.value=Vt.pointShadowMap,h.pointShadowMatrix.value=Vt.pointShadowMatrix);var f=r.program.getUniforms(),d=An.seqWithValue(f.seq,h);r.uniformsList=d}(n,t,r),n.needsUpdate=!1);var o,a,s=!1,u=!1,l=!1,c=i.program,h=c.getUniforms(),f=i.__webglShader.uniforms;if(c.id!==Xe&&(C.useProgram(c.program),Xe=c.id,s=!0,u=!0,l=!0),n.id!==st&&(st=n.id,u=!0),s||e!==lt){if(h.set(C,e,"projectionMatrix"),Xt.logarithmicDepthBuffer&&h.setValue(C,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==lt&&(lt=e,u=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var d=h.map.cameraPosition;void 0!==d&&d.setValue(C,Nt.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(C,"viewMatrix",e.matrixWorldInverse),h.set(C,de,"toneMappingExposure"),h.set(C,de,"toneMappingWhitePoint")}if(n.skinning){h.setOptional(C,r,"bindMatrix"),h.setOptional(C,r,"bindMatrixInverse");var p=r.skeleton;p&&(Xt.floatVertexTextures&&p.useVertexTexture?(h.set(C,p,"boneTexture"),h.set(C,p,"boneTextureWidth"),h.set(C,p,"boneTextureHeight")):h.setOptional(C,p,"boneMatrices"))}return u&&(n.lights&&((o=f).ambientLightColor.needsUpdate=a=l,o.directionalLights.needsUpdate=a,o.pointLights.needsUpdate=a,o.spotLights.needsUpdate=a,o.rectAreaLights.needsUpdate=a,o.hemisphereLights.needsUpdate=a),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(f,t),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&function(e,t){var n;if(e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(f,n),n.isLineBasicMaterial?Tn(f,n):n.isLineDashedMaterial?(Tn(f,n),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(f,n)):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Et,e.scale.value=.5*wt,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}(f,n):n.isMeshLambertMaterial?function(e,t){t.emissiveMap&&(f.emissiveMap.value=t.emissiveMap)}(0,n):n.isMeshToonMaterial?function(e,t){Sn(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(f,n):n.isMeshPhongMaterial?Sn(f,n):n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Pn(e,t)}(f,n):n.isMeshStandardMaterial?Pn(f,n):n.isMeshDepthMaterial?n.displacementMap&&(f.displacementMap.value=n.displacementMap,f.displacementScale.value=n.displacementScale,f.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(f,n),void 0!==f.ltcMat&&(f.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==f.ltcMag&&(f.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),An.upload(C,i.uniformsList,f,de)),h.set(C,r,"modelViewMatrix"),h.set(C,r,"normalMatrix"),h.setValue(C,"modelMatrix",r.matrixWorld),c}function Tn(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Sn(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Pn(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function On(e){var t;if(e===xe)return C.REPEAT;if(e===we)return C.CLAMP_TO_EDGE;if(e===Ee)return C.MIRRORED_REPEAT;if(e===Me)return C.NEAREST;if(e===Te)return C.NEAREST_MIPMAP_NEAREST;if(e===Se)return C.NEAREST_MIPMAP_LINEAR;if(e===Ae)return C.LINEAR;if(e===Ce)return C.LINEAR_MIPMAP_NEAREST;if(e===Re)return C.LINEAR_MIPMAP_LINEAR;if(e===Le)return C.UNSIGNED_BYTE;if(e===Ue)return C.UNSIGNED_SHORT_4_4_4_4;if(e===Be)return C.UNSIGNED_SHORT_5_5_5_1;if(e===je)return C.UNSIGNED_SHORT_5_6_5;if(e===Pe)return C.BYTE;if(e===Oe)return C.SHORT;if(e===Ie)return C.UNSIGNED_SHORT;if(e===ke)return C.INT;if(e===Ne)return C.UNSIGNED_INT;if(e===De)return C.FLOAT;if(e===Fe&&null!==(t=qt.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===Ge)return C.ALPHA;if(e===Ve)return C.RGB;if(e===He)return C.RGBA;if(e===We)return C.LUMINANCE;if(e===qe)return C.LUMINANCE_ALPHA;if(e===Qe)return C.DEPTH_COMPONENT;if(e===Ye)return C.DEPTH_STENCIL;if(e===N)return C.FUNC_ADD;if(e===D)return C.FUNC_SUBTRACT;if(e===F)return C.FUNC_REVERSE_SUBTRACT;if(e===j)return C.ZERO;if(e===z)return C.ONE;if(e===G)return C.SRC_COLOR;if(e===V)return C.ONE_MINUS_SRC_COLOR;if(e===H)return C.SRC_ALPHA;if(e===W)return C.ONE_MINUS_SRC_ALPHA;if(e===q)return C.DST_ALPHA;if(e===X)return C.ONE_MINUS_DST_ALPHA;if(e===Q)return C.DST_COLOR;if(e===Y)return C.ONE_MINUS_DST_COLOR;if(e===Z)return C.SRC_ALPHA_SATURATE;if((e===Ze||e===Je||e===Ke||e===$e)&&null!==(t=qt.get("WEBGL_compressed_texture_s3tc"))){if(e===Ze)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ke)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===$e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===et||e===tt||e===nt||e===rt)&&null!==(t=qt.get("WEBGL_compressed_texture_pvrtc"))){if(e===et)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it&&null!==(t=qt.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===U||e===B)&&null!==(t=qt.get("EXT_blend_minmax"))){if(e===U)return t.MIN_EXT;if(e===B)return t.MAX_EXT}return e===ze&&null!==(t=qt.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return C},this.getContextAttributes=function(){return C.getContextAttributes()},this.forceContextLoss=function(){qt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Xt.getMaxAnisotropy()},this.getPrecision=function(){return Xt.precision},this.getPixelRatio=function(){return Et},this.setPixelRatio=function(e){void 0!==e&&(Et=e,this.setSize(St.z,St.w,!1))},this.getSize=function(){return{width:xt,height:wt}},this.setSize=function(e,n,r){xt=e,wt=n,t.width=e*Et,t.height=n*Et,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,r){Qt.viewport(St.set(e,t,n,r))},this.setScissor=function(e,t,n,r){Qt.scissor(Mt.set(e,t,n,r))},this.setScissorTest=function(e){Qt.setScissorTest(Tt=e)},this.getClearColor=function(){return yt},this.setClearColor=function(e,t){yt.set(e),Qt.buffers.color.setClear(yt.r,yt.g,yt.b,_t=void 0!==t?t:1,s)},this.getClearAlpha=function(){return _t},this.setClearAlpha=function(e){Qt.buffers.color.setClear(yt.r,yt.g,yt.b,_t=e,s)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=C.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=C.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=C.STENCIL_BUFFER_BIT),C.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=ln,this.dispose=function(){g=[],y=-1,h=[],m=-1,t.removeEventListener("webglcontextlost",pn,!1)},this.renderBufferImmediate=function(e,t,n){Qt.initAttributes();var r=Yt.get(e);e.hasPositions&&!r.position&&(r.position=C.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=C.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=C.createBuffer()),e.hasColors&&!r.color&&(r.color=C.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(C.bindBuffer(C.ARRAY_BUFFER,r.position),C.bufferData(C.ARRAY_BUFFER,e.positionArray,C.DYNAMIC_DRAW),Qt.enableAttribute(i.position),C.vertexAttribPointer(i.position,3,C.FLOAT,!1,0,0)),e.hasNormals){if(C.bindBuffer(C.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===M)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=l,s[o+2]=c,s[o+3]=u,s[o+4]=l,s[o+5]=c,s[o+6]=u,s[o+7]=l,s[o+8]=c}C.bufferData(C.ARRAY_BUFFER,e.normalArray,C.DYNAMIC_DRAW),Qt.enableAttribute(i.normal),C.vertexAttribPointer(i.normal,3,C.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(C.bindBuffer(C.ARRAY_BUFFER,r.uv),C.bufferData(C.ARRAY_BUFFER,e.uvArray,C.DYNAMIC_DRAW),Qt.enableAttribute(i.uv),C.vertexAttribPointer(i.uv,2,C.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==S&&(C.bindBuffer(C.ARRAY_BUFFER,r.color),C.bufferData(C.ARRAY_BUFFER,e.colorArray,C.DYNAMIC_DRAW),Qt.enableAttribute(i.color),C.vertexAttribPointer(i.color,3,C.FLOAT,!1,0,0)),Qt.disableUnusedAttributes(),C.drawArrays(C.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){En(r);var a=Mn(e,t,r,i),s=!1,u=n.id+"_"+a.id+"_"+r.wireframe;u!==ut&&(ut=u,s=!0);var l=i.morphTargetInfluences;if(void 0!==l){for(var c=[],h=0,f=l.length;h<f;h++)c.push([p=l[h],h]);c.sort(gn),c.length>8&&(c.length=8);var d=n.morphAttributes;for(h=0,f=c.length;h<f;h++){var p;if(x[h]=(p=c[h])[0],0!==p[0]){var m=p[1];!0===r.morphTargets&&d.position&&n.addAttribute("morphTarget"+h,d.position[m]),!0===r.morphNormals&&d.normal&&n.addAttribute("morphNormal"+h,d.normal[m])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+h),!0===r.morphNormals&&n.removeAttribute("morphNormal"+h)}h=c.length;for(var v=x.length;h<v;h++)x[h]=0;a.getUniforms().setValue(C,"morphTargetInfluences",x),s=!0}m=n.index;var g,y=n.attributes.position,b=1;!0===r.wireframe&&(m=Jt.getWireframeAttribute(n),b=2),null!==m?(g=an).setIndex(m):g=on,s&&(function(e,t,n,r){var i;if(n&&n.isInstancedBufferGeometry&&null===(i=qt.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===r&&(r=0),Qt.initAttributes();var o=n.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var u in a){var l=a[u];if(l>=0){var c=o[u];if(void 0!==c){var h=c.normalized,f=c.itemSize,d=Jt.getAttributeProperties(c),p=d.__webglBuffer,m=d.type,v=d.bytesPerElement;if(c.isInterleavedBufferAttribute){var g=c.data,y=g.stride,b=c.offset;g&&g.isInstancedInterleavedBuffer?(Qt.enableAttributeAndDivisor(l,g.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):Qt.enableAttribute(l),C.bindBuffer(C.ARRAY_BUFFER,p),C.vertexAttribPointer(l,f,m,h,y*v,(r*y+b)*v)}else c.isInstancedBufferAttribute?(Qt.enableAttributeAndDivisor(l,c.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):Qt.enableAttribute(l),C.bindBuffer(C.ARRAY_BUFFER,p),C.vertexAttribPointer(l,f,m,h,0,r*f*v)}else if(void 0!==s){var _=s[u];if(void 0!==_)switch(_.length){case 2:C.vertexAttrib2fv(l,_);break;case 3:C.vertexAttrib3fv(l,_);break;case 4:C.vertexAttrib4fv(l,_);break;default:C.vertexAttrib1fv(l,_)}}}}Qt.disableUnusedAttributes()}}(r,a,n),null!==m&&C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,Jt.getAttributeBuffer(m)));var _=0;null!==m?_=m.count:void 0!==y&&(_=y.count);var w=n.drawRange.start*b,E=n.drawRange.count*b,M=null!==o?o.start*b:0,T=null!==o?o.count*b:1/0,S=Math.max(w,M),A=Math.min(_,w+E,M+T)-1,R=Math.max(0,A-S+1);if(0!==R){if(i.isMesh)if(!0===r.wireframe)Qt.setLineWidth(r.wireframeLinewidth*sn()),g.setMode(C.LINES);else switch(i.drawMode){case pt:g.setMode(C.TRIANGLES);break;case mt:g.setMode(C.TRIANGLE_STRIP);break;case vt:g.setMode(C.TRIANGLE_FAN)}else if(i.isLine){var L=r.linewidth;void 0===L&&(L=1),Qt.setLineWidth(L*sn()),g.setMode(i.isLineSegments?C.LINES:C.LINE_STRIP)}else i.isPoints&&g.setMode(C.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,R):g.render(S,R)}},this.render=function(e,t,n,r){if(void 0===t||!0===t.isCamera){ut="",st=-1,lt=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),kt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Rt.setFromMatrix(kt),l.length=0,m=-1,y=-1,T.length=0,A.length=0,Pt=Lt.init(this.clippingPlanes,Ot=this.localClippingEnabled,t),function e(t,n){if(!1!==t.visible){var r;if(0!=(t.layers.mask&n.layers.mask))if(t.isLight)l.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==(r=t,It.center.set(0,0,0),It.radius=.7071067811865476,It.applyMatrix4(r.matrixWorld),xn(It))||T.push(t);else if(t.isLensFlare)A.push(t);else if(t.isImmediateRenderObject)!0===de.sortObjects&&(Nt.setFromMatrixPosition(t.matrixWorld),Nt.applyMatrix4(kt)),_n(t,null,t.material,0,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),It.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),xn(It)}(t))){var i=t.material;if(!0===i.visible){!0===de.sortObjects&&(Nt.setFromMatrixPosition(t.matrixWorld),Nt.applyMatrix4(kt));var o=Jt.update(t);if(i.isMultiMaterial)for(var a=o.groups,s=i.materials,u=0,c=a.length;u<c;u++){var h=a[u],f=s[h.materialIndex];!0===f.visible&&_n(t,o,f,0,h)}else _n(t,o,i,0,null)}}var d=t.children;for(u=0,c=d.length;u<c;u++)e(d[u],n)}}(e,t),h.length=m+1,g.length=y+1,!0===de.sortObjects&&(h.sort(yn),g.sort(bn)),Pt&&Lt.beginShadows(),function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(Vt.shadows[t++]=i)}Vt.shadows.length=t}(l),cn.render(e,t),function(e,t){var n,r,i,o,a,s,u,l=0,c=0,h=0,f=t.matrixWorldInverse,d=0,p=0,m=0,v=0,g=0;for(n=0,r=e.length;n<r;n++)if(o=(i=e[n]).color,a=i.intensity,s=i.distance,u=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)l+=o.r*a,c+=o.g*a,h+=o.b*a;else if(i.isDirectionalLight)(y=$t.get(i)).color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),Nt.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Nt),y.direction.transformDirection(f),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Vt.directionalShadowMap[d]=u,Vt.directionalShadowMatrix[d]=i.shadow.matrix,Vt.directional[d++]=y;else if(i.isSpotLight)(y=$t.get(i)).position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(f),y.color.copy(o).multiplyScalar(a),y.distance=s,y.direction.setFromMatrixPosition(i.matrixWorld),Nt.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Nt),y.direction.transformDirection(f),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Vt.spotShadowMap[m]=u,Vt.spotShadowMatrix[m]=i.shadow.matrix,Vt.spot[m++]=y;else if(i.isRectAreaLight)(y=$t.get(i)).color.copy(o).multiplyScalar(a/(i.width*i.height)),y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(f),Bt.identity(),Ut.copy(i.matrixWorld),Ut.premultiply(f),Bt.extractRotation(Ut),y.halfWidth.set(.5*i.width,0,0),y.halfHeight.set(0,.5*i.height,0),y.halfWidth.applyMatrix4(Bt),y.halfHeight.applyMatrix4(Bt),Vt.rectArea[v++]=y;else if(i.isPointLight)(y=$t.get(i)).position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(f),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Vt.pointShadowMap[p]=u,void 0===Vt.pointShadowMatrix[p]&&(Vt.pointShadowMatrix[p]=new Gt),Nt.setFromMatrixPosition(i.matrixWorld).negate(),Vt.pointShadowMatrix[p].identity().setPosition(Nt),Vt.point[p++]=y;else if(i.isHemisphereLight){var y;(y=$t.get(i)).direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(a),y.groundColor.copy(i.groundColor).multiplyScalar(a),Vt.hemi[g++]=y}Vt.ambient[0]=l,Vt.ambient[1]=c,Vt.ambient[2]=h,Vt.directional.length=d,Vt.spot.length=m,Vt.rectArea.length=v,Vt.point.length=p,Vt.hemi.length=g,Vt.hash=d+","+p+","+m+","+v+","+g+","+Vt.shadows.length}(l,t),Pt&&Lt.endShadows(),Ht.calls=0,Ht.vertices=0,Ht.faces=0,Ht.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var i=e.background;if(null===i?Qt.buffers.color.setClear(yt.r,yt.g,yt.b,_t,s):i&&i.isColor&&(Qt.buffers.color.setClear(i.r,i.g,i.b,1,s),r=!0),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i&&i.isCubeTexture?(void 0===nn&&(nn=new Gr,rn=new Dr(new Ur(5,5,5),new Yn({uniforms:kn.cube.uniforms,vertexShader:kn.cube.vertexShader,fragmentShader:kn.cube.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1}))),nn.projectionMatrix.copy(t.projectionMatrix),nn.matrixWorld.extractRotation(t.matrixWorld),nn.matrixWorldInverse.getInverse(nn.matrixWorld),rn.material.uniforms.tCube.value=i,rn.modelViewMatrix.multiplyMatrices(nn.matrixWorldInverse,rn.matrixWorld),Jt.update(rn),de.renderBufferDirect(nn,null,rn.geometry,rn.material,rn,null)):i&&i.isTexture&&(void 0===en&&(en=new Vr(-1,1,1,-1,0,1),tn=new Dr(new jr(2,2),new yr({depthTest:!1,depthWrite:!1,fog:!1}))),tn.material.map=i,Jt.update(tn),de.renderBufferDirect(en,null,tn.geometry,tn.material,tn,null)),e.overrideMaterial){var o=e.overrideMaterial;wn(h,e,t,o),wn(g,e,t,o)}else Qt.setBlending(R),wn(h,e,t),wn(g,e,t);fn.render(e,t),dn.render(e,t,ft),n&&Zt.updateRenderTargetMipmap(n),Qt.setDepthTest(!0),Qt.setDepthWrite(!0),Qt.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){Qt.setCullFace(e),Qt.setFlipSided(t===v)},this.allocTextureUnit=function(){var e=dt;return e>=Xt.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Xt.maxTextures),dt+=1,e},this.setTexture2D=(hn=!1,function(e,t){e&&e.isWebGLRenderTarget&&(hn||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),hn=!0),e=e.texture),Zt.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Zt.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Zt.setTextureCube(t,n):Zt.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return ot},this.setRenderTarget=function(e){ot=e,e&&void 0===Yt.get(e).__webglFramebuffer&&Zt.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var r=Yt.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,ct.copy(e.scissor),ht=e.scissorTest,ft.copy(e.viewport)}else t=null,ct.copy(Mt).multiplyScalar(Et),ht=Tt,ft.copy(St).multiplyScalar(Et);if(at!==t&&(C.bindFramebuffer(C.FRAMEBUFFER,t),at=t),Qt.scissor(ct),Qt.setScissorTest(ht),Qt.viewport(ft),n){var i=Yt.get(e.texture);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(!1!==(e&&e.isWebGLRenderTarget)){var a=Yt.get(e).__webglFramebuffer;if(a){var s=!1;a!==at&&(C.bindFramebuffer(C.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==He&&On(l)!==C.getParameter(C.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Le||On(c)===C.getParameter(C.IMPLEMENTATION_COLOR_READ_TYPE)||c===De&&(qt.get("OES_texture_float")||qt.get("WEBGL_color_buffer_float"))||c===Fe&&qt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");C.checkFramebufferStatus(C.FRAMEBUFFER)===C.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&C.readPixels(t,n,r,i,On(l),On(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&C.bindFramebuffer(C.FRAMEBUFFER,at)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function ti(e,t){this.name="",this.color=new Ln(e),this.density=void 0!==t?t:25e-5}function ni(e,t,n){this.name="",this.color=new Ln(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ri(){pr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ii(e,t,n,r,i){pr.call(this),this.lensFlares=[],this.positionScreen=new zt,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)}function oi(e){Qn.call(this),this.type="SpriteMaterial",this.color=new Ln(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ai(e){pr.call(this),this.type="Sprite",this.material=void 0!==e?e:new oi}function si(){pr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ui(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new Gt,this.bones=(e=e||[]).slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=At.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new On(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,He,De)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new Gt)}}function li(){pr.call(this),this.type="Bone"}function ci(e,t,n){Dr.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],i=new li,r.push(i),i.name=o.name,i.position.fromArray(o.pos),i.quaternion.fromArray(o.rotq),void 0!==o.scl&&i.scale.fromArray(o.scl);for(a=0,s=this.geometry.bones.length;a<s;++a)-1!==(o=this.geometry.bones[a]).parent&&null!==o.parent&&void 0!==r[o.parent]?r[o.parent].add(r[a]):this.add(r[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ui(r,void 0,n),this.matrixWorld)}function hi(e){Qn.call(this),this.type="LineBasicMaterial",this.color=new Ln(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function fi(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new di(e,t);pr.call(this),this.type="Line",this.geometry=void 0!==e?e:new Nr,this.material=void 0!==t?t:new hi({color:16777215*Math.random()})}function di(e,t){fi.call(this,e,t),this.type="LineSegments"}function pi(e){Qn.call(this),this.type="PointsMaterial",this.color=new Ln(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function mi(e,t){pr.call(this),this.type="Points",this.geometry=void 0!==e?e:new Nr,this.material=void 0!==t?t:new pi({color:16777215*Math.random()})}function vi(){pr.call(this),this.type="Group"}function gi(e,t,n,r,i,o,a,s,u){Dt.call(this,e,t,n,r,i,o,a,s,u),this.generateMipmaps=!1;var l=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}()}function yi(e,t,n,r,i,o,a,s,u,l,c,h){Dt.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function bi(e,t,n,r,i,o,a,s,u){Dt.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function _i(e,t,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:Qe)!==Qe&&l!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Qe&&(n=Ie),void 0===n&&l===Ye&&(n=ze),Dt.call(this,null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Me,this.minFilter=void 0!==s?s:Me,this.flipY=!1,this.generateMipmaps=!1}function xi(e){Nr.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,l=[],c=[0,0],h={},f=["a","b","c"];if(e&&e.isGeometry){var d=e.faces;for(t=0,r=d.length;t<r;t++){var p=d[t];for(n=0;n<3;n++)c[0]=p[f[n]],c[1]=p[f[(n+1)%3]],c.sort(_),void 0===h[s=c.toString()]&&(h[s]={index1:c[0],index2:c[1]})}for(s in h)l.push((u=e.vertices[(a=h[s]).index1]).x,u.y,u.z),l.push((u=e.vertices[a.index2]).x,u.y,u.z)}else if(e&&e.isBufferGeometry){var m,v,g,y,b;if(u=new zt,null!==e.index){for(m=e.attributes.position,v=e.index,0===(g=e.groups).length&&e.addGroup(0,v.count),i=0,o=g.length;i<o;++i)for(t=b=(y=g[i]).start,r=b+y.count;t<r;t+=3)for(n=0;n<3;n++)c[0]=v.getX(t+n),c[1]=v.getX(t+(n+1)%3),c.sort(_),void 0===h[s=c.toString()]&&(h[s]={index1:c[0],index2:c[1]});for(s in h)u.fromBufferAttribute(m,(a=h[s]).index1),l.push(u.x,u.y,u.z),u.fromBufferAttribute(m,a.index2),l.push(u.x,u.y,u.z)}else for(t=0,r=(m=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)u.fromBufferAttribute(m,3*t+n),l.push(u.x,u.y,u.z),u.fromBufferAttribute(m,3*t+(n+1)%3),l.push(u.x,u.y,u.z)}function _(e,t){return e-t}this.addAttribute("position",new Ar(l,3))}function wi(e,t,n){kr.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ei(e,t,n)),this.mergeVertices()}function Ei(e,t,n){Nr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=t+1;for(r=0;r<=n;r++){var l=r/n;for(i=0;i<=t;i++){var c=i/t,h=e(c,l);a.push(h.x,h.y,h.z),s.push(c,l)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var f=r*u+i+1,d=(r+1)*u+i+1,p=(r+1)*u+i;o.push(r*u+i,f,p),o.push(f,d,p)}this.setIndex(o),this.addAttribute("position",new Ar(a,3)),this.addAttribute("uv",new Ar(s,2)),this.computeVertexNormals()}function Mi(e,t,n,r){kr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ti(e,t,n,r)),this.mergeVertices()}function Ti(e,t,n,r){Nr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new zt,r=new zt,i=new zt,o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new zt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new zt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new zt,t=new zt,n=new zt,r=new zt,a=new Ct,s=new Ct,u=new Ct,h=0,f=0;h<i.length;h+=9,f+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=c(r);l(a,f+0,e,d),l(s,f+2,t,d),l(u,f+4,n,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Ar(i,3)),this.addAttribute("normal",new Ar(i.slice(),3)),this.addAttribute("uv",new Ar(o,2)),this.normalizeNormals()}function Si(e,t){kr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ai(e,t)),this.mergeVertices()}function Ai(e,t){Ti.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ci(e,t){kr.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ri(e,t)),this.mergeVertices()}function Ri(e,t){Ti.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Li(e,t){kr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Pi(e,t)),this.mergeVertices()}function Pi(e,t){var n=(1+Math.sqrt(5))/2;Ti.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Oi(e,t){kr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ii(e,t)),this.mergeVertices()}function Ii(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;Ti.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ki(e,t,n,r,i,o){kr.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Ni(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Ni(e,t,n,r,i){Nr.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8;var o=e.computeFrenetFrames(t,i=i||!1);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new zt,l=new zt,c=new Ct,h=[],f=[],d=[],p=[];function m(i){var a=e.getPointAt(i/t),c=o.normals[i],d=o.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);l.x=v*c.x+m*d.x,l.y=v*c.y+m*d.y,l.z=v*c.z+m*d.z,l.normalize(),f.push(l.x,l.y,l.z),u.x=a.x+n*l.x,u.y=a.y+n*l.y,u.z=a.z+n*l.z,h.push(u.x,u.y,u.z)}}!function(){for(a=0;a<t;a++)m(a);m(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,d.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*s+(a-1),n=(r+1)*s+a,i=(r+1)*(s-1)+a;p.push((r+1)*(s-1)+(a-1),e,i),p.push(e,n,i)}}()}(),this.setIndex(p),this.addAttribute("position",new Ar(h,3)),this.addAttribute("normal",new Ar(f,3)),this.addAttribute("uv",new Ar(d,2))}function Di(e,t,n,r,i,o,a){kr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Fi(e,t,n,r,i,o)),this.mergeVertices()}function Fi(e,t,n,r,i,o){Nr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||100,t=t||40,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],f=new zt,d=new zt,p=(new Ct,new zt),m=new zt,v=new zt,g=new zt,y=new zt;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(S(b,i,o,e,p),S(b+.01,i,o,e,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,x=-t*Math.cos(_),w=t*Math.sin(_);f.x=p.x+(x*y.x+w*v.x),f.y=p.y+(x*y.y+w*v.y),f.z=p.z+(x*y.z+w*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*s+(a-1),M=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push((r+1)*(s-1)+(a-1),E,T),u.push(E,M,T)}function S(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new Ar(l,3)),this.addAttribute("normal",new Ar(c,3)),this.addAttribute("uv",new Ar(h,2))}function Ui(e,t,n,r,i){kr.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Bi(e,t,n,r,i))}function Bi(e,t,n,r,i){Nr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new zt,f=new zt,d=new zt;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var p=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(p),f.y=(e+t*Math.cos(m))*Math.sin(p),f.z=t*Math.sin(m),u.push(f.x,f.y,f.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*(o-1)+a-1,g=(r+1)*(o-1)+a,y=(r+1)*o+a;s.push((r+1)*o+a-1,v,y),s.push(v,g,y)}this.setIndex(s),this.addAttribute("position",new Ar(u,3)),this.addAttribute("normal",new Ar(l,3)),this.addAttribute("uv",new Ar(c,2))}ti.prototype.isFogExp2=!0,ti.prototype.clone=function(){return new ti(this.color.getHex(),this.density)},ti.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ni.prototype.isFog=!0,ni.prototype.clone=function(){return new ni(this.color.getHex(),this.near,this.far)},ni.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(ri.prototype=Object.create(pr.prototype)).constructor=ri,ri.prototype.copy=function(e,t){return pr.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},ri.prototype.toJSON=function(e){var t=pr.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},ii.prototype=Object.assign(Object.create(pr.prototype),{constructor:ii,isLensFlare:!0,copy:function(e){pr.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new Ln(16777215)),void 0===r&&(r=L),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),(oi.prototype=Object.create(Qn.prototype)).constructor=oi,oi.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ai.prototype=Object.assign(Object.create(pr.prototype),{constructor:ai,isSprite:!0,raycast:(Wr=new zt,function(e,t){Wr.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(Wr);n>this.scale.x*this.scale.y/4||t.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}),clone:function(){return new this.constructor(this.material).copy(this)}}),si.prototype=Object.assign(Object.create(pr.prototype),{constructor:si,copy:function(e){pr.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new zt;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new zt,t=new zt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(ui.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Gt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(qr=new Gt,function(){for(var e=0,t=this.bones.length;e<t;e++)qr.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),qr.toArray(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),clone:function(){return new ui(this.bones,this.boneInverses,this.useVertexTexture)}}),li.prototype=Object.assign(Object.create(pr.prototype),{constructor:li,isBone:!0}),ci.prototype=Object.assign(Object.create(Dr.prototype),{constructor:ci,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e];(i=1/t.lengthManhattan())!=1/0?t.multiplyScalar(i):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Ft,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++){var i;n.x=r.getX(e),n.y=r.getY(e),n.z=r.getZ(e),n.w=r.getW(e),(i=1/n.lengthManhattan())!=1/0?n.multiplyScalar(i):n.set(1,0,0,0),r.setXYZW(e,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(e){Dr.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(hi.prototype=Object.create(Qn.prototype)).constructor=hi,hi.prototype.isLineBasicMaterial=!0,hi.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},fi.prototype=Object.assign(Object.create(pr.prototype),{constructor:fi,isLine:!0,raycast:function(){var e=new Gt,t=new rr,n=new Kn;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var l=new zt,c=new zt,h=new zt,f=new zt,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=d){var b=v[g+1];l.fromArray(m,3*v[g]),c.fromArray(m,3*b),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=d)l.fromArray(m,3*g),c.fromArray(m,3*g+3),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var _=s.vertices,x=_.length;for(g=0;g<x-1;g+=d){var w;t.distanceSqToSegment(_[g],_[g+1],f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),di.prototype=Object.assign(Object.create(fi.prototype),{constructor:di,isLineSegments:!0}),(pi.prototype=Object.create(Qn.prototype)).constructor=pi,pi.prototype.isPointsMaterial=!0,pi.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},mi.prototype=Object.assign(Object.create(pr.prototype),{constructor:mi,isPoints:!0,raycast:function(){var e=new Gt,t=new rr,n=new Kn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new zt;if(a.isBufferGeometry){var f=a.index,d=a.attributes.position.array;if(null!==f)for(var p=f.array,m=0,v=p.length;m<v;m++){var g=p[m];h.fromArray(d,3*g),_(h,g)}else{m=0;for(var y=d.length/3;m<y;m++)h.fromArray(d,3*m),_(h,m)}}else{var b=a.vertices;for(m=0,y=b.length;m<y;m++)_(b[m],m)}}function _(e,n){var a=t.distanceSqToPoint(e);if(a<c){var u=t.closestPointToPoint(e);u.applyMatrix4(s);var l=r.ray.origin.distanceTo(u);if(l<r.near||l>r.far)return;i.push({distance:l,distanceToRay:Math.sqrt(a),point:u.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vi.prototype=Object.assign(Object.create(pr.prototype),{constructor:vi}),(gi.prototype=Object.create(Dt.prototype)).constructor=gi,(yi.prototype=Object.create(Dt.prototype)).constructor=yi,yi.prototype.isCompressedTexture=!0,(bi.prototype=Object.create(Dt.prototype)).constructor=bi,(_i.prototype=Object.create(Dt.prototype)).constructor=_i,_i.prototype.isDepthTexture=!0,(xi.prototype=Object.create(Nr.prototype)).constructor=xi,(wi.prototype=Object.create(kr.prototype)).constructor=wi,(Ei.prototype=Object.create(Nr.prototype)).constructor=Ei,(Mi.prototype=Object.create(kr.prototype)).constructor=Mi,(Ti.prototype=Object.create(Nr.prototype)).constructor=Ti,(Si.prototype=Object.create(kr.prototype)).constructor=Si,(Ai.prototype=Object.create(Ti.prototype)).constructor=Ai,(Ci.prototype=Object.create(kr.prototype)).constructor=Ci,(Ri.prototype=Object.create(Ti.prototype)).constructor=Ri,(Li.prototype=Object.create(kr.prototype)).constructor=Li,(Pi.prototype=Object.create(Ti.prototype)).constructor=Pi,(Oi.prototype=Object.create(kr.prototype)).constructor=Oi,(Ii.prototype=Object.create(Ti.prototype)).constructor=Ii,(ki.prototype=Object.create(kr.prototype)).constructor=ki,(Ni.prototype=Object.create(Nr.prototype)).constructor=Ni,(Di.prototype=Object.create(kr.prototype)).constructor=Di,(Fi.prototype=Object.create(Nr.prototype)).constructor=Fi,(Ui.prototype=Object.create(kr.prototype)).constructor=Ui,(Bi.prototype=Object.create(Nr.prototype)).constructor=Bi;var ji={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,i,o){var a,s,u,l,c,h,f,d,p,m,v,g,y,b,_;if(((l=e[o[n]].x)-(s=e[o[t]].x))*((f=e[o[r]].y)-(u=e[o[t]].y))-((c=e[o[n]].y)-u)*((h=e[o[r]].x)-s)<=0)return!1;for(m=h-l,v=f-c,g=s-h,y=u-f,b=l-s,_=c-u,a=0;a<i;a++)if(p=e[o[a]].y,!((d=e[o[a]].x)===s&&p===u||d===l&&p===c||d===h&&p===f)&&m*(p-c)-v*(d-l)>=-Number.EPSILON&&g*(p-f)-y*(d-h)>=-Number.EPSILON&&b*(p-u)-_*(d-s)>=-Number.EPSILON)return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var i,o,a,s=[],u=[],l=[];if(ji.area(t)>0)for(o=0;o<r;o++)u[o]=o;else for(o=0;o<r;o++)u[o]=r-1-o;var c=r,h=2*c;for(o=c-1;c>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?l:s;if(c<=(i=o)&&(i=0),c<=(o=i+1)&&(o=0),c<=(a=o+1)&&(a=0),e(t,i,o,a,c,u)){var f,d;for(s.push([t[u[i]],t[u[o]],t[u[a]]]),l.push([u[i],u[o],u[a]]),f=o,d=o+1;d<c;f++,d++)u[f]=u[d];h=2*--c}}return n?l:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,u=i.x-n.x,l=i.y-n.y,c=e.x-n.x,h=e.y-n.y,f=s*u-a*l,d=s*c-a*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if((p=l*c-u*h)<0||p>f)return[]}else{if(d>0||d<f)return[];if((p=l*c-u*h)>0||p<f)return[]}if(0===p)return!o||0!==d&&d!==f?[e]:[];if(p===f)return!o||0!==d&&d!==f?[t]:[];if(0===d)return[n];if(d===f)return[i];var m=p/f;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==d||l*c!=u*h)return[];var v,g,y,b,_,x,w,E,M=0===a&&0===s,T=0===u&&0===l;return M&&T?e.x!==n.x||e.y!==n.y?[]:[e]:M?r(n,i,e)?[e]:[]:T?r(e,t,n)?[n]:[]:(0!==a?(e.x<t.x?(v=e,y=e.x,g=t,b=t.x):(v=t,y=t.x,g=e,b=e.x),n.x<i.x?(_=n,w=n.x,x=i,E=i.x):(_=i,w=i.x,x=n,E=n.x)):(e.y<t.y?(v=e,y=e.y,g=t,b=t.y):(v=t,y=t.y,g=e,b=e.y),n.y<i.y?(_=n,w=n.y,x=i,E=i.y):(_=i,w=i.y,x=n,E=n.y)),y<=w?b<w?[]:b===w?o?[]:[_]:b<=E?[_,g]:[_,x]:y>E?[]:y===E?o?[]:[v]:b<=E?[v,g]:[v,x])}function o(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-e.x,l=r.y-e.y,c=i*s-o*a,h=i*l-o*u;if(Math.abs(c)>Number.EPSILON){var f=u*s-l*a;return c>0?h>=0&&f>=0:h>=0||f>=0}return h>0}n(e),t.forEach(n);for(var a,s,u,l,c,h,f={},d=e.concat(),p=0,m=t.length;p<m;p++)Array.prototype.push.apply(d,t[p]);for(a=0,s=d.length;a<s;a++)void 0!==f[c=d[a].x+":"+d[a].y]&&console.warn("THREE.ShapeUtils: Duplicate point",c,a),f[c]=a;var v=function(e,t){var n,r=e.concat();function a(e,t){var i=r.length-1,a=e-1;a<0&&(a=i);var s=e+1;s>i&&(s=0);var u=o(r[e],r[a],r[s],n[t]);if(!u)return!1;var l=n.length-1,c=t-1;c<0&&(c=l);var h=t+1;return h>l&&(h=0),!!(u=o(n[t],n[c],n[h],r[e]))}function s(e,t){var n,o;for(n=0;n<r.length;n++)if(o=n+1,i(e,t,r[n],r[o%=r.length],!0).length>0)return!0;return!1}var u=[];function l(e,n){var r,o,a,s;for(r=0;r<u.length;r++)for(o=t[u[r]],a=0;a<o.length;a++)if(s=a+1,i(e,n,o[a],o[s%=o.length],!0).length>0)return!0;return!1}for(var c,h,f,d,p,m,v,g,y,b,_=[],x=0,w=t.length;x<w;x++)u.push(x);for(var E=0,M=2*u.length;u.length>0;){if(--M<0){console.log("Infinite Loop! Holes left:"+u.length+", Probably Hole outside Shape!");break}for(h=E;h<r.length;h++){for(f=r[h],c=-1,x=0;x<u.length;x++)if(void 0===_[m=f.x+":"+f.y+":"+(p=u[x])]){n=t[p];for(var T=0;T<n.length;T++)if(d=n[T],a(h,T)&&!s(f,d)&&!l(f,d)){c=T,u.splice(x,1),v=r.slice(0,h+1),g=r.slice(h),y=n.slice(c),b=n.slice(0,c+1),r=v.concat(y).concat(b).concat(g),E=h;break}if(c>=0)break;_[m]=!0}if(c>=0)break}}return r}(e,t),g=ji.triangulate(v,!1);for(a=0,s=g.length;a<s;a++)for(l=g[a],u=0;u<3;u++)void 0!==(h=f[c=l[u].x+":"+l[u].y])&&(l[u]=h);return g.concat()},isClockWise:function(e){return ji.area(e)<0}};function zi(e,t){void 0!==e?(kr.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]}function Gi(e,t){var n=(t=t||{}).font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new kr;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),zi.call(this,r,t),this.type="TextGeometry"}function Vi(e,t,n,r,i,o,a){kr.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Hi(e,t,n,r,i,o,a))}function Hi(e,t,n,r,i,o,a){Nr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,h=[],f=new zt,d=new zt,p=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n;for(s=0;s<=t;s++){var _=s/t;f.x=-e*Math.cos(r+_*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+_*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),v.push(d.x,d.y,d.z),g.push(_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var x=h[u][s],w=h[u+1][s],E=h[u+1][s+1];(0!==u||o>0)&&p.push(h[u][s+1],x,E),(u!==n-1||l<Math.PI)&&p.push(x,w,E)}this.setIndex(p),this.addAttribute("position",new Ar(m,3)),this.addAttribute("normal",new Ar(v,3)),this.addAttribute("uv",new Ar(g,2))}function Wi(e,t,n,r,i,o){kr.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new qi(e,t,n,r,i,o))}function qi(e,t,n,r,i,o){Nr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||20,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],f=[],d=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new zt,v=new Ct;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y);d+=p}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=(a=u+g)+n+1,b=a+n+2,_=a+1;l.push(a,y,_),l.push(y,b,_)}}this.setIndex(l),this.addAttribute("position",new Ar(c,3)),this.addAttribute("normal",new Ar(h,3)),this.addAttribute("uv",new Ar(f,2))}function Xi(e,t,n,r){kr.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Qi(e,t,n,r)),this.mergeVertices()}function Qi(e,t,n,r){Nr.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=At.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/t,h=new zt,f=new Ct;for(o=0;o<=t;o++){var d=n+o*c*r,p=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,u.push(h.x,h.y,h.z),f.x=o/t,f.y=a/(e.length-1),l.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=(i=a+o*e.length)+e.length,g=i+e.length+1,y=i+1;s.push(i,v,y),s.push(v,g,y)}if(this.setIndex(s),this.addAttribute("position",new Ar(u,3)),this.addAttribute("uv",new Ar(l,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,_=new zt,x=new zt,w=new zt;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],x.x=b[i+a+0],x.y=b[i+a+1],x.z=b[i+a+2],w.addVectors(_,x).normalize(),b[a+0]=b[i+a+0]=w.x,b[a+1]=b[i+a+1]=w.y,b[a+2]=b[i+a+2]=w.z}}function Yi(e,t){kr.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Zi(e,t)),this.mergeVertices()}function Zi(e,t){Nr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))l(e);else for(var u=0;u<e.length;u++)l(e[u]),this.addGroup(a,s,u),a+=s,s=0;function l(e){var a,u,l,c=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;if(!1===ji.isClockWise(f))for(f=f.reverse(),a=0,u=d.length;a<u;a++)!0===ji.isClockWise(l=d[a])&&(d[a]=l.reverse());var p=ji.triangulateShape(f,d);for(a=0,u=d.length;a<u;a++)f=f.concat(l=d[a]);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var v=p[a];n.push(v[0]+c,v[1]+c,v[2]+c),s+=3}}this.setIndex(n),this.addAttribute("position",new Ar(r,3)),this.addAttribute("normal",new Ar(i,3)),this.addAttribute("uv",new Ar(o,2))}function Ji(e,t){Nr.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i=[],o=Math.cos(At.DEG2RAD*t),a=[0,0],s={},u=["a","b","c"];e.isBufferGeometry?(r=new kr).fromBufferGeometry(e):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,c=r.faces,h=0,f=c.length;h<f;h++)for(var d=c[h],p=0;p<3;p++)a[0]=d[u[p]],a[1]=d[u[(p+1)%3]],a.sort(g),void 0===s[n=a.toString()]?s[n]={index1:a[0],index2:a[1],face1:h,face2:void 0}:s[n].face2=h;for(n in s){var m=s[n];if(void 0===m.face2||c[m.face1].normal.dot(c[m.face2].normal)<=o){var v=l[m.index1];i.push(v.x,v.y,v.z),i.push((v=l[m.index2]).x,v.y,v.z)}}function g(e,t){return e-t}this.addAttribute("position",new Ar(i,3))}function Ki(e,t,n,r,i,o,a,s){kr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new $i(e,t,n,r,i,o,a,s)),this.mergeVertices()}function $i(e,t,n,r,i,o,a,s){Nr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],d=0,p=[],m=n/2,v=0;function g(n){var i,o,p,g=new Ct,y=new zt,b=0,_=!0===n?e:t,x=!0===n?1:-1;for(o=d,i=1;i<=r;i++)c.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),d++;for(p=d,i=0;i<=r;i++){var w=i/r*s+a,E=Math.cos(w),M=Math.sin(w);y.x=_*M,y.y=m*x,y.z=_*E,c.push(y.x,y.y,y.z),h.push(0,x,0),g.x=.5*E+.5,g.y=.5*M*x+.5,f.push(g.x,g.y),d++}for(i=0;i<r;i++){var T=o+i,S=p+i;!0===n?l.push(S,S+1,T):l.push(S+1,S,T),b+=3}u.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new zt,b=new zt,_=0,x=(t-e)/n;for(g=0;g<=i;g++){var w=[],E=g/i,M=E*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,S=T*s+a,A=Math.sin(S),C=Math.cos(S);b.x=M*A,b.y=-E*n+m,b.z=M*C,c.push(b.x,b.y,b.z),y.set(A,x,C).normalize(),h.push(y.x,y.y,y.z),f.push(T,1-E),w.push(d++)}p.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var R=p[g+1][o],L=p[g+1][o+1],P=p[g][o+1];l.push(p[g][o],R,P),l.push(R,L,P),_+=6}u.addGroup(v,_,0),v+=_}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new Ar(c,3)),this.addAttribute("normal",new Ar(h,3)),this.addAttribute("uv",new Ar(f,2))}function eo(e,t,n,r,i,o,a){Ki.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function to(e,t,n,r,i,o,a){$i.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function no(e,t,n,r){kr.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ro(e,t,n,r))}function ro(e,t,n,r){Nr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new zt,h=new Ct;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,l.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Ar(s,3)),this.addAttribute("normal",new Ar(u,3)),this.addAttribute("uv",new Ar(l,2))}(zi.prototype=Object.create(kr.prototype)).constructor=zi,zi.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++)this.addShape(e[r],t)},zi.prototype.addShape=function(e,t){var n,r,i,o,a,s,u,l,c=void 0!==t.amount?t.amount:100,h=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:h-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,p=void 0===t.bevelEnabled||t.bevelEnabled,m=void 0!==t.curveSegments?t.curveSegments:12,v=void 0!==t.steps?t.steps:1,g=t.extrudePath,y=!1,b=void 0!==t.UVGenerator?t.UVGenerator:zi.WorldUVGenerator;g&&(n=g.getSpacedPoints(v),y=!0,p=!1,r=void 0!==t.frames?t.frames:g.computeFrenetFrames(v,!1),i=new zt,o=new zt,a=new zt),p||(d=0,h=0,f=0);var _=this,x=this.vertices.length,w=e.extractPoints(m),E=w.shape,M=w.holes,T=!ji.isClockWise(E);if(T){for(E=E.reverse(),u=0,l=M.length;u<l;u++)ji.isClockWise(s=M[u])&&(M[u]=s.reverse());T=!1}var S=ji.triangulateShape(E,M),A=E;for(u=0,l=M.length;u<l;u++)E=E.concat(s=M[u]);function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var R,L,P,O,I,k,N=E.length,D=S.length;function F(e,t,n){var r,i,o=1,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s;if(Math.abs(a*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+a/h,m=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(a*l-s*u),v=(r=d+a*m-e.x)*r+(i=p+s*m-e.y)*i;if(v<=2)return new Ct(r,i);o=Math.sqrt(v/2)}else{var g=!1;a>Number.EPSILON?u>Number.EPSILON&&(g=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Ct(r/o,i/o)}for(var U=[],B=0,j=A.length,z=j-1,G=B+1;B<j;B++,z++,G++)z===j&&(z=0),G===j&&(G=0),U[B]=F(A[B],A[z],A[G]);var V,H,W=[],q=U.concat();for(u=0,l=M.length;u<l;u++){for(V=[],z=(j=(s=M[u]).length)-1,G=1+(B=0);B<j;B++,z++,G++)z===j&&(z=0),G===j&&(G=0),V[B]=F(s[B],s[z],s[G]);W.push(V),q=q.concat(V)}for(R=0;R<d;R++){for(P=R/d,O=h*Math.cos(P*Math.PI/2),L=f*Math.sin(P*Math.PI/2),B=0,j=A.length;B<j;B++)Q((I=C(A[B],U[B],L)).x,I.y,-O);for(u=0,l=M.length;u<l;u++)for(V=W[u],B=0,j=(s=M[u]).length;B<j;B++)Q((I=C(s[B],V[B],L)).x,I.y,-O)}for(L=f,B=0;B<N;B++)I=p?C(E[B],q[B],L):E[B],y?(o.copy(r.normals[0]).multiplyScalar(I.x),i.copy(r.binormals[0]).multiplyScalar(I.y),a.copy(n[0]).add(o).add(i),Q(a.x,a.y,a.z)):Q(I.x,I.y,0);for(H=1;H<=v;H++)for(B=0;B<N;B++)I=p?C(E[B],q[B],L):E[B],y?(o.copy(r.normals[H]).multiplyScalar(I.x),i.copy(r.binormals[H]).multiplyScalar(I.y),a.copy(n[H]).add(o).add(i),Q(a.x,a.y,a.z)):Q(I.x,I.y,c/v*H);for(R=d-1;R>=0;R--){for(P=R/d,O=h*Math.cos(P*Math.PI/2),L=f*Math.sin(P*Math.PI/2),B=0,j=A.length;B<j;B++)Q((I=C(A[B],U[B],L)).x,I.y,c+O);for(u=0,l=M.length;u<l;u++)for(V=W[u],B=0,j=(s=M[u]).length;B<j;B++)I=C(s[B],V[B],L),y?Q(I.x,I.y+n[v-1].y,n[v-1].x+O):Q(I.x,I.y,c+O)}function X(e,t){var n,r;for(B=e.length;--B>=0;){n=B,(r=B-1)<0&&(r=e.length-1);var i=0,o=v+2*d;for(i=0;i<o;i++){var a=N*i,s=N*(i+1);Z(t+n+a,t+r+a,t+r+s,t+n+s)}}}function Q(e,t,n){_.vertices.push(new zt(e,t,n))}function Y(e,t,n){_.faces.push(new gr(e+=x,t+=x,n+=x,null,null,0));var r=b.generateTopUV(_,e,t,n);_.faceVertexUvs[0].push(r)}function Z(e,t,n,r,i,o,a,s,u){n+=x,_.faces.push(new gr(e+=x,t+=x,r+=x,null,null,1)),_.faces.push(new gr(t,n,r,null,null,1));var l=b.generateSideWallUV(_,e,t,n,r);_.faceVertexUvs[0].push([l[0],l[1],l[3]]),_.faceVertexUvs[0].push([l[1],l[2],l[3]])}!function(){if(p){var e=0,t=N*e;for(B=0;B<D;B++)Y((k=S[B])[2]+t,k[1]+t,k[0]+t);for(t=N*(e=v+2*d),B=0;B<D;B++)Y((k=S[B])[0]+t,k[1]+t,k[2]+t)}else{for(B=0;B<D;B++)Y((k=S[B])[2],k[1],k[0]);for(B=0;B<D;B++)Y((k=S[B])[0]+N*v,k[1]+N*v,k[2]+N*v)}}(),function(){var e=0;for(X(A,e),e+=A.length,u=0,l=M.length;u<l;u++)X(s=M[u],e),e+=s.length}()},zi.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices,o=i[t],a=i[n],s=i[r];return[new Ct(o.x,o.y),new Ct(a.x,a.y),new Ct(s.x,s.y)]},generateSideWallUV:function(e,t,n,r,i){var o=e.vertices,a=o[t],s=o[n],u=o[r],l=o[i];return Math.abs(a.y-s.y)<.01?[new Ct(a.x,1-a.z),new Ct(s.x,1-s.z),new Ct(u.x,1-u.z),new Ct(l.x,1-l.z)]:[new Ct(a.y,1-a.z),new Ct(s.y,1-s.z),new Ct(u.y,1-u.z),new Ct(l.y,1-l.z)]}},(Gi.prototype=Object.create(zi.prototype)).constructor=Gi,(Vi.prototype=Object.create(kr.prototype)).constructor=Vi,(Hi.prototype=Object.create(Nr.prototype)).constructor=Hi,(Wi.prototype=Object.create(kr.prototype)).constructor=Wi,(qi.prototype=Object.create(Nr.prototype)).constructor=qi,(Xi.prototype=Object.create(kr.prototype)).constructor=Xi,(Qi.prototype=Object.create(Nr.prototype)).constructor=Qi,(Yi.prototype=Object.create(kr.prototype)).constructor=Yi,(Zi.prototype=Object.create(Nr.prototype)).constructor=Zi,(Ji.prototype=Object.create(Nr.prototype)).constructor=Ji,(Ki.prototype=Object.create(kr.prototype)).constructor=Ki,($i.prototype=Object.create(Nr.prototype)).constructor=$i,(eo.prototype=Object.create(Ki.prototype)).constructor=eo,(to.prototype=Object.create($i.prototype)).constructor=to,(no.prototype=Object.create(kr.prototype)).constructor=no,(ro.prototype=Object.create(Nr.prototype)).constructor=ro;var io=Object.freeze({WireframeGeometry:xi,ParametricGeometry:wi,ParametricBufferGeometry:Ei,TetrahedronGeometry:Si,TetrahedronBufferGeometry:Ai,OctahedronGeometry:Ci,OctahedronBufferGeometry:Ri,IcosahedronGeometry:Li,IcosahedronBufferGeometry:Pi,DodecahedronGeometry:Oi,DodecahedronBufferGeometry:Ii,PolyhedronGeometry:Mi,PolyhedronBufferGeometry:Ti,TubeGeometry:ki,TubeBufferGeometry:Ni,TorusKnotGeometry:Di,TorusKnotBufferGeometry:Fi,TorusGeometry:Ui,TorusBufferGeometry:Bi,TextGeometry:Gi,SphereGeometry:Vi,SphereBufferGeometry:Hi,RingGeometry:Wi,RingBufferGeometry:qi,PlaneGeometry:Br,PlaneBufferGeometry:jr,LatheGeometry:Xi,LatheBufferGeometry:Qi,ShapeGeometry:Yi,ShapeBufferGeometry:Zi,ExtrudeGeometry:zi,EdgesGeometry:Ji,ConeGeometry:eo,ConeBufferGeometry:to,CylinderGeometry:Ki,CylinderBufferGeometry:$i,CircleGeometry:no,CircleBufferGeometry:ro,BoxGeometry:Fr,BoxBufferGeometry:Ur});function oo(){Yn.call(this,{uniforms:Cn.merge([In.lights,{opacity:{value:1}}]),vertexShader:Rn.shadow_vert,fragmentShader:Rn.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function ao(e){Yn.call(this,e),this.type="RawShaderMaterial"}function so(e){this.uuid=At.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function uo(e){Qn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ln(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function lo(e){uo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function co(e){Qn.call(this),this.type="MeshPhongMaterial",this.color=new Ln(16777215),this.specular=new Ln(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ho(e){co.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function fo(e){Qn.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function po(e){Qn.call(this),this.type="MeshLambertMaterial",this.color=new Ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mo(e){Qn.call(this),this.type="LineDashedMaterial",this.color=new Ln(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}(oo.prototype=Object.create(Yn.prototype)).constructor=oo,oo.prototype.isShadowMaterial=!0,(ao.prototype=Object.create(Yn.prototype)).constructor=ao,ao.prototype.isRawShaderMaterial=!0,so.prototype={constructor:so,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},(uo.prototype=Object.create(Qn.prototype)).constructor=uo,uo.prototype.isMeshStandardMaterial=!0,uo.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(lo.prototype=Object.create(uo.prototype)).constructor=lo,lo.prototype.isMeshPhysicalMaterial=!0,lo.prototype.copy=function(e){return uo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},(co.prototype=Object.create(Qn.prototype)).constructor=co,co.prototype.isMeshPhongMaterial=!0,co.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(ho.prototype=Object.create(co.prototype)).constructor=ho,ho.prototype.isMeshToonMaterial=!0,ho.prototype.copy=function(e){return co.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},(fo.prototype=Object.create(Qn.prototype)).constructor=fo,fo.prototype.isMeshNormalMaterial=!0,fo.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(po.prototype=Object.create(Qn.prototype)).constructor=po,po.prototype.isMeshLambertMaterial=!0,po.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(mo.prototype=Object.create(Qn.prototype)).constructor=mo,mo.prototype.isLineDashedMaterial=!0,mo.prototype.copy=function(e){return Qn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var vo=Object.freeze({ShadowMaterial:oo,SpriteMaterial:oi,RawShaderMaterial:ao,ShaderMaterial:Yn,PointsMaterial:pi,MultiMaterial:so,MeshPhysicalMaterial:lo,MeshStandardMaterial:uo,MeshPhongMaterial:co,MeshToonMaterial:ho,MeshNormalMaterial:fo,MeshLambertMaterial:po,MeshDepthMaterial:Zn,MeshBasicMaterial:yr,LineDashedMaterial:mo,LineBasicMaterial:hi,Material:Qn}),go={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function yo(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}var bo=new yo;function _o(e){this.manager=void 0!==e?e:bo}function xo(e){this.manager=void 0!==e?e:bo,this._parser=null}function wo(e){this.manager=void 0!==e?e:bo,this._parser=null}function Eo(e){this.manager=void 0!==e?e:bo}function Mo(e){this.manager=void 0!==e?e:bo}function To(e){this.manager=void 0!==e?e:bo}function So(e,t){pr.call(this),this.type="Light",this.color=new Ln(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ao(e,t,n){So.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(pr.DefaultUp),this.updateMatrix(),this.groundColor=new Ln(t)}function Co(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Ct(512,512),this.map=null,this.matrix=new Gt}function Ro(){Co.call(this,new Gr(50,1,.5,500))}function Lo(e,t,n,r,i,o){So.call(this,e,t),this.type="SpotLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ro}function Po(e,t,n,r){So.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Co(new Gr(90,1,.5,500))}function Oo(){Co.call(this,new Vr(-5,5,5,-5,.5,500))}function Io(e,t){So.call(this,e,t),this.type="DirectionalLight",this.position.copy(pr.DefaultUp),this.updateMatrix(),this.target=new pr,this.shadow=new Oo}function ko(e,t){So.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}Object.assign(_o.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=go.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":c=new ArrayBuffer(l.length);for(var f=new Uint8Array(c),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);"blob"===h&&(c=new Blob([c],{type:s}));break;case"document":var p=new DOMParser;c=p.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}window.setTimeout(function(){t&&t(c),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemError(e)},0)}}else{var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(n){var o=n.target.response;go.add(e,o),200===this.status?(t&&t(o),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),void 0!==n&&m.addEventListener("progress",function(e){n(e)},!1),m.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),m.send(null)}return i.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Object.assign(xo.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new yi;a.image=o;var s=new _o(this.manager);function u(u){s.load(e[u],function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Ae),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,c=0,h=e.length;c<h;++c)u(c);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ae),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(wo.prototype,{load:function(e,t,n,r){var i=this,o=new On,a=new _o(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:we,o.wrapT=void 0!==n.wrapT?n.wrapT:we,o.magFilter=void 0!==n.magFilter?n.magFilter:Ae,o.minFilter=void 0!==n.minFilter?n.minFilter:Re,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Ae),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(Eo.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=go.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){go.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Mo.prototype,{load:function(e,t,n,r){var i=new Vt,o=new Eo(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var u=0;u<e.length;++u)s(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(To.prototype,{load:function(e,t,n,r){var i=new Dt,o=new Eo(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ve:He,i.image=n,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),So.prototype=Object.assign(Object.create(pr.prototype),{constructor:So,isLight:!0,copy:function(e){return pr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=pr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ao.prototype=Object.assign(Object.create(So.prototype),{constructor:Ao,isHemisphereLight:!0,copy:function(e){return So.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Co.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ro.prototype=Object.assign(Object.create(Co.prototype),{constructor:Ro,isSpotLightShadow:!0,update:function(e){var t=2*At.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||500,i=this.camera;t===i.fov&&n===i.aspect&&r===i.far||(i.fov=t,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),Lo.prototype=Object.assign(Object.create(So.prototype),{constructor:Lo,isSpotLight:!0,copy:function(e){return So.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Po.prototype=Object.assign(Object.create(So.prototype),{constructor:Po,isPointLight:!0,copy:function(e){return So.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Oo.prototype=Object.assign(Object.create(Co.prototype),{constructor:Oo}),Io.prototype=Object.assign(Object.create(So.prototype),{constructor:Io,isDirectionalLight:!0,copy:function(e){return So.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ko.prototype=Object.assign(Object.create(So.prototype),{constructor:ko,isAmbientLight:!0});var No,Do,Fo,Uo,Bo,jo={arraySlice:function(e,t,n){return jo.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function zo(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Go(e,t,n,r){zo.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Vo(e,t,n,r){zo.call(this,e,t,n,r)}function Ho(e,t,n,r){zo.call(this,e,t,n,r)}function Wo(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=jo.convertArray(t,this.TimeBufferType),this.values=jo.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function qo(e,t,n,r){Wo.call(this,e,t,n,r)}function Xo(e,t,n,r){zo.call(this,e,t,n,r)}function Qo(e,t,n,r){Wo.call(this,e,t,n,r)}function Yo(e,t,n,r){Wo.call(this,e,t,n,r)}function Zo(e,t,n,r){Wo.call(this,e,t,n,r)}function Jo(e,t,n){Wo.call(this,e,t,n)}function Ko(e,t,n,r){Wo.call(this,e,t,n,r)}function $o(e,t,n,r){Wo.apply(this,arguments)}function ea(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=At.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function ta(e){this.manager=void 0!==e?e:bo,this.textures={}}function na(e){this.manager=void 0!==e?e:bo}function ra(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ia(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:bo,this.withCredentials=!1}function oa(e){this.manager=void 0!==e?e:bo,this.texturePath=""}function aa(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function sa(e,t,n,r){return function(e,n){var r=1-e;return r*r*t}(e)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*r}(e)}function ua(e,t,n,r,i){return function(e,n){var r=1-e;return r*r*r*t}(e)+function(e,t){var r=1-e;return 3*r*r*e*n}(e)+function(e,t){return 3*(1-e)*e*e*r}(e)+function(e,t){return e*e*e*i}(e)}function la(){}function ca(e,t){this.v1=e,this.v2=t}function ha(){this.curves=[],this.autoClose=!1}function fa(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0}function da(e){this.points=void 0===e?[]:e}function pa(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r}function ma(e,t,n){this.v0=e,this.v1=t,this.v2=n}zo.prototype={constructor:zo,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(zo.prototype,{beforeStart_:zo.prototype.copySampleValue_,afterEnd_:zo.prototype.copySampleValue_}),Go.prototype=Object.assign(Object.create(zo.prototype),{constructor:Go,DefaultSettings_:{endingStart:ht,endingEnd:ht},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case ft:i=e,a=2*t-n;break;case dt:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ft:o=e,s=2*n-t;break;case dt:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}),Vo.prototype=Object.assign(Object.create(zo.prototype),{constructor:Vo,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),Ho.prototype=Object.assign(Object.create(zo.prototype),{constructor:Ho,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}}),No={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:lt,InterpolantFactoryMethodDiscrete:function(e){return new Ho(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Vo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Go(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case ut:t=this.InterpolantFactoryMethodDiscrete;break;case lt:t=this.InterpolantFactoryMethodLinear;break;case ct:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn(n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ut;case this.InterpolantFactoryMethodLinear:return lt;case this.InterpolantFactoryMethodSmooth:return ct}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=jo.arraySlice(n,i,o),this.values=jo.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&jo.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("value is not a valid number",this,a,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===ct,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[p+f]}++i}}if(o>0){for(e[i]=e[o],p=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[p+f];++i}return i!==e.length&&(this.times=jo.arraySlice(e,0,i),this.values=jo.arraySlice(t,0,i*n)),this}},qo.prototype=Object.assign(Object.create(No),{constructor:qo,ValueTypeName:"vector"}),Xo.prototype=Object.assign(Object.create(zo.prototype),{constructor:Xo,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),l=s+a;s!==l;s+=4)jt.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Qo.prototype=Object.assign(Object.create(No),{constructor:Qo,ValueTypeName:"quaternion",DefaultInterpolation:lt,InterpolantFactoryMethodLinear:function(e){return new Xo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Yo.prototype=Object.assign(Object.create(No),{constructor:Yo,ValueTypeName:"number"}),Zo.prototype=Object.assign(Object.create(No),{constructor:Zo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ut,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Jo.prototype=Object.assign(Object.create(No),{constructor:Jo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ut,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ko.prototype=Object.assign(Object.create(No),{constructor:Ko,ValueTypeName:"color"}),$o.prototype=No,No.constructor=$o,Object.assign($o,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=$o._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];jo.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:jo.convertArray(e.times,Array),values:jo.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yo;case"vector":case"vector2":case"vector3":case"vector4":return qo;case"color":return Ko;case"quaternion":return Qo;case"bool":case"boolean":return Jo;case"string":return Zo}throw new Error("Unsupported typeName: "+e)}}),ea.prototype={constructor:ea,resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(ea,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push($o.parse(n[i]).scale(r));return new ea(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push($o.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=jo.getKeyframeOrder(s);s=jo.sortedArray(s,1,l),u=jo.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Yo(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new ea(e,-1,o)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(ea.CreateFromMorphTargetSequence(h,r[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];jo.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new Yo(".morphTargetInfluence["+d+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(qo,g+".position",l,"pos",r),n(Qo,g+".quaternion",l,"rot",r),n(qo,g+".scale",l,"scl",r)}}return 0===r.length?null:new ea(i,o,r)}}),Object.assign(ta.prototype,{load:function(e,t,n,r){var i=this;new _o(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new vo[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.shading&&(r.shading=e.shading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Ct).fromArray(i)}if(void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.materials)for(var o=0,a=e.materials.length;o<a;o++)r.materials.push(this.parse(e.materials[o]));return r}}),Object.assign(na.prototype,{load:function(e,t,n,r){var i=this;new _o(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Nr,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);t.setIndex(new br(i,1))}var o=e.data.attributes;for(var a in o){var s=o[a];i=new r[s.type](s.array),t.addAttribute(a,new br(i,s.itemSize,s.normalized))}var u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(var l=0,c=u.length;l!==c;++l){var h=u[l];t.addGroup(h.start,h.count,h.materialIndex)}var f=e.data.boundingSphere;if(void 0!==f){var d=new zt;void 0!==f.center&&d.fromArray(f.center),t.boundingSphere=new Kn(d,f.radius)}return t}}),ra.prototype={constructor:ra,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(Bo={NoBlending:R,NormalBlending:L,AdditiveBlending:P,SubtractiveBlending:O,MultiplyBlending:I,CustomBlending:k},function(e,t,n){void 0===Do&&(Do=new Ln),void 0===Fo&&(Fo=new To),void 0===Uo&&(Uo=new ta);var r={};function i(e,i,o,a,s){var u,l=t+e,c=ra.Handlers.get(l);null!==c?u=c.load(l):(Fo.setCrossOrigin(n),u=Fo.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=xe),1!==i[1]&&(u.wrapT=xe)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=xe),"mirror"===a[0]&&(u.wrapS=Ee),"repeat"===a[1]&&(u.wrapT=xe),"mirror"===a[1]&&(u.wrapT=Ee)),void 0!==s&&(u.anisotropy=s);var h=At.generateUUID();return r[h]=u,h}var o={uuid:At.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Bo[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=Do.fromArray(s).getHex();break;case"colorSpecular":o.specular=Do.fromArray(s).getHex();break;case"colorEmissive":o.emissive=Do.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=[s,s];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=w;break;case"doubleSided":o.side=E;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=C),"face"===s&&(o.vertexColors=A);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Uo.setTextures(r),Uo.parse(o)})},ra.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n+1];if(t[n].test(e))return i}return null}},Object.assign(ia.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ra.prototype.extractUrlBase(e),a=new _o(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(r,o);t(u.geometry,u.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new kr,r=void 0!==e.scale?1/e.scale:1;if(function(t){function r(e,t){return e&1<<t}var i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,x,w,E,M,T,S,A,C,R=e.faces,L=e.vertices,P=e.normals,O=e.colors,I=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&I++;for(i=0;i<I;i++)n.faceVertexUvs[i]=[]}for(s=0,u=L.length;s<u;)(x=new zt).x=L[s++]*t,x.y=L[s++]*t,x.z=L[s++]*t,n.vertices.push(x);for(s=0,u=R.length;s<u;)if(p=r(d=R[s++],0),m=r(d,1),v=r(d,3),g=r(d,4),y=r(d,5),b=r(d,6),_=r(d,7),p){if((E=new gr).a=R[s],E.b=R[s+1],E.c=R[s+3],(M=new gr).a=R[s+1],M.b=R[s+2],M.c=R[s+3],s+=4,m&&(f=R[s++],E.materialIndex=f,M.materialIndex=f),a=n.faces.length,v)for(i=0;i<I;i++)for(A=e.uvs[i],n.faceVertexUvs[i][a]=[],n.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)C=new Ct(A[2*(h=R[s++])],A[2*h+1]),2!==o&&n.faceVertexUvs[i][a].push(C),0!==o&&n.faceVertexUvs[i][a+1].push(C);if(g&&(c=3*R[s++],E.normal.set(P[c++],P[c++],P[c]),M.normal.copy(E.normal)),y)for(i=0;i<4;i++)c=3*R[s++],S=new zt(P[c++],P[c++],P[c]),2!==i&&E.vertexNormals.push(S),0!==i&&M.vertexNormals.push(S);if(b&&(l=R[s++],E.color.setHex(T=O[l]),M.color.setHex(T)),_)for(i=0;i<4;i++)T=O[l=R[s++]],2!==i&&E.vertexColors.push(new Ln(T)),0!==i&&M.vertexColors.push(new Ln(T));n.faces.push(E),n.faces.push(M)}else{if((w=new gr).a=R[s++],w.b=R[s++],w.c=R[s++],m&&(f=R[s++],w.materialIndex=f),a=n.faces.length,v)for(i=0;i<I;i++)for(A=e.uvs[i],n.faceVertexUvs[i][a]=[],o=0;o<3;o++)C=new Ct(A[2*(h=R[s++])],A[2*h+1]),n.faceVertexUvs[i][a].push(C);if(g&&(c=3*R[s++],w.normal.set(P[c++],P[c++],P[c])),y)for(i=0;i<3;i++)c=3*R[s++],S=new zt(P[c++],P[c++],P[c]),w.vertexNormals.push(S);if(b&&(l=R[s++],w.color.setHex(O[l])),_)for(i=0;i<3;i++)l=R[s++],w.vertexColors.push(new Ln(O[l]));n.faces.push(w)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t)n.skinWeights.push(new Ft(e.skinWeights[r],t>1?e.skinWeights[r+1]:0,t>2?e.skinWeights[r+2]:0,t>3?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t)n.skinIndices.push(new Ft(e.skinIndices[r],t>1?e.skinIndices[r+1]:0,t>2?e.skinIndices[r+2]:0,t>3?e.skinIndices[r+3]:0));n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[];for(var o=n.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,u=a.length;s<u;s+=3){var l=new zt;l.x=a[s]*t,l.y=a[s+1]*t,l.z=a[s+2]*t,o.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=n.faces,h=e.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(h,3*r)}}(r),function(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=ea.parseAnimation(r[i],n.bones);o&&t.push(o)}if(n.morphTargets){var a=ea.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(a)}t.length>0&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var i=ra.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:i}}}),Object.assign(oa.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new _o(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new ia,r=new na,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new io[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new io[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new io[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new io[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new io[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new io[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new io[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new io[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new io[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new io[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new io[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new ta;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=r.parse(e[i]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=ea.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Eo(new yo(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;r[u.uuid]=i(l)}}return r},parseTextures:function(e,t){var n={UVMapping:de,CubeReflectionMapping:pe,CubeRefractionMapping:me,EquirectangularReflectionMapping:ve,EquirectangularRefractionMapping:ge,SphericalReflectionMapping:ye,CubeUVReflectionMapping:be,CubeUVRefractionMapping:_e},r={RepeatWrapping:xe,ClampToEdgeWrapping:we,MirroredRepeatWrapping:Ee},i={NearestFilter:Me,NearestMipMapNearestFilter:Te,NearestMipMapLinearFilter:Se,LinearFilter:Ae,LinearMipMapNearestFilter:Ce,LinearMipMapLinearFilter:Re};function o(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var a={};if(void 0!==e)for(var s=0,u=e.length;s<u;s++){var l=e[s];void 0===l.image&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),void 0===t[l.image]&&console.warn("THREE.ObjectLoader: Undefined image",l.image);var c=new Dt(t[l.image]);c.needsUpdate=!0,c.uuid=l.uuid,void 0!==l.name&&(c.name=l.name),void 0!==l.mapping&&(c.mapping=o(l.mapping,n)),void 0!==l.offset&&c.offset.fromArray(l.offset),void 0!==l.repeat&&c.repeat.fromArray(l.repeat),void 0!==l.wrap&&(c.wrapS=o(l.wrap[0],r),c.wrapT=o(l.wrap[1],r)),void 0!==l.minFilter&&(c.minFilter=o(l.minFilter,i)),void 0!==l.magFilter&&(c.magFilter=o(l.magFilter,i)),void 0!==l.anisotropy&&(c.anisotropy=l.anisotropy),void 0!==l.flipY&&(c.flipY=l.flipY),a[l.uuid]=c}return a},parseObject:function(){var e=new Gt;return function(t,n,r){var i;function o(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function a(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}switch(t.type){case"Scene":i=new ri,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Ln(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new ni(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new ti(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Gr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Vr(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new ko(t.color,t.intensity);break;case"DirectionalLight":i=new Io(t.color,t.intensity);break;case"PointLight":i=new Po(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":i=new Lo(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new Ao(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=o(t.geometry),u=a(t.material);i=s.bones&&s.bones.length>0?new ci(s,u):new Dr(s,u);break;case"LOD":i=new si;break;case"Line":i=new fi(o(t.geometry),a(t.material),t.mode);break;case"LineSegments":i=new di(o(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new mi(o(t.geometry),a(t.material));break;case"Sprite":i=new ai(a(t.material));break;case"Group":i=new vi;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:i=new pr}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var l in t.children)i.add(this.parseObject(t.children[l],n,r));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var f=c[h];void 0!==(l=i.getObjectByProperty("uuid",f.object))&&i.addLevel(l,f.distance)}return i}}()}),la.prototype={constructor:la,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){isNaN(e)&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){isNaN(e)&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(isNaN(e)&&(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i=new zt,o=[],a=[],s=[],u=new zt,l=new Gt;for(n=0;n<=e;n++)o[n]=this.getTangentAt(n/e),o[n].normalize();a[0]=new zt,s[0]=new zt;var c=Number.MAX_VALUE,h=Math.abs(o[0].x),f=Math.abs(o[0].y),d=Math.abs(o[0].z);for(h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),d<=c&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),n=1;n<=e;n++)a[n]=a[n-1].clone(),s[n]=s[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(At.clamp(o[n-1].dot(o[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(u,r))),s[n].crossVectors(o[n],a[n]);if(!0===t)for(r=Math.acos(At.clamp(a[0].dot(a[e]),-1,1)),r/=e,o[0].dot(u.crossVectors(a[0],a[e]))>0&&(r=-r),n=1;n<=e;n++)a[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),s[n].crossVectors(o[n],a[n]);return{tangents:o,normals:a,binormals:s}}},(ca.prototype=Object.create(la.prototype)).constructor=ca,ca.prototype.isLineCurve=!0,ca.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},ca.prototype.getPointAt=function(e){return this.getPoint(e)},ca.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},ha.prototype=Object.assign(Object.create(la.prototype),{constructor:ha,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ca(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-i/a)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){isNaN(e)&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.getPoints(o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e),s=0;s<a.length;s++){var u=a[s];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new kr,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new zt(i.x,i.y,i.z||0))}return t}}),(fa.prototype=Object.create(la.prototype)).constructor=fa,fa.prototype.isEllipseCurve=!0,fa.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(n=r?0:t),!0!==this.aClockwise||r||(n===t?n=-t:n-=t);var i=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(i),a=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var s=Math.cos(this.aRotation),u=Math.sin(this.aRotation),l=o-this.aX,c=a-this.aY;o=l*s-c*u+this.aX,a=l*u+c*s+this.aY}return new Ct(o,a)},(da.prototype=Object.create(la.prototype)).constructor=da,da.prototype.isSplineCurve=!0,da.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0===r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],u=t[r>t.length-3?t.length-1:r+2];return new Ct(aa(i,o.x,a.x,s.x,u.x),aa(i,o.y,a.y,s.y,u.y))},(pa.prototype=Object.create(la.prototype)).constructor=pa,pa.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,i=this.v3;return new Ct(ua(e,t.x,n.x,r.x,i.x),ua(e,t.y,n.y,r.y,i.y))},(ma.prototype=Object.create(la.prototype)).constructor=ma,ma.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new Ct(sa(e,t.x,n.x,r.x),sa(e,t.y,n.y,r.y))};var va,ga=Object.assign(Object.create(ha.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ca(this.currentPoint.clone(),new Ct(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new ma(this.currentPoint.clone(),new Ct(e,t),new Ct(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new pa(this.currentPoint.clone(),new Ct(e,t),new Ct(n,r),new Ct(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new da([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new fa(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)}});function ya(e){ha.call(this),this.currentPoint=new Ct,e&&this.fromPoints(e)}function ba(){ya.apply(this,arguments),this.holes=[]}function _a(){this.subPaths=[],this.currentPath=null}function xa(e){this.data=e}function wa(e){this.manager=void 0!==e?e:bo}ya.prototype=ga,ga.constructor=ya,ba.prototype=Object.assign(Object.create(ga),{constructor:ba,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),_a.prototype={moveTo:function(e,t){this.currentPath=new ya,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new ba;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=ji.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new ba).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!c&&p[v]&&v++,p[v]={s:new ba,p:h},p[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,_=[],x=0,w=p.length;x<w;x++)d[x]=[];for(x=0,w=p.length;x<w;x++)for(var E=m[x],M=0;M<E.length;M++){for(var T=E[M],S=!0,A=0;A<p.length;A++)r(T.p,p[A].p)&&(x!==A&&_.push({froms:x,tos:A,hole:M}),S?(S=!1,d[A].push(T)):b=!0);S&&d[x].push(T)}_.length>0&&(b||(m=d))}g=0;for(var C=p.length;g<C;g++){l.push(u=p[g].s);for(var R=0,L=(f=m[g]).length;R<L;R++)u.holes.push(f[R].h)}return l}},Object.assign(xa.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(e,t,r,o){var a=i.glyphs[e]||i.glyphs["?"];if(a){var s,u,l,c,h,f,d,p,m,v,g,y=new _a,b=[];if(a.o)for(var _=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),x=0,w=_.length;x<w;)switch(_[x++]){case"m":s=_[x++]*t+r,u=_[x++]*t+o,y.moveTo(s,u);break;case"l":s=_[x++]*t+r,u=_[x++]*t+o,y.lineTo(s,u);break;case"q":if(l=_[x++]*t+r,c=_[x++]*t+o,d=_[x++]*t+r,p=_[x++]*t+o,y.quadraticCurveTo(d,p,l,c),g=b[b.length-1]){h=g.x,f=g.y;for(var E=1;E<=n;E++)sa(M=E/n,h,d,l),sa(M,f,p,c)}break;case"b":if(l=_[x++]*t+r,c=_[x++]*t+o,d=_[x++]*t+r,p=_[x++]*t+o,m=_[x++]*t+r,v=_[x++]*t+o,y.bezierCurveTo(d,p,m,v,l,c),g=b[b.length-1])for(h=g.x,f=g.y,E=1;E<=n;E++){var M;ua(M=E/n,h,d,m,l),ua(M,f,p,v,c)}}return{offsetX:a.ha*t,path:y}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var i=this.data,o=function(e){for(var n=String(e).split(""),o=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,s=0,u=0,l=[],c=0;c<n.length;c++){var h=n[c];if("\n"===h)s=0,u-=a;else{var f=r(h,o,s,u);s+=f.offsetX,l.push(f.path)}}return l}(e),a=[],s=0,u=o.length;s<u;s++)Array.prototype.push.apply(a,o[s].toShapes());return a}}),Object.assign(wa.prototype,{load:function(e,t,n,r){var i=this;new _o(this.manager).load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new xa(e)}});var Ea,Ma,Ta,Sa,Aa,Ca,Ra,La,Pa,Oa,Ia,ka,Na,Da,Fa,Ua={getContext:function(){return void 0===va&&(va=new(window.AudioContext||window.webkitAudioContext)),va},setContext:function(e){va=e}};function Ba(e){this.manager=void 0!==e?e:bo}function ja(e,t,n,r){So.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function za(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ga(e,t,n){pr.call(this),this.type="CubeCamera";var r=new Gr(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new zt(1,0,0)),this.add(r);var i=new Gr(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new zt(-1,0,0)),this.add(i);var o=new Gr(90,1,e,t);o.up.set(0,0,1),o.lookAt(new zt(0,1,0)),this.add(o);var a=new Gr(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new zt(0,-1,0)),this.add(a);var s=new Gr(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new zt(0,0,1)),this.add(s);var u=new Gr(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new zt(0,0,-1)),this.add(u),this.renderTarget=new Bt(n,n,{format:Ve,magFilter:Ae,minFilter:Ae}),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)}}function Va(){pr.call(this),this.type="AudioListener",this.context=Ua.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ha(e){pr.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Wa(e){Ha.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function qa(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Xa(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Qa(e,t,n){this.path=t,this.parsedPath=n||Qa.parseTrackName(t),this.node=Qa.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ya(e){this.uuid=At.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Za(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:ht,endingEnd:ht},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=at,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ja(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ka(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function $a(){Nr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function es(e,t,n,r){this.uuid=At.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function ts(e,t){this.uuid=At.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ns(e,t,n){ts.call(this,e,t),this.meshPerAttribute=n||1}function rs(e,t,n){br.call(this,e,t),this.meshPerAttribute=n||1}function is(e,t,n,r){this.ray=new rr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function os(e,t){return e.distance-t.distance}function as(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)as(i[o],t,n,!0)}function ss(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function us(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function ls(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function cs(e,t){Dr.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)}function hs(e){pr.call(this),this.material=e,this.render=function(e){}}function fs(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Nr,l=new Ar(2*a*3,3);u.addAttribute("position",l),di.call(this,u,new hi({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ds(e){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Nr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1;r<32;r++,i++){var o=r/32*Math.PI*2,a=i/32*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new Ar(n,3));var s=new hi({fog:!1});this.cone=new di(t,s),this.add(this.cone),this.update()}function ps(e){this.bones=this.getBoneList(e);for(var t=new Nr,n=[],r=[],i=new Ln(0,0,1),o=new Ln(0,1,0),a=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(i.r,i.g,i.b),r.push(o.r,o.g,o.b))}t.addAttribute("position",new Ar(n,3)),t.addAttribute("color",new Ar(r,3));var u=new hi({vertexColors:C,depthTest:!1,depthWrite:!1,transparent:!0});di.call(this,t,u),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ms(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Hi(t,4,2),r=new yr({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),Dr.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function vs(e){pr.call(this),this.light=e,this.light.updateMatrixWorld();var t=new yr({color:e.color,fog:!1}),n=new yr({color:e.color,fog:!1,wireframe:!0}),r=new Nr;r.addAttribute("position",new br(new Float32Array(18),3)),this.add(new Dr(r,t)),this.add(new Dr(r,n)),this.update()}function gs(e,t){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new Ri(t);n.rotateY(.5*Math.PI);var r=new yr({vertexColors:C,wireframe:!0}),i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.addAttribute("color",new br(o,3)),this.add(new Dr(n,r)),this.update()}function ys(e,t,n,r){e=e||10,t=t||10,n=new Ln(void 0!==n?n:4473924),r=new Ln(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],l=0,c=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===i?n:r;f.toArray(u,c),f.toArray(u,c+=3),f.toArray(u,c+=3),f.toArray(u,c+=3),c+=3}var d=new Nr;d.addAttribute("position",new Ar(s,3)),d.addAttribute("color",new Ar(u,3));var p=new hi({vertexColors:C});di.call(this,d,p)}function bs(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new Ln(void 0!==i?i:4473924),o=new Ln(void 0!==o?o:8947848);var a,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(a,0,s),p.push((f=1&l?i:o).r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:o,h=e-e/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new Nr;m.addAttribute("position",new Ar(d,3)),m.addAttribute("color",new Ar(p,3));var v=new hi({vertexColors:C});di.call(this,m,v)}function _s(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Nr,l=new Ar(2*a*3,3);u.addAttribute("position",l),di.call(this,u,new hi({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function xs(e,t){pr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Nr;n.addAttribute("position",new Ar([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new hi({fog:!1});this.add(new fi(n,r)),(n=new Nr).addAttribute("position",new Ar([0,0,0,0,0,1],3)),this.add(new fi(n,r)),this.update()}function ws(e){var t=new Nr,n=new hi({color:16777215,vertexColors:A}),r=[],i=[],o={},a=new Ln(16755200),s=new Ln(16711680),u=new Ln(43775),l=new Ln(16777215),c=new Ln(3355443);function h(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.addAttribute("position",new Ar(r,3)),t.addAttribute("color",new Ar(i,3)),di.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Es(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Nr;i.setIndex(new br(n,1)),i.addAttribute("position",new br(r,3)),di.call(this,i,new hi({color:t})),void 0!==e&&this.update(e)}function Ms(e,t,n,r,i,o){pr.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===ka&&((ka=new Nr).addAttribute("position",new Ar([0,0,0,0,1,0],3)),(Na=new $i(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new fi(ka,new hi({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Dr(Na,new yr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Ts(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Nr;n.addAttribute("position",new Ar(t,3)),n.addAttribute("color",new Ar([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new hi({vertexColors:C});di.call(this,n,r)}function Ss(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(Ba.prototype,{load:function(e,t,n,r){var i=new _o(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){Ua.getContext().decodeAudioData(e,function(e){t(e)})},n,r)}}),ja.prototype=Object.assign(Object.create(So.prototype),{constructor:ja,isRectAreaLight:!0,copy:function(e){return So.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),Object.assign(za.prototype,{update:(La=new Gt,Pa=new Gt,function(e){if(Ea!==this||Ma!==e.focus||Ta!==e.fov||Sa!==e.aspect*this.aspect||Aa!==e.near||Ca!==e.far||Ra!==e.zoom){Ea=this,Ma=e.focus,Ta=e.fov,Sa=e.aspect*this.aspect,Aa=e.near,Ca=e.far,Ra=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=this.eyeSep/2,o=i*Aa/Ma,a=Aa*Math.tan(At.DEG2RAD*Ta*.5)/Ra;Pa.elements[12]=-i,La.elements[12]=i,r.elements[0]=2*Aa/((n=a*Sa+o)-(t=-a*Sa+o)),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*Aa/((n=a*Sa-o)-(t=-a*Sa-o)),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Pa),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(La)})}),(Ga.prototype=Object.create(pr.prototype)).constructor=Ga,Va.prototype=Object.assign(Object.create(pr.prototype),{constructor:Va,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new zt,t=new jt,n=new zt,r=new zt;return function(i){pr.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Ha.prototype=Object.assign(Object.create(pr.prototype),{constructor:Ha,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Wa.prototype=Object.assign(Object.create(Ha.prototype),{constructor:Wa,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new zt;return function(t){pr.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(qa.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Xa.prototype={constructor:Xa,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else this._mixBufferRegion(n,i,0,t/(o+=t),r);this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,i<1&&this._mixBufferRegion(n,r,3*t,1-i,t);for(var a=t,s=t+t;a!==s;++a)if(n[a]!==n[a+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r,i){jt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},Qa.prototype={constructor:Qa,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Qa.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else console.error("  trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Qa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Qa.prototype.getValue,_setValue_unbound:Qa.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(Qa.Composite=function(e,t,n){var r=n||Qa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}).prototype={constructor:Qa.Composite,getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Qa.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new Qa.Composite(e,t,n):new Qa(e,t,n)},Qa.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw new Error("cannot parse trackName at all: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return n},Qa.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null}(e.skeleton);if(n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null},Ya.prototype={constructor:Ya,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,u=s.length,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=i[f],p=void 0;if(void 0===d){d=n++,i[f]=d,t.push(h);for(var m=0,v=u;m!==v;++m)s[m].push(new Qa(h,o[m],a[m]))}else if(d<r){p=t[d];var g=--r,y=t[g];for(i[y.uuid]=d,t[d]=y,i[f]=g,t[g]=h,m=0,v=u;m!==v;++m){var b=s[m],_=b[d];b[d]=b[g],void 0===_&&(_=new Qa(h,o[m],a[m])),b[g]=_}}else t[d]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=r[l];if(void 0!==c&&c>=n){var h=n++,f=t[h];r[f.uuid]=c,t[c]=f,r[l]=h,t[h]=u;for(var d=0,p=o;d!==p;++d){var m=i[d],v=m[c];m[c]=m[h],m[h]=v}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<r){var h=--r,f=t[h],d=t[g=--n];i[f.uuid]=c,t[c]=f,i[d.uuid]=h,t[h]=d,t.pop();for(var p=0,m=a;p!==m;++p){var v=(y=o[p])[g];y[c]=y[h],y[h]=v,y.pop()}}else{var g;for(i[(d=t[g=--n]).uuid]=c,t[c]=d,t.pop(),p=0,m=a;p!==m;++p){var y;(y=o[p])[c]=y[g],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[e]=r=i.length,o.push(e),a.push(t),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new Qa(s[c],e,t);return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},Za.prototype={constructor:Za,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=r/i;e.warp(1,i/r,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===ot){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===st;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=ft,r.endingEnd=ft):(r.endingStart=e?this.zeroSlopeAtStart?ft:ht:dt,r.endingEnd=t?this.zeroSlopeAtEnd?ft:ht:dt)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},Ja.prototype={constructor:Ja,clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?ea.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new Za(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?ea.findByName(n,e):e,o=this._actionsByClip[i?i.uuid:e];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(r,e,i,o)}var u=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)u[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Object.assign(Ja.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new Xa(Qa.create(n,f,t&&t._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(r[t]=i={}),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i];e:{for(var l in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Vo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(Ja.prototype,r.prototype),Ka.prototype.clone=function(){return new Ka(void 0===this.value.clone?this.value:this.value.clone())},($a.prototype=Object.create(Nr.prototype)).constructor=$a,$a.prototype.isInstancedBufferGeometry=!0,$a.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},$a.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n)this.addAttribute(r,n[r].clone());for(var i=e.groups,o=0,a=i.length;o<a;o++){var s=i[o];this.addGroup(s.start,s.count,s.materialIndex)}return this},es.prototype={constructor:es,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},ts.prototype={constructor:ts,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},(ns.prototype=Object.create(ts.prototype)).constructor=ns,ns.prototype.isInstancedInterleavedBuffer=!0,ns.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},(rs.prototype=Object.create(br.prototype)).constructor=rs,rs.prototype.isInstancedBufferAttribute=!0,rs.prototype.copy=function(e){return br.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},is.prototype={constructor:is,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return as(e,this,n,t),n.sort(os),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)as(e[r],this,n,t);return n.sort(os),n}},ss.prototype={constructor:ss,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},us.prototype={constructor:us,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(At.clamp(e.y/this.radius,-1,1))),this}},ls.prototype={constructor:ls,set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},(cs.prototype=Object.create(Dr.prototype)).constructor=cs,cs.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},cs.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o].name.match(n);s&&s.length>1&&(r[u=s[1]]||(r[u]={start:1/0,end:-1/0}),o<(l=r[u]).start&&(l.start=o),o>l.end&&(l.end=o),t||(t=u))}for(var u in r){var l;this.createAnimation(u,(l=r[u]).start,l.end,e)}this.firstAnimation=t},cs.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},cs.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},cs.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},cs.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},cs.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},cs.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},cs.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},cs.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},cs.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},cs.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},cs.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.start+At.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%i/i;r.directionBackwards&&(s=1-s),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a):this.morphTargetInfluences[r.currentFrame]=a}}},(hs.prototype=Object.create(pr.prototype)).constructor=hs,hs.prototype.isImmediateRenderObject=!0,(fs.prototype=Object.create(di.prototype)).constructor=fs,fs.prototype.update=function(){var e=new zt,t=new zt,n=new $n;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=f.vertexNormals[d];e.copy(s[f[r[d]]]).applyMatrix4(i),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,g=a.attributes.normal;for(l=0,d=0,p=v.count;d<p;d++)e.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),t.set(g.getX(d),g.getY(d),g.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}return o.needsUpdate=!0,this}}(),(ds.prototype=Object.create(pr.prototype)).constructor=ds,ds.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ds.prototype.update=(Oa=new zt,Ia=new zt,function(){var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Oa.setFromMatrixPosition(this.light.matrixWorld),Ia.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ia.sub(Oa)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}),(ps.prototype=Object.create(di.prototype)).constructor=ps,ps.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},ps.prototype.update=function(){var e=new zt,t=new Gt,n=new Gt;return function(){var r=this.geometry,i=r.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var o=0,a=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(t.multiplyMatrices(n,s.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(a,e.x,e.y,e.z),t.multiplyMatrices(n,s.parent.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(a+1,e.x,e.y,e.z),a+=2)}r.getAttribute("position").needsUpdate=!0}}(),(ms.prototype=Object.create(Dr.prototype)).constructor=ms,ms.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ms.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(vs.prototype=Object.create(pr.prototype)).constructor=vs,vs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},vs.prototype.update=function(){var e=new zt,t=new zt;return function(){var n=this.children[0],r=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld);var i=t.clone().sub(e);n.lookAt(i),r.lookAt(i)}n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var o=.5*this.light.width,a=.5*this.light.height,s=n.geometry.getAttribute("position"),u=s.array;u[0]=o,u[1]=-a,u[2]=0,u[3]=o,u[4]=a,u[5]=0,u[6]=-o,u[7]=a,u[8]=0,u[9]=-o,u[10]=a,u[11]=0,u[12]=-o,u[13]=-a,u[14]=0,u[15]=o,u[16]=-a,u[17]=0,s.needsUpdate=!0}}(),(gs.prototype=Object.create(pr.prototype)).constructor=gs,gs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},gs.prototype.update=function(){var e=new zt,t=new Ln,n=new Ln;return function(){var r=this.children[0],i=r.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity),n.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),(ys.prototype=Object.create(di.prototype)).constructor=ys,(bs.prototype=Object.create(di.prototype)).constructor=bs,(_s.prototype=Object.create(di.prototype)).constructor=_s,_s.prototype.update=function(){var e=new zt,t=new zt,n=new $n;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),i.setXYZ(u+=1,t.x,t.y,t.z),u+=1}return i.needsUpdate=!0,this}}(),(xs.prototype=Object.create(pr.prototype)).constructor=xs,xs.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},xs.prototype.update=function(){var e=new zt,t=new zt,n=new zt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),(ws.prototype=Object.create(di.prototype)).constructor=ws,ws.prototype.update=function(){var e,t,n=new zt,r=new zr;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=t[i];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),(Es.prototype=Object.create(di.prototype)).constructor=Es,Es.prototype.update=function(){var e=new Jn;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),(Ms.prototype=Object.create(pr.prototype)).constructor=Ms,Ms.prototype.setDirection=(Fa=new zt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Fa.set(e.z,0,-e.x).normalize(),Da=Math.acos(e.y),this.quaternion.setFromAxisAngle(Fa,Da))}),Ms.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Ms.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(Ts.prototype=Object.create(di.prototype)).constructor=Ts;var As=new zt,Cs=new Ss,Rs=new Ss,Ls=new Ss;function Ps(e){this.points=e||[],this.closed=!1}function Os(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Is(e,t,n){this.v0=e,this.v1=t,this.v2=n}function ks(e,t){this.v1=e,this.v2=t}function Ns(e,t,n,r,i,o){fa.call(this,e,t,n,n,r,i,o)}(Ps.prototype=Object.create(la.prototype)).constructor=Ps,Ps.prototype.getPoint=function(e){var t=this.points,n=t.length;n<2&&console.log("duh, you need at least 2 points");var r,i,o,a,s=(n-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/t.length)+1)*t.length:0===l&&u===n-1&&(u=n-2,l=1),this.closed||u>0?r=t[(u-1)%n]:(As.subVectors(t[0],t[1]).add(t[0]),r=As),i=t[u%n],o=t[(u+1)%n],this.closed||u+2<n?a=t[(u+2)%n]:(As.subVectors(t[n-1],t[n-2]).add(t[n-1]),a=As),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,h=Math.pow(r.distanceToSquared(i),c),f=Math.pow(i.distanceToSquared(o),c),d=Math.pow(o.distanceToSquared(a),c);f<1e-4&&(f=1),h<1e-4&&(h=f),d<1e-4&&(d=f),Cs.initNonuniformCatmullRom(r.x,i.x,o.x,a.x,h,f,d),Rs.initNonuniformCatmullRom(r.y,i.y,o.y,a.y,h,f,d),Ls.initNonuniformCatmullRom(r.z,i.z,o.z,a.z,h,f,d)}else if("catmullrom"===this.type){var p=void 0!==this.tension?this.tension:.5;Cs.initCatmullRom(r.x,i.x,o.x,a.x,p),Rs.initCatmullRom(r.y,i.y,o.y,a.y,p),Ls.initCatmullRom(r.z,i.z,o.z,a.z,p)}return new zt(Cs.calc(l),Rs.calc(l),Ls.calc(l))},(Os.prototype=Object.create(la.prototype)).constructor=Os,Os.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,i=this.v3;return new zt(ua(e,t.x,n.x,r.x,i.x),ua(e,t.y,n.y,r.y,i.y),ua(e,t.z,n.z,r.z,i.z))},(Is.prototype=Object.create(la.prototype)).constructor=Is,Is.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new zt(sa(e,t.x,n.x,r.x),sa(e,t.y,n.y,r.y),sa(e,t.z,n.z,r.z))},(ks.prototype=Object.create(la.prototype)).constructor=ks,ks.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new zt;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},(Ns.prototype=Object.create(fa.prototype)).constructor=Ns;var Ds={createMultiMaterialObject:function(e,t){for(var n=new vi,r=0,i=t.length;r<i;r++)n.add(new Dr(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new Gt;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}};function Fs(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new gr(e,t,n,i,o,a)}var Us=0,Bs=1;function js(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new so(e)}function zs(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mi(e,t)}function Gs(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ai(e)}function Vs(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mi(e,t)}function Hs(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new pi(e)}function Ws(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new pi(e)}function qs(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new pi(e)}function Xs(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new zt(e,t,n)}function Qs(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new br(e,t).setDynamic(!0)}function Ys(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new _r(e,t)}function Zs(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new xr(e,t)}function Js(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new wr(e,t)}function Ks(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Er(e,t)}function $s(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Mr(e,t)}function eu(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Tr(e,t)}function tu(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Sr(e,t)}function nu(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ar(e,t)}function ru(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Cr(e,t)}function iu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ps.call(this,e),this.type="catmullrom",this.closed=!0}function ou(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ps.call(this,e),this.type="catmullrom"}function au(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ps.call(this,e),this.type="catmullrom"}function su(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Es(e,t)}function uu(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new di(new Ji(e.geometry),new hi({color:void 0!==t?t:16777215}))}function lu(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new di(new xi(e.geometry),new hi({color:void 0!==t?t:16777215}))}function cu(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new _o(e)}function hu(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new wo(e)}la.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(la.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},iu.prototype=Object.create(Ps.prototype),ou.prototype=Object.create(Ps.prototype),au.prototype=Object.create(Ps.prototype),Object.assign(au.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ys.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(Nn.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Jn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),mr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},At.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign($n.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Gt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new zt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),er.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},jt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(rr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ba.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new zi(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yi(this,e)}}),Object.assign(Ct.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(zt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(Ft.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),kr.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(pr.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(pr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(si.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Gr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(So.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(br.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Nr.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Nr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ka.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Qn.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Ln}}}),Object.defineProperties(co.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Yn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ei.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(ei.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(nr.prototype,{cullFace:{get:function(){return this.renderReverseSided?p:d},set:function(e){var t=e!==d;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Ut.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Ha.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ba).load(e,function(e){t.setBuffer(e)}),this},qa.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var fu={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},du={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new To;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Mo;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function pu(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function mu(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},DKTb:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e})}n.d(t,"a",function(){return r})},DlQD:function(e,t,n){(function(t){!function(t){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||b.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=this.options.tables?n.tables:n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=h(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=h(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=h(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=h(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=h(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag",n._tag).getRegex(),n.blockquote=h(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=v({},n),n.gfm=v({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=h(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=v({},n.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=v({},n.normal,{html:h("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,i,o,a,s,u,l,c,h,f,d,p,m,v,b,_;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:y(o,"\n")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))&&(u={type:"table",header:g(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/\n$/,"").split("\n"):[]}).header.length===u.align.length){for(e=e.substring(o[0].length),d=0;d<u.align.length;d++)u.align[d]=/^ *-+: *$/.test(u.align[d])?"right":/^ *:-+: *$/.test(u.align[d])?"center":/^ *:-+ *$/.test(u.align[d])?"left":null;for(d=0;d<u.cells.length;d++)u.cells[d]=g(u.cells[d],u.header.length);this.tokens.push(u)}else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),this.tokens.push(l={type:"list_start",ordered:v=(a=o[2]).length>1,start:v?+a:"",loose:!1}),c=[],r=!1,m=(o=o[0].match(this.rules.item)).length,d=0;d<m;d++)f=(u=o[d]).length,~(u=u.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(f-=u.length,u=u.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&d!==m-1&&(a===(s=n.bullet.exec(o[d+1])[0])||a.length>1&&s.length>1||(e=o.slice(d+1).join("\n")+e,d=m-1)),i=r||/\n\n(?!\s*$)/.test(u),d!==m-1&&(r="\n"===u.charAt(u.length-1),i||(i=r)),i&&(l.loose=!0),_=void 0,(b=/^\[[ xX]\] /.test(u))&&(_=" "!==u[1],u=u.replace(/^\[[ xX]\] +/,"")),c.push(h={type:"list_item_start",task:b,checked:_,loose:i}),this.tokens.push(h),this.token(u,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(m=c.length,d=0;d<m;d++)c[d].loose=!0;this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),p=o[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:o[2],title:o[3]});else if(t&&(o=this.rules.table.exec(e))&&(u={type:"table",header:g(o[1].replace(/^ *| *\| *$/g,"")),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3]?o[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===u.align.length){for(e=e.substring(o[0].length),d=0;d<u.align.length;d++)u.align[d]=/^ *-+: *$/.test(u.align[d])?"right":/^ *:-+: *$/.test(u.align[d])?"center":/^ *:-+ *$/.test(u.align[d])?"left":null;for(d=0;d<u.cells.length;d++)u.cells[d]=g(u.cells[d].replace(/^ *\| *| *\| *$/g,""),u.header.length);this.tokens.push(u)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function o(e,t){if(this.options=t||b.defaults,this.links=e,this.rules=i.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.rules=this.options.breaks?i.breaks:i.gfm)}function a(e){this.options=e||b.defaults}function s(){}function u(e){this.tokens=[],this.token=null,this.options=e||b.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function h(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function f(e,t){return d[" "+e]||(d[" "+e]=/^[^:]+:\/*[^/]*$/.test(e)?e+"/":y(e,"/",!0)),e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}i._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=h(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=h(i.tag).replace("comment",n._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,i._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=h(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=h(i.reflink).replace("label",i._label).getRegex(),i.normal=v({},i),i.pedantic=v({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=v({},i.normal,{escape:h(i.escape).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",i._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:h(i.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),i.breaks=v({},i.gfm,{br:h(i.br).replace("{2,}","*").getRegex(),text:h(i.gfm.text).replace("{2,}","*").getRegex()}),o.rules=i,o.output=function(e,t,n){return new o(t,n).output(e)},o.prototype.output=function(e){for(var t,n,r,i,a,s,u="";e;)if(a=this.rules.escape.exec(e))e=e.substring(a[0].length),u+=a[1];else if(a=this.rules.autolink.exec(e))e=e.substring(a[0].length),r="@"===a[2]?"mailto:"+(n=l(this.mangle(a[1]))):n=l(a[1]),u+=this.renderer.link(r,null,n);else if(this.inLink||!(a=this.rules.url.exec(e))){if(a=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),e=e.substring(a[0].length),u+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):l(a[0]):a[0];else if(a=this.rules.link.exec(e))e=e.substring(a[0].length),this.inLink=!0,r=a[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],i=t[3]):i="":i=a[3]?a[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),u+=this.outputLink(a,{href:o.escapes(r),title:o.escapes(i)}),this.inLink=!1;else if((a=this.rules.reflink.exec(e))||(a=this.rules.nolink.exec(e))){if(e=e.substring(a[0].length),t=(a[2]||a[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){u+=a[0].charAt(0),e=a[0].substring(1)+e;continue}this.inLink=!0,u+=this.outputLink(a,t),this.inLink=!1}else if(a=this.rules.strong.exec(e))e=e.substring(a[0].length),u+=this.renderer.strong(this.output(a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.em.exec(e))e=e.substring(a[0].length),u+=this.renderer.em(this.output(a[6]||a[5]||a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.code.exec(e))e=e.substring(a[0].length),u+=this.renderer.codespan(l(a[2].trim(),!0));else if(a=this.rules.br.exec(e))e=e.substring(a[0].length),u+=this.renderer.br();else if(a=this.rules.del.exec(e))e=e.substring(a[0].length),u+=this.renderer.del(this.output(a[1]));else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),u+=this.renderer.text(l(this.smartypants(a[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{do{s=a[0],a[0]=this.rules._backpedal.exec(a[0])[0]}while(s!==a[0]);e=e.substring(a[0].length),"@"===a[2]?r="mailto:"+(n=l(a[0])):(n=l(a[0]),r="www."===a[1]?"http://"+n:n),u+=this.renderer.link(r,null,n)}return u},o.escapes=function(e){return e?e.replace(o.rules._escapes,"$1"):e},o.prototype.outputLink=function(e,t){var n=t.href,r=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,l(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},a.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+l(t,!0)+'">'+(n?e:l(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(c(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!p.test(e)&&(e=f(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return n}var i='<a href="'+l(e)+'"';return t&&(i+=' title="'+t+'"'),i+">"+n+"</a>"},a.prototype.image=function(e,t,n){this.options.baseUrl&&!p.test(e)&&(e=f(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},a.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},u.parse=function(e,t){return new u(t).parse(e)},u.prototype.parse=function(e){this.inline=new o(e.links,this.options),this.inlineText=new o(e.links,v({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},u.prototype.next=function(){return this.token=this.tokens.pop()},u.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},u.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},u.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",o="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var a=this.token.ordered,s=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a,s);case"list_item_start":o="";var u=this.token.loose;for(this.token.task&&(o+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)o+=u||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(o);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var d={},p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function v(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var i=e.charAt(e.length-r-1);if(i!==t||n){if(i===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function b(e,t,n){if(void 0===e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null);var i,o,a=(t=v({},b.defaults,t||{})).highlight,s=0;try{i=r.lex(e,t)}catch(e){return n(e)}o=i.length;var c=function(e){if(e)return t.highlight=a,n(e);var r;try{r=u.parse(i,t)}catch(t){e=t}return t.highlight=a,e?n(e):n(null,r)};if(!a||a.length<3)return c();if(delete t.highlight,!o)return c();for(;s<i.length;s++)!function(e){"code"!==e.type?--o||c():a(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--o||c():(e.text=n,e.escaped=!0,void(--o||c()))})}(i[s])}else try{return t&&(t=v({},b.defaults,t)),u.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||b.defaults).silent)return"<p>An error occurred:</p><pre>"+l(e.message+"",!0)+"</pre>";throw e}}m.exec=m,b.options=b.setOptions=function(e){return v(b.defaults,e),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=u,b.parser=u.parse,b.Renderer=a,b.TextRenderer=s,b.Lexer=r,b.lexer=r.lex,b.InlineLexer=o,b.inlineLexer=o.output,b.parse=b,e.exports=b}(this||"undefined"!=typeof window&&window)}).call(this,n("yLpj"))},DwVV:function(e,t,n){var r=n("wZPa").expandPrefixedName;function i(e,t){if(!(this instanceof i))return new i(e,t);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._prefixes=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),this.defaultGraph=t.defaultGraph||"http://example.org/#defaultGraph",e&&this.addTriples(e)}i.prototype={get size(){var e=this._size;if(null!==e)return e;var t,n,r=this._graphs;for(var i in r)for(var o in t=r[i].subjects)for(var a in n=t[o])e+=Object.keys(n[a]).length;return this._size=e},_addToIndex:function(e,t,n,r){var i=e[t]||(e[t]={}),o=i[n]||(i[n]={}),a=r in o;return a||(o[r]=null),!a},_removeFromIndex:function(e,t,n,r){var i,o=e[t],a=o[n];for(i in delete a[r],a)return;for(i in delete o[n],o)return;delete e[t]},_findInIndex:function(e,t,n,r,i,o,a,s){var u,l,c,h=[],f=!t+!n+!r>1?Object.keys(this._ids):this._entities;for(var d in t&&((u=e,e={})[t]=u[t]),e){var p=f[d];if(l=e[d])for(var m in n&&((u=l,l={})[n]=u[n]),l){var v=f[m];if(c=l[m])for(var g=(r?r in c?[r]:[]:Object.keys(c)),y=g.length-1;y>=0;y--){var b={subject:"",predicate:"",object:"",graph:s};b[i]=p,b[o]=v,b[a]=f[g[y]],h.push(b)}}}return h},_countInIndex:function(e,t,n,r){var i,o,a,s=0;for(var u in t&&((i=e,e={})[t]=i[t]),e)if(o=e[u])for(var l in n&&((i=o,o={})[n]=i[n]),o)(a=o[l])&&(r?r in a&&s++:s+=Object.keys(a).length);return s},addTriple:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject);var i=this._graphs[r=r||this.defaultGraph];i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),t=o[t]||(o[a[++this._id]=t]=this._id),n=o[n]||(o[a[++this._id]=n]=this._id);var s=this._addToIndex(i.subjects,e,t,n);return this._addToIndex(i.predicates,t,n,e),this._addToIndex(i.objects,n,e,t),this._size=null,s},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),r=r||this.defaultGraph;var i,o,a,s=this._ids,u=this._graphs;if(!(e=s[e]))return!1;if(!(t=s[t]))return!1;if(!(n=s[n]))return!1;if(!(i=u[r]))return!1;if(!(o=i.subjects[e]))return!1;if(!(a=o[t]))return!1;if(!(n in a))return!1;for(e in this._removeFromIndex(i.subjects,e,t,n),this._removeFromIndex(i.predicates,t,n,e),this._removeFromIndex(i.objects,n,e,t),null!==this._size&&this._size--,i.subjects)return!0;return delete u[r],!0},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,n,i){var o=this._prefixes;return this.findByIRI(r(e,o),r(t,o),r(n,o),r(i,o))},findByIRI:function(e,t,n,r){var i,o,a,s,u=[],l={},c=this._ids;for(var h in r?l[r]=this._graphs[r]:l=this._graphs,l)if(i=l[h]){if(e&&!(o=c[e]))return u;if(t&&!(a=c[t]))return u;if(n&&!(s=c[n]))return u;u.push(o?s?this._findInIndex(i.objects,s,o,a,"object","subject","predicate",h):this._findInIndex(i.subjects,o,a,null,"subject","predicate","object",h):a?this._findInIndex(i.predicates,a,s,null,"predicate","object","subject",h):s?this._findInIndex(i.objects,s,null,null,"object","subject","predicate",h):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",h))}return 1===u.length?u[0]:u.concat.apply([],u)},count:function(e,t,n,i){var o=this._prefixes;return this.countByIRI(r(e,o),r(t,o),r(n,o),r(i,o))},countByIRI:function(e,t,n,r){var i=this._graphs[r=r||this.defaultGraph],o=this._ids;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:n&&!(n=o[n])?0:e?n?this._countInIndex(i.objects,n,e,t):this._countInIndex(i.subjects,e,t,n):t?this._countInIndex(i.predicates,t,n,e):this._countInIndex(i.objects,n,e,t):0},createBlankNode:function(e){var t,n;if(e)for(t=e="_:"+e,n=1;this._ids[t];)t=e+n++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,t}},e.exports=i},Ehmk:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r,i=n("eihs");function o(){try{return r.apply(this,arguments)}catch(e){return i.a.e=e,i.a}}function a(e){return r=e,o}},"En8+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},FFOo:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSG"),i=n("2Bdj"),o=n("6ahw"),a=n("pugT"),s=n("L/V9"),u=n("iLxQ"),l=n("DKTb"),c=function(e){function t(t,n,r){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=o.a;break;case 1:if(!t){i.destination=o.a;break}if("object"==typeof t){if(f(t)){var a=t[s.a]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new h(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new h(i,t,n,r)}return i}return r.__extends(t,e),t.prototype[s.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e),this._unsubscribeParentSubscription())},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._addParentTeardownLogic=function(e){e!==this&&(this._parentSubscription=this.add(e))},t.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(a.a),h=function(e){function t(t,n,r,a){var s,u=e.call(this)||this;u._parentSubscriber=t;var l=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(l=Object.create(n),Object(i.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=a,u}return r.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw e;Object(l.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return u.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(l.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c);function f(e){return e instanceof c||"_addParentTeardownLogic"in e&&e[s.a]}},Fxb1:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("6blF"),i=n("+tJ4"),o=n("S5XQ"),a=n("u67D"),s=n("JcRv"),u=n("2ePl"),l=n("/WYv"),c=n("McSo"),h=n("En8+"),f=n("xTla"),d=function(e){if(e instanceof r.a)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[f.a])return Object(s.a)(e);if(Object(u.a)(e))return Object(i.a)(e);if(Object(l.a)(e))return Object(o.a)(e);if(e&&"function"==typeof e[h.a])return Object(a.a)(e);var t=Object(c.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},GYWy:function(e,t,n){(function(e,r){var i;!function(r){var o,a=2147483647,s=36,u=1,l=26,c=38,h=700,f=72,d=128,p="-",m=/^xn--/,v=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=s-u,_=Math.floor,x=String.fromCharCode;function w(e){throw new RangeError(y[e])}function E(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function M(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+E((e=e.replace(g,".")).split("."),t).join(".")}function T(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function S(e){return E(e,function(e){var t="";return e>65535&&(t+=x((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+x(e)}).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function C(e,t,n){var r=0;for(e=n?_(e/h):e>>1,e+=_(e/t);e>b*l>>1;r+=s)e=_(e/b);return _(r+(b+1)*e/(e+c))}function R(e){var t,n,r,i,o,c,h,m,v,g,y,b=[],x=e.length,E=0,M=d,T=f;for((n=e.lastIndexOf(p))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&w("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<x;){for(o=E,c=1,h=s;i>=x&&w("invalid-input"),((m=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:s)>=s||m>_((a-E)/c))&&w("overflow"),E+=m*c,!(m<(v=h<=T?u:h>=T+l?l:h-T));h+=s)c>_(a/(g=s-v))&&w("overflow"),c*=g;T=C(E-o,t=b.length+1,0==o),_(E/t)>a-M&&w("overflow"),M+=_(E/t),E%=t,b.splice(E++,0,M)}return S(b)}function L(e){var t,n,r,i,o,c,h,m,v,g,y,b,E,M,S,R=[];for(b=(e=T(e)).length,t=d,n=0,o=f,c=0;c<b;++c)(y=e[c])<128&&R.push(x(y));for(r=i=R.length,i&&R.push(p);r<b;){for(h=a,c=0;c<b;++c)(y=e[c])>=t&&y<h&&(h=y);for(h-t>_((a-n)/(E=r+1))&&w("overflow"),n+=(h-t)*E,t=h,c=0;c<b;++c)if((y=e[c])<t&&++n>a&&w("overflow"),y==t){for(m=n,v=s;!(m<(g=v<=o?u:v>=o+l?l:v-o));v+=s)R.push(x(A(g+(S=m-g)%(M=s-g),0))),m=_(S/M);R.push(x(A(m,0))),o=C(n,E,r==i),n=0,++r}++n,++t}return R.join("")}o={version:"1.4.1",ucs2:{decode:T,encode:S},decode:R,encode:L,toASCII:function(e){return M(e,function(e){return v.test(e)?"xn--"+L(e):e})},toUnicode:function(e){return M(e,function(e){return m.test(e)?R(e.slice(4).toLowerCase()):e})}},void 0===(i=(function(){return o}).call(t,n,t,e))||(e.exports=i)}()}).call(this,n("YuTi")(e),n("yLpj"))},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){for(var t,n=l(e),r=n[0],a=n[1],s=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),u=0,c=a>0?r-4:r,h=0;h<c;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,s[u++]=255&t),1===a&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o=[],a=t;a<n;a+=3)o.push(r[(i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},IUTb:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("6blF"),i=n("pugT"),o=n("+tJ4");function a(e,t){return new r.a(t?function(n){var r=new i.a,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(o.a)(e))}},J78i:function(e,t,n){"use strict";e.exports=o;var r=n("sZro"),i=n("Onz0");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:(function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}).bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("P7XM"),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},JPgR:function(e,t,n){var r=n("lJCZ"),i=n("CxY0"),o=e.exports;for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);function s(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=s(e),r.request.call(this,e,t)},o.get=function(e,t){return e=s(e),r.get.call(this,e,t)}},JcRv:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("xTla"),i=function(e){return function(t){var n=e[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},K9Ia:function(e,t,n){"use strict";var r=n("mrSG"),i=n("6blF"),o=n("FFOo"),a=n("pugT");function s(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}s.prototype=Object.create(Error.prototype);var u=s,l=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(a.a),c=n("L/V9");n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f});var h=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.__extends(t,e),t}(o.a),f=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.__extends(t,e),t.prototype[c.a]=function(){return new h(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new u;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new u;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new u;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new u;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new u;return this.hasError?(e.error(this.thrownError),a.a.EMPTY):this.isStopped?(e.complete(),a.a.EMPTY):(this.observers.push(e),new l(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.a),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.a.EMPTY},t}(f)},KQVv:function(e,t,n){var r=n("v+EB").NetworkTransport,i=n("eSX4").RVN3Parser,o=n("PZbR").JSONLDParser,a=n("thjG"),s=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":i.parser,"text/n3":i.parser,"application/ld+json":o.parser,"application/json":o.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences)for(var t in this.precedences=e.precedences,e.parsers)a.include(this.precedences,t)||this.precedences.push(t);this.acceptHeaderValue="";for(var n=0;n<this.precedences.length;n++)this.acceptHeaderValue=0!=n?this.acceptHeaderValue+","+this.precedences[n]:this.acceptHeaderValue+this.precedences[n]};s.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},s.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],n=0;n<this.precedences.length;n++)this.precedences[n]!=e&&t.push(this.precedences[n]);this.precedences=t},s.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},s.prototype.load=function(e,t,n){var i=this;r.load(e,this.acceptHeaderValue,function(r,o){if(r)n(r);else{var a=o.headers["Content-Type"]||o.headers["content-type"],s=o.data;if(null!=a){for(var u in a=a.split(";")[0],i.parsers)if(-1!=u.indexOf("/")){var l=u.split("/");if("*"===l[1]){if(-1!=a.indexOf(l[0]))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},n)}else{if(-1!=a.indexOf(u))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},n);if(-1!=a.indexOf(l[1]))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},n)}}else if(-1!=a.indexOf(u))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},n);n(new Error("Unknown media type : "+a))}else n(new Error("Uknown media type"))}})},s.prototype.loadFromFile=function(e,t,r,i){try{var o=this;n(!function(){var e=new Error('Cannot find module "fs"');throw e.code="MODULE_NOT_FOUND",e}()).readFile(r.split("file:/")[1],function(n,a){n?i(n):(a=a.toString("utf8"),o.tryToParse(e,t,a,{documentURI:r},i))})}catch(e){i(e)}},s.prototype.tryToParse=function(e,t,n,r,i){try{"string"==typeof n&&(n=a.normalizeUnicodeLiterals(n)),e.parse(n,t,r,i)}catch(e){console.log(e.message),console.log(e.stack),i(e)}},e.exports={RDFLoader:s}},"L/V9":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},LGOv:function(e,t,n){e.exports=n("3BRs")},LYgx:function(e,t,n){var r=n("YPnX").QuadIndex,i=n("thjG");QuadBackend=function(e,t){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=e.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var n=this;i.eachSeries(this.indices,function(e,t){new r({order:n.treeOrder,componentOrder:n.componentOrders[e]},function(r){n.indexMap[e]=r,t()})},function(){t(n)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,n=0;n<QuadBackend.allIndices.length;n++)for(var r=QuadBackend.allIndices[n],o=QuadBackend.componentOrders[r],a=0;a<o.length&&!1!==i.include(t,o[a]);a++)if(a==t.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(e,t){var n=this;i.eachSeries(this.indices,function(t,r){n.indexMap[t].insert(e,function(){r()})},function(){t(!0)})},QuadBackend.prototype.range=function(e,t){var n=this._indexForPattern(e),r=this.indexMap[n];null!=r&&r.range(e,function(e){t(e)})},QuadBackend.prototype.search=function(e,t){var n=this.indexMap.SPOG;null!=n&&n.search(e,function(e){t(null!=e)})},QuadBackend.prototype.delete=function(e,t){var n=this;i.eachSeries(this.indices,function(t,r){n.indexMap[t].delete(e,function(){r()})},function(){t(!0)})},QuadBackend.prototype.clear=function(e){var t=this;i.eachSeries(this.indices,function(e,n){new r({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(r){t.indexMap[e]=r,n()})},function(){e(!0)})},e.exports.QuadBackend=QuadBackend},LvDl:function(e,t,n){(function(e,r){var i;(function(){var o,a=200,s="Expected a function",u="__lodash_placeholder__",l=1,c=2,h=4,f=1,d=2,p=1,m=2,v=4,g=8,y=16,b=32,_=64,x=128,w=256,E=512,M=800,T=16,S=1/0,A=9007199254740991,C=1.7976931348623157e308,R=NaN,L=4294967295,P=L-1,O=L>>>1,I=[["ary",x],["bind",p],["bindKey",m],["curry",g],["curryRight",y],["flip",E],["partial",b],["partialRight",_],["rearg",w]],k="[object Arguments]",N="[object Array]",D="[object AsyncFunction]",F="[object Boolean]",U="[object Date]",B="[object DOMException]",j="[object Error]",z="[object Function]",G="[object GeneratorFunction]",V="[object Map]",H="[object Number]",W="[object Null]",q="[object Object]",X="[object Proxy]",Q="[object RegExp]",Y="[object Set]",Z="[object String]",J="[object Symbol]",K="[object Undefined]",$="[object WeakMap]",ee="[object ArrayBuffer]",te="[object DataView]",ne="[object Float32Array]",re="[object Float64Array]",ie="[object Int8Array]",oe="[object Int16Array]",ae="[object Int32Array]",se="[object Uint8Array]",ue="[object Uint8ClampedArray]",le="[object Uint16Array]",ce="[object Uint32Array]",he=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,de=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39);/g,me=/[&<>"']/g,ve=RegExp(pe.source),ge=RegExp(me.source),ye=/<%-([\s\S]+?)%>/g,be=/<%([\s\S]+?)%>/g,_e=/<%=([\s\S]+?)%>/g,xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Me=/[\\^$.*+?()[\]{}|]/g,Te=RegExp(Me.source),Se=/^\s+|\s+$/g,Ae=/^\s+/,Ce=/\s+$/,Re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ie=/\\(\\)?/g,ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ne=/\w*$/,De=/^[-+]0x[0-9a-f]+$/i,Fe=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,Be=/^0o[0-7]+$/i,je=/^(?:0|[1-9]\d*)$/,ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ge=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,He="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",We="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qe="["+We+"]",Xe="["+He+"]",Qe="\\d+",Ye="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ze="[^\\ud800-\\udfff"+We+Qe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Je="\\ud83c[\\udffb-\\udfff]",Ke="[^\\ud800-\\udfff]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",et="[\\ud800-\\udbff][\\udc00-\\udfff]",tt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",nt="(?:"+Ye+"|"+Ze+")",rt="(?:"+tt+"|"+Ze+")",it="(?:"+Xe+"|"+Je+")?",ot="[\\ufe0e\\ufe0f]?"+it+"(?:\\u200d(?:"+[Ke,$e,et].join("|")+")[\\ufe0e\\ufe0f]?"+it+")*",at="(?:"+["[\\u2700-\\u27bf]",$e,et].join("|")+")"+ot,st="(?:"+[Ke+Xe+"?",Xe,$e,et,"[\\ud800-\\udfff]"].join("|")+")",ut=RegExp("['\u2019]","g"),lt=RegExp(Xe,"g"),ct=RegExp(Je+"(?="+Je+")|"+st+ot,"g"),ht=RegExp([tt+"?"+Ye+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[qe,tt,"$"].join("|")+")",rt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[qe,tt+nt,"$"].join("|")+")",tt+"?"+nt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",tt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qe,at].join("|"),"g"),ft=RegExp("[\\u200d\\ud800-\\udfff"+He+"\\ufe0e\\ufe0f]"),dt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mt=-1,vt={};vt[ne]=vt[re]=vt[ie]=vt[oe]=vt[ae]=vt[se]=vt[ue]=vt[le]=vt[ce]=!0,vt[k]=vt[N]=vt[ee]=vt[F]=vt[te]=vt[U]=vt[j]=vt[z]=vt[V]=vt[H]=vt[q]=vt[Q]=vt[Y]=vt[Z]=vt[$]=!1;var gt={};gt[k]=gt[N]=gt[ee]=gt[te]=gt[F]=gt[U]=gt[ne]=gt[re]=gt[ie]=gt[oe]=gt[ae]=gt[V]=gt[H]=gt[q]=gt[Q]=gt[Y]=gt[Z]=gt[J]=gt[se]=gt[ue]=gt[le]=gt[ce]=!0,gt[j]=gt[z]=gt[$]=!1;var yt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bt=parseFloat,_t=parseInt,xt="object"==typeof e&&e&&e.Object===Object&&e,wt="object"==typeof self&&self&&self.Object===Object&&self,Et=xt||wt||Function("return this")(),Mt="object"==typeof t&&t&&!t.nodeType&&t,Tt=Mt&&"object"==typeof r&&r&&!r.nodeType&&r,St=Tt&&Tt.exports===Mt,At=St&&xt.process,Ct=function(){try{return Tt&&Tt.require&&Tt.require("util").types||At&&At.binding&&At.binding("util")}catch(e){}}(),Rt=Ct&&Ct.isArrayBuffer,Lt=Ct&&Ct.isDate,Pt=Ct&&Ct.isMap,Ot=Ct&&Ct.isRegExp,It=Ct&&Ct.isSet,kt=Ct&&Ct.isTypedArray;function Nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Dt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function jt(e,t){return!(null==e||!e.length)&&Zt(e,t,0)>-1}function zt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Gt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Vt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ht(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Wt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function qt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Xt=en("length");function Qt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Yt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Zt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Yt(e,Kt,n)}function Jt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Kt(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?rn(e,t)/n:R}function en(e){return function(t){return null==t?o:t[e]}}function tn(e){return function(t){return null==e?o:e[t]}}function nn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function rn(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function on(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function an(e){return function(t){return e(t)}}function sn(e,t){return Gt(t,function(t){return e[t]})}function un(e,t){return e.has(t)}function ln(e,t){for(var n=-1,r=e.length;++n<r&&Zt(t,e[n],0)>-1;);return n}function cn(e,t){for(var n=e.length;n--&&Zt(t,e[n],0)>-1;);return n}var hn=tn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),fn=tn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function dn(e){return"\\"+yt[e]}function pn(e){return ft.test(e)}function mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function vn(e,t){return function(n){return e(t(n))}}function gn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==u||(e[n]=u,o[i++]=n)}return o}function yn(e,t){return"__proto__"==t?o:e[t]}function bn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function _n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function xn(e){return pn(e)?function(e){for(var t=ct.lastIndex=0;ct.test(e);)++t;return t}(e):Xt(e)}function wn(e){return pn(e)?function(e){return e.match(ct)||[]}(e):function(e){return e.split("")}(e)}var En=tn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Mn=function e(t){var n,r=(t=null==t?Et:Mn.defaults(Et.Object(),t,Mn.pick(Et,pt))).Array,i=t.Date,He=t.Error,We=t.Function,qe=t.Math,Xe=t.Object,Qe=t.RegExp,Ye=t.String,Ze=t.TypeError,Je=r.prototype,Ke=Xe.prototype,$e=t["__core-js_shared__"],et=We.prototype.toString,tt=Ke.hasOwnProperty,nt=0,rt=(n=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",it=Ke.toString,ot=et.call(Xe),at=Et._,st=Qe("^"+et.call(tt).replace(Me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=St?t.Buffer:o,ft=t.Symbol,yt=t.Uint8Array,xt=ct?ct.allocUnsafe:o,wt=vn(Xe.getPrototypeOf,Xe),Mt=Xe.create,Tt=Ke.propertyIsEnumerable,At=Je.splice,Ct=ft?ft.isConcatSpreadable:o,Xt=ft?ft.iterator:o,tn=ft?ft.toStringTag:o,Tn=function(){try{var e=Mo(Xe,"defineProperty");return e({},"",{}),e}catch(e){}}(),Sn=t.clearTimeout!==Et.clearTimeout&&t.clearTimeout,An=i&&i.now!==Et.Date.now&&i.now,Cn=t.setTimeout!==Et.setTimeout&&t.setTimeout,Rn=qe.ceil,Ln=qe.floor,Pn=Xe.getOwnPropertySymbols,On=ct?ct.isBuffer:o,In=t.isFinite,kn=Je.join,Nn=vn(Xe.keys,Xe),Dn=qe.max,Fn=qe.min,Un=i.now,Bn=t.parseInt,jn=qe.random,zn=Je.reverse,Gn=Mo(t,"DataView"),Vn=Mo(t,"Map"),Hn=Mo(t,"Promise"),Wn=Mo(t,"Set"),qn=Mo(t,"WeakMap"),Xn=Mo(Xe,"create"),Qn=qn&&new qn,Yn={},Zn=Yo(Gn),Jn=Yo(Vn),Kn=Yo(Hn),$n=Yo(Wn),er=Yo(qn),tr=ft?ft.prototype:o,nr=tr?tr.valueOf:o,rr=tr?tr.toString:o;function ir(e){if(fs(e)&&!ts(e)&&!(e instanceof ur)){if(e instanceof sr)return e;if(tt.call(e,"__wrapped__"))return Zo(e)}return new sr(e)}var or=function(){function e(){}return function(t){if(!hs(t))return{};if(Mt)return Mt(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function ar(){}function sr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function lr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function cr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new hr;++t<n;)this.add(e[t])}function dr(e){var t=this.__data__=new cr(e);this.size=t.size}function pr(e,t){var n=ts(e),r=!n&&es(e),i=!n&&!r&&os(e),o=!n&&!r&&!i&&_s(e),a=n||r||i||o,s=a?on(e.length,Ye):[],u=s.length;for(var l in e)!t&&!tt.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Po(l,u))||s.push(l);return s}function mr(e){var t=e.length;return t?e[li(0,t-1)]:o}function vr(e,t,n){(n===o||Ja(e[t],n))&&(n!==o||t in e)||xr(e,t,n)}function gr(e,t,n){var r=e[t];tt.call(e,t)&&Ja(r,n)&&(n!==o||t in e)||xr(e,t,n)}function yr(e,t){for(var n=e.length;n--;)if(Ja(e[n][0],t))return n;return-1}function br(e,t,n,r){return Cr(e,function(e,i,o){t(r,e,n(e),o)}),r}function _r(e,t){return e&&Gi(t,Gs(t),e)}function xr(e,t,n){"__proto__"==t&&Tn?Tn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function wr(e,t){for(var n=-1,i=t.length,a=r(i),s=null==e;++n<i;)a[n]=s?o:Fs(e,t[n]);return a}function Er(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function Mr(e,t,n,r,i,a){var s,u=t&l,f=t&c,d=t&h;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!hs(e))return e;var p=ts(e);if(p){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return zi(e,s)}else{var m=Ao(e),v=m==z||m==G;if(os(e))return Ni(e,u);if(m==q||m==k||v&&!i){if(s=f||v?{}:Ro(e),!u)return f?function(e,t){return Gi(e,So(e),t)}(e,function(t,n){return t&&Gi(e,Vs(e),t)}(s)):function(e,t){return Gi(e,To(e),t)}(e,_r(s,e))}else{if(!gt[m])return i?e:{};s=function(e,t,n){var r,i,o=e.constructor;switch(t){case ee:return Di(e);case F:case U:return new o(+e);case te:return function(e,t){var n=t?Di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ne:case re:case ie:case oe:case ae:case se:case ue:case le:case ce:return Fi(e,n);case V:return new o;case H:case Z:return new o(e);case Q:return(i=new(r=e).constructor(r.source,Ne.exec(r))).lastIndex=r.lastIndex,i;case Y:return new o;case J:return nr?Xe(nr.call(e)):{}}}(e,m,u)}}a||(a=new dr);var g=a.get(e);if(g)return g;if(a.set(e,s),gs(e))return e.forEach(function(r){s.add(Mr(r,t,n,r,e,a))}),s;if(ds(e))return e.forEach(function(r,i){s.set(i,Mr(r,t,n,i,e,a))}),s;var y=p?o:(d?f?go:vo:f?Vs:Gs)(e);return Ft(y||e,function(r,i){y&&(r=e[i=r]),gr(s,i,Mr(r,t,n,i,e,a))}),s}function Tr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Xe(e);r--;){var i=n[r],a=e[i];if(a===o&&!(i in e)||!(0,t[i])(a))return!1}return!0}function Sr(e,t,n){if("function"!=typeof e)throw new Ze(s);return Go(function(){e.apply(o,n)},t)}function Ar(e,t,n,r){var i=-1,o=jt,s=!0,u=e.length,l=[],c=t.length;if(!u)return l;n&&(t=Gt(t,an(n))),r?(o=zt,s=!1):t.length>=a&&(o=un,s=!1,t=new fr(t));e:for(;++i<u;){var h=e[i],f=null==n?h:n(h);if(h=r||0!==h?h:0,s&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(h)}else o(t,f,r)||l.push(h)}return l}ir.templateSettings={escape:ye,evaluate:be,interpolate:_e,variable:"",imports:{_:ir}},(ir.prototype=ar.prototype).constructor=ir,(sr.prototype=or(ar.prototype)).constructor=sr,(ur.prototype=or(ar.prototype)).constructor=ur,lr.prototype.clear=function(){this.__data__=Xn?Xn(null):{},this.size=0},lr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},lr.prototype.get=function(e){var t=this.__data__;if(Xn){var n=t[e];return"__lodash_hash_undefined__"===n?o:n}return tt.call(t,e)?t[e]:o},lr.prototype.has=function(e){var t=this.__data__;return Xn?t[e]!==o:tt.call(t,e)},lr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Xn&&t===o?"__lodash_hash_undefined__":t,this},cr.prototype.clear=function(){this.__data__=[],this.size=0},cr.prototype.delete=function(e){var t=this.__data__,n=yr(t,e);return!(n<0||(n==t.length-1?t.pop():At.call(t,n,1),--this.size,0))},cr.prototype.get=function(e){var t=this.__data__,n=yr(t,e);return n<0?o:t[n][1]},cr.prototype.has=function(e){return yr(this.__data__,e)>-1},cr.prototype.set=function(e,t){var n=this.__data__,r=yr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},hr.prototype.clear=function(){this.size=0,this.__data__={hash:new lr,map:new(Vn||cr),string:new lr}},hr.prototype.delete=function(e){var t=wo(this,e).delete(e);return this.size-=t?1:0,t},hr.prototype.get=function(e){return wo(this,e).get(e)},hr.prototype.has=function(e){return wo(this,e).has(e)},hr.prototype.set=function(e,t){var n=wo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},fr.prototype.add=fr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},fr.prototype.has=function(e){return this.__data__.has(e)},dr.prototype.clear=function(){this.__data__=new cr,this.size=0},dr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},dr.prototype.get=function(e){return this.__data__.get(e)},dr.prototype.has=function(e){return this.__data__.has(e)},dr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof cr){var r=n.__data__;if(!Vn||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new hr(r)}return n.set(e,t),this.size=n.size,this};var Cr=Wi(Dr),Rr=Wi(Fr,!0);function Lr(e,t){var n=!0;return Cr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Pr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(u===o?s==s&&!bs(s):n(s,u)))var u=s,l=a}return l}function Or(e,t){var n=[];return Cr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ir(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Lo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Ir(s,t-1,n,r,i):Vt(i,s):r||(i[i.length]=s)}return i}var kr=qi(),Nr=qi(!0);function Dr(e,t){return e&&kr(e,t,Gs)}function Fr(e,t){return e&&Nr(e,t,Gs)}function Ur(e,t){return Bt(t,function(t){return us(e[t])})}function Br(e,t){for(var n=0,r=(t=Pi(t,e)).length;null!=e&&n<r;)e=e[Qo(t[n++])];return n&&n==r?e:o}function jr(e,t,n){var r=t(e);return ts(e)?r:Vt(r,n(e))}function zr(e){return null==e?e===o?K:W:tn&&tn in Xe(e)?function(e){var t=tt.call(e,tn),n=e[tn];try{e[tn]=o;var r=!0}catch(e){}var i=it.call(e);return r&&(t?e[tn]=n:delete e[tn]),i}(e):function(e){return it.call(e)}(e)}function Gr(e,t){return e>t}function Vr(e,t){return null!=e&&tt.call(e,t)}function Hr(e,t){return null!=e&&t in Xe(e)}function Wr(e,t,n){for(var i=n?zt:jt,a=e[0].length,s=e.length,u=s,l=r(s),c=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Gt(f,an(t))),c=Fn(f.length,c),l[u]=!n&&(t||a>=120&&f.length>=120)?new fr(u&&f):o}f=e[0];var d=-1,p=l[0];e:for(;++d<a&&h.length<c;){var m=f[d],v=t?t(m):m;if(m=n||0!==m?m:0,!(p?un(p,v):i(h,v,n))){for(u=s;--u;){var g=l[u];if(!(g?un(g,v):i(e[u],v,n)))continue e}p&&p.push(v),h.push(m)}}return h}function qr(e,t,n){var r=null==(e=jo(e,t=Pi(t,e)))?e:e[Qo(sa(t))];return null==r?o:Nt(r,e,n)}function Xr(e){return fs(e)&&zr(e)==k}function Qr(e,t,n,r,i){return e===t||(null==e||null==t||!fs(e)&&!fs(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var s=ts(e),u=ts(t),l=s?N:Ao(e),c=u?N:Ao(t),h=(l=l==k?q:l)==q,p=(c=c==k?q:c)==q,m=l==c;if(m&&os(e)){if(!os(t))return!1;s=!0,h=!1}if(m&&!h)return a||(a=new dr),s||_s(e)?po(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(l){case te:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ee:return!(e.byteLength!=t.byteLength||!o(new yt(e),new yt(t)));case F:case U:case H:return Ja(+e,+t);case j:return e.name==t.name&&e.message==t.message;case Q:case Z:return e==t+"";case V:var s=mn;case Y:if(s||(s=bn),e.size!=t.size&&!(r&f))return!1;var u=a.get(e);if(u)return u==t;r|=d,a.set(e,t);var c=po(s(e),s(t),r,i,o,a);return a.delete(e),c;case J:if(nr)return nr.call(e)==nr.call(t)}return!1}(e,t,0,n,r,i,a);if(!(n&f)){var v=h&&tt.call(e,"__wrapped__"),g=p&&tt.call(t,"__wrapped__");if(v||g){var y=v?e.value():e,b=g?t.value():t;return a||(a=new dr),i(y,b,n,r,a)}}return!!m&&(a||(a=new dr),function(e,t,n,r,i,a){var s=n&f,u=vo(e),l=u.length;if(l!=vo(t).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in t:tt.call(t,h)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);for(var m=s;++c<l;){var v=e[h=u[c]],g=t[h];if(r)var y=s?r(g,v,h,t,e,a):r(v,g,h,e,t,a);if(!(y===o?v===g||i(v,g,n,r,a):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,i,a))}(e,t,n,r,Qr,i))}function Yr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Xe(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var l=(u=n[i])[0],c=e[l],h=u[1];if(s&&u[2]){if(c===o&&!(l in e))return!1}else{var p=new dr;if(r)var m=r(c,h,l,e,t,p);if(!(m===o?Qr(h,c,f|d,r,p):m))return!1}}return!0}function Zr(e){return!(!hs(e)||rt&&rt in e)&&(us(e)?st:Ue).test(Yo(e))}function Jr(e){return"function"==typeof e?e:null==e?pu:"object"==typeof e?ts(e)?ni(e[0],e[1]):ti(e):Eu(e)}function Kr(e){if(!Do(e))return Nn(e);var t=[];for(var n in Xe(e))tt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function $r(e,t){return e<t}function ei(e,t){var n=-1,i=rs(e)?r(e.length):[];return Cr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function ti(e){var t=Eo(e);return 1==t.length&&t[0][2]?Uo(t[0][0],t[0][1]):function(n){return n===e||Yr(n,e,t)}}function ni(e,t){return Io(e)&&Fo(t)?Uo(Qo(e),t):function(n){var r=Fs(n,e);return r===o&&r===t?Us(n,e):Qr(t,r,f|d)}}function ri(e,t,n,r,i){e!==t&&kr(t,function(a,s){if(hs(a))i||(i=new dr),function(e,t,n,r,i,a,s){var u=yn(e,n),l=yn(t,n),c=s.get(l);if(c)vr(e,n,c);else{var h=a?a(u,l,n+"",e,t,s):o,f=h===o;if(f){var d=ts(l),p=!d&&os(l),m=!d&&!p&&_s(l);h=l,d||p||m?ts(u)?h=u:is(u)?h=zi(u):p?(f=!1,h=Ni(l,!0)):m?(f=!1,h=Fi(l,!0)):h=[]:ms(l)||es(l)?(h=u,es(u)?h=Cs(u):(!hs(u)||r&&us(u))&&(h=Ro(l))):f=!1}f&&(s.set(l,h),i(h,l,r,a,s),s.delete(l)),vr(e,n,h)}}(e,t,s,n,ri,r,i);else{var u=r?r(yn(e,s),a,s+"",e,t,i):o;u===o&&(u=a),vr(e,s,u)}},Vs)}function ii(e,t){var n=e.length;if(n)return Po(t+=t<0?n:0,n)?e[t]:o}function oi(e,t,n){var r=-1;return t=Gt(t.length?t:[pu],an(xo())),function(e,t){var r=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=Ui(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)});r--;)e[r]=e[r].value;return e}(ei(e,function(e,n,i){return{criteria:Gt(t,function(t){return t(e)}),index:++r,value:e}}))}function ai(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Br(e,a);n(s,a)&&fi(o,Pi(a,e),s)}return o}function si(e,t,n,r){var i=r?Jt:Zt,o=-1,a=t.length,s=e;for(e===t&&(t=zi(t)),n&&(s=Gt(e,an(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&At.call(s,u,1),At.call(e,u,1);return e}function ui(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Po(i)?At.call(e,i,1):Ei(e,i)}}return e}function li(e,t){return e+Ln(jn()*(t-e+1))}function ci(e,t){var n="";if(!e||t<1||t>A)return n;do{t%2&&(n+=e),(t=Ln(t/2))&&(e+=e)}while(t);return n}function hi(e,t){return Vo(Bo(e,t,pu),e+"")}function fi(e,t,n,r){if(!hs(e))return e;for(var i=-1,a=(t=Pi(t,e)).length,s=a-1,u=e;null!=u&&++i<a;){var l=Qo(t[i]),c=n;if(i!=s){var h=u[l];(c=r?r(h,l,u):o)===o&&(c=hs(h)?h:Po(t[i+1])?[]:{})}gr(u,l,c),u=u[l]}return e}var di=Qn?function(e,t){return Qn.set(e,t),e}:pu,pi=Tn?function(e,t){return Tn(e,"toString",{configurable:!0,enumerable:!1,value:hu(t),writable:!0})}:pu;function mi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function vi(e,t){var n;return Cr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function gi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=O){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!bs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return yi(e,t,pu,n)}function yi(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,s=t!=t,u=null===t,l=bs(t),c=t===o;i<a;){var h=Ln((i+a)/2),f=n(e[h]),d=f!==o,p=null===f,m=f==f,v=bs(f);if(s)var g=r||m;else g=c?m&&(r||d):u?m&&d&&(r||!p):l?m&&d&&!p&&(r||!v):!p&&!v&&(r?f<=t:f<t);g?i=h+1:a=h}return Fn(a,P)}function bi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ja(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function _i(e){return"number"==typeof e?e:bs(e)?R:+e}function xi(e){if("string"==typeof e)return e;if(ts(e))return Gt(e,xi)+"";if(bs(e))return rr?rr.call(e):"";var t=e+"";return"0"==t&&1/e==-S?"-0":t}function wi(e,t,n){var r=-1,i=jt,o=e.length,s=!0,u=[],l=u;if(n)s=!1,i=zt;else if(o>=a){var c=t?null:so(e);if(c)return bn(c);s=!1,i=un,l=new fr}else l=t?[]:u;e:for(;++r<o;){var h=e[r],f=t?t(h):h;if(h=n||0!==h?h:0,s&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),u.push(h)}else i(l,f,n)||(l!==u&&l.push(f),u.push(h))}return u}function Ei(e,t){return null==(e=jo(e,t=Pi(t,e)))||delete e[Qo(sa(t))]}function Mi(e,t,n,r){return fi(e,t,n(Br(e,t)),r)}function Ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?mi(e,r?0:o,r?o+1:i):mi(e,r?o+1:0,r?i:o)}function Si(e,t){var n=e;return n instanceof ur&&(n=n.value()),Ht(t,function(e,t){return t.func.apply(t.thisArg,Vt([e],t.args))},n)}function Ai(e,t,n){var i=e.length;if(i<2)return i?wi(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Ar(a[o]||s,e[u],t,n));return wi(Ir(a,1),t,n)}function Ci(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;)n(s,e[r],r<a?t[r]:o);return s}function Ri(e){return is(e)?e:[]}function Li(e){return"function"==typeof e?e:pu}function Pi(e,t){return ts(e)?e:Io(e,t)?[e]:Xo(Rs(e))}var Oi=hi;function Ii(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:mi(e,t,n)}var ki=Sn||function(e){return Et.clearTimeout(e)};function Ni(e,t){if(t)return e.slice();var n=e.length,r=xt?xt(n):new e.constructor(n);return e.copy(r),r}function Di(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t}function Fi(e,t){var n=t?Di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ui(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,a=bs(e),s=t!==o,u=null===t,l=t==t,c=bs(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!l)return-1}return 0}function Bi(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,l=t.length,c=Dn(a-s,0),h=r(l+c),f=!i;++u<l;)h[u]=t[u];for(;++o<s;)(f||o<a)&&(h[n[o]]=e[o]);for(;c--;)h[u++]=e[o++];return h}function ji(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,l=-1,c=t.length,h=Dn(a-u,0),f=r(h+c),d=!i;++o<h;)f[o]=e[o];for(var p=o;++l<c;)f[p+l]=t[l];for(;++s<u;)(d||o<a)&&(f[p+n[s]]=e[o++]);return f}function zi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Gi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=r?r(n[u],e[u],u,n,e):o;l===o&&(l=e[u]),i?xr(n,u,l):gr(n,u,l)}return n}function Vi(e,t){return function(n,r){var i=ts(n)?Dt:br,o=t?t():{};return i(n,e,xo(r,2),o)}}function Hi(e){return hi(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&Oo(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=Xe(t);++r<i;){var u=n[r];u&&e(t,u,r,a)}return t})}function Wi(e,t){return function(n,r){if(null==n)return n;if(!rs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Xe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function qi(e){return function(t,n,r){for(var i=-1,o=Xe(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Xi(e){return function(t){var n=pn(t=Rs(t))?wn(t):o,r=n?n[0]:t.charAt(0),i=n?Ii(n,1).join(""):t.slice(1);return r[e]()+i}}function Qi(e){return function(t){return Ht(uu(eu(t).replace(ut,"")),e,"")}}function Yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=or(e.prototype),r=e.apply(n,t);return hs(r)?r:n}}function Zi(e){return function(t,n,r){var i=Xe(t);if(!rs(t)){var a=xo(n,3);t=Gs(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function Ji(e){return mo(function(t){var n=t.length,r=n,i=sr.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Ze(s);if(i&&!u&&"wrapper"==bo(a))var u=new sr([],!0)}for(r=u?r:n;++r<n;){var l=bo(a=t[r]),c="wrapper"==l?yo(a):o;u=c&&ko(c[0])&&c[1]==(x|g|b|w)&&!c[4].length&&1==c[9]?u[bo(c[0])].apply(u,c[3]):1==a.length&&ko(a)?u[l]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&ts(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Ki(e,t,n,i,a,s,u,l,c,h){var f=t&x,d=t&p,v=t&m,b=t&(g|y),_=t&E,w=v?o:Yi(e);return function p(){for(var m=arguments.length,g=r(m),y=m;y--;)g[y]=arguments[y];if(b)var x=_o(p),E=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(g,x);if(i&&(g=Bi(g,i,a,b)),s&&(g=ji(g,s,u,b)),m-=E,b&&m<h){var M=gn(g,x);return oo(e,t,Ki,p.placeholder,n,g,M,l,c,h-m)}var T=d?n:this,S=v?T[e]:e;return m=g.length,l?g=function(e,t){for(var n=e.length,r=Fn(t.length,n),i=zi(e);r--;){var a=t[r];e[r]=Po(a,n)?i[a]:o}return e}(g,l):_&&m>1&&g.reverse(),f&&c<m&&(g.length=c),this&&this!==Et&&this instanceof p&&(S=w||Yi(S)),S.apply(T,g)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return Dr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function eo(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=xi(n),r=xi(r)):(n=_i(n),r=_i(r)),i=e(n,r)}return i}}function to(e){return mo(function(t){return t=Gt(t,an(xo())),hi(function(n){var r=this;return e(t,function(e){return Nt(e,r,n)})})})}function no(e,t){var n=(t=t===o?" ":xi(t)).length;if(n<2)return n?ci(t,e):t;var r=ci(t,Rn(e/xn(t)));return pn(t)?Ii(wn(r),0,e).join(""):r.slice(0,e)}function ro(e){return function(t,n,i){return i&&"number"!=typeof i&&Oo(t,n,i)&&(n=i=o),t=Ms(t),n===o?(n=t,t=0):n=Ms(n),function(e,t,n,i){for(var o=-1,a=Dn(Rn((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=i===o?t<n?1:-1:Ms(i),e)}}function io(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=As(t),n=As(n)),e(t,n)}}function oo(e,t,n,r,i,a,s,u,l,c){var h=t&g;t|=h?b:_,(t&=~(h?_:b))&v||(t&=~(p|m));var f=[e,t,i,h?a:o,h?s:o,h?o:a,h?o:s,u,l,c],d=n.apply(o,f);return ko(e)&&zo(d,f),d.placeholder=r,Ho(d,e,t)}function ao(e){var t=qe[e];return function(e,n){if(e=As(e),n=null==n?0:Fn(Ts(n),292)){var r=(Rs(e)+"e").split("e");return+((r=(Rs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var so=Wn&&1/bn(new Wn([,-0]))[1]==S?function(e){return new Wn(e)}:bu;function uo(e){return function(t){var n=Ao(t);return n==V?mn(t):n==Y?_n(t):function(e,t){return Gt(t,function(t){return[t,e[t]]})}(t,e(t))}}function lo(e,t,n,i,a,l,c,h){var f=t&m;if(!f&&"function"!=typeof e)throw new Ze(s);var d=i?i.length:0;if(d||(t&=~(b|_),i=a=o),c=c===o?c:Dn(Ts(c),0),h=h===o?h:Ts(h),d-=a?a.length:0,t&_){var E=i,M=a;i=a=o}var T=f?o:yo(e),S=[e,t,n,i,a,E,M,l,c,h];if(T&&function(e,t){var n=e[1],r=t[1],i=n|r;if(!(i<(p|m|x)||r==x&&n==g||r==x&&n==w&&e[7].length<=t[8]||r==(x|w)&&t[7].length<=t[8]&&n==g))return e;r&p&&(e[2]=t[2],i|=n&p?0:v);var o=t[3];if(o){var a=e[3];e[3]=a?Bi(a,o,t[4]):o,e[4]=a?gn(e[3],u):t[4]}(o=t[5])&&(e[5]=(a=e[5])?ji(a,o,t[6]):o,e[6]=a?gn(e[5],u):t[6]),(o=t[7])&&(e[7]=o),r&x&&(e[8]=null==e[8]?t[8]:Fn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(S,T),e=S[0],t=S[1],n=S[2],i=S[3],a=S[4],!(h=S[9]=S[9]===o?f?0:e.length:Dn(S[9]-d,0))&&t&(g|y)&&(t&=~(g|y)),t&&t!=p)A=t==g||t==y?function(e,t,n){var i=Yi(e);return function a(){for(var s=arguments.length,u=r(s),l=s,c=_o(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:gn(u,c);return(s-=h.length)<n?oo(e,t,Ki,a.placeholder,o,u,h,o,o,n-s):Nt(this&&this!==Et&&this instanceof a?i:e,this,u)}}(e,t,h):t!=b&&t!=(p|b)||a.length?Ki.apply(o,S):function(e,t,n,i){var o=t&p,a=Yi(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),f=this&&this!==Et&&this instanceof t?a:e;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return Nt(f,o?n:this,h)}}(e,t,n,i);else var A=function(e,t,n){var r=t&p,i=Yi(e);return function t(){return(this&&this!==Et&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Ho((T?di:zo)(A,S),e,t)}function co(e,t,n,r){return e===o||Ja(e,Ke[n])&&!tt.call(r,n)?t:e}function ho(e,t,n,r,i,a){return hs(e)&&hs(t)&&(a.set(t,e),ri(e,t,o,ho,a),a.delete(t)),e}function fo(e){return ms(e)?o:e}function po(e,t,n,r,i,a){var s=n&f,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var h=-1,p=!0,m=n&d?new fr:o;for(a.set(e,t),a.set(t,e);++h<u;){var v=e[h],g=t[h];if(r)var y=s?r(g,v,h,t,e,a):r(v,g,h,e,t,a);if(y!==o){if(y)continue;p=!1;break}if(m){if(!qt(t,function(e,t){if(!un(m,t)&&(v===e||i(v,e,n,r,a)))return m.push(t)})){p=!1;break}}else if(v!==g&&!i(v,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function mo(e){return Vo(Bo(e,o,na),e+"")}function vo(e){return jr(e,Gs,To)}function go(e){return jr(e,Vs,So)}var yo=Qn?function(e){return Qn.get(e)}:bu;function bo(e){for(var t=e.name+"",n=Yn[t],r=tt.call(Yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function _o(e){return(tt.call(ir,"placeholder")?ir:e).placeholder}function xo(){var e=ir.iteratee||mu;return e=e===mu?Jr:e,arguments.length?e(arguments[0],arguments[1]):e}function wo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Eo(e){for(var t=Gs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Fo(i)]}return t}function Mo(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Zr(n)?n:o}var To=Pn?function(e){return null==e?[]:(e=Xe(e),Bt(Pn(e),function(t){return Tt.call(e,t)}))}:Su,So=Pn?function(e){for(var t=[];e;)Vt(t,To(e)),e=wt(e);return t}:Su,Ao=zr;function Co(e,t,n){for(var r=-1,i=(t=Pi(t,e)).length,o=!1;++r<i;){var a=Qo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&cs(i)&&Po(a,i)&&(ts(e)||es(e))}function Ro(e){return"function"!=typeof e.constructor||Do(e)?{}:or(wt(e))}function Lo(e){return ts(e)||es(e)||!!(Ct&&e&&e[Ct])}function Po(e,t){var n=typeof e;return!!(t=null==t?A:t)&&("number"==n||"symbol"!=n&&je.test(e))&&e>-1&&e%1==0&&e<t}function Oo(e,t,n){if(!hs(n))return!1;var r=typeof t;return!!("number"==r?rs(n)&&Po(t,n.length):"string"==r&&t in n)&&Ja(n[t],e)}function Io(e,t){if(ts(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!bs(e))||we.test(e)||!xe.test(e)||null!=t&&e in Xe(t)}function ko(e){var t=bo(e),n=ir[t];if("function"!=typeof n||!(t in ur.prototype))return!1;if(e===n)return!0;var r=yo(n);return!!r&&e===r[0]}(Gn&&Ao(new Gn(new ArrayBuffer(1)))!=te||Vn&&Ao(new Vn)!=V||Hn&&"[object Promise]"!=Ao(Hn.resolve())||Wn&&Ao(new Wn)!=Y||qn&&Ao(new qn)!=$)&&(Ao=function(e){var t=zr(e),n=t==q?e.constructor:o,r=n?Yo(n):"";if(r)switch(r){case Zn:return te;case Jn:return V;case Kn:return"[object Promise]";case $n:return Y;case er:return $}return t});var No=$e?us:Au;function Do(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ke)}function Fo(e){return e==e&&!hs(e)}function Uo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in Xe(n))}}function Bo(e,t,n){return t=Dn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=Dn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),Nt(e,this,u)}}function jo(e,t){return t.length<2?e:Br(e,mi(t,0,-1))}var zo=Wo(di),Go=Cn||function(e,t){return Et.setTimeout(e,t)},Vo=Wo(pi);function Ho(e,t,n){var r=t+"";return Vo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Re,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ft(I,function(n){var r="_."+n[0];t&n[1]&&!jt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Le);return t?t[1].split(Pe):[]}(r),n)))}function Wo(e){var t=0,n=0;return function(){var r=Un(),i=T-(r-n);if(n=r,i>0){if(++t>=M)return arguments[0]}else t=0;return e.apply(o,arguments)}}function qo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=li(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Xo=function(e){var t=Wa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ee,function(e,n,r,i){t.push(r?i.replace(Ie,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}();function Qo(e){if("string"==typeof e||bs(e))return e;var t=e+"";return"0"==t&&1/e==-S?"-0":t}function Yo(e){if(null!=e){try{return et.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Zo(e){if(e instanceof ur)return e.clone();var t=new sr(e.__wrapped__,e.__chain__);return t.__actions__=zi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Jo=hi(function(e,t){return is(e)?Ar(e,Ir(t,1,is,!0)):[]}),Ko=hi(function(e,t){var n=sa(t);return is(n)&&(n=o),is(e)?Ar(e,Ir(t,1,is,!0),xo(n,2)):[]}),$o=hi(function(e,t){var n=sa(t);return is(n)&&(n=o),is(e)?Ar(e,Ir(t,1,is,!0),o,n):[]});function ea(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ts(n);return i<0&&(i=Dn(r+i,0)),Yt(e,xo(t,3),i)}function ta(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Ts(n),i=n<0?Dn(r+i,0):Fn(i,r-1)),Yt(e,xo(t,3),i,!0)}function na(e){return null!=e&&e.length?Ir(e,1):[]}function ra(e){return e&&e.length?e[0]:o}var ia=hi(function(e){var t=Gt(e,Ri);return t.length&&t[0]===e[0]?Wr(t):[]}),oa=hi(function(e){var t=sa(e),n=Gt(e,Ri);return t===sa(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Wr(n,xo(t,2)):[]}),aa=hi(function(e){var t=sa(e),n=Gt(e,Ri);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Wr(n,o,t):[]});function sa(e){var t=null==e?0:e.length;return t?e[t-1]:o}var ua=hi(la);function la(e,t){return e&&e.length&&t&&t.length?si(e,t):e}var ca=mo(function(e,t){var n=null==e?0:e.length,r=wr(e,t);return ui(e,Gt(t,function(e){return Po(e,n)?+e:e}).sort(Ui)),r});function ha(e){return null==e?e:zn.call(e)}var fa=hi(function(e){return wi(Ir(e,1,is,!0))}),da=hi(function(e){var t=sa(e);return is(t)&&(t=o),wi(Ir(e,1,is,!0),xo(t,2))}),pa=hi(function(e){var t=sa(e);return t="function"==typeof t?t:o,wi(Ir(e,1,is,!0),o,t)});function ma(e){if(!e||!e.length)return[];var t=0;return e=Bt(e,function(e){if(is(e))return t=Dn(e.length,t),!0}),on(t,function(t){return Gt(e,en(t))})}function va(e,t){if(!e||!e.length)return[];var n=ma(e);return null==t?n:Gt(n,function(e){return Nt(t,o,e)})}var ga=hi(function(e,t){return is(e)?Ar(e,t):[]}),ya=hi(function(e){return Ai(Bt(e,is))}),ba=hi(function(e){var t=sa(e);return is(t)&&(t=o),Ai(Bt(e,is),xo(t,2))}),_a=hi(function(e){var t=sa(e);return t="function"==typeof t?t:o,Ai(Bt(e,is),o,t)}),xa=hi(ma),wa=hi(function(e){var t=e.length,n=t>1?e[t-1]:o;return va(e,n="function"==typeof n?(e.pop(),n):o)});function Ea(e){var t=ir(e);return t.__chain__=!0,t}function Ma(e,t){return t(e)}var Ta=mo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return wr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof ur&&Po(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ma,args:[i],thisArg:o}),new sr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(o),e})):this.thru(i)}),Sa=Vi(function(e,t,n){tt.call(e,n)?++e[n]:xr(e,n,1)}),Aa=Zi(ea),Ca=Zi(ta);function Ra(e,t){return(ts(e)?Ft:Cr)(e,xo(t,3))}function La(e,t){return(ts(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:Rr)(e,xo(t,3))}var Pa=Vi(function(e,t,n){tt.call(e,n)?e[n].push(t):xr(e,n,[t])}),Oa=hi(function(e,t,n){var i=-1,o="function"==typeof t,a=rs(e)?r(e.length):[];return Cr(e,function(e){a[++i]=o?Nt(t,e,n):qr(e,t,n)}),a}),Ia=Vi(function(e,t,n){xr(e,n,t)});function ka(e,t){return(ts(e)?Gt:ei)(e,xo(t,3))}var Na=Vi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Da=hi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Oo(e,t[0],t[1])?t=[]:n>2&&Oo(t[0],t[1],t[2])&&(t=[t[0]]),oi(e,Ir(t,1),[])}),Fa=An||function(){return Et.Date.now()};function Ua(e,t,n){return t=n?o:t,lo(e,x,o,o,o,o,t=e&&null==t?e.length:t)}function Ba(e,t){var n;if("function"!=typeof t)throw new Ze(s);return e=Ts(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var ja=hi(function(e,t,n){var r=p;if(n.length){var i=gn(n,_o(ja));r|=b}return lo(e,r,t,n,i)}),za=hi(function(e,t,n){var r=p|m;if(n.length){var i=gn(n,_o(za));r|=b}return lo(t,r,e,n,i)});function Ga(e,t,n){var r,i,a,u,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ze(s);function m(t){var n=r,a=i;return r=i=o,h=t,u=e.apply(a,n)}function v(e){var n=e-c;return c===o||n>=t||n<0||d&&e-h>=a}function g(){var e=Fa();if(v(e))return y(e);l=Go(g,function(e){var n=t-(e-c);return d?Fn(n,a-(e-h)):n}(e))}function y(e){return l=o,p&&r?m(e):(r=i=o,u)}function b(){var e=Fa(),n=v(e);if(r=arguments,i=this,c=e,n){if(l===o)return function(e){return h=e,l=Go(g,t),f?m(e):u}(c);if(d)return l=Go(g,t),m(c)}return l===o&&(l=Go(g,t)),u}return t=As(t)||0,hs(n)&&(f=!!n.leading,a=(d="maxWait"in n)?Dn(As(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==o&&ki(l),h=0,r=c=i=l=o},b.flush=function(){return l===o?u:y(Fa())},b}var Va=hi(function(e,t){return Sr(e,1,t)}),Ha=hi(function(e,t,n){return Sr(e,As(t)||0,n)});function Wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ze(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wa.Cache||hr),n}function qa(e){if("function"!=typeof e)throw new Ze(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Wa.Cache=hr;var Xa=Oi(function(e,t){var n=(t=1==t.length&&ts(t[0])?Gt(t[0],an(xo())):Gt(Ir(t,1),an(xo()))).length;return hi(function(r){for(var i=-1,o=Fn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Nt(e,this,r)})}),Qa=hi(function(e,t){var n=gn(t,_o(Qa));return lo(e,b,o,t,n)}),Ya=hi(function(e,t){var n=gn(t,_o(Ya));return lo(e,_,o,t,n)}),Za=mo(function(e,t){return lo(e,w,o,o,o,t)});function Ja(e,t){return e===t||e!=e&&t!=t}var Ka=io(Gr),$a=io(function(e,t){return e>=t}),es=Xr(function(){return arguments}())?Xr:function(e){return fs(e)&&tt.call(e,"callee")&&!Tt.call(e,"callee")},ts=r.isArray,ns=Rt?an(Rt):function(e){return fs(e)&&zr(e)==ee};function rs(e){return null!=e&&cs(e.length)&&!us(e)}function is(e){return fs(e)&&rs(e)}var os=On||Au,as=Lt?an(Lt):function(e){return fs(e)&&zr(e)==U};function ss(e){if(!fs(e))return!1;var t=zr(e);return t==j||t==B||"string"==typeof e.message&&"string"==typeof e.name&&!ms(e)}function us(e){if(!hs(e))return!1;var t=zr(e);return t==z||t==G||t==D||t==X}function ls(e){return"number"==typeof e&&e==Ts(e)}function cs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=A}function hs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function fs(e){return null!=e&&"object"==typeof e}var ds=Pt?an(Pt):function(e){return fs(e)&&Ao(e)==V};function ps(e){return"number"==typeof e||fs(e)&&zr(e)==H}function ms(e){if(!fs(e)||zr(e)!=q)return!1;var t=wt(e);if(null===t)return!0;var n=tt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&et.call(n)==ot}var vs=Ot?an(Ot):function(e){return fs(e)&&zr(e)==Q},gs=It?an(It):function(e){return fs(e)&&Ao(e)==Y};function ys(e){return"string"==typeof e||!ts(e)&&fs(e)&&zr(e)==Z}function bs(e){return"symbol"==typeof e||fs(e)&&zr(e)==J}var _s=kt?an(kt):function(e){return fs(e)&&cs(e.length)&&!!vt[zr(e)]},xs=io($r),ws=io(function(e,t){return e<=t});function Es(e){if(!e)return[];if(rs(e))return ys(e)?wn(e):zi(e);if(Xt&&e[Xt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xt]());var t=Ao(e);return(t==V?mn:t==Y?bn:Js)(e)}function Ms(e){return e?(e=As(e))===S||e===-S?(e<0?-1:1)*C:e==e?e:0:0===e?e:0}function Ts(e){var t=Ms(e),n=t%1;return t==t?n?t-n:t:0}function Ss(e){return e?Er(Ts(e),0,L):0}function As(e){if("number"==typeof e)return e;if(bs(e))return R;if(hs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=hs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Se,"");var n=Fe.test(e);return n||Be.test(e)?_t(e.slice(2),n?2:8):De.test(e)?R:+e}function Cs(e){return Gi(e,Vs(e))}function Rs(e){return null==e?"":xi(e)}var Ls=Hi(function(e,t){if(Do(t)||rs(t))Gi(t,Gs(t),e);else for(var n in t)tt.call(t,n)&&gr(e,n,t[n])}),Ps=Hi(function(e,t){Gi(t,Vs(t),e)}),Os=Hi(function(e,t,n,r){Gi(t,Vs(t),e,r)}),Is=Hi(function(e,t,n,r){Gi(t,Gs(t),e,r)}),ks=mo(wr),Ns=hi(function(e,t){e=Xe(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&Oo(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Vs(a),u=-1,l=s.length;++u<l;){var c=s[u],h=e[c];(h===o||Ja(h,Ke[c])&&!tt.call(e,c))&&(e[c]=a[c])}return e}),Ds=hi(function(e){return e.push(o,ho),Nt(Ws,o,e)});function Fs(e,t,n){var r=null==e?o:Br(e,t);return r===o?n:r}function Us(e,t){return null!=e&&Co(e,t,Hr)}var Bs=$i(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=it.call(t)),e[t]=n},hu(pu)),js=$i(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=it.call(t)),tt.call(e,t)?e[t].push(n):e[t]=[n]},xo),zs=hi(qr);function Gs(e){return rs(e)?pr(e):Kr(e)}function Vs(e){return rs(e)?pr(e,!0):function(e){if(!hs(e))return function(e){var t=[];if(null!=e)for(var n in Xe(e))t.push(n);return t}(e);var t=Do(e),n=[];for(var r in e)("constructor"!=r||!t&&tt.call(e,r))&&n.push(r);return n}(e)}var Hs=Hi(function(e,t,n){ri(e,t,n)}),Ws=Hi(function(e,t,n,r){ri(e,t,n,r)}),qs=mo(function(e,t){var n={};if(null==e)return n;var r=!1;t=Gt(t,function(t){return t=Pi(t,e),r||(r=t.length>1),t}),Gi(e,go(e),n),r&&(n=Mr(n,l|c|h,fo));for(var i=t.length;i--;)Ei(n,t[i]);return n}),Xs=mo(function(e,t){return null==e?{}:function(e,t){return ai(e,t,function(t,n){return Us(e,n)})}(e,t)});function Qs(e,t){if(null==e)return{};var n=Gt(go(e),function(e){return[e]});return t=xo(t),ai(e,n,function(e,n){return t(e,n[0])})}var Ys=uo(Gs),Zs=uo(Vs);function Js(e){return null==e?[]:sn(e,Gs(e))}var Ks=Qi(function(e,t,n){return t=t.toLowerCase(),e+(n?$s(t):t)});function $s(e){return su(Rs(e).toLowerCase())}function eu(e){return(e=Rs(e))&&e.replace(ze,hn).replace(lt,"")}var tu=Qi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),nu=Qi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ru=Xi("toLowerCase"),iu=Qi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ou=Qi(function(e,t,n){return e+(n?" ":"")+su(t)}),au=Qi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),su=Xi("toUpperCase");function uu(e,t,n){return e=Rs(e),(t=n?o:t)===o?function(e){return dt.test(e)}(e)?function(e){return e.match(ht)||[]}(e):function(e){return e.match(Oe)||[]}(e):e.match(t)||[]}var lu=hi(function(e,t){try{return Nt(e,o,t)}catch(e){return ss(e)?e:new He(e)}}),cu=mo(function(e,t){return Ft(t,function(t){t=Qo(t),xr(e,t,ja(e[t],e))}),e});function hu(e){return function(){return e}}var fu=Ji(),du=Ji(!0);function pu(e){return e}function mu(e){return Jr("function"==typeof e?e:Mr(e,l))}var vu=hi(function(e,t){return function(n){return qr(n,e,t)}}),gu=hi(function(e,t){return function(n){return qr(e,n,t)}});function yu(e,t,n){var r=Gs(t),i=Ur(t,r);null!=n||hs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ur(t,Gs(t)));var o=!(hs(n)&&"chain"in n&&!n.chain),a=us(e);return Ft(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=zi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Vt([this.value()],arguments))})}),e}function bu(){}var _u=to(Gt),xu=to(Ut),wu=to(qt);function Eu(e){return Io(e)?en(Qo(e)):function(e){return function(t){return Br(t,e)}}(e)}var Mu=ro(),Tu=ro(!0);function Su(){return[]}function Au(){return!1}var Cu,Ru=eo(function(e,t){return e+t},0),Lu=ao("ceil"),Pu=eo(function(e,t){return e/t},1),Ou=ao("floor"),Iu=eo(function(e,t){return e*t},1),ku=ao("round"),Nu=eo(function(e,t){return e-t},0);return ir.after=function(e,t){if("function"!=typeof t)throw new Ze(s);return e=Ts(e),function(){if(--e<1)return t.apply(this,arguments)}},ir.ary=Ua,ir.assign=Ls,ir.assignIn=Ps,ir.assignInWith=Os,ir.assignWith=Is,ir.at=ks,ir.before=Ba,ir.bind=ja,ir.bindAll=cu,ir.bindKey=za,ir.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ts(e)?e:[e]},ir.chain=Ea,ir.chunk=function(e,t,n){t=(n?Oo(e,t,n):t===o)?1:Dn(Ts(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,u=r(Rn(i/t));a<i;)u[s++]=mi(e,a,a+=t);return u},ir.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},ir.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Vt(ts(n)?zi(n):[n],Ir(t,1))},ir.cond=function(e){var t=null==e?0:e.length,n=xo();return e=t?Gt(e,function(e){if("function"!=typeof e[1])throw new Ze(s);return[n(e[0]),e[1]]}):[],hi(function(n){for(var r=-1;++r<t;){var i=e[r];if(Nt(i[0],this,n))return Nt(i[1],this,n)}})},ir.conforms=function(e){return function(e){var t=Gs(e);return function(n){return Tr(n,e,t)}}(Mr(e,l))},ir.constant=hu,ir.countBy=Sa,ir.create=function(e,t){var n=or(e);return null==t?n:_r(n,t)},ir.curry=function e(t,n,r){var i=lo(t,g,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},ir.curryRight=function e(t,n,r){var i=lo(t,y,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},ir.debounce=Ga,ir.defaults=Ns,ir.defaultsDeep=Ds,ir.defer=Va,ir.delay=Ha,ir.difference=Jo,ir.differenceBy=Ko,ir.differenceWith=$o,ir.drop=function(e,t,n){var r=null==e?0:e.length;return r?mi(e,(t=n||t===o?1:Ts(t))<0?0:t,r):[]},ir.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?mi(e,0,(t=r-(t=n||t===o?1:Ts(t)))<0?0:t):[]},ir.dropRightWhile=function(e,t){return e&&e.length?Ti(e,xo(t,3),!0,!0):[]},ir.dropWhile=function(e,t){return e&&e.length?Ti(e,xo(t,3),!0):[]},ir.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Oo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Ts(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Ts(r))<0&&(r+=i),r=n>r?0:Ss(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},ir.filter=function(e,t){return(ts(e)?Bt:Or)(e,xo(t,3))},ir.flatMap=function(e,t){return Ir(ka(e,t),1)},ir.flatMapDeep=function(e,t){return Ir(ka(e,t),S)},ir.flatMapDepth=function(e,t,n){return n=n===o?1:Ts(n),Ir(ka(e,t),n)},ir.flatten=na,ir.flattenDeep=function(e){return null!=e&&e.length?Ir(e,S):[]},ir.flattenDepth=function(e,t){return null!=e&&e.length?Ir(e,t=t===o?1:Ts(t)):[]},ir.flip=function(e){return lo(e,E)},ir.flow=fu,ir.flowRight=du,ir.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},ir.functions=function(e){return null==e?[]:Ur(e,Gs(e))},ir.functionsIn=function(e){return null==e?[]:Ur(e,Vs(e))},ir.groupBy=Pa,ir.initial=function(e){return null!=e&&e.length?mi(e,0,-1):[]},ir.intersection=ia,ir.intersectionBy=oa,ir.intersectionWith=aa,ir.invert=Bs,ir.invertBy=js,ir.invokeMap=Oa,ir.iteratee=mu,ir.keyBy=Ia,ir.keys=Gs,ir.keysIn=Vs,ir.map=ka,ir.mapKeys=function(e,t){var n={};return t=xo(t,3),Dr(e,function(e,r,i){xr(n,t(e,r,i),e)}),n},ir.mapValues=function(e,t){var n={};return t=xo(t,3),Dr(e,function(e,r,i){xr(n,r,t(e,r,i))}),n},ir.matches=function(e){return ti(Mr(e,l))},ir.matchesProperty=function(e,t){return ni(e,Mr(t,l))},ir.memoize=Wa,ir.merge=Hs,ir.mergeWith=Ws,ir.method=vu,ir.methodOf=gu,ir.mixin=yu,ir.negate=qa,ir.nthArg=function(e){return e=Ts(e),hi(function(t){return ii(t,e)})},ir.omit=qs,ir.omitBy=function(e,t){return Qs(e,qa(xo(t)))},ir.once=function(e){return Ba(2,e)},ir.orderBy=function(e,t,n,r){return null==e?[]:(ts(t)||(t=null==t?[]:[t]),ts(n=r?o:n)||(n=null==n?[]:[n]),oi(e,t,n))},ir.over=_u,ir.overArgs=Xa,ir.overEvery=xu,ir.overSome=wu,ir.partial=Qa,ir.partialRight=Ya,ir.partition=Na,ir.pick=Xs,ir.pickBy=Qs,ir.property=Eu,ir.propertyOf=function(e){return function(t){return null==e?o:Br(e,t)}},ir.pull=ua,ir.pullAll=la,ir.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?si(e,t,xo(n,2)):e},ir.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?si(e,t,o,n):e},ir.pullAt=ca,ir.range=Mu,ir.rangeRight=Tu,ir.rearg=Za,ir.reject=function(e,t){return(ts(e)?Bt:Or)(e,qa(xo(t,3)))},ir.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=xo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return ui(e,i),n},ir.rest=function(e,t){if("function"!=typeof e)throw new Ze(s);return hi(e,t=t===o?t:Ts(t))},ir.reverse=ha,ir.sampleSize=function(e,t,n){return t=(n?Oo(e,t,n):t===o)?1:Ts(t),(ts(e)?function(e,t){return qo(zi(e),Er(t,0,e.length))}:function(e,t){var n=Js(e);return qo(n,Er(t,0,n.length))})(e,t)},ir.set=function(e,t,n){return null==e?e:fi(e,t,n)},ir.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:fi(e,t,n,r)},ir.shuffle=function(e){return(ts(e)?function(e){return qo(zi(e))}:function(e){return qo(Js(e))})(e)},ir.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Oo(e,t,n)?(t=0,n=r):(t=null==t?0:Ts(t),n=n===o?r:Ts(n)),mi(e,t,n)):[]},ir.sortBy=Da,ir.sortedUniq=function(e){return e&&e.length?bi(e):[]},ir.sortedUniqBy=function(e,t){return e&&e.length?bi(e,xo(t,2)):[]},ir.split=function(e,t,n){return n&&"number"!=typeof n&&Oo(e,t,n)&&(t=n=o),(n=n===o?L:n>>>0)?(e=Rs(e))&&("string"==typeof t||null!=t&&!vs(t))&&!(t=xi(t))&&pn(e)?Ii(wn(e),0,n):e.split(t,n):[]},ir.spread=function(e,t){if("function"!=typeof e)throw new Ze(s);return t=null==t?0:Dn(Ts(t),0),hi(function(n){var r=n[t],i=Ii(n,0,t);return r&&Vt(i,r),Nt(e,this,i)})},ir.tail=function(e){var t=null==e?0:e.length;return t?mi(e,1,t):[]},ir.take=function(e,t,n){return e&&e.length?mi(e,0,(t=n||t===o?1:Ts(t))<0?0:t):[]},ir.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?mi(e,(t=r-(t=n||t===o?1:Ts(t)))<0?0:t,r):[]},ir.takeRightWhile=function(e,t){return e&&e.length?Ti(e,xo(t,3),!1,!0):[]},ir.takeWhile=function(e,t){return e&&e.length?Ti(e,xo(t,3)):[]},ir.tap=function(e,t){return t(e),e},ir.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ze(s);return hs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ga(e,t,{leading:r,maxWait:t,trailing:i})},ir.thru=Ma,ir.toArray=Es,ir.toPairs=Ys,ir.toPairsIn=Zs,ir.toPath=function(e){return ts(e)?Gt(e,Qo):bs(e)?[e]:zi(Xo(Rs(e)))},ir.toPlainObject=Cs,ir.transform=function(e,t,n){var r=ts(e),i=r||os(e)||_s(e);if(t=xo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:hs(e)&&us(o)?or(wt(e)):{}}return(i?Ft:Dr)(e,function(e,r,i){return t(n,e,r,i)}),n},ir.unary=function(e){return Ua(e,1)},ir.union=fa,ir.unionBy=da,ir.unionWith=pa,ir.uniq=function(e){return e&&e.length?wi(e):[]},ir.uniqBy=function(e,t){return e&&e.length?wi(e,xo(t,2)):[]},ir.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?wi(e,o,t):[]},ir.unset=function(e,t){return null==e||Ei(e,t)},ir.unzip=ma,ir.unzipWith=va,ir.update=function(e,t,n){return null==e?e:Mi(e,t,Li(n))},ir.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Mi(e,t,Li(n),r)},ir.values=Js,ir.valuesIn=function(e){return null==e?[]:sn(e,Vs(e))},ir.without=ga,ir.words=uu,ir.wrap=function(e,t){return Qa(Li(t),e)},ir.xor=ya,ir.xorBy=ba,ir.xorWith=_a,ir.zip=xa,ir.zipObject=function(e,t){return Ci(e||[],t||[],gr)},ir.zipObjectDeep=function(e,t){return Ci(e||[],t||[],fi)},ir.zipWith=wa,ir.entries=Ys,ir.entriesIn=Zs,ir.extend=Ps,ir.extendWith=Os,yu(ir,ir),ir.add=Ru,ir.attempt=lu,ir.camelCase=Ks,ir.capitalize=$s,ir.ceil=Lu,ir.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=As(n))==n?n:0),t!==o&&(t=(t=As(t))==t?t:0),Er(As(e),t,n)},ir.clone=function(e){return Mr(e,h)},ir.cloneDeep=function(e){return Mr(e,l|h)},ir.cloneDeepWith=function(e,t){return Mr(e,l|h,t="function"==typeof t?t:o)},ir.cloneWith=function(e,t){return Mr(e,h,t="function"==typeof t?t:o)},ir.conformsTo=function(e,t){return null==t||Tr(e,t,Gs(t))},ir.deburr=eu,ir.defaultTo=function(e,t){return null==e||e!=e?t:e},ir.divide=Pu,ir.endsWith=function(e,t,n){e=Rs(e),t=xi(t);var r=e.length,i=n=n===o?r:Er(Ts(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},ir.eq=Ja,ir.escape=function(e){return(e=Rs(e))&&ge.test(e)?e.replace(me,fn):e},ir.escapeRegExp=function(e){return(e=Rs(e))&&Te.test(e)?e.replace(Me,"\\$&"):e},ir.every=function(e,t,n){var r=ts(e)?Ut:Lr;return n&&Oo(e,t,n)&&(t=o),r(e,xo(t,3))},ir.find=Aa,ir.findIndex=ea,ir.findKey=function(e,t){return Qt(e,xo(t,3),Dr)},ir.findLast=Ca,ir.findLastIndex=ta,ir.findLastKey=function(e,t){return Qt(e,xo(t,3),Fr)},ir.floor=Ou,ir.forEach=Ra,ir.forEachRight=La,ir.forIn=function(e,t){return null==e?e:kr(e,xo(t,3),Vs)},ir.forInRight=function(e,t){return null==e?e:Nr(e,xo(t,3),Vs)},ir.forOwn=function(e,t){return e&&Dr(e,xo(t,3))},ir.forOwnRight=function(e,t){return e&&Fr(e,xo(t,3))},ir.get=Fs,ir.gt=Ka,ir.gte=$a,ir.has=function(e,t){return null!=e&&Co(e,t,Vr)},ir.hasIn=Us,ir.head=ra,ir.identity=pu,ir.includes=function(e,t,n,r){e=rs(e)?e:Js(e),n=n&&!r?Ts(n):0;var i=e.length;return n<0&&(n=Dn(i+n,0)),ys(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Zt(e,t,n)>-1},ir.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ts(n);return i<0&&(i=Dn(r+i,0)),Zt(e,t,i)},ir.inRange=function(e,t,n){return t=Ms(t),n===o?(n=t,t=0):n=Ms(n),function(e,t,n){return e>=Fn(t,n)&&e<Dn(t,n)}(e=As(e),t,n)},ir.invoke=zs,ir.isArguments=es,ir.isArray=ts,ir.isArrayBuffer=ns,ir.isArrayLike=rs,ir.isArrayLikeObject=is,ir.isBoolean=function(e){return!0===e||!1===e||fs(e)&&zr(e)==F},ir.isBuffer=os,ir.isDate=as,ir.isElement=function(e){return fs(e)&&1===e.nodeType&&!ms(e)},ir.isEmpty=function(e){if(null==e)return!0;if(rs(e)&&(ts(e)||"string"==typeof e||"function"==typeof e.splice||os(e)||_s(e)||es(e)))return!e.length;var t=Ao(e);if(t==V||t==Y)return!e.size;if(Do(e))return!Kr(e).length;for(var n in e)if(tt.call(e,n))return!1;return!0},ir.isEqual=function(e,t){return Qr(e,t)},ir.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Qr(e,t,o,n):!!r},ir.isError=ss,ir.isFinite=function(e){return"number"==typeof e&&In(e)},ir.isFunction=us,ir.isInteger=ls,ir.isLength=cs,ir.isMap=ds,ir.isMatch=function(e,t){return e===t||Yr(e,t,Eo(t))},ir.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Yr(e,t,Eo(t),n)},ir.isNaN=function(e){return ps(e)&&e!=+e},ir.isNative=function(e){if(No(e))throw new He("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zr(e)},ir.isNil=function(e){return null==e},ir.isNull=function(e){return null===e},ir.isNumber=ps,ir.isObject=hs,ir.isObjectLike=fs,ir.isPlainObject=ms,ir.isRegExp=vs,ir.isSafeInteger=function(e){return ls(e)&&e>=-A&&e<=A},ir.isSet=gs,ir.isString=ys,ir.isSymbol=bs,ir.isTypedArray=_s,ir.isUndefined=function(e){return e===o},ir.isWeakMap=function(e){return fs(e)&&Ao(e)==$},ir.isWeakSet=function(e){return fs(e)&&"[object WeakSet]"==zr(e)},ir.join=function(e,t){return null==e?"":kn.call(e,t)},ir.kebabCase=tu,ir.last=sa,ir.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Ts(n))<0?Dn(r+i,0):Fn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Yt(e,Kt,i,!0)},ir.lowerCase=nu,ir.lowerFirst=ru,ir.lt=xs,ir.lte=ws,ir.max=function(e){return e&&e.length?Pr(e,pu,Gr):o},ir.maxBy=function(e,t){return e&&e.length?Pr(e,xo(t,2),Gr):o},ir.mean=function(e){return $t(e,pu)},ir.meanBy=function(e,t){return $t(e,xo(t,2))},ir.min=function(e){return e&&e.length?Pr(e,pu,$r):o},ir.minBy=function(e,t){return e&&e.length?Pr(e,xo(t,2),$r):o},ir.stubArray=Su,ir.stubFalse=Au,ir.stubObject=function(){return{}},ir.stubString=function(){return""},ir.stubTrue=function(){return!0},ir.multiply=Iu,ir.nth=function(e,t){return e&&e.length?ii(e,Ts(t)):o},ir.noConflict=function(){return Et._===this&&(Et._=at),this},ir.noop=bu,ir.now=Fa,ir.pad=function(e,t,n){e=Rs(e);var r=(t=Ts(t))?xn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return no(Ln(i),n)+e+no(Rn(i),n)},ir.padEnd=function(e,t,n){e=Rs(e);var r=(t=Ts(t))?xn(e):0;return t&&r<t?e+no(t-r,n):e},ir.padStart=function(e,t,n){e=Rs(e);var r=(t=Ts(t))?xn(e):0;return t&&r<t?no(t-r,n)+e:e},ir.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Bn(Rs(e).replace(Ae,""),t||0)},ir.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Oo(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Ms(e),t===o?(t=e,e=0):t=Ms(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=jn();return Fn(e+i*(t-e+bt("1e-"+((i+"").length-1))),t)}return li(e,t)},ir.reduce=function(e,t,n){var r=ts(e)?Ht:nn,i=arguments.length<3;return r(e,xo(t,4),n,i,Cr)},ir.reduceRight=function(e,t,n){var r=ts(e)?Wt:nn,i=arguments.length<3;return r(e,xo(t,4),n,i,Rr)},ir.repeat=function(e,t,n){return t=(n?Oo(e,t,n):t===o)?1:Ts(t),ci(Rs(e),t)},ir.replace=function(){var e=arguments,t=Rs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},ir.result=function(e,t,n){var r=-1,i=(t=Pi(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[Qo(t[r])];a===o&&(r=i,a=n),e=us(a)?a.call(e):a}return e},ir.round=ku,ir.runInContext=e,ir.sample=function(e){return(ts(e)?mr:function(e){return mr(Js(e))})(e)},ir.size=function(e){if(null==e)return 0;if(rs(e))return ys(e)?xn(e):e.length;var t=Ao(e);return t==V||t==Y?e.size:Kr(e).length},ir.snakeCase=iu,ir.some=function(e,t,n){var r=ts(e)?qt:vi;return n&&Oo(e,t,n)&&(t=o),r(e,xo(t,3))},ir.sortedIndex=function(e,t){return gi(e,t)},ir.sortedIndexBy=function(e,t,n){return yi(e,t,xo(n,2))},ir.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=gi(e,t);if(r<n&&Ja(e[r],t))return r}return-1},ir.sortedLastIndex=function(e,t){return gi(e,t,!0)},ir.sortedLastIndexBy=function(e,t,n){return yi(e,t,xo(n,2),!0)},ir.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=gi(e,t,!0)-1;if(Ja(e[n],t))return n}return-1},ir.startCase=ou,ir.startsWith=function(e,t,n){return e=Rs(e),n=null==n?0:Er(Ts(n),0,e.length),t=xi(t),e.slice(n,n+t.length)==t},ir.subtract=Nu,ir.sum=function(e){return e&&e.length?rn(e,pu):0},ir.sumBy=function(e,t){return e&&e.length?rn(e,xo(t,2)):0},ir.template=function(e,t,n){var r=ir.templateSettings;n&&Oo(e,t,n)&&(t=o),e=Rs(e),t=Os({},t,r,co);var i,a,s=Os({},t.imports,r.imports,co),u=Gs(s),l=sn(s,u),c=0,h=t.interpolate||Ge,f="__p += '",d=Qe((t.escape||Ge).source+"|"+h.source+"|"+(h===_e?ke:Ge).source+"|"+(t.evaluate||Ge).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++mt+"]")+"\n";e.replace(d,function(t,n,r,o,s,u){return r||(r=o),f+=e.slice(c,u).replace(Ve,dn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),f+="';\n";var m=t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(he,""):f).replace(fe,"$1").replace(de,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=lu(function(){return We(u,p+"return "+f).apply(o,l)});if(v.source=f,ss(v))throw v;return v},ir.times=function(e,t){if((e=Ts(e))<1||e>A)return[];var n=L,r=Fn(e,L);t=xo(t),e-=L;for(var i=on(r,t);++n<e;)t(n);return i},ir.toFinite=Ms,ir.toInteger=Ts,ir.toLength=Ss,ir.toLower=function(e){return Rs(e).toLowerCase()},ir.toNumber=As,ir.toSafeInteger=function(e){return e?Er(Ts(e),-A,A):0===e?e:0},ir.toString=Rs,ir.toUpper=function(e){return Rs(e).toUpperCase()},ir.trim=function(e,t,n){if((e=Rs(e))&&(n||t===o))return e.replace(Se,"");if(!e||!(t=xi(t)))return e;var r=wn(e),i=wn(t);return Ii(r,ln(r,i),cn(r,i)+1).join("")},ir.trimEnd=function(e,t,n){if((e=Rs(e))&&(n||t===o))return e.replace(Ce,"");if(!e||!(t=xi(t)))return e;var r=wn(e);return Ii(r,0,cn(r,wn(t))+1).join("")},ir.trimStart=function(e,t,n){if((e=Rs(e))&&(n||t===o))return e.replace(Ae,"");if(!e||!(t=xi(t)))return e;var r=wn(e);return Ii(r,ln(r,wn(t))).join("")},ir.truncate=function(e,t){var n=30,r="...";if(hs(t)){var i="separator"in t?t.separator:i;n="length"in t?Ts(t.length):n,r="omission"in t?xi(t.omission):r}var a=(e=Rs(e)).length;if(pn(e)){var s=wn(e);a=s.length}if(n>=a)return e;var u=n-xn(r);if(u<1)return r;var l=s?Ii(s,0,u).join(""):e.slice(0,u);if(i===o)return l+r;if(s&&(u+=l.length-u),vs(i)){if(e.slice(u).search(i)){var c,h=l;for(i.global||(i=Qe(i.source,Rs(Ne.exec(i))+"g")),i.lastIndex=0;c=i.exec(h);)var f=c.index;l=l.slice(0,f===o?u:f)}}else if(e.indexOf(xi(i),u)!=u){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},ir.unescape=function(e){return(e=Rs(e))&&ve.test(e)?e.replace(pe,En):e},ir.uniqueId=function(e){var t=++nt;return Rs(e)+t},ir.upperCase=au,ir.upperFirst=su,ir.each=Ra,ir.eachRight=La,ir.first=ra,yu(ir,(Cu={},Dr(ir,function(e,t){tt.call(ir.prototype,t)||(Cu[t]=e)}),Cu),{chain:!1}),ir.VERSION="4.17.10",Ft(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ir[e].placeholder=ir}),Ft(["drop","take"],function(e,t){ur.prototype[e]=function(n){n=n===o?1:Dn(Ts(n),0);var r=this.__filtered__&&!t?new ur(this):this.clone();return r.__filtered__?r.__takeCount__=Fn(n,r.__takeCount__):r.__views__.push({size:Fn(n,L),type:e+(r.__dir__<0?"Right":"")}),r},ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ft(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:xo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Ft(["head","last"],function(e,t){var n="take"+(t?"Right":"");ur.prototype[e]=function(){return this[n](1).value()[0]}}),Ft(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ur.prototype[e]=function(){return this.__filtered__?new ur(this):this[n](1)}}),ur.prototype.compact=function(){return this.filter(pu)},ur.prototype.find=function(e){return this.filter(e).head()},ur.prototype.findLast=function(e){return this.reverse().find(e)},ur.prototype.invokeMap=hi(function(e,t){return"function"==typeof e?new ur(this):this.map(function(n){return qr(n,e,t)})}),ur.prototype.reject=function(e){return this.filter(qa(xo(e)))},ur.prototype.slice=function(e,t){e=Ts(e);var n=this;return n.__filtered__&&(e>0||t<0)?new ur(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=Ts(t))<0?n.dropRight(-t):n.take(t-e)),n)},ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ur.prototype.toArray=function(){return this.take(L)},Dr(ur.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=ir[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(ir.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof ur,l=s[0],c=u||ts(t),h=function(e){var t=i.apply(ir,Vt([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=a&&!f,p=u&&!this.__actions__.length;if(!a&&c){t=p?t:new ur(this);var m=e.apply(t,s);return m.__actions__.push({func:Ma,args:[h],thisArg:o}),new sr(m,f)}return d&&p?e.apply(this,s):(m=this.thru(h),d?r?m.value()[0]:m.value():m)})}),Ft(["pop","push","shift","sort","splice","unshift"],function(e){var t=Je[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);ir.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(ts(i)?i:[],e)}return this[n](function(n){return t.apply(ts(n)?n:[],e)})}}),Dr(ur.prototype,function(e,t){var n=ir[t];if(n){var r=n.name+"";(Yn[r]||(Yn[r]=[])).push({name:t,func:n})}}),Yn[Ki(o,m).name]=[{name:"wrapper",func:o}],ur.prototype.clone=function(){var e=new ur(this.__wrapped__);return e.__actions__=zi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=zi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=zi(this.__views__),e},ur.prototype.reverse=function(){if(this.__filtered__){var e=new ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ts(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Fn(t,e+a);break;case"takeRight":e=Dn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=Fn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Si(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var m=-1,v=e[l+=t];++m<h;){var g=c[m],y=g.type,b=(0,g.iteratee)(v);if(2==y)v=b;else if(!b){if(1==y)continue e;break e}}p[f++]=v}return p},ir.prototype.at=Ta,ir.prototype.chain=function(){return Ea(this)},ir.prototype.commit=function(){return new sr(this.value(),this.__chain__)},ir.prototype.next=function(){this.__values__===o&&(this.__values__=Es(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},ir.prototype.plant=function(e){for(var t,n=this;n instanceof ar;){var r=Zo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},ir.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof ur){var t=e;return this.__actions__.length&&(t=new ur(this)),(t=t.reverse()).__actions__.push({func:Ma,args:[ha],thisArg:o}),new sr(t,this.__chain__)}return this.thru(ha)},ir.prototype.toJSON=ir.prototype.valueOf=ir.prototype.value=function(){return Si(this.__wrapped__,this.__actions__)},ir.prototype.first=ir.prototype.head,Xt&&(ir.prototype[Xt]=function(){return this}),ir}();Et._=Mn,(i=(function(){return Mn}).call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n("yLpj"),n("YuTi")(e))},MCLT:function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<o;u=r[++n])m(u)||!_(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,i){if(y(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return g(i)||(i=c(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var a,s=Object.keys(n),u=(a={},s.forEach(function(e,t){a[e]=!0}),a);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),w(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(E(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return h(n)}var l,_="",M=!1,T=["{","}"];return d(n)&&(M=!0,T=["[","]"]),E(n)&&(_=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),w(n)&&(_=" "+h(n)),0!==s.length||M&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=M?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)A(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}(e,n,r,u,s):s.map(function(t){return f(e,n,r,u,t,M)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,_,T)):T[0]+_+T[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=e.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),A(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===M(e)}function _(e){return"object"==typeof e&&null!==e}function x(e){return _(e)&&"[object Date]"===M(e)}function w(e){return _(e)&&("[object Error]"===M(e)||e instanceof Error)}function E(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(o)&&(o=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=_,t.isDate=x,t.isError=w,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[T((e=new Date).getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":"),[e.getDate(),S[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n("P7XM"),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n("yLpj"),n("8oxB"))},MGBS:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n("FFOo").a)},McSo:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}n.d(t,"a",function(){return r})},Mkpm:function(e,t){e.exports=i,e.exports.parse=i,e.exports.stringify=function e(t){function n(e){return e.join(" ")}function r(e){return e.map(n).join(", ")}function i(e){return e.map(r).map(o).join(", ")}function o(e){return"("+e+")"}switch("Feature"===t.type&&(t=t.geometry),t.type){case"Point":return"POINT ("+n(t.coordinates)+")";case"LineString":return"LINESTRING ("+r(t.coordinates)+")";case"Polygon":return"POLYGON ("+i(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+r(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+t.coordinates.map(i).map(o).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+i(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(e).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var n=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,r=new RegExp("^"+n.source+"(\\s"+n.source+"){1,}");function i(e){var t,n=e.split(";"),i=n.pop(),o=(n.shift()||"").split("=").pop(),a=0;function s(e){var t=i.substring(a).match(e);return t?(a+=t[0].length,t[0]):null}function u(){s(/^\s*/)}function l(){u();for(var e,t=0,n=[],i=[n],o=n;e=s(/^(\()/)||s(/^(\))/)||s(/^(,)/)||s(r);){if("("===e)i.push(o),i[i.length-1].push(o=[]),t++;else if(")"===e){if(0===o.length)return null;if(!(o=i.pop()))return null;if(0==--t)break}else if(","===e)i[i.length-1].push(o=[]);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(o,e.split(/\s/g).map(parseFloat))}u()}return 0!==t?null:n}function c(){for(var e,t,n=[];t=s(r)||s(/^(,)/);)","===t?(n.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),u();return e?(n.push(e),n.length?n:null):null}return(t=function e(){return function(){if(!s(/^(point(\sz)?)/i))return null;if(u(),!s(/^(\()/))return null;var e=c();return e?(u(),s(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function(){if(!s(/^(linestring(\sz)?)/i))return null;if(u(),!s(/^(\()/))return null;var e=c();return e&&s(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function(){if(!s(/^(polygon(\sz)?)/i))return null;u();var e=l();return e?{type:"Polygon",coordinates:e}:null}()||function(){if(!s(/^(multipoint)/i))return null;u();var e=i.substring(i.indexOf("(")+1,i.length-1).replace(/\(/g,"").replace(/\)/g,"");i="MULTIPOINT ("+e+")";var t=l();return t?(u(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!s(/^(multilinestring)/i))return null;u();var e=l();return e?(u(),{type:"MultiLineString",coordinates:e}):null}()||function(){if(!s(/^(multipolygon)/i))return null;u();var e=l();return e?{type:"MultiPolygon",coordinates:e}:null}()||function(){var t,n=[];if(!s(/^(geometrycollection)/i))return null;if(u(),!s(/^(\()/))return null;for(;t=e();)n.push(t),u(),s(/^(,)/),u();return s(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}()}())&&o.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+o}}),t}},NSYL:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A}),n.d(t,"c",function(){return ge}),n.d(t,"g",function(){return ye}),n.d(t,"e",function(){return S}),n.d(t,"b",function(){return qe}),n.d(t,"d",function(){return ot}),n.d(t,"f",function(){return st}),n.d(t,"h",function(){return ut});var r=n("mrSG"),i=n("ihYY");function o(){return void 0!==e}function a(e){switch(e.length){case 0:return new i.d;case 1:return e[0];default:return new i.n(e)}}function s(e,t,n,r,o,a){void 0===o&&(o={}),void 0===a&&(a={});var s=[],u=[],l=-1,c=null;if(r.forEach(function(e){var n=e.offset,r=n==l,h=r&&c||{};Object.keys(e).forEach(function(n){var r=n,u=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,s),u){case i.o:u=o[n];break;case i.a:u=a[n];break;default:u=t.normalizeStyleValue(n,r,u,s)}h[r]=u}),r||u.push(h),c=h,l=n}),s.length)throw new Error("Unable to animate due to the following errors:\n - "+s.join("\n - "));return u}function u(e,t,n,r){switch(t){case"start":e.onStart(function(){return r(n&&l(n,"start",e))});break;case"done":e.onDone(function(){return r(n&&l(n,"done",e))});break;case"destroy":e.onDestroy(function(){return r(n&&l(n,"destroy",e))})}}function l(e,t,n){var r=n.totalTime,i=c(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,void 0==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(i._data=o),i}function c(e,t,n,r,i,o,a){return void 0===i&&(i=""),void 0===o&&(o=0),{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function h(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function f(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var d=function(e,t){return!1},p=function(e,t){return!1},m=function(e,t,n){return[]},v=o();if(v||"undefined"!=typeof Element){if(d=function(e,t){return e.contains(t)},v||Element.prototype.matches)p=function(e,t){return e.matches(t)};else{var g=Element.prototype,y=g.matchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||g.webkitMatchesSelector;y&&(p=function(e,t){return y.apply(e,[t])})}m=function(e,t,n){var i=[];if(n)i.push.apply(i,Object(r.__spread)(e.querySelectorAll(t)));else{var o=e.querySelector(t);o&&i.push(o)}return i}}var b=null,_=!1;function x(e){b||(b=("undefined"!=typeof document?document.body:null)||{},_=!!b.style&&"WebkitAppearance"in b.style);var t=!0;return b.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in b.style)&&_&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in b.style),t}var w=p,E=d,M=m;function T(e){var t={};return Object.keys(e).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}var S=function(){function e(){}return e.prototype.validateStyleProperty=function(e){return x(e)},e.prototype.matchesElement=function(e,t){return w(e,t)},e.prototype.containsElement=function(e,t){return E(e,t)},e.prototype.query=function(e,t,n){return M(e,t,n)},e.prototype.computeStyle=function(e,t,n){return n||""},e.prototype.animate=function(e,t,n,r,o,a,s){return void 0===a&&(a=[]),new i.d(n,r)},e}(),A=function(){function e(){}return e.NOOP=new S,e}(),C=1e3;function R(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:L(parseFloat(t[1]),t[2])}function L(e,t){switch(t){case"s":return e*C;default:return e}}function P(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,o="";if("string"==typeof e){var a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push('The provided timing value "'+e+'" is invalid.'),{duration:0,delay:0,easing:""};r=L(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=L(Math.floor(parseFloat(s)),a[4]));var u=a[5];u&&(o=u)}else r=e;if(!n){var l=!1,c=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&t.splice(c,0,'The provided timing value "'+e+'" is invalid.')}return{duration:r,delay:i,easing:o}}(e,t,n)}function O(e,t){return void 0===t&&(t={}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function I(e,t,n){if(void 0===n&&(n={}),t)for(var r in e)n[r]=e[r];else O(e,n);return n}function k(e,t,n){return n?t+":"+n+";":""}function N(e){for(var t="",n=0;n<e.style.length;n++)t+=k(0,r=e.style.item(n),e.style.getPropertyValue(r));for(var r in e.style)e.style.hasOwnProperty(r)&&!r.startsWith("_")&&(t+=k(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[r]));e.setAttribute("style",t)}function D(e,t){e.style&&(Object.keys(t).forEach(function(n){var r=H(n);e.style[r]=t[n]}),o()&&N(e))}function F(e,t){e.style&&(Object.keys(t).forEach(function(t){var n=H(t);e.style[n]=""}),o()&&N(e))}function U(e){return Array.isArray(e)?1==e.length?e[0]:Object(i.i)(e):e}var B=new RegExp("{{\\s*(.+?)\\s*}}","g");function j(e){var t=[];if("string"==typeof e){for(var n=e.toString(),r=void 0;r=B.exec(n);)t.push(r[1]);B.lastIndex=0}return t}function z(e,t,n){var r=e.toString(),i=r.replace(B,function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?e:i}function G(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var V=/-+([a-z0-9])/g;function H(e){return e.replace(V,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1].toUpperCase()})}function W(e,t){return 0===e||0===t}function q(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],o=[];if(r.forEach(function(e){i.hasOwnProperty(e)||o.push(e),i[e]=n[e]}),o.length)for(var a=function(){var n=t[s];o.forEach(function(t){n[t]=Q(e,t)})},s=1;s<t.length;s++)a()}return t}function X(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function Q(e,t){return window.getComputedStyle(e)[t]}var Y="*",Z=new Set(["true","1"]),J=new Set(["false","0"]);function K(e,t){var n=Z.has(e)||J.has(e),r=Z.has(t)||J.has(t);return function(i,o){var a=e==Y||e==i,s=t==Y||t==o;return!a&&n&&"boolean"==typeof i&&(a=i?Z.has(e):J.has(e)),!s&&r&&"boolean"==typeof o&&(s=o?Z.has(t):J.has(t)),a&&s}}var $=new RegExp("s*:selfs*,?","g");function ee(e,t,n){return new te(e).build(t,n)}var te=function(){function e(e){this._driver=e}return e.prototype.build=function(e,t){var n=new ne(t);return this._resetContextStyleTimingState(n),X(this,U(e),n)},e.prototype._resetContextStyleTimingState=function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0},e.prototype.visitTrigger=function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(e){s.name=e,o.push(n.visitState(s,t))}),s.name=u}else if(1==e.type){var l=n.visitTransition(e,t);r+=l.queryCount,i+=l.depCount,a.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},e.prototype.visitState=function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(e){if(re(e)){var t=e;Object.keys(t).forEach(function(e){j(t[e]).forEach(function(e){o.hasOwnProperty(e)||i.add(e)})})}}),i.size){var a=G(i.values());t.errors.push('state("'+e.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}},e.prototype.visitTransition=function(e,t){t.queryCount=0,t.depCount=0;var n,r,i,o=X(this,U(e.animation),t);return{type:1,matchers:(n=e.expr,r=t.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'+e+'" is not supported'),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+e+'" is not supported'),t;var o=i[1],a=i[2],s=i[3];t.push(K(o,s)),"<"!=a[0]||o==Y&&s==Y||t.push(K(s,o))}(e,i,r)}):i.push(n),i),animation:o,queryCount:t.queryCount,depCount:t.depCount,options:ie(e.options)}},e.prototype.visitSequence=function(e,t){var n=this;return{type:2,steps:e.steps.map(function(e){return X(n,e,t)}),options:ie(e.options)}},e.prototype.visitGroup=function(e,t){var n=this,r=t.currentTime,i=0,o=e.steps.map(function(e){t.currentTime=r;var o=X(n,e,t);return i=Math.max(i,t.currentTime),o});return t.currentTime=i,{type:3,steps:o,options:ie(e.options)}},e.prototype.visitAnimate=function(e,t){var n,r=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return oe(P(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var i=oe(0,0,"");return i.dynamic=!0,i.strValue=r,i}return oe((n=n||P(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;var o=e.styles?e.styles:Object(i.k)({});if(5==o.type)n=this.visitKeyframes(o,t);else{var a=e.styles,s=!1;if(!a){s=!0;var u={};r.easing&&(u.easing=r.easing),a=Object(i.k)(u)}t.currentTime+=r.duration+r.delay;var l=this.visitStyle(a,t);l.isEmptyStep=s,n=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},e.prototype.visitStyle=function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n},e.prototype._makeStyleAst=function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==i.a?n.push(e):t.errors.push("The provided style string value "+e+" is not allowed."):n.push(e)}):n.push(e.styles);var r=!1,o=null;return n.forEach(function(e){if(re(e)){var t=e,n=t.easing;if(n&&(o=n,delete t.easing),!r)for(var i in t)if(t[i].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:r,options:null}},e.prototype._validateStyleAst=function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l=t.collectedStyles[t.currentQuerySelector],c=l[r],h=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(t.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),h=!1),o=c.startTime),h&&(l[r]={startTime:o,endTime:i}),t.options&&(a=t.errors,s=t.options.params||{},(u=j(e[r])).length&&u.forEach(function(e){s.hasOwnProperty(e)||a.push("Unable to resolve the local animation param "+e+" in the given list of values")}))}else t.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},e.prototype.visitKeyframes=function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=e.steps.map(function(e){var r=n._makeStyleAst(e,t),l=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach(function(e){if(re(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}});else if(re(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,h=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var f=c-1,d=t.currentTime,p=t.currentAnimateTimings,m=p.duration;return l.forEach(function(e,i){var a=h>0?i==f?1:h*i:o[i],s=a*m;t.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(e,t),e.offset=a,r.styles.push(e)}),r},e.prototype.visitReference=function(e,t){return{type:8,animation:X(this,U(e.animation),t),options:ie(e.options)}},e.prototype.visitAnimateChild=function(e,t){return t.depCount++,{type:9,options:ie(e.options)}},e.prototype.visitAnimateRef=function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ie(e.options)}},e.prototype.visitQuery=function(e,t){var n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;var o=Object(r.__read)(function(e){var t=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return t&&(e=e.replace($,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(e){return".ng-trigger-"+e.substr(1)}).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),a=o[0],s=o[1];t.currentQuerySelector=n.length?n+" "+a:a,h(t.collectedStyles,t.currentQuerySelector,{});var u=X(this,U(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:e.selector,options:ie(e.options)}},e.prototype.visitStagger=function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:P(e.timings,t.errors,!0);return{type:12,animation:X(this,U(e.animation),t),timings:n,options:null}},e}(),ne=function(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function re(e){return!Array.isArray(e)&&"object"==typeof e}function ie(e){var t;return e?(e=O(e)).params&&(e.params=(t=e.params)?O(t):null):e={},e}function oe(e,t,n){return{duration:e,delay:t,easing:n}}function ae(e,t,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var se=function(){function e(){this._map=new Map}return e.prototype.consume=function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t},e.prototype.append=function(e,t){var n=this._map.get(e);n||this._map.set(e,n=[]),n.push.apply(n,Object(r.__spread)(t))},e.prototype.has=function(e){return this._map.has(e)},e.prototype.clear=function(){this._map.clear()},e}(),ue=new RegExp(":enter","g"),le=new RegExp(":leave","g");function ce(e,t,n,r,i,o,a,s,u,l){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===l&&(l=[]),(new he).buildKeyframes(e,t,n,r,i,o,a,s,u,l)}var he=function(){function e(){}return e.prototype.buildKeyframes=function(e,t,n,r,i,o,a,s,u,l){void 0===l&&(l=[]),u=u||new se;var c=new de(e,t,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),X(this,n,c);var h=c.timelines.filter(function(e){return e.containsAnimation()});if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,c.errors,s)}return h.length?h.map(function(e){return e.buildKeyframes()}):[ae(t,[],[],[],0,0,"",!1)]},e.prototype.visitTrigger=function(e,t){},e.prototype.visitState=function(e,t){},e.prototype.visitTransition=function(e,t){},e.prototype.visitAnimateChild=function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e},e.prototype.visitAnimateRef=function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e},e.prototype._visitSubInstructions=function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?R(n.duration):null,o=null!=n.delay?R(n.delay):null;return 0!==i&&e.forEach(function(e){var n=t.appendInstructionToTimeline(e,i,o);r=Math.max(r,n.duration+n.delay)}),r},e.prototype.visitReference=function(e,t){t.updateOptions(e.options,!0),X(this,e.animation,t),t.previousNode=e},e.prototype.visitSequence=function(e,t){var n=this,r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&((i=t.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=fe);var a=R(o.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(function(e){return X(n,e,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e},e.prototype.visitGroup=function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?R(e.options.delay):0;e.steps.forEach(function(a){var s=t.createSubContext(e.options);o&&s.delayNextStep(o),X(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)}),t.transformIntoNewTimeline(i),t.previousNode=e},e.prototype._visitTiming=function(e,t){if(e.dynamic){var n=e.strValue;return P(t.params?z(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}},e.prototype.visitAnimate=function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e},e.prototype.visitStyle=function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e},e.prototype.visitKeyframes=function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(function(e){o.forwardTime((e.offset||0)*i),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+i),t.previousNode=e},e.prototype.visitQuery=function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?R(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fe);var a=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,r);o&&s.delayNextStep(o),r===t.element&&(u=s.currentTimeline),X(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e},e.prototype.visitStagger=function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),a=o*(t.currentQueryTotal-1),s=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;X(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)},e}(),fe={},de=function(){function e(e,t,n,r,i,o,a,s){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fe,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new pe(this._driver,t,0),a.push(this.currentTimeline)}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=R(r.duration)),null!=r.delay&&(i.delay=R(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(e){t&&a.hasOwnProperty(e)||(a[e]=z(o[e],a,n.errors))})}}},e.prototype._copyOptions=function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach(function(e){n[e]=t[e]})}}return e},e.prototype.createSubContext=function(t,n,r){void 0===t&&(t=null);var i=n||this.element,o=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},e.prototype.transformIntoNewTimeline=function(e){return this.previousNode=fe,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline},e.prototype.appendInstructionToTimeline=function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new me(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r},e.prototype.incrementTime=function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)},e.prototype.delayNextStep=function(e){e>0&&this.currentTimeline.delayNextStep(e)},e.prototype.invokeQuery=function(e,t,n,i,o,a){var s=[];if(i&&s.push(this.element),e.length>0){e=(e=e.replace(ue,"."+this._enterClassName)).replace(le,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,Object(r.__spread)(u))}return o||0!=s.length||a.push('`query("'+t+'")` returned zero elements. (Use `query("'+t+'", { optional: true })` if you wish to allow this.)'),s},e}(),pe=function(){function e(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}return e.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},e.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),e.prototype.delayNextStep=function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e},e.prototype.fork=function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)},e.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},e.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},e.prototype.forwardTime=function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()},e.prototype._updateStyle=function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}},e.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},e.prototype.applyEmptyStep=function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){t._backFill[e]=t._globalTimelineStyles[e]||i.a,t._currentKeyframe[e]=i.a}),this._currentEmptyStepKeyframe=this._currentKeyframe},e.prototype.setStyles=function(e,t,n,r){var o=this;t&&(this._previousKeyframe.easing=t);var a=r&&r.params||{},s=function(e,t){var n,r={};return e.forEach(function(e){"*"===e?(n=n||Object.keys(t)).forEach(function(e){r[e]=i.a}):I(e,!1,r)}),r}(e,this._globalTimelineStyles);Object.keys(s).forEach(function(e){var t=z(s[e],a,n);o._pendingStyles[e]=t,o._localTimelineStyles.hasOwnProperty(e)||(o._backFill[e]=o._globalTimelineStyles.hasOwnProperty(e)?o._globalTimelineStyles[e]:i.a),o._updateStyle(e,t)})},e.prototype.applyStylesToKeyframe=function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){e._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])}))},e.prototype.snapshotCurrentStyles=function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)})},e.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(e.prototype,"properties",{get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e},enumerable:!0,configurable:!0}),e.prototype.mergeTimelineCollectedStyles=function(e){var t=this;Object.keys(e._styleSummary).forEach(function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)})},e.prototype.buildKeyframes=function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,o=[];this._keyframes.forEach(function(a,s){var u=I(a,!0);Object.keys(u).forEach(function(e){var r=u[e];r==i.o?t.add(e):r==i.a&&n.add(e)}),r||(u.offset=s/e.duration),o.push(u)});var a=t.size?G(t.values()):[],s=n.size?G(n.values()):[];if(r){var u=o[0],l=O(u);u.offset=0,l.offset=1,o=[u,l]}return ae(this.element,o,a,s,this.duration,this.startTime,this.easing,!1)},e}(),me=function(e){function t(t,n,r,i,o,a,s){void 0===s&&(s=!1);var u=e.call(this,t,n,a.delay)||this;return u.element=n,u.keyframes=r,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return Object(r.__extends)(t,e),t.prototype.containsAnimation=function(){return this.keyframes.length>1},t.prototype.buildKeyframes=function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=I(e[0],!1);u.offset=0,o.push(u);var l=I(e[0],!1);l.offset=ve(s),o.push(l);for(var c=e.length-1,h=1;h<=c;h++){var f=I(e[h],!1);f.offset=ve((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",e=o}return ae(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)},t}(pe);function ve(e,t){void 0===t&&(t=3);var n=Math.pow(10,t-1);return Math.round(e*n)/n}var ge=function(){},ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.normalizePropertyName=function(e,t){return H(e)},t.prototype.normalizeStyleValue=function(e,t,n,r){var i="",o=n.toString().trim();if(be[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+e+":"+n)}return o+i},t}(ge),be=function(e){var t={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(function(e){return t[e]=!0}),t}();function _e(e,t,n,r,i,o,a,s,u,l,c,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:f}}var xe={},we=function(){function e(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}return e.prototype.match=function(e,t,n,r){return function(e,t,n,r,i){return e.some(function(e){return e(t,n,r,i)})}(this.ast.matchers,e,t,n,r)},e.prototype.buildStyles=function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],o=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):o},e.prototype.build=function(e,t,n,i,o,a,s,u,l,c){var f=[],d=this.ast.options&&this.ast.options.params||xe,p=this.buildStyles(n,s&&s.params||xe,f),m=u&&u.params||xe,v=this.buildStyles(i,m,f),g=new Set,y=new Map,b=new Map,_="void"===i,x={params:Object(r.__assign)({},d,m)},w=c?[]:ce(e,t,this.ast.animation,o,a,p,v,x,l,f),E=0;if(w.forEach(function(e){E=Math.max(e.duration+e.delay,E)}),f.length)return _e(t,this._triggerName,n,i,_,p,v,[],[],y,b,E,f);w.forEach(function(e){var n=e.element,r=h(y,n,{});e.preStyleProps.forEach(function(e){return r[e]=!0});var i=h(b,n,{});e.postStyleProps.forEach(function(e){return i[e]=!0}),n!==t&&g.add(n)});var M=G(g.values());return _e(t,this._triggerName,n,i,_,p,v,w,M,y,b,E)},e}(),Ee=function(){function e(e,t){this.styles=e,this.defaultParams=t}return e.prototype.buildStyles=function(e,t){var n={},r=O(this.defaultParams);return Object.keys(e).forEach(function(t){var n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach(function(e){var o=i[e];o.length>1&&(o=z(o,r,t)),n[e]=o})}}),n},e}(),Me=function(){function e(e,t){var n=this;this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(function(e){n.states[e.name]=new Ee(e.style,e.options&&e.options.params||{})}),Te(this.states,"true","1"),Te(this.states,"false","0"),t.transitions.forEach(function(t){n.transitionFactories.push(new we(e,t,n.states))}),this.fallbackTransition=new we(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(e.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),e.prototype.matchTransition=function(e,t,n,r){return this.transitionFactories.find(function(i){return i.match(e,t,n,r)})||null},e.prototype.matchStyles=function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)},e}();function Te(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var Se=new se,Ae=function(){function e(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return e.prototype.register=function(e,t){var n=[],r=ee(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[e]=r},e.prototype._buildPlayer=function(e,t,n){var r=e.element,i=s(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)},e.prototype.create=function(e,t,n){var r=this;void 0===n&&(n={});var o,s=[],u=this._animations[e],l=new Map;if(u?(o=ce(this._driver,t,u,"ng-enter","ng-leave",{},{},n,Se,s)).forEach(function(e){var t=h(l,e.element,{});e.postStyleProps.forEach(function(e){return t[e]=null})}):(s.push("The requested animation doesn't exist or has already been destroyed"),o=[]),s.length)throw new Error("Unable to create the animation due to the following errors: "+s.join("\n"));l.forEach(function(e,t){Object.keys(e).forEach(function(n){e[n]=r._driver.computeStyle(t,n,i.a)})});var c=a(o.map(function(e){var t=l.get(e.element);return r._buildPlayer(e,{},t)}));return this._playersById[e]=c,c.onDestroy(function(){return r.destroy(e)}),this.players.push(c),c},e.prototype.destroy=function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)},e.prototype._getPlayer=function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t},e.prototype.listen=function(e,t,n,r){var i=c(t,"","","");return u(this._getPlayer(e),n,i,r),function(){}},e.prototype.command=function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])},e}(),Ce=[],Re={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Le={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pe="__ng_removed",Oe=function(){function e(e,t){void 0===t&&(t=""),this.namespaceId=t;var n=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(n?e.value:e),n){var r=O(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(e.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),e.prototype.absorbOptions=function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach(function(e){null==n[e]&&(n[e]=t[e])})}},e}(),Ie=new Oe("void"),ke=function(){function e(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ge(t,this._hostClassName)}return e.prototype.listen=function(e,t,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+t+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+t+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+t+'" is not supported!');var a=h(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};a.push(s);var u=h(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(Ge(e,"ng-trigger"),Ge(e,"ng-trigger-"+t),u[t]=Ie),function(){o._engine.afterFlush(function(){var e=a.indexOf(s);e>=0&&a.splice(e,1),o._triggers[t]||delete u[t]})}},e.prototype.register=function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)},e.prototype._getTrigger=function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'+e+'" has not been registered!');return t},e.prototype.trigger=function(e,t,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(t),a=new De(this.id,t,e),s=this._engine.statesByElement.get(e);s||(Ge(e,"ng-trigger"),Ge(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],l=new Oe(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[t]=l,u||(u=Ie),"void"===l.value||u.value!==l.value){var c=h(this._engine.playersByElement,e,[]);c.forEach(function(e){e.namespaceId==i.id&&e.triggerName==t&&e.queued&&e.destroy()});var f=o.matchTransition(u.value,l.value,e,l.params),d=!1;if(!f){if(!r)return;f=o.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:u,toState:l,player:a,isFallbackTransition:d}),d||(Ge(e,"ng-animate-queued"),a.onStart(function(){Ve(e,"ng-animate-queued")})),a.onDone(function(){var t=i.players.indexOf(a);t>=0&&i.players.splice(t,1);var n=i._engine.playersByElement.get(e);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),c.push(a),a}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(u.params,l.params)){var p=[],m=o.matchStyles(u.value,u.params,p),v=o.matchStyles(l.value,l.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(function(){F(e,m),D(e,v)})}},e.prototype.deregister=function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(t,n){delete t[e]}),this._elementListeners.forEach(function(n,r){t._elementListeners.set(r,n.filter(function(t){return t.name!=e}))})},e.prototype.clearElementCache=function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))},e.prototype._signalRemovalForInnerTriggers=function(e,t,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(e,".ng-trigger",!0).forEach(function(e){if(!e[Pe]){var n=r._engine.fetchNamespacesByElement(e);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(e,t,!1,!0)}):r.clearElementCache(e)}})},e.prototype.triggerLeaveAnimation=function(e,t,n,r){var i=this,o=this._engine.statesByElement.get(e);if(o){var s=[];if(Object.keys(o).forEach(function(t){if(i._triggers[t]){var n=i.trigger(e,t,"void",r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&a(s).onDone(function(){return i._engine.processLeaveNode(e)}),!0}return!1},e.prototype.prepareLeaveAnimationListeners=function(e){var t=this,n=this._elementListeners.get(e);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=t._triggers[i].fallbackTransition,a=t._engine.statesByElement.get(e)[i]||Ie,s=new Oe("void"),u=new De(t.id,i,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},e.prototype.removeNode=function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else for(var a=e;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(e),i?r.markElementAsRemoved(this.id,e,!1,t):(r.afterFlush(function(){return n.clearElementCache(e)}),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}},e.prototype.insertNode=function(e,t){Ge(e,this._hostClassName)},e.prototype.drainQueuedTransitions=function(e){var t=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=t._elementListeners.get(o);a&&a.forEach(function(t){if(t.name==r.triggerName){var n=c(o,r.triggerName,r.fromState.value,r.toState.value);n._data=e,u(r.player,t.phase,n,t.callback)}}),i.markedForDestroy?t._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1})},e.prototype.destroy=function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)},e.prototype.elementContainsData=function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find(function(t){return t.element===e})||t},e}(),Ne=function(){function e(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return e.prototype._onRemovalComplete=function(e,t){this.onRemovalComplete(e,t)},Object.defineProperty(e.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e},enumerable:!0,configurable:!0}),e.prototype.createNamespace=function(e,t){var n=new ke(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n},e.prototype._balanceNamespaceList=function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e},e.prototype.register=function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n},e.prototype.registerTrigger=function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++},e.prototype.destroy=function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(t)})}},e.prototype._fetchNamespace=function(e){return this._namespaceLookup[e]},e.prototype.fetchNamespacesByElement=function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&t.add(a)}}return t},e.prototype.trigger=function(e,t,n,r){if(Fe(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1},e.prototype.insertNode=function(e,t,n,r){if(Fe(t)){var i=t[Pe];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){var a=this._fetchNamespace(e);a&&a.insertNode(t,n)}r&&this.collectEnterElement(t)}},e.prototype.collectEnterElement=function(e){this.collectedEnterElements.push(e)},e.prototype.markElementAsDisabled=function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ge(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ve(e,"ng-animate-disabled"))},e.prototype.removeNode=function(e,t,n){if(Fe(t)){var r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n)}else this._onRemovalComplete(t,n)},e.prototype.markElementAsRemoved=function(e,t,n,r){this.collectedLeaveElements.push(t),t[Pe]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},e.prototype.listen=function(e,t,n,r,i){return Fe(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}},e.prototype._buildInstruction=function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)},e.prototype.destroyInnerAnimations=function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach(function(e){return t.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach(function(e){return t.finishActiveQueriedAnimationOnElement(e)})},e.prototype.destroyActiveAnimationsForElement=function(e){var t=this.playersByElement.get(e);t&&t.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})},e.prototype.finishActiveQueriedAnimationOnElement=function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach(function(e){return e.finish()})},e.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(t){if(e.players.length)return a(e.players).onDone(function(){return t()});t()})},e.prototype.processLeaveNode=function(e){var t=this,n=e[Pe];if(n&&n.setForRemoval){if(e[Pe]=Re,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(function(n){t.markElementAsDisabled(e,!1)})},e.prototype.flush=function(e){var t=this;void 0===e&&(e=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,n){return t._balanceNamespaceList(e,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Ge(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?a(n).onDone(function(){o.forEach(function(e){return e()})}):o.forEach(function(e){return e()})}},e.prototype.reportError=function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))},e.prototype._flushAnimations=function(e,t){var n=this,o=new se,s=[],u=new Map,l=[],c=new Map,f=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(function(e){p.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)p.add(t[r])});var m=this.bodyNode,v=Array.from(this.statesByElement.keys()),g=je(v,this.collectedEnterElements),y=new Map,b=0;g.forEach(function(e,t){var n="ng-enter"+b++;y.set(t,n),e.forEach(function(e){return Ge(e,n)})});for(var _=[],x=new Set,w=new Set,E=0;E<this.collectedLeaveElements.length;E++)(G=(z=this.collectedLeaveElements[E])[Pe])&&G.setForRemoval&&(_.push(z),x.add(z),G.hasAnimation?this.driver.query(z,".ng-star-inserted",!0).forEach(function(e){return x.add(e)}):w.add(z));var M=new Map,T=je(v,Array.from(x));T.forEach(function(e,t){var n="ng-leave"+b++;M.set(t,n),e.forEach(function(e){return Ge(e,n)})}),e.push(function(){g.forEach(function(e,t){var n=y.get(t);e.forEach(function(e){return Ve(e,n)})}),T.forEach(function(e,t){var n=M.get(t);e.forEach(function(e){return Ve(e,n)})}),_.forEach(function(e){n.processLeaveNode(e)})});for(var S=[],A=[],C=this._namespaceList.length-1;C>=0;C--)this._namespaceList[C].drainQueuedTransitions(t).forEach(function(e){var t=e.player,r=e.element;if(S.push(t),n.collectedEnterElements.length){var i=r[Pe];if(i&&i.setForMove)return void t.destroy()}var a=!m||!n.driver.containsElement(m,r),u=M.get(r),p=y.get(r),v=n._buildInstruction(e,o,p,u,a);if(v.errors&&v.errors.length)A.push(v);else{if(a)return t.onStart(function(){return F(r,v.fromStyles)}),t.onDestroy(function(){return D(r,v.toStyles)}),void s.push(t);if(e.isFallbackTransition)return t.onStart(function(){return F(r,v.fromStyles)}),t.onDestroy(function(){return D(r,v.toStyles)}),void s.push(t);v.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),o.append(r,v.timelines),l.push({instruction:v,player:t,element:r}),v.queriedElements.forEach(function(e){return h(c,e,[]).push(t)}),v.preStyleProps.forEach(function(e,t){var n=Object.keys(e);if(n.length){var r=f.get(t);r||f.set(t,r=new Set),n.forEach(function(e){return r.add(e)})}}),v.postStyleProps.forEach(function(e,t){var n=Object.keys(e),r=d.get(t);r||d.set(t,r=new Set),n.forEach(function(e){return r.add(e)})})}});if(A.length){var R=[];A.forEach(function(e){R.push("@"+e.triggerName+" has failed due to:\n"),e.errors.forEach(function(e){return R.push("- "+e+"\n")})}),S.forEach(function(e){return e.destroy()}),this.reportError(R)}var L=new Map,P=new Map;l.forEach(function(e){var t=e.element;o.has(t)&&(P.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,L))}),s.forEach(function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(function(e){h(L,t,[]).push(e),e.destroy()})});var O=_.filter(function(e){return We(e,f,d)}),I=new Map;Be(I,this.driver,w,d,i.a).forEach(function(e){We(e,f,d)&&O.push(e)});var k=new Map;g.forEach(function(e,t){Be(k,n.driver,new Set(e),f,i.o)}),O.forEach(function(e){var t=I.get(e),n=k.get(e);I.set(e,Object(r.__assign)({},t,n))});var N=[],U=[],B={};l.forEach(function(e){var t=e.element,r=e.player,i=e.instruction;if(o.has(t)){if(p.has(t))return r.onDestroy(function(){return D(t,i.toStyles)}),r.disabled=!0,r.overrideTotalTime(i.totalTime),void s.push(r);var l=B;if(P.size>1){for(var c=t,h=[];c=c.parentNode;){var f=P.get(c);if(f){l=f;break}h.push(c)}h.forEach(function(e){return P.set(e,l)})}var d=n._buildAnimation(r.namespaceId,i,L,u,k,I);if(r.setRealPlayer(d),l===B)N.push(r);else{var m=n.playersByElement.get(l);m&&m.length&&(r.parentPlayer=a(m)),s.push(r)}}else F(t,i.fromStyles),r.onDestroy(function(){return D(t,i.toStyles)}),U.push(r),p.has(t)&&s.push(r)}),U.forEach(function(e){var t=u.get(e.element);if(t&&t.length){var n=a(t);e.setRealPlayer(n)}}),s.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var j=0;j<_.length;j++){var z,G=(z=_[j])[Pe];if(Ve(z,"ng-leave"),!G||!G.hasAnimation){var V=[];if(c.size){var H=c.get(z);H&&H.length&&V.push.apply(V,Object(r.__spread)(H));for(var W=this.driver.query(z,".ng-animating",!0),q=0;q<W.length;q++){var X=c.get(W[q]);X&&X.length&&V.push.apply(V,Object(r.__spread)(X))}}var Q=V.filter(function(e){return!e.destroyed});Q.length?He(this,z,Q):this.processLeaveNode(z)}}return _.length=0,N.forEach(function(e){n.players.push(e),e.onDone(function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)}),e.play()}),N},e.prototype.elementContainsData=function(e,t){var n=!1,r=t[Pe];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n},e.prototype.afterFlush=function(e){this._flushFns.push(e)},e.prototype.afterFlushAnimationsDone=function(e){this._whenQuietFns.push(e)},e.prototype._getPreviousPlayers=function(e,t,n,r,i){var o=[];if(t){var a=this.playersByQueriedElement.get(e);a&&(o=a)}else{var s=this.playersByElement.get(e);if(s){var u=!i||"void"==i;s.forEach(function(e){e.queued||(u||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)})),o},e.prototype._beforeAnimationBuild=function(e,t,n){var i,o,a=t.element,s=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName,l=function(e){var r=e.element,i=r!==a,o=h(n,r,[]);c._getPreviousPlayers(r,i,s,u,t.toState).forEach(function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),o.push(e)})},c=this;try{for(var f=Object(r.__values)(t.timelines),d=f.next();!d.done;d=f.next())l(d.value)}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}F(a,t.fromStyles)},e.prototype._buildAnimation=function(e,t,n,r,o,u){var l=this,c=t.triggerName,f=t.element,d=[],p=new Set,m=new Set,v=t.timelines.map(function(t){var a=t.element;p.add(a);var h=a[Pe];if(h&&h.removedBeforeQueried)return new i.d(t.duration,t.delay);var v,g,y=a!==f,b=(v=(n.get(a)||Ce).map(function(e){return e.getRealPlayer()}),g=[],function e(t,n){for(var r=0;r<t.length;r++){var o=t[r];o instanceof i.n?e(o.players,n):n.push(o)}}(v,g),g).filter(function(e){return!!e.element&&e.element===a}),_=o.get(a),x=u.get(a),w=s(0,l._normalizer,0,t.keyframes,_,x),E=l._buildPlayer(t,w,b);if(t.subTimeline&&r&&m.add(a),y){var M=new De(e,c,a);M.setRealPlayer(E),d.push(M)}return E});d.forEach(function(e){h(l.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else(r=e[t])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete e[t]);return r}(l.playersByQueriedElement,e.element,e)})}),p.forEach(function(e){return Ge(e,"ng-animating")});var g=a(v);return g.onDestroy(function(){p.forEach(function(e){return Ve(e,"ng-animating")}),D(f,t.toStyles)}),m.forEach(function(e){h(r,e,[]).push(g)}),g},e.prototype._buildPlayer=function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new i.d(e.duration,e.delay)},e}(),De=function(){function e(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new i.d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return e.prototype.setRealPlayer=function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(n){t._queuedCallbacks[n].forEach(function(t){return u(e,n,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)},e.prototype.getRealPlayer=function(){return this._player},e.prototype.overrideTotalTime=function(e){this.totalTime=e},e.prototype.syncPlayerEvents=function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart(function(){return n.triggerCallback("start")}),e.onDone(function(){return t.finish()}),e.onDestroy(function(){return t.destroy()})},e.prototype._queueEvent=function(e,t){h(this._queuedCallbacks,e,[]).push(t)},e.prototype.onDone=function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)},e.prototype.onStart=function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)},e.prototype.onDestroy=function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)},e.prototype.init=function(){this._player.init()},e.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},e.prototype.play=function(){!this.queued&&this._player.play()},e.prototype.pause=function(){!this.queued&&this._player.pause()},e.prototype.restart=function(){!this.queued&&this._player.restart()},e.prototype.finish=function(){this._player.finish()},e.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},e.prototype.reset=function(){!this.queued&&this._player.reset()},e.prototype.setPosition=function(e){this.queued||this._player.setPosition(e)},e.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},e.prototype.triggerCallback=function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)},e}();function Fe(e){return e&&1===e.nodeType}function Ue(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function Be(e,t,n,r,i){var o=[];n.forEach(function(e){return o.push(Ue(e))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(e){var n=o[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r[Pe]=Le,a.push(r))}),e.set(r,o)});var s=0;return n.forEach(function(e){return Ue(e,o[s++])}),a}function je(e,t){var n=new Map;if(e.forEach(function(e){return n.set(e,[])}),0==t.length)return n;var r=new Set(t),i=new Map;return t.forEach(function(e){var t=function e(t){if(!t)return 1;var o=i.get(t);if(o)return o;var a=t.parentNode;return o=n.has(a)?a:r.has(a)?1:e(a),i.set(t,o),o}(e);1!==t&&n.get(t).push(e)}),n}var ze="$$classes";function Ge(e,t){if(e.classList)e.classList.add(t);else{var n=e[ze];n||(n=e[ze]={}),n[t]=!0}}function Ve(e,t){if(e.classList)e.classList.remove(t);else{var n=e[ze];n&&delete n[t]}}function He(e,t,n){a(n).onDone(function(){return e.processLeaveNode(t)})}function We(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach(function(e){return i.add(e)}):t.set(e,r),n.delete(e),!0}var qe=function(){function e(e,t,n){var r=this;this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new Ne(e,t,n),this._timelineEngine=new Ae(e,t,n),this._transitionEngine.onRemovalComplete=function(e,t){return r.onRemovalComplete(e,t)}}return e.prototype.registerTrigger=function(e,t,n,r,i){var o=e+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=ee(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(e,t){return new Me(e,t)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)},e.prototype.register=function(e,t){this._transitionEngine.register(e,t)},e.prototype.destroy=function(e,t){this._transitionEngine.destroy(e,t)},e.prototype.onInsert=function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)},e.prototype.onRemove=function(e,t,n){this._transitionEngine.removeNode(e,t,n)},e.prototype.disableAnimations=function(e,t){this._transitionEngine.markElementAsDisabled(e,t)},e.prototype.process=function(e,t,n,i){if("@"==n.charAt(0)){var o=Object(r.__read)(f(n),2);this._timelineEngine.command(o[0],t,o[1],i)}else this._transitionEngine.trigger(e,t,n,i)},e.prototype.listen=function(e,t,n,i,o){if("@"==n.charAt(0)){var a=Object(r.__read)(f(n),2);return this._timelineEngine.listen(a[0],t,a[1],o)}return this._transitionEngine.listen(e,t,n,i,o)},e.prototype.flush=function(e){void 0===e&&(e=-1),this._transitionEngine.flush(e)},Object.defineProperty(e.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),e.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},e}(),Xe="animation",Qe="animationend",Ye=function(){function e(e,t,n,r,i,o,a){var s=this;this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return s._handleCallback(e)}}return e.prototype.apply=function(){var e,t,n;t=this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name,(n=tt(e=this._element,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)","===e.charAt(n)&&0}(n),t=n+", "+t),et(e,"",t),$e(this._element,this._eventFn,!1),this._startTime=Date.now()},e.prototype.pause=function(){Ze(this._element,this._name,"paused")},e.prototype.resume=function(){Ze(this._element,this._name,"running")},e.prototype.setPosition=function(e){var t=Je(this._element,this._name);this._position=e*this._duration,et(this._element,"Delay","-"+this._position+"ms",t)},e.prototype.getPosition=function(){return this._position},e.prototype._handleCallback=function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},e.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),$e(this._element,this._eventFn,!0))},e.prototype.destroy=function(){var e,t,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._name,(r=Ke(n=tt(e=this._element,"").split(","),t))>=0&&(n.splice(r,1),et(e,"",n.join(","))))},e}();function Ze(e,t,n){et(e,"PlayState",n,Je(e,t))}function Je(e,t){var n=tt(e,"");return n.indexOf(",")>0?Ke(n.split(","),t):Ke([n],t)}function Ke(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function $e(e,t,n){n?e.removeEventListener(Qe,t):e.addEventListener(Qe,t)}function et(e,t,n,r){var i=Xe+t;if(null!=r){var o=e.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}e.style[i]=n}function tt(e,t){return e.style[Xe+t]}var nt="linear",rt=function(){function e(e,t,n,r,i,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||nt,this.totalTime=r+i,this._buildStyler()}return e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.destroy=function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[]},e.prototype._flushStartFns=function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]},e.prototype.finish=function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._flushDoneFns())},e.prototype.setPosition=function(e){this._styler.setPosition(e)},e.prototype.getPosition=function(){return this._styler.getPosition()},e.prototype.hasStarted=function(){return this._state>=2},e.prototype.init=function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())},e.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2),this._styler.resume()},e.prototype.pause=function(){this.init(),this._styler.pause()},e.prototype.restart=function(){this.reset(),this.play()},e.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},e.prototype._buildStyler=function(){var e=this;this._styler=new Ye(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return e.finish()})},e.prototype.triggerCallback=function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0},e.prototype.beforeDestroy=function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:Q(e.element,r))})}this.currentSnapshot=t},e}(),it=function(e){function t(t,n){var r=e.call(this)||this;return r.element=t,r._startingStyles={},r.__initialized=!1,r._styles=T(n),r}return Object(r.__extends)(t,e),t.prototype.init=function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(e){t._startingStyles[e]=t.element.style[e]}),e.prototype.init.call(this))},t.prototype.play=function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(e){return t.element.style.setProperty(e,t._styles[e])}),e.prototype.play.call(this))},t.prototype.destroy=function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)}),this._startingStyles=null,e.prototype.destroy.call(this))},t}(i.d),ot=function(){function e(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return e.prototype.validateStyleProperty=function(e){return x(e)},e.prototype.matchesElement=function(e,t){return w(e,t)},e.prototype.containsElement=function(e,t){return E(e,t)},e.prototype.query=function(e,t,n){return M(e,t,n)},e.prototype.computeStyle=function(e,t,n){return window.getComputedStyle(e)[t]},e.prototype.buildKeyframeElement=function(e,t,n){var r="@keyframes "+t+" {\n",i="";(n=n.map(function(e){return T(e)})).forEach(function(e){i=" ";var t=parseFloat(e.offset);r+=""+i+100*t+"% {\n",i+=" ",Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=i+"animation-timing-function: "+n+";\n"));default:return void(r+=""+i+t+": "+n+";\n")}}),r+=i+"}\n"}),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o},e.prototype.animate=function(e,t,n,r,i,o,a){void 0===o&&(o=[]),a&&this._notifyFaultyScrubber();var s=o.filter(function(e){return e instanceof rt}),u={};W(n,r)&&s.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return u[e]=t[e]})});var l=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach(function(e){Object.keys(e).forEach(function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=q(e,t,u));if(0==n)return new it(e,l);var c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,c,t);document.querySelector("head").appendChild(h);var f=new rt(e,t,c,n,r,i,l);return f.onDestroy(function(){var e;(e=h).parentNode.removeChild(e)}),f},e.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},e}(),at=function(){function e(e,t,n){this.element=e,this.keyframes=t,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},e.prototype._buildPlayer=function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",function(){return e._onFinish()})}},e.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},e.prototype._triggerWebAnimation=function(e,t,n){return e.animate(t,n)},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},e.prototype.pause=function(){this.init(),this.domPlayer.pause()},e.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},e.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},e.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},e.prototype.restart=function(){this.reset(),this.play()},e.prototype.hasStarted=function(){return this._started},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.setPosition=function(e){this.domPlayer.currentTime=e*this.time},e.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(e.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),e.prototype.beforeDestroy=function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:Q(e.element,n))}),this.currentSnapshot=t},e.prototype.triggerCallback=function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0},e}(),st=function(){function e(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(lt().toString()),this._cssKeyframesDriver=new ot}return e.prototype.validateStyleProperty=function(e){return x(e)},e.prototype.matchesElement=function(e,t){return w(e,t)},e.prototype.containsElement=function(e,t){return E(e,t)},e.prototype.query=function(e,t,n){return M(e,t,n)},e.prototype.computeStyle=function(e,t,n){return window.getComputedStyle(e)[t]},e.prototype.overrideWebAnimationsSupport=function(e){this._isNativeImpl=e},e.prototype.animate=function(e,t,n,r,i,o,a){if(void 0===o&&(o=[]),!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},l=o.filter(function(e){return e instanceof at});return W(n,r)&&l.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return u[e]=t[e]})}),t=q(e,t=t.map(function(e){return I(e,!1)}),u),new at(e,t,s)},e}();function ut(){return"function"==typeof lt()}function lt(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}}).call(this,n("8oxB"))},Nehr:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},Onz0:function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n("tjlA").Buffer)},P7XM:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PMMj:function(e,t,n){var r=n("thjG");PersistentQuadBackend=function(e,t){var n=this;if(0!==arguments){for(var i in r.registerIndexedDB(n),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var o=this.componentOrders[i].slice(0,i.length).sort().join(".");this.componentOrdersMap[o]=i}n.dbName=e.name||"rdfstorejs";var a=n.indexedDB.open(this.dbName+"_db",1);a.onerror=function(e){t(null,new Error("Error opening IndexedDB: "+e.target.errorCode))},a.onsuccess=function(e){n.db=e.target.result,t(n)},a.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(n.dbName,{keyPath:"SPOG"});r.each(n.indices,function(e){"SPOG"!==e&&t.createIndex(e,e,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(e,t){var n=this;r.each(this.indices,function(t){e[t]=n._genMinIndexKey(e,t)});var i=n.db.transaction([n.dbName],"readwrite");i.oncomplete=function(e){},i.onerror=function(e){t(null,new Error(e.target.statusCode))},i.objectStore(n.dbName).add(e).onsuccess=function(e){t(!0)}},PersistentQuadBackend.prototype.range=function(e,t){var n=this.db.transaction([this.dbName]).objectStore(this.dbName),r=this._indexForPattern(e),i=this._genMinIndexKey(e,r),o=this._genMaxIndexKey(e,r),a=this.IDBKeyRange.bound(i,o,!1,!1),s=[];("SPOG"===r?n:n.index(r)).openCursor(a).onsuccess=function(e){var n=e.target.result;n?(s.push(n.value),n.continue()):t(s)}},PersistentQuadBackend.prototype.search=function(e,t){var n=this.db.transaction([this.dbName]).objectStore(this.dbName),r=this._genMinIndexKey(e,"SPOG"),i=n.get(r);i.onerror=function(e){t(null,new Error(e.target.statusCode))},i.onsuccess=function(e){t(null!=e.target.result)}},PersistentQuadBackend.prototype.delete=function(e,t){var n=this._genMinIndexKey(e,"SPOG"),r=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(n);r.onsuccess=function(){t(!0)},r.onerror=function(e){t(null,new Error(e.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(e,t){return r.map(this.componentOrders[t],function(t){return"string"==typeof e[t]||null==e[t]?"0":e[t]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(e,t){for(var n=this.componentOrders[t],i=[],o=0;o<n.length;o++){var a=e[n[o]];i[o]="string"==typeof a?"z":a}return r.map(i,function(e){return""+e}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(e){var t=e.indexKey.sort().join("."),n=this.componentOrdersMap[t];if(null==n)throw new Error("Error, cannot find index for indexKey "+t);return n},PersistentQuadBackend.prototype.clear=function(e){var t;(t=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){e()},t.onerror=function(){e()}},e.exports.PersistentQuadBackend=PersistentQuadBackend},PZbR:function(e,t,n){var r=n("sCxP");t.JSONLDParser={};var i=t.JSONLDParser;i.parser={async:!0,parse:function(e,t,n,i){try{"string"==typeof e&&(e=JSON.parse(e)),function(t,n,i){var o=null;r.normalize(e,{},function(e,t){if(e)i(e);else{var r=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!=e.language?{literal:'"'+e.value+'"@'+e.language}:null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:{literal:'"'+e.value+'"'}:void 0};o=[];var a=function(e,t,i){o.push({subject:r(e),predicate:r(t),object:r(i),graph:n})};for(var s in t)for(var u=t[s],l=0;l<u.length;l++){var c=u[l];a(c.subject,c.predicate,c.object)}i(null,o)}})}(0,t,i)}catch(e){i(e)}}},e.exports={JSONLDParser:i}},QpuX:function(e,t,n){e.exports=n("+qE3").EventEmitter},RoFp:function(e,t,n){"use strict";var r=n("lm0R");function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},S1nX:function(e,t,n){"use strict";var r=n("mrSG"),i=n("K9Ia"),o=n("6blF"),a=n("FFOo"),s=n("pugT");function u(){return function(e){return e.lift(new l(e))}}var l=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new c(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(a.a),h=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=s.a.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return u()(this)},t}(o.a).prototype,f={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.b);function p(){return new i.a}function m(){return function(e){return u()((t=p,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,f);return r.source=e,r.subjectFactory=n,r})(e));var t}}n.d(t,"a",function(){return m})},S5XQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("DKTb"),i=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,r.a),t}}},U6jy:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},URgk:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},Wxc2:function(e,t,n){(function(t){var n=String.fromCharCode,r="function"==typeof t?t:function(e){setTimeout(e,0)},i=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,o={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},a=/[\x00-\x20<>\\"\{\}\|\^\`]/;function s(e){if(!(this instanceof s))return new s(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,n){this._tokenize(e,function(e,r){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(r.type)?n&&n(e,r):n&&n(e||t._syntaxError(r.type,n=null))})}}}s.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){for(var n=this._input;;){for(var r;r=this._newline.exec(n);)n=n.substr(r[0].length,n.length),this._line++;if((r=this._whitespace.exec(n))&&(n=n.substr(r[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var i,o=this._line,s="",u="",l="",c=n[0],h=null,f=0,d=!1;switch(c){case"^":if(1===n.length)break;if("^"!==n[1])return p(this);if(this._prevTokenType="^","<"!==(n=n.substr(2))[0]){d=!0;break}case"<":if(h=this._unescapedIri.exec(n))s="IRI",u=h[1];else if(h=this._iri.exec(n)){if(null===(i=this._unescape(h[1]))||a.test(i))return p(this);s="IRI",u=i}break;case"_":((h=this._blank.exec(n))||t&&(h=this._blank.exec(n+" ")))&&(s="prefixed",l="_",u=h[1]);break;case'"':case"'":if(h=this._unescapedString.exec(n))s="literal",u=h[0];else if(h=this._singleQuotedString.exec(n)){if(null===(i=this._unescape(h[0])))return p(this);s="literal",u=i.replace(/^'|'$/g,'"')}else if(h=this._tripleQuotedString.exec(n)){if(this._line+=(i=h[1]||h[2]).split(/\r\n|\r|\n/).length-1,null===(i=this._unescape(i)))return p(this);s="literal",u=i.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(h=this._langcode.exec(n))?(s="langcode",u=h[1]):(h=this._keyword.exec(n))&&(s=h[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){s=".",f=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n))&&(s="literal",u='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(h[1]?"double":/^[+\-]?\d+$/.test(h[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?s=h[0].toUpperCase():d=!0;break;case"f":case"t":(h=this._boolean.exec(n))?(s="literal",u='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):d=!0;break;case"a":(h=this._shortPredicates.exec(n))?(s="abbreviation",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):d=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":f=1,s=c;break;default:d=!0}if(d&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(h=this._prefix.exec(n))?((h=this._prefixed.exec(n))||t&&(h=this._prefixed.exec(n+" ")))&&(s="prefixed",l=h[1]||"",u=this._unescape(h[2])):(s="prefix",u=h[1]||"")),"^"===this._prevTokenType&&(s="IRI"===s||"prefixed"===s?"type":""),!s)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?p(this):this._input=n;e(null,{line:o,type:s,value:u,prefix:l}),this._prevTokenType=s,n=n.substr(f||h[0].length,n.length)}function p(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}},_unescape:function(e){try{return e.replace(i,function(e,t,r,i){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return n(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return a<=65535?n(a):n(55296+(a-=65536)/1024,56320+(1023&a))}var s=o[i];if(!s)throw new Error;return s})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){var n=this;function i(e){null!==n._input&&(n._input+=e,n._tokenizeToEnd(t,!1))}function o(){null!==n._input&&n._tokenizeToEnd(t,!0)}this._line=1,"string"==typeof e?(this._input=e,r(function(){n._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i),e.on("end",o)):(this.addChunk=i,this.end=o,t||(t=e)))}},e.exports=s}).call(this,n("URgk").setImmediate)},Xerb:function(e,t,n){var r=n("thjG"),i=r,o=n("thjG");QueryFilters={};var a="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,t,n,r,i,a,s){var u=[];e.filter&&"function"!=typeof e.filter&&(u=e.filter);var l=[];if(null==u||0===u.length||null!=e.length)return s(t);QueryFilters.preprocessExistentialFilters(u,t,a,r,i,function(e){o.eachSeries(e,function(e,o){QueryFilters.run(e.value,t,n,r,i,a,function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];null!=i.__nullify__?l.push(i):n.push(i)}t=n,o()})},function(){s(t.concat(l))})})},QueryFilters.preprocessExistentialFilters=function(e,t,n,r,a,s){var u=[];o.eachSeries(e,function(e,s){if("builtincall"!==e.value.expressionType||"exists"!==e.value.builtincall&&"notexists"!==e.value.builtincall)if("conditionalor"===e.value.expressionType||"conditionaland"===e.value.expressionType){var l=i.map(e.value.operands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,n,r,a,function(t){e.value.operands=t.map(function(e){return e.value}),u.push(e),s()})}else"multiplicativeexpression"===e.value.expressionType?(l=i.map(e.value.factors,function(e){return{value:e}}),QueryFilters.preprocessExistentialFilters(l,t,n,r,a,function(t){e.value.factors=t.map(function(e){return e.value}),u.push(e),s()})):"additiveexpression"===e.value.expressionType?(l=i.map(e.value.summands,function(e){return{value:e}}),QueryFilters.preprocessExistentialFilters(l,t,n,r,a,function(t){e.value.summands=t.map(function(e){return e.value}),u.push(e),s()})):"relationalexpression"===e.value.expressionType?(l=[{value:e.value.op1},{value:e.value.op2}],QueryFilters.preprocessExistentialFilters(l,t,n,r,a,function(t){e.value.op1=t[0].value,e.value.op2=t[1].value,u.push(e),s()})):"irireforfunction"!==e.value.expressionType&&"custom"!==e.value.expressionType||null==e.value.args?(u.push(e),s()):(l=i.map(e.value.args,function(e){return{value:e}}),QueryFilters.preprocessExistentialFilters(l,t,n,r,a,function(t){e.value.args=t.map(function(e){return e.value}),u.push(e),s()}));else{var c=e.value.builtincall,h=e.value.args,f={};n.copyDenormalizedBindings(t,a.outCache,function(t){o.eachSeries(t,function(e,t){var o=i.clone(h[0],!0),s=n.abstractQueryTree.parseSelect({pattern:o},e);s=n.abstractQueryTree.bind(s.pattern,e),n.executeSelectUnit([{kind:"*"}],r,s,a,function(n){var r;r="exists"===c?QueryFilters.ebvBoolean(0!==n.length):QueryFilters.ebvBoolean(0===n.length);var i=[];for(var o in e)i.push(JSON.stringify(e[o]));i=i.sort().join(""),f[i]=r,t()})},function(){e.value.origArgs=e.value.args,e.value.args=f,u.push(e),s()})})}},function(){s(u)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var n=e.op2;return QueryFilters.boundVars(e.op1)+QueryFilters.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var r=[],i=0;i<e.operands;i++)r=r.concat(QueryFilters.boundVars(e.operands[i]));return r}if("builtincall"==t){if(null==e.args)return[];var o=[];for(i=0;i<e.args.length;i++)o=o.concat(QueryFilters.boundVars(e.args[i]));return o}if("multiplicativeexpression"==t){for(o=QueryFilters.boundVars(e.factor),i=0;i<e.factors.length;i++)o=o.concat(QueryFilters.boundVars(e.factors[i].expression));return o}if("additiveexpression"==t){for(o=QueryFilters.boundVars(e.summand),i=0;i<e.summands.length;i++)o=o.concat(QueryFilters.boundVars(e.summands[i].expression));return o}return"regex"==t?(o=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,n,r,i,o,a){o.copyDenormalizedBindings(t,i.outCache,function(s){for(var u=[],l=0;l<t.length;l++){var c=QueryFilters.runFilter(e,s[l],o,r,i);c=QueryFilters.ebv(c),QueryFilters.isEbvError(c)?n&&u.push({__nullify__:!0,bindings:t[l]}):!0===c?u.push(t[l]):n&&u.push({__nullify__:!0,bindings:t[l]})}a(u)})},QueryFilters.collect=function(e,t,n,r,i,o){i.copyDenormalizedBindings(t,r.outCache,function(a){for(var s=[],u=0;u<a.length;u++){var l=QueryFilters.runFilter(e,a[u],i,n,r);s.push({binding:t[u],value:l})}return o(s)})},QueryFilters.runDistinct=function(e,t){},QueryFilters.runAggregator=function(e,t,n,i,o){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var s=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,n,i,o);QueryFilters.isEbvError(c)||(null===s?s=c:!0===QueryFilters.runLtFunction(s,c).value&&(s=c))}return null===s?QueryFilters.ebvError():s}if("min"===e.expression.aggregateType){var h=null;for(u=0;u<t.length;u++)l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,n,i,o),QueryFilters.isEbvError(c)||(null===h?h=c:!0===QueryFilters.runGtFunction(h,c).value&&(h=c));return null===h?QueryFilters.ebvError():h}if("count"===e.expression.aggregateType){var f={},d=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(u=0;u<t.length;u++)null==f[v=r.hashTerm(l=t[u])]&&(f[v]=!0,d++);else d=t.length;else for(u=0;u<t.length;u++)l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,n,i,o),QueryFilters.isEbvError(c)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==f[v=r.hashTerm(c)]&&(f[v]=!0,d++):d++);return{token:"literal",type:a+"integer",value:""+d}}if("avg"===e.expression.aggregateType){f={};var p={token:"literal",type:a+"integer",value:"0"};for(d=0,u=0;u<t.length;u++)l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,n,i,o),QueryFilters.isEbvError(c)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==f[v=r.hashTerm(c)]&&(f[v]=!0,QueryFilters.isNumeric(c)&&(p=QueryFilters.runSumFunction(p,c),d++)):QueryFilters.isNumeric(c)&&(p=QueryFilters.runSumFunction(p,c),d++));var m=QueryFilters.runDivFunction(p,{token:"literal",type:a+"integer",value:""+d});return m.value=""+m.value,m}if("sum"===e.expression.aggregateType){for(f={},p={token:"literal",type:a+"integer",value:"0"},u=0;u<t.length;u++){var v;l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,n,i,o),QueryFilters.isEbvError(c)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==f[v=r.hashTerm(c)]&&(f[v]=!0,QueryFilters.isNumeric(c)&&(p=QueryFilters.runSumFunction(p,c))):QueryFilters.isNumeric(c)&&(p=QueryFilters.runSumFunction(p,c)))}return p.value=""+p.value,p}return QueryFilters.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,t,n,i,o){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var s=QueryFilters.runFilter(e.op1,t,n,i,o),u=QueryFilters.runFilter(e.op2,t,n,i,o);return QueryFilters.runRelationalFilter(e,s,u,t,n,i,o)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,t,n,i,o);if("conditionaland"==a)return QueryFilters.runAndFunction(e,t,n,i,o);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,t,n,i,o);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,n,i,o);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,t,n,i,o);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,n,i,o);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,n,i,o);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,n,i,o);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,t,n,i,o);if("atomic"==a)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=r.lexicalFormBaseUri(e.value.type,o),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,t,n,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value||(null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(t)||null==e.type)&&QueryFilters.ebvError()):"uri"===e.token&&"uri"===t.token?r.lexicalFormBaseUri(e,i)==r.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token&&e.value==t.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==a+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==a+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==a+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"float"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,t){return!(!t||"literal"!=t.token)&&t.type==a+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"){var t=parseFloat(e.value);return!isNaN(t)&&0!=parseFloat(e.value)}return e.type===a+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===a+"string"?""!=e.value:e.type===a+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:a+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:a+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,n,r,i,o,a){var s=e.operator;if("="===s)return QueryFilters.runEqualityFunction(t,n,r,i,o,a);if("!="===s){var u=QueryFilters.runEqualityFunction(t,n,r,i,o,a);return QueryFilters.isEbvError(u)?u:(u.value=!u.value,u)}if("<"===s)return QueryFilters.runLtFunction(t,n,r);if(">"===s)return QueryFilters.runGtFunction(t,n,r);if("<="===s)return QueryFilters.runLtEqFunction(t,n,r);if(">="===s)return QueryFilters.runGtEqFunction(t,n,r);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==a+"integer")return parseInt(e.value);if(e.type==a+"decimal")return parseFloat(e.value);if(e.type==a+"float")return parseFloat(e.value);if(e.type==a+"double")return parseFloat(e.value);if(e.type==a+"nonPositiveInteger")return parseFloat(e.value);if(e.type==a+"negativeInteger")return parseInt(e.value);if(e.type==a+"long")return parseInt(e.value);if(e.type==a+"int")return parseInt(e.value);if(e.type==a+"short")return parseInt(e.value);if(e.type==a+"byte")return parseInt(e.value);if(e.type==a+"nonNegativeInteger")return parseInt(e.value);if(e.type==a+"unsignedLong")return parseInt(e.value);if(e.type==a+"unsignedInt")return parseInt(e.value);if(e.type==a+"unsignedShort")return parseInt(e.value);if(e.type==a+"unsignedByte")return parseInt(e.value);if(e.type==a+"positiveInteger")return parseInt(e.value);if(e.type!=a+"date"&&e.type!=a+"dateTime")return e.type==a+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==a+"string"?null===e.value||void 0===e.value?void 0:""+e.value:e.value;try{return r.parseISO8601(e.value)}catch(e){return null}},QueryFilters.runOrFunction=function(e,t,n,r,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,n,r,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o||QueryFilters.ebvError():!0===s?o=!0:QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(o)},QueryFilters.runAndFunction=function(e,t,n,r,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,n,r,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o&&QueryFilters.ebvError():!0===s?QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError()):o=!1}return QueryFilters.ebvBoolean(o)},QueryFilters.runEqualityFunction=function(e,t,n,i,o,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var s=QueryFilters.effectiveTypeValue(e),u=QueryFilters.effectiveTypeValue(t);return isNaN(s)||isNaN(u)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvBoolean(s==u)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var l=r.compareDateComponents(e.value,t.value);return null!=l?0==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=r.compareDateComponents(e.value,t.value);return null!=i?1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=r.compareDateComponents(e.value,t.value);return null!=i?-1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=r.compareDateComponents(e.value,t.value);return null!=i?-1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=r.compareDateComponents(e.value,t.value);return null!=i?1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,n,r,i,o){var a=QueryFilters.runFilter(e,n,r,i,o);if(QueryFilters.isEbvError(a))return QueryFilters.ebvError();var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,n,r,i,o);if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"+"===t[u].operator?s=QueryFilters.runSumFunction(s,l):"-"===t[u].operator&&(s=QueryFilters.runSubFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:n}:{token:"literal",type:a+"integer",value:n}},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:n}:{token:"literal",type:a+"integer",value:n}},QueryFilters.runMultiplication=function(e,t,n,r,i,o){var a=QueryFilters.runFilter(e,n,r,i,o);if(QueryFilters.isEbvError(a))return a;var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,n,r,i,o);if(QueryFilters.isEbvError(l))return a;if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"*"===t[u].operator?s=QueryFilters.runMulFunction(s,l):"/"===t[u].operator&&(s=QueryFilters.runDivFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:n}:{token:"literal",type:a+"integer",value:n}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:n}:{token:"literal",type:a+"integer",value:n}},QueryFilters.runBuiltInCall=function(e,t,n,r,i,o){if("notexists"===e||"exists"===e){var a=[];for(var s in n)a.push(JSON.stringify(n[s]));return t[a=a.sort().join("")]}for(var u=[],l=0;l<t.length;l++)if("var"===t[l].token)u.push(t[l]);else{var c=QueryFilters.runFilter(t[l],n,r,i,o);if(QueryFilters.isEbvError(c))return c;u.push(c)}if("str"===e)return"literal"===u[0].token?{token:"literal",type:null,value:""+u[0].value}:"uri"===u[0].token?{token:"literal",type:null,value:u[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===u[0].token?null!=u[0].lang?{token:"literal",value:""+u[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===u[0].token){var h=u[0];return null!=h.type?"string"==typeof h.type?{token:"uri",value:h.type,prefix:null,suffix:null}:h.type:null==h.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var f=QueryFilters.RDFTermEquality(u[0],u[1],r,o);return QueryFilters.isEbvError(f)&&(f=!1),QueryFilters.ebvBoolean(f)}if("langmatches"===e){var d=u[0],p=u[1];return"literal"===d.token&&"literal"===p.token?"*"===p.value&&""!=d.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===d.value.toLowerCase().indexOf(p.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var m=u[0].value;return null==m?QueryFilters.ebvError():null!=n[m]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=r.customFns[e])return r.customFns[e](QueryFilters,u);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,n,r,i,o){var a=QueryFilters.runFilter(t,n,r,i,o);if(QueryFilters.isEbvError(a))return a;if("!"===e){var s=QueryFilters.ebv(a);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():(s=!s,QueryFilters.ebvBoolean(s))}if("+"===e)return QueryFilters.isNumeric(a)?a:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(a)){var u={};for(var l in a)u[l]=a[l];return u.value=-u.value,u}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,n,r,i,o,a){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,r,i,o,a),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,r,i,o,a),null!=n&&(n=QueryFilters.runFilter(n,r,i,o,a)),null==t||"literal"!==t.token||null!=n&&"literal"!==n.token)return QueryFilters.ebvError();if(t=t.value,n=null==n?null:n.value,null!=e&&"var"==e.token){if(null==r[e.value])return QueryFilters.ebvError();e=r[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==n?new RegExp(t):new RegExp(t,n.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,n){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=r.lexicalFormBaseUri(e.value.type,n),e)},QueryFilters.runIriRefOrFunction=function(e,t,n,i,o,s){if(null==t)return e;for(var u=[],l=0;l<t.length;l++)u.push(QueryFilters.runFilter(t[l],n,i,o,s));var c=r.lexicalFormBaseUri(e,s);if(c==a+"integer"||c==a+"decimal"||c==a+"double"||c==a+"nonPositiveInteger"||c==a+"negativeInteger"||c==a+"long"||c==a+"int"||c==a+"short"||c==a+"byte"||c==a+"nonNegativeInteger"||c==a+"unsignedLong"||c==a+"unsignedInt"||c==a+"unsignedShort"||c==a+"unsignedByte"||c==a+"positiveInteger"){if("literal"!==(h=u[0]).token)return QueryFilters.ebvError();if((h=QueryFilters.normalizeLiteralDatatype(h,i,s)).type==a+"integer"||h.type==a+"decimal"||h.type==a+"double"||h.type==a+"nonPositiveInteger"||h.type==a+"negativeInteger"||h.type==a+"long"||h.type==a+"int"||h.type==a+"short"||h.type==a+"byte"||h.type==a+"nonNegativeInteger"||h.type==a+"unsignedLong"||h.type==a+"unsignedInt"||h.type==a+"unsignedShort"||h.type==a+"unsignedByte"||h.type==a+"positiveInteger")return h.type=c,h;if("http://www.w3.org/2001/XMLSchema#boolean"==h.type)return 1==QueryFilters.ebv(h)?(h.type=c,h.value=1):(h.type=c,h.value=0),h;if("http://www.w3.org/2001/XMLSchema#float"==h.type||"http://www.w3.org/2001/XMLSchema#double"==h.type)return h.type=c,h.value=parseInt(h.value),h;if("http://www.w3.org/2001/XMLSchema#string"!=h.type&&null!=h.type)return QueryFilters.ebvError();if(h.value.split(".").length>2)return QueryFilters.ebvError();if(h.value.split("-").length>2)return QueryFilters.ebvError();if(h.value.split("/").length>2)return QueryFilters.ebvError();if(h.value.split("+").length>2)return QueryFilters.ebvError();if(c==a+"decimal"&&(-1!=h.value.indexOf("e")||-1!=h.value.indexOf("E")))return QueryFilters.ebvError();if(!(c!=a+"int"&&c!=a+"integer"||-1==h.value.indexOf("e")&&-1==h.value.indexOf("E")&&-1==h.value.indexOf(".")))return QueryFilters.ebvError();try{return h.value=parseInt(parseFloat(h.value)),isNaN(h.value)?QueryFilters.ebvError():(h.type=c,h)}catch(e){return QueryFilters.ebvError()}}else{if(c==a+"boolean")return"literal"===(h=u[0]).token&&null==h.type?"true"===h.value||"1"===h.value?QueryFilters.ebvTrue():"false"===h.value||"0"===h.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===h.token?QueryFilters.isEbvError(h)?h:QueryFilters.ebvBoolean(h):QueryFilters.ebvError();if(c==a+"string")return"literal"===(h=u[0]).token?(h=QueryFilters.normalizeLiteralDatatype(h,i,s)).type==a+"integer"||h.type==a+"decimal"||h.type==a+"double"||h.type==a+"nonPositiveInteger"||h.type==a+"negativeInteger"||h.type==a+"long"||h.type==a+"int"||h.type==a+"short"||h.type==a+"byte"||h.type==a+"nonNegativeInteger"||h.type==a+"unsignedLong"||h.type==a+"unsignedInt"||h.type==a+"unsignedShort"||h.type==a+"unsignedByte"||h.type==a+"positiveInteger"||h.type==a+"float"?(h.type=c,h.value=""+h.value,h):h.type==a+"string"?h:h.type==a+"boolean"?(QueryFilters.ebv(h)?(h.type=c,h.value="true"):(h.type=c,h.value="false"),h):h.type==a+"dateTime"||h.type==a+"date"?(h.type=c,"string"!=typeof h.value&&(h.value=r.iso8601(h.value)),h):null==h.type?(h.value=""+h.value,h.type=c,h):QueryFilters.ebvError():"uri"===h.token?{token:"literal",value:r.lexicalFormBaseUri(h,s),type:c,lang:null}:QueryFilters.ebvError();if(c==a+"dateTime"||c==a+"date"){if((h=u[0]).type==a+"dateTime"||h.type==a+"date")return h;if(h.type!=a+"string"&&null!=h.type)return QueryFilters.ebvError();try{return h.value=r.iso8601(r.parseISO8601(h.value)),h.type=c,h}catch(e){return QueryFilters.ebvError()}}else{if(c!=a+"float")return null!=i.customFns[c]?i.customFns[c](QueryFilters,u):QueryFilters.ebvError();var h;if("literal"!==(h=u[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(h=QueryFilters.normalizeLiteralDatatype(h,i,s)).type||"http://www.w3.org/2001/XMLSchema#int"==h.type)return h.type=c,h.value=parseFloat(h.value),h;if("http://www.w3.org/2001/XMLSchema#boolean"==h.type)return 1==QueryFilters.ebv(h)?(h.type=c,h.value=1):(h.type=c,h.value=0),h;if("http://www.w3.org/2001/XMLSchema#float"==h.type||"http://www.w3.org/2001/XMLSchema#double"==h.type)return h.type=c,h.value=parseFloat(h.value),h;if("http://www.w3.org/2001/XMLSchema#string"==h.type)try{return h.value=parseFloat(h.value),isNaN(h.value)?QueryFilters.ebvError():(h.type=c,h)}catch(e){return QueryFilters.ebvError()}else{if(null!=h.type)return QueryFilters.ebvError();if(h.value.split(".").length>2)return QueryFilters.ebvError();if(h.value.split("-").length>2)return QueryFilters.ebvError();if(h.value.split("/").length>2)return QueryFilters.ebvError();if(h.value.split("+").length>2)return QueryFilters.ebvError();try{return h.value=parseFloat(h.value),isNaN(h.value)?QueryFilters.ebvError():(h.type=c,h)}catch(e){return QueryFilters.ebvError()}}}}},e.exports={QueryFilters:QueryFilters}},Xhqo:function(e,t,n){"use strict";var r=n("hwdV").Buffer,i=n(4);e.exports=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return l[u]={callback:e,args:t},r(u),u++},f.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))},YPnX:function(e,t,n){var r=n("/pP7").Tree,i=n("thjG"),o=n("thjG");NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},NodeKey.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var n=this.order[t];if(null==e[n])return 0;if(this[n]<e[n])return-1;if(this[n]>e[n])return 1}return 0},Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],n=[],r=this;i.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof r[e]?(n.push(e),r.keyComponents[e]=null):(t.push(e),r.keyComponents[e]=r[e],r.indexKey.push(e))}),this.order=t.concat(n),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,r.call(this,e.order,function(e){e.comparator=function(t,n){for(var r=0;r<e.componentOrder.length;r++){var i=e.componentOrder[r],o=t[i],a=n[i];if(o<a)return-1;if(o>a)return 1}return 0},e.rangeComparator=function(t,n){for(var r=0;r<e.componentOrder.length;r++){var i=e.componentOrder[r];if(null==n[i]||null==t[i])return 0;if(t[i]<n[i])return-1;if(t[i]>n[i])return 1}return 0},t(e)}))},QuadIndex.prototype=i.create(r.prototype,{constructor:r}),QuadIndex.prototype.insert=function(e,t){r.prototype.insert.call(this,e,null,function(e){t(e)})},QuadIndex.prototype.search=function(e,t){r.prototype.search.call(this,e,function(e){t(e)},!0)},QuadIndex.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},QuadIndex.prototype._rangeTraverse=function(e,t,n,r){var i=n.key,a=[],s=[t];o.whilst(function(){return s.length>0},function(t){for(var n=s.shift(),r=0;r<n.numberActives&&-1===e.rangeComparator(n.keys[r].key,i);)r++;if(!0===n.isLeaf){for(var u=r;u<n.numberActives&&0===e.rangeComparator(n.keys[u].key,i);)a.push(n.keys[u].key),u++;t()}else e._diskRead(n.children[r],function(u){s.push(u);var l=r;o.whilst(function(){return l<n.numberActives&&0===e.rangeComparator(n.keys[l].key,i)},function(t){a.push(n.keys[l].key),e._diskRead(n.children[++l],function(e){s.push(e),t()})},function(){t()})})},function(){r(a)})},e.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},Zn8D:function(e,t,n){"use strict";var r=n("psW0");function i(e){return e}function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i,e)}n.d(t,"a",function(){return o})},blkk:function(e,t,n){var r=n("f9Wm").QueryEngine,i=n("LYgx").QuadBackend,o=n("PMMj").PersistentQuadBackend,a=n("dBu6").Lexicon,s=n("qqWt").PersistentLexicon,u=n("iHO8"),l=n("thjG");Store=function(e,t){var n=null,u=null;if(0==arguments.length)u={};else if(1==arguments.length)u={},n=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";u=e,n=t}null==u.treeOrder&&(u.treeOrder=15);var l=a,c=i;!0===u.persistent&&(l=s,c=o),this.functionMap={};var h=this;this.customFns={},new l(function(e){var t=function(){new c(u,function(t){var i=function(){u.backend=t,u.lexicon=e,h.engine=new r(u),n(null,h)};u.overwrite?t.clear(i):i()})};!0===u.overwrite?e.clear(t):t()},u.name)},Store.prototype.rdf=u.rdf,Store.prototype.rdf.api=u,Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.prototype.executeWithEnvironment=function(){var e,t,n;if(3===arguments.length){e=arguments[0];var r=function(){};t=arguments[1],n=arguments[2]}else 4===arguments.length&&(e=arguments[0],r=arguments[3],t=arguments[1],n=arguments[2]);t=l.map(t,function(e){return{token:"uri",value:e}}),n=l.map(n,function(e){return{token:"uri",value:e}}),this.engine.execute(e,r,t,n)},Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.prototype.node=function(){var e=null,t=null,n=null;if(2===arguments.length)n=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";n=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(n)&&(n=this.rdf.resolve(n)),this.engine.execute("CONSTRUCT { <"+n+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+n+"> ?p ?o } }",t)},Store.prototype.startObservingNode=function(){2===arguments.length?this.engine.callbacksBackend.observeNode(arguments[0],arguments[1],function(){}):3===arguments.length&&this.engine.callbacksBackend.observeNode(arguments[0],arguments[1],arguments[2],function(){})},Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.prototype.startObservingQuery=function(){var e=arguments[2];this.engine.callbacksBackend.observeQuery(arguments[0],arguments[1],null!=e?e:function(){})},Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.prototype.subscribe=function(e,t,n,r,i){var o=this,a=function(e,t){var n=[],r={blanks:{},outCache:{}},a=[];l.each(t,function(e){var t=u.buildRDFResource(e.subject,a,o.engine,r),i=u.buildRDFResource(e.predicate,a,o.engine,r),s=u.buildRDFResource(e.object,a,o.engine,r);null!=t&&null!=i&&null!=s&&(e=new u.Triple(t,i,s),n.push(e))}),i(e,n)};this.functionMap[i]=a,this.engine.callbacksBackend.subscribe(e,t,n,r,a,function(){})},Store.prototype.unsubscribe=function(e){this.engine.callbacksBackend.unsubscribe(this.functionMap[e]),delete this.functionMap[e]},Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.prototype.insert=function(){var e,t,n;if(1===arguments.length)t=arguments[0],n=function(){};else if(2===arguments.length)t=arguments[0],n=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),n=arguments[2]||function(){}}var r="",i=this;t.forEach(function(e){r=r+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),r=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+r+" } }":"INSERT DATA { "+r+" }",this.engine.execute(r,n)},Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return e.toString()},Store.prototype.delete=function(){var e,t,n;if(1===arguments.length)t=arguments[0],n=function(){};else if(2===arguments.length)t=arguments[0],n=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),n=arguments[2]||function(){}}var r="",i=this;t.forEach(function(e){r=r+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),r=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+r+" } }":"DELETE DATA { "+r+" }",this.engine.execute(r,n)},Store.prototype.clear=function(){var e;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var n="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(n,t)},Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.prototype.load=function(){var e,t,n,r,i={};if(3===arguments.length)n=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],r=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],"string"==typeof(i=arguments[2])?(n=this.rdf.createNamedNode(i),i={}):(n=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),r=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){var o="LOAD <"+(t=this.rdf.createNamedNode(t)).valueOf()+"> INTO GRAPH <"+n.valueOf()+">";this.engine.execute(o,r)}else{var a=this,s=this.engine.rdfLoader.parsers[e];if(!s)return r(new Error("Cannot find parser for the provided media type:"+e));var u=[s,{token:"uri",value:n.valueOf()},t,i,function(e,t){e?r(e,t):a.engine.batchLoad(t,function(e){null!=e?r(null,e):r(new Error("Erro batch-loading triples."))})}];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,u):this.engine.rdfLoader.tryToParse.apply(null,u)}},Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var n=l.map(t,function(e){return new u.NamedNode(e)});e(null,n)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},Store.VERSION="0.9.17",Store.yieldFrequency=function(e){l.yieldFrequency(e)},e.exports.Store=Store,e.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},e.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},c7F3:function(e,t,n){"use strict";var r=n("mrSG").__extends;Object.defineProperty(t,"__esModule",{value:!0});var i=n("CyhQ"),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},a={type:"change"},s={type:"start"},u={type:"end"};t.OrbitControls=function(e){function t(t,n,r){var a=e.call(this)||this;return a.object=t,a.domElement=void 0!==n?n:document,a.window=void 0!==r?r:window,a.enabled=!0,a.target=new i.Vector3,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.25,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.enableKeys=!0,a.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},a.mouseButtons={ORBIT:i.MOUSE.LEFT,ZOOM:i.MOUSE.MIDDLE,PAN:i.MOUSE.RIGHT},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a.updateOffset=new i.Vector3,a.updateQuat=(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0)),a.updateQuatInverse=a.updateQuat.clone().inverse(),a.updateLastPosition=new i.Vector3,a.updateLastQuaternion=new i.Quaternion,a.state=o.NONE,a.scale=1,a.spherical=new i.Spherical,a.sphericalDelta=new i.Spherical,a.panOffset=new i.Vector3,a.zoomChanged=!1,a.rotateStart=new i.Vector2,a.rotateEnd=new i.Vector2,a.rotateDelta=new i.Vector2,a.panStart=new i.Vector2,a.panEnd=new i.Vector2,a.panDelta=new i.Vector2,a.dollyStart=new i.Vector2,a.dollyEnd=new i.Vector2,a.dollyDelta=new i.Vector2,a.panLeftV=new i.Vector3,a.panUpV=new i.Vector3,a.panInternalOffset=new i.Vector3,a.onMouseDown=function(e){if(!1!==a.enabled){if(e.preventDefault(),e.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;a.rotateStart.set(e.clientX,e.clientY),a.state=o.ROTATE}else if(e.button===a.mouseButtons.ZOOM){if(!1===a.enableZoom)return;a.dollyStart.set(e.clientX,e.clientY),a.state=o.DOLLY}else if(e.button===a.mouseButtons.PAN){if(!1===a.enablePan)return;a.panStart.set(e.clientX,e.clientY),a.state=o.PAN}a.state!==o.NONE&&(document.addEventListener("mousemove",a.onMouseMove,!1),document.addEventListener("mouseup",a.onMouseUp,!1),a.dispatchEvent(s))}},a.onMouseMove=function(e){if(!1!==a.enabled)if(e.preventDefault(),a.state===o.ROTATE){if(!1===a.enableRotate)return;a.rotateEnd.set(e.clientX,e.clientY),a.rotateDelta.subVectors(a.rotateEnd,a.rotateStart);var t=a.domElement===document?a.domElement.body:a.domElement;a.rotateLeft(2*Math.PI*a.rotateDelta.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*a.rotateDelta.y/t.clientHeight*a.rotateSpeed),a.rotateStart.copy(a.rotateEnd),a.update()}else if(a.state===o.DOLLY){if(!1===a.enableZoom)return;a.dollyEnd.set(e.clientX,e.clientY),a.dollyDelta.subVectors(a.dollyEnd,a.dollyStart),a.dollyDelta.y>0?a.dollyIn(a.getZoomScale()):a.dollyDelta.y<0&&a.dollyOut(a.getZoomScale()),a.dollyStart.copy(a.dollyEnd),a.update()}else if(a.state===o.PAN){if(!1===a.enablePan)return;a.panEnd.set(e.clientX,e.clientY),a.panDelta.subVectors(a.panEnd,a.panStart),a.pan(a.panDelta.x,a.panDelta.y),a.panStart.copy(a.panEnd),a.update()}},a.onMouseUp=function(e){!1!==a.enabled&&(document.removeEventListener("mousemove",a.onMouseMove,!1),document.removeEventListener("mouseup",a.onMouseUp,!1),a.dispatchEvent(u),a.state=o.NONE)},a.onMouseWheel=function(e){!1===a.enabled||!1===a.enableZoom||a.state!==o.NONE&&a.state!==o.ROTATE||(e.preventDefault(),e.stopPropagation(),e.deltaY<0?a.dollyOut(a.getZoomScale()):e.deltaY>0&&a.dollyIn(a.getZoomScale()),a.update(),a.dispatchEvent(s),a.dispatchEvent(u))},a.onKeyDown=function(e){if(!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan)switch(e.keyCode){case a.keys.UP:a.pan(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:a.pan(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:a.pan(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:a.pan(-a.keyPanSpeed,0),a.update()}},a.onTouchStart=function(e){if(!1!==a.enabled){switch(e.touches.length){case 1:if(!1===a.enableRotate)return;a.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),a.state=o.TOUCH_ROTATE;break;case 2:if(!1===a.enableZoom)return;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);a.dollyStart.set(0,r),a.state=o.TOUCH_DOLLY;break;case 3:if(!1===a.enablePan)return;a.panStart.set(e.touches[0].pageX,e.touches[0].pageY),a.state=o.TOUCH_PAN;break;default:a.state=o.NONE}a.state!==o.NONE&&a.dispatchEvent(s)}},a.onTouchMove=function(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===a.enableRotate)return;if(a.state!==o.TOUCH_ROTATE)return;a.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),a.rotateDelta.subVectors(a.rotateEnd,a.rotateStart);var t=a.domElement===document?a.domElement.body:a.domElement;a.rotateLeft(2*Math.PI*a.rotateDelta.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*a.rotateDelta.y/t.clientHeight*a.rotateSpeed),a.rotateStart.copy(a.rotateEnd),a.update();break;case 2:if(!1===a.enableZoom)return;if(a.state!==o.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(n*n+r*r);a.dollyEnd.set(0,i),a.dollyDelta.subVectors(a.dollyEnd,a.dollyStart),a.dollyDelta.y>0?a.dollyOut(a.getZoomScale()):a.dollyDelta.y<0&&a.dollyIn(a.getZoomScale()),a.dollyStart.copy(a.dollyEnd),a.update();break;case 3:if(!1===a.enablePan)return;if(a.state!==o.TOUCH_PAN)return;a.panEnd.set(e.touches[0].pageX,e.touches[0].pageY),a.panDelta.subVectors(a.panEnd,a.panStart),a.pan(a.panDelta.x,a.panDelta.y),a.panStart.copy(a.panEnd),a.update();break;default:a.state=o.NONE}},a.onTouchEnd=function(e){!1!==a.enabled&&(a.dispatchEvent(u),a.state=o.NONE)},a.onContextMenu=function(e){e.preventDefault()},a.domElement.addEventListener("contextmenu",a.onContextMenu,!1),a.domElement.addEventListener("mousedown",a.onMouseDown,!1),a.domElement.addEventListener("wheel",a.onMouseWheel,!1),a.domElement.addEventListener("touchstart",a.onTouchStart,!1),a.domElement.addEventListener("touchend",a.onTouchEnd,!1),a.domElement.addEventListener("touchmove",a.onTouchMove,!1),a.window.addEventListener("keydown",a.onKeyDown,!1),a.update(),a}return r(t,e),t.prototype.update=function(){var e=this.object.position;return this.updateOffset.copy(e).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&this.state===o.NONE&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),e.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>1e-6)&&(this.dispatchEvent(a),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},t.prototype.panLeft=function(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)},t.prototype.panUp=function(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)},t.prototype.pan=function(e,t){var n=this.domElement===document?this.domElement.body:this.domElement;if("PerspectiveCamera"===this.object.type){this.panInternalOffset.copy(this.object.position).sub(this.target);var r=this.panInternalOffset.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*r/n.clientHeight,this.object.matrix),this.panUp(2*t*r/n.clientHeight,this.object.matrix)}else"OrthographicCamera"===this.object.type?(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},t.prototype.dollyIn=function(e){"PerspectiveCamera"===this.object.type?this.scale/=e:"OrthographicCamera"===this.object.type?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},t.prototype.dollyOut=function(e){"PerspectiveCamera"===this.object.type?this.scale*=e:"OrthographicCamera"===this.object.type?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},t.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},t.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},t.prototype.rotateLeft=function(e){this.sphericalDelta.theta-=e},t.prototype.rotateUp=function(e){this.sphericalDelta.phi-=e},t.prototype.getPolarAngle=function(){return this.spherical.phi},t.prototype.getAzimuthalAngle=function(){return this.spherical.theta},t.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},t.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(a),this.update(),this.state=o.NONE},Object.defineProperty(t.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e},enumerable:!0,configurable:!0}),t}(i.EventDispatcher)},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},dBu6:function(e,t,n){var r=n("thjG"),i=n("/pP7").Tree;Lexicon=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.seq(function(e){new i(2,function(n){t.uris=n,e()})},function(e){new i(2,function(n){t.literals=n,e()})},function(e){new i(2,function(n){t.knownGraphs=n,e()})},function(e){new i(2,function(n){t.oidUris=n,e()})},function(e){new i(2,function(n){t.oidLiterals=n,e()})},function(e){new i(2,function(n){t.oidBlanks=n,e()})})(function(){null!=e&&e(t)})},Lexicon.prototype.registerGraph=function(e,t,n){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){n()}):n()},Lexicon.prototype.registeredGraphs=function(e,t){var n=[];this.knownGraphs.walk(function(t){n.push(!0===e?t.data:t.key)},function(){t(n)})},Lexicon.prototype.registerUri=function(e,t){var n=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=n.oidCounter,a="u"+o;n.oidCounter++,r.seq(function(t){n.uris.insert(e,[o,0],function(){t()})},function(t){n.oidUris.insert(a,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},Lexicon.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var n=""+t;this.oidBlanks.insert(n,n,function(){e(t)})},Lexicon.prototype.resolveBlank=function(e,t){var n=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var r=n.oidCounter;this.oidCounter++,t(""+r)}})},Lexicon.prototype.resolveBlankCost=function(e,t){t(0)},Lexicon.prototype.registerLiteral=function(e,t){var n=this;this.literals.search(e,function(i){if(null==i){var o="l"+(a=n.oidCounter);n.oidCounter++,r.seq(function(t){n.literals.insert(e,[a,0],function(){t()})},function(t){n.oidLiterals.insert(o,e,function(){t()})})(function(){t(a)})}else{var a=i[0];i[1]=i[1]+1,t(a)}})},Lexicon.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(e){var t;return-1!=(t=e.lastIndexOf("@"))&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:e.substring(1,t-1),lang:e.substring(t+1,e.length)}:-1!=(t=e.lastIndexOf("^^"))&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]?{token:"literal",value:e.substring(1,t-1),type:e.substring(t+3,e.length-1)}:{token:"literal",value:e.substring(1,e.length-1)}},Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.prototype.retrieve=function(e,t){var n=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):r.seq(function(t,r){n.oidUris.search("u"+e,function(e){r(null,null!=e?n.parseUri(e):null)})},function(t,r){null==t?n.oidLiterals.search("l"+e,function(e){r(null,null!=e?n.parseLiteral(e):null)}):r(null,t)},function(t,r){null==t?n.oidBlanks.search(""+e,function(t){r(null,null!=t?{token:"blank",value:"_:"+e}:null)}):r(null,t)})(null,function(e,n){t(n)})},Lexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.seq(function(e){new i(2,function(n){t.uris=n,e()})},function(e){new i(2,function(n){t.literals=n,e()})},function(e){new i(2,function(n){t.knownGraphs=n,e()})},function(e){new i(2,function(n){t.oidUris=n,e()})},function(e){new i(2,function(n){t.oidLiterals=n,e()})},function(e){new i(2,function(n){t.oidBlanks=n,e()})})(function(){null!=e&&e()})},Lexicon.prototype.unregister=function(e,t,n){var i=this;r.seq(function(n){i._unregisterTerm(e.subject.token,t.subject,n)},function(n){i._unregisterTerm(e.predicate.token,t.predicate,n)},function(n){i._unregisterTerm(e.object.token,t.object,n)},function(n){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,n):n()})(function(){n(!0)})},Lexicon.prototype._unregisterTerm=function(e,t,n){var i=this;if("uri"===e)t!=this.defaultGraphOid?i.oidUris.search(o="u"+t,function(e){i.uris.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?r.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){n()}):i.uris.insert(e,[t,s-1],function(){n()}):n()})}):n();else if("literal"===e){var o;this.oidCounter++,i.oidLiterals.search(o="l"+t,function(e){i.literals.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?r.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){n()}):i.literals.insert(e,[t,s-1],function(){n()}):n()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){n()}):n()},e.exports={Lexicon:Lexicon}},"eA/Y":function(e,t,n){"use strict";e.exports=o;var r=n("J78i"),i=n("Onz0");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n("P7XM"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},eSX4:function(e,t,n){var r=n("y75E").Parser,i={};function o(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}i.parser={async:!0,parse:function(e,t,n,i){i||(i=n,n=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),n&&n.baseURI&&(n.documentIRI=n.baseURI);var a=[];new r(n).parse(e,function(e,n){e?i(e):n?a.push({subject:o(n.subject),predicate:o(n.predicate),object:o(n.object),graph:t}):i(!1,a)})},resetBlankNodeIds:function(){r._resetBlankNodeIds()}},e.exports={RVN3Parser:i}},eihs:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={e:{}}},f9Wm:function(e,t,n){var r=n("99Iv").AbstractQueryTree,i=n("99Iv").NonSupportedSparqlFeatureError,o=n("thjG"),a=n("YPnX"),s=n("y+K4").QueryPlan,u=n("Xerb").QueryFilters,l=n("iHO8"),c=n("KQVv").RDFLoader,h=n("fm3F").CallbacksBackend,f=n("thjG"),d=n("thjG");function p(e,t,n){this.name="BindExpressionError",this.bind=t,this.error=n,this.message=e}p.prototype=new Error,p.constructor=p,QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new r,this.rdfLoader=new c(e.communication),this.callbacksBackend=new h(this),this.customFns=e.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.prototype.registerNsInEnvironment=function(e,t){var n=[];null!=e&&null!=e.prefixes&&(n=e.prefixes);var r={};for(var i in this.defaultPrefixes)r[i]=this.defaultPrefixes[i];for(var o=0;o<n.length;o++){var a=n[o];"prefix"===a.token&&(r[a.prefix]=a.local)}t.namespaces=r,t.base=null!=e&&e.base&&"object"==typeof e.base?e.base.value:null},QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],a="";for(var s in o){var u=o[s];null==u?a=a+s+"null":"literal"==u.token?(null!=u.value&&(a+=u.value),null!=u.lang&&(a+=u.lang),null!=u.type&&(a+=u.type)):a=u.value?a+s+u.value:a+s+u}null==n[a]&&(r.push(o),n[a]=!0)}return r}return t},QueryEngine.prototype.applyLimitOffset=function(e,t,n){return null==t&&null==e?n:(null==e&&(e=0),n.slice(e,t=null==t?n.length:e+t))},QueryEngine.prototype.applySingleOrderBy=function(e,t,n,r,i){var o=[],a=this;f.eachSeries(e,function(e,i){u.collect(e.expression,[t],n,r,a,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},QueryEngine.prototype.applyOrderBy=function(e,t,n,r,i){var o=this,a=[];null!=e&&e.length>0?f.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,n,r,function(e){a.push(e),i()})},function(){a.sort(function(t,n){return o.compareFilteredBindings(t,n,e,r)});for(var t=[],n=0;n<a.length;n++)t.push(a[n].binding);i(t)}):i(t)},QueryEngine.prototype.compareFilteredBindings=function(e,t,n,r){for(var i=0;;){if(i==e.value.length)return 0;var o,a=n[i].direction;if(null!=e.value[i]||null!=t.value[i]){if(null==e.value[i])o={value:!1};else if(null==t.value[i])o={value:!0};else{if("blank"===e.value[i].token&&"blank"===t.value[i].token){i++;continue}if("blank"===e.value[i].token)o={value:!1};else if("blank"===t.value[i].token)o={value:!0};else if("uri"===e.value[i].token&&"uri"===t.value[i].token){if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}else if("uri"===e.value[i].token)o={value:!1};else if("uri"===t.value[i].token)o={value:!0};else if("literal"===e.value[i].token&&"literal"===t.value[i].token&&null==e.value[i].type&&null==t.value[i].type){if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}else if("literal"===e.value[i].token&&null==e.value[i].type)o={value:!1};else if("literal"===t.value[i].token&&null==t.value[i].type)o={value:!0};else{if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}}return 1==o.value?"ASC"===a?1:-1:"ASC"===a?-1:1}i++}},QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var n=[],r={},i=0;i<t.named.length;i++)r[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==r[t.implicit[i].oid]&&n.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var a=e[i],s=!1;for(var u in a){for(var l=0;l<r.length;l++)if(a[u]===r[l]){s=!0;break}if(s)break}s||o.push(a)}return o},QueryEngine.prototype.aggregateBindings=function(e,t,n,r,i){this.copyDenormalizedBindings(t,r.outCache,function(t){for(var o={},a=0;a<e.length;a++){var s=u.runAggregator(e[a],t,this,n,r);e[a].alias?o[e[a].alias.value]=s:o[e[a].value.value]=s}i(o)})},QueryEngine.prototype.projectBindings=function(e,t,n){if("*"===e[0].kind)return t;for(var r=[],i=0;i<t.length;i++){for(var o=t[i],a={},s=!0,l=0;l<e.length;l++)if("variable"==e[l].token&&"aliased"!=e[l].kind)a[e[l].value.value]=o[e[l].value.value];else if("variable"==e[l].token&&"aliased"==e[l].kind){var c=u.runFilter(e[l].expression,o,this,n,{blanks:{},outCache:{}});if(u.isEbvError(c)){s=!1;break}a[e[l].alias.value]=c}!0===s&&r.push(a)}return r},QueryEngine.prototype.resolveNsInEnvironment=function(e,t){return t.namespaces[e]},QueryEngine.prototype.normalizeTerm=function(e,t,n,r){if("uri"===e.token){var i=o.lexicalFormBaseUri(e,t);null==i?r(null):n?this.lexicon.registerUri(i,r):this.lexicon.resolveUri(i,r)}else if("literal"===e.token){var a=o.lexicalFormLiteral(e,t);n?this.lexicon.registerLiteral(a,r):this.lexicon.resolveLiteral(a,r)}else if("blank"===e.token){var s=e.value,u=t.blanks[s];null!=u?r(u):n?this.lexicon.registerBlank(function(e){t.blanks[s]=e,r(e)}):this.lexicon.resolveBlank(function(e){t.blanks[s]=e,r(e)})}else r("var"===e.token?e.value:null)},QueryEngine.prototype.normalizeDatasets=function(e,t,n){var r=this;f.eachSeries(e,function(e,n){e.value===r.lexicon.defaultGraphUri?(e.oid=r.lexicon.defaultGraphOid,n()):r.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),n()})},function(){n(!0)})},QueryEngine.prototype.normalizeQuad=function(e,t,n,r){var i=null,a=null,s=null,u=null,l=this,c=!1;f.seq(function(r){if(null==e.graph||e.graph.value===l.lexicon.defaultGraphUri)u=0,r();else{var i=o.lexicalFormBaseUri(e.graph,t);l.normalizeTerm(e.graph,t,n,function(t){null!=t?(u=t,!0===n&&"var"!=e.graph.token?l.lexicon.registerGraph(t,i,function(){r()}):r()):(c=!0,r())})}},function(r){!1===c?l.normalizeTerm(e.subject,t,n,function(e){null!=e?(i=e,r()):(c=!0,r())}):r()},function(r){!1===c?l.normalizeTerm(e.predicate,t,n,function(e){null!=e?(a=e,r()):(c=!0,r())}):r()},function(r){!1===c?l.normalizeTerm(e.object,t,n,function(e){null!=e?(s=e,r()):(c=!0,r())}):r()})(function(){r(!0===c?null:{subject:i,predicate:a,object:s,graph:u})})},QueryEngine.prototype.denormalizeBindingsList=function(e,t,n){var r=this,i=[];f.eachSeries(e,function(e,n){r.denormalizeBindings(e,t,function(e){i.push(e),n()})},function(){n(i)})},QueryEngine.prototype.copyDenormalizedBindings=function(e,t,n){var r=this,i=[];f.eachSeries(e,function(e,n){var o={},a=d.keys(e);f.eachSeries(a,function(n,i){var a=e[n];if(null==a)o[n]=null,i();else if("object"==typeof a)o[n]=a,i();else{var s=t[a];null!=s?(o[n]=s,i()):r.lexicon.retrieve(a,function(e){t[a]=e,o[n]=e,i()})}},function(){i.push(o),n()})},function(){n(i)})},QueryEngine.prototype.denormalizeBindings=function(e,t,n){var r=d.keys(e),i=t.outCache,o=this;f.eachSeries(r,function(n,r){var a=e[n];null==a?(e[n]=null,r()):"object"==typeof a?r():null!=i[a]?(e[n]=i[a],r()):o.lexicon.retrieve(a,function(i){e[n]=i,"blank"===i.token&&(t.blanks[i.value]=a),r()})},function(){n(e)})},QueryEngine.prototype.execute=function(e,t,n,r){e=o.normalizeUnicodeLiterals(e);var i=this.abstractQueryTree.parseQueryString(e);if(null==i)t(!1,"Error parsing query string");else if("query"===i.token&&"update"==i.kind){this.callbacksBackend.startGraphModification();var a=this;this.executeUpdate(i,function(e,n){a.lexicon.updateAfterWrite&&a.lexicon.updateAfterWrite(),e?(a.callbacksBackend.cancelGraphModification(),t(e,n)):a.callbacksBackend.endGraphModification(function(){t(e,n)})})}else"query"===i.token&&"query"==i.kind&&this.executeQuery(i,t,n,r)},QueryEngine.prototype.executeQuery=function(e,t,n,r){var i=e.units,o=this,a={blanks:{},outCache:{}};this.registerNsInEnvironment(e.prologue,a);var s=o.abstractQueryTree.parseExecutableUnit(i[0]);"select"===s.kind?this.executeSelect(s,a,n,r,function(e,n){null==e?"object"==typeof n&&!0===n.denorm?t(null,n.bindings):o.denormalizeBindingsList(n,a,function(e){t(null,e)}):t(e)}):"ask"===s.kind?(s.projection=[{token:"variable",kind:"*"}],this.executeSelect(s,a,n,r,function(e,n){null==e?t(null,n.length>0):t(e)})):"construct"===s.kind&&(s.projection=[{token:"variable",kind:"*"}],o=this,this.executeSelect(s,a,n,r,function(e,n){null==e?o.denormalizeBindingsList(n,a,function(e){if(null!=e){var n=new l.Graph;null==s.template&&(s.template={triplesContext:s.pattern});for(var r=1,i=[],u=0;u<e.length;u++){for(var c=e[u],h=0;h<i.length;h++)delete i[h].valuetmp;for(h=0;h<s.template.triplesContext.length;h++){for(var f=["subject","predicate","object"],d=s.template.triplesContext[h],p=0;p<f.length;p++){var m=f[p];if("blank"===d[m].token)if(d[m].valuetmp&&null!=d[m].valuetmp);else{var v="_:b"+r;r++,d[m].valuetmp=v,i.push(d[m])}}var g=l.buildRDFResource(d.subject,c,o,a),y=(p=l.buildRDFResource(d.predicate,c,o,a),l.buildRDFResource(d.object,c,o,a));if(null!=g&&null!=p&&null!=y){var b=new l.Triple(g,p,y);n.add(b)}}}t(null,n)}else t(new Error("Error denormalizing bindings."))}):t(e)}))},QueryEngine.prototype.executeSelect=function(e,t,n,r,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,a=e.dataset,s=e.modifier,u=e.limit,l=e.offset,c=e.order,h=this;null==n&&null==r||(a.implicit=n||[],a.named=r||[]),null!=a.implicit&&0===a.implicit.length&&null!=a.named&&0===a.named.length&&a.implicit.push(this.lexicon.defaultGraphUriTerm),h.normalizeDatasets(a.implicit.concat(a.named),t,function(){try{h.executeSelectUnit(o,a,e.pattern,t,function(n){if(null!=n){if(null!=e.group&&""===e.group){for(var r=!1,d=0;d<e.projection.length;d++)if(null!=e.projection[d].expression&&"aggregate"===e.projection[d].expression.expressionType){r=!0;break}!0===r&&(e.group="singleGroup")}e.group&&""!=e.group?h.checkGroupSemantics(e.group,o)?h.groupSolution(n,e.group,a,t,function(e){var n=[];f.eachSeries(e,function(e,r){h.aggregateBindings(o,e,a,t,function(e){n.push(e),r()})},function(){i(null,{bindings:n,denorm:!0})})}):i(new Error("Incompatible Group and Projection variables")):h.applyOrderBy(c,n,a,t,function(e){var t=h.projectBindings(o,e,a),n=h.applyModifier(s,t),r=h.applyLimitOffset(l,u,n),c=h.removeDefaultGraphBindings(r,a);i(null,c)})}else i(new Error("Error executing SELECT query."))})}catch(e){i(e)}})}else i(new Error("Cannot execute "+e.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(e,t,n,r,i){var o=[],a=[],s=!1,l=this;"singleGroup"===t?i([e]):f.eachSeries(e,function(e,i){var c=!0;f.eachSeries(t,function(t,i){var a=null;if("var"===t.token)a=t.value,0==s&&o.push(a),i();else if("aliased_expression"===t.token){if(a=t.alias.value,0==s&&o.push(a),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var h=l.copyDenormalizedBindings([e],r.outCache),f=u.runFilter(t.expression,h[0],l,n,r);u.isEbvError(f)?c=!1:(null!=f.value&&(f.value=""+f.value),e[t.alias.value]=f)}i()}else l.copyDenormalizedBindings([e],r.outCache,function(n){var h=u.runFilter(t,n[0],l,r);u.isEbvError(h)?c=!1:(e["groupCondition"+env._i]=h,a="groupCondition"+env._i,0==s&&o.push(a)),i()})},function(){0==s&&(s=!0),!0===c&&a.push(e),i()})},function(){for(var e={},t={},n=0;n<a.length;n++){for(var r=a[n],s="",u=0;u<o.length;u++){var l=r[o[u]];s+="object"==typeof l?l.value:l}null==e[s]?(t[s]=0,e[s]=[r]):e[s].push(r)}var c=[];for(var h in e)c.push(e[h]);i(c)})},QueryEngine.prototype.executeSelectUnit=function(e,t,n,r,o){if("BGP"===n.kind)this.executeAndBGP(e,t,n,r,o);else if("UNION"===n.kind)this.executeUNION(e,t,n.value,r,o);else if("JOIN"===n.kind)this.executeJOIN(e,t,n,r,o);else if("LEFT_JOIN"===n.kind)this.executeLEFT_JOIN(e,t,n,r,o);else if("FILTER"===n.kind){var a=this;this.executeSelectUnit(e,t,n.value,r,function(e){null!=e?u.checkFilters(n,e,!1,t,r,a,o):o([])})}else{if("EMPTY_PATTERN"!==n.kind)throw new i(n.kind);o([])}},QueryEngine.prototype.executeUNION=function(e,t,n,r,i){var o,a,l=n[0],c=n[1],h=null;if(2!=n.length)throw"SPARQL algebra UNION with more than two components";var d=this;f.seq(function(n){try{d.executeSelectUnit(e,t,l,r,function(e){o=e,n()})}catch(e){h=e,n()}},function(n){if(null==h)try{d.executeSelectUnit(e,t,c,r,function(e){a=e,n()})}catch(e){h=e,n()}else n()})(function(){if(null!=h)i(h);else{var e=s.unionBindings(o,a);d.runBinds(n.binds,e,t,r,function(e,o){if(null!=e)throw new p("Error processing bind expressions",n.binds,e);u.checkFilters(n,o,!1,t,r,d,i)})}})},QueryEngine.prototype.executeAndBGP=function(e,t,n,r,i){var o=this;s.executeAndBGPsDPSize(n.value,t,this,r,function(e){null!=e?o.runBinds(n.binds,e,t,r,function(e,a){if(null!=e)throw new p("Error processing bind expressions",n.binds,e);u.checkFilters(n,a,!1,t,r,o,i)}):i(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(e,t,n,r,i){var o=n.lvalue,a=n.rvalue;if("EMPTY_PATTERN"===o.kind)this.executeSelectUnit(e,t,a,r,i);else{var l,c,h=null,d=null,m=null,v=this;f.seq(function(n){try{v.executeSelectUnit(e,t,o,r,function(e){h=e,n()})}catch(e){m=e,n()}},function(n){if(null!=m)n();else try{v.executeSelectUnit(e,t,a,r,function(e){d=e,n()})}catch(e){m=e,n()}})(function(){if(null!=m)i(m);else{var e=s.leftOuterJoinBindings(h,d);v.runBinds(n.binds,e,t,r,function(o,a){if(null!=o)throw new p("Error processing bind expressions",n.binds,o);u.checkFilters(n,e,!0,t,r,v,function(e){if(h.length>1&&d.length>1){var t=[],n={};for(var r in h[0])n[r]=!0;for(r in d[0])1!=n[r]&&t.push(r);l=[],c={};for(var o=0;o<e.length;o++)if(!0===e[o].__nullify__){for(var a=0;a<t.length;a++)e[o].bindings[t[a]]=null;var s=[],u=[];for(var r in e[o].bindings)null!=e[o].bindings[r]&&(s.push(r+e[o].bindings[r]),s.sort(),u.push(s.join("")));if(null==c[s.join("")]){for(a=0;a<u.length;a++)c[u[a]]=!0;l.push(e[o].bindings)}}else for(var r in l.push(e[o]),s=[],u=[],e[o])s.push(r+e[o][r]),s.sort(),c[s.join("")]=!0;i(l)}else i(e)})})}})}},QueryEngine.prototype.executeJOIN=function(e,t,n,r,i){var o=n.lvalue,a=n.rvalue,l=null,c=null,h=null,d=this;f.seq(function(n){try{d.executeSelectUnit(e,t,o,r,function(e){l=e,n()})}catch(e){h=e,n()}},function(n){if(null!=h)n();else try{d.executeSelectUnit(e,t,a,r,function(e){c=e,n()})}catch(e){h=e,n()}})(function(){var e=null;if(null!=h)i(h);else if(0===l.length||0===c.length)i([]);else{var f={},m=[];for(var v in l[0])f[v]=!1;for(var v in c[0])!1===f[v]&&m.push(v);e=0==m.length?s.joinBindings(l,c):d.abstractQueryTree.treeWithUnion(o)||d.abstractQueryTree.treeWithUnion(a)?s.joinBindings(l,c):s.joinBindings2(m,l,c),d.runBinds(n.binds,e,t,r,function(e,o){if(null!=e)throw new p("Error processing bind expressions",n.binds,e);u.checkFilters(n,o,!1,t,r,d,i)})}})},QueryEngine.prototype.rangeQuery=function(e,t,n){var r=this;r.normalizeQuad(e,t,!1,function(e){null!=e?r.backend.range(new a.Pattern(e),function(e){n(null==e||0==e.length?[]:e)}):n(null)})},QueryEngine.prototype.executeUpdate=function(e,t){var n=e.units,r=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(e.prologue,i);for(var a=0;a<n.length;a++){var s=r.abstractQueryTree.parseExecutableUnit(n[a]);if("insertdata"===s.kind){var u=null;f.eachSeries(s.quads,function(e,t){null===u?r._executeQuadInsert(e,i,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)})}else if("deletedata"===s.kind)u=null,f.eachSeries(s.quads,function(e,t){null===u?r._executeQuadDelete(e,i,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)});else if("modify"===s.kind)this._executeModifyQuery(s,i,t);else if("create"===s.kind)t(!0);else if("load"===s.kind){var l={uri:o.lexicalFormBaseUri(s.sourceGraph,i)};null!=s.destinyGraph&&(l={uri:o.lexicalFormBaseUri(s.destinyGraph,i)}),r=this,this.rdfLoader.load(s.sourceGraph.value,l,function(e,n){e?t(new Error("error batch loading quads")):r.batchLoad(n,function(e){null!==e?t(null,e):t(new Error("Error batch loading quads"))})})}else if("drop"===s.kind)this._executeClearGraph(s.destinyGraph,i,t);else{if("clear"!==s.kind)throw new Error("not supported execution unit");this._executeClearGraph(s.destinyGraph,i,t)}}},QueryEngine.prototype.batchLoad=function(e,t){var n=0,r={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),f.eachSeries(e,function(e,t){var o={};f.eachSeries(["subject","predicate","object","graph"],function(t,n){!function(e,t,n,o){var a;if(e[t].uri||"uri"===e[t].token){var s=e[t].uri||e[t].value;i.lexicon.registerUri(s,function(r){var a=function(){null!=e[t].uri&&(e[t]={token:"uri",value:e[t].uri},delete e[t].uri),n[t]=r,o()};"graph"===t?i.lexicon.registerGraph(r,s,function(){a()}):a()})}else e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(r){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),n[t]=r,o()}):null==(a=r[e[t].blank||e[t].value])?i.lexicon.registerBlank(function(i){r[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),n[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),n[t]=a,o())}(e,t,o,n)},function(){var r=e,s=new a.NodeKey(e=o);i.backend.search(s,function(o){o?t():i.backend.index(s,function(o){o&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(h.added,[r,e]),n+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(n)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},QueryEngine.prototype._executeModifyQuery=function(e,t,n){var r=this,i=!0,o=new Error("Error executing modify query"),a=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,f.seq(function(n){var s=[],u=[];if(null!=e.with&&s.push(e.with),null!=e.using){u=[];for(var l=0;l<e.using.length;l++){var c=e.using[l];"named"===c.kind?u.push(c.uri):s.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],r.executeSelect(e,t,s,u,function(e,s){if(e)return o=e,i=!1,n();r.denormalizeBindingsList(s,t,function(e){null!=e?a=e:(o=new Error("Error denormalizing bindings list"),i=!1),n()})})},function(n){var o=e.with;if(i){for(var u=[],l=0;l<e.delete.length;l++)for(var c=e.delete[l],h=0;h<a.length;h++){for(var d={},p=a[h],m=0;m<s.length;m++){var v=s[m];"graph"==v&&null==c[v]?d.graph=o:d[v]="var"===c[v].token?p[c[v].value]:c[v]}u.push(d)}f.eachSeries(u,function(e,n){r._executeQuadDelete(e,t,function(){n()})},function(){n()})}else n()},function(n){var o=e.with;if(i){for(var u=[],l=0;l<e.insert.length;l++)for(var c=e.insert[l],h=0;h<a.length;h++){for(var d={},p=a[h],m=0;m<s.length;m++){var v=s[m];"graph"==v&&null==c[v]?d.graph=o:d[v]="var"===c[v].token?p[c[v].value]:c[v]}u.push(d)}f.eachSeries(u,function(e,n){r._executeQuadInsert(e,t,function(){n()})},function(){n()})}else n()})(function(){n(i?null:o)})},QueryEngine.prototype._executeQuadInsert=function(e,t,n){var r,i=this,o=!1,s=null;f.seq(function(n){i.normalizeQuad(e,t,!0,function(e){null!=e?r=e:(o=!0,s="Error normalizing quad."),n()})},function(t){if(!1===o){var n=new a.NodeKey(r);i.backend.search(n,function(o){!0===o?t():i.backend.index(n,function(){i.callbacksBackend.nextGraphModification(h.added,[e,r]),t()})})}else t()})(function(){o?n(new Error(s)):n(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(e,t,n){var r,i,o,s=this,u=!1;f.seq(function(n){s.normalizeQuad(e,t,!0,function(e){null!=e?r=e:(u=!0,i="Error normalizing quad."),n()})},function(e){!1===u?(o=new a.NodeKey(r),s.backend.delete(o,function(){e()})):e()},function(t){!1===u?s.lexicon.unregister(e,o,function(){s.callbacksBackend.nextGraphModification(h.deleted,[e,r]),t()}):t()})(function(){u?n(new Error(i)):n(null,!0)})},QueryEngine.prototype._executeClearGraph=function(e,t,n){var r=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",n);else if("named"===e)r.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;f.eachSeries(e,function(e,n){t?n():r.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(i,o){i?(t=i,n()):r.lexicon.resolveUri(e,function(i){-1!=i?r.lexicon.knownGraphs.delete(i,function(){n()}):(t="Cannot find graph "+e+" to clear it",n())})})},function(){n(!t)})}else n(!1,"Error deleting named graphs")});else if("all"===e)r=this,this.execute("CLEAR DEFAULT",function(e,t){e?n(!1,t):r.execute("CLEAR NAMED",n)});else if("uri"==e.token){var i=o.lexicalFormBaseUri(e,t);null!=i?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+i+"> { ?s ?p ?o } } WHERE { GRAPH <"+i+"> { ?s ?p ?o } }",function(e){r.callbacksBackend.ongoingModification=!1,n(e)})):n(!1,"wrong graph URI")}else n(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var n={},r=0;r<e.length;r++){var i=e[r];"var"===i.token?n[i.value]=!0:"aliased_expression"===i.token&&(n[i.alias.value]=!0)}for(r=0;r<t.length;r++){var o=t[r];if("var"===o.kind){if(null==n[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==n[o.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(e,t,n,r,i){var o=this,a=t;null!=e&&e.length>0?o.copyDenormalizedBindings(t,r.outCache,function(s){for(var l=0;l<t.length;l++)for(var c=0;c<e.length;c++){var h=e[c],f=u.runFilter(h.expression,s[l],o,n,r);u.isEbvError(f)?i(f):a[l][h.as.value]=f}i(null,t)}):i(null,t)},QueryEngine.prototype.computeCosts=function(e,t,n){for(var r=0;r<e.length;r++)e[r]._cost=this.quadCost(e[r],t);n(e)},QueryEngine.prototype.quadCost=function(e,t){return 1},QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},e.exports={QueryEngine:QueryEngine}},fLnf:function(e,t,n){"use strict";!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("lO9m"));var r=n("CcnG"),i=n("lO9m");t.MarkdownToHtmlModule=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{declarations:[i.MarkdownToHtmlPipe],exports:[i.MarkdownToHtmlPipe]}]}],e}()},fWYr:function(e,t){var n=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,r=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,i=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,o={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function a(e,t){if(!(this instanceof a))return new a(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var n="";this._outputStream={write:function(e,t,r){n+=e,r&&r()},end:function(e){e&&e(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function s(e){var t=o[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}a.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,n,r,i){try{this._graph!==r&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(r?this._encodeIriOrBlankNode(r)+" {\n":"")),this._subject=null,this._graph="["!==r[0]?r:"]"),this._write(this._subject===e?this._predicate===t?", "+this._encodeObject(n):";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(n):(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(n),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,n,r,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(n)+(r?" "+this._encodeIriOrBlankNode(r)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;r.test(e)&&(e=e.replace(i,s));var n=this._prefixRegex.exec(e);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,n){return r.test(e)&&(e=e.replace(i,s)),n?'"'+e+'"@'+n:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=n.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,n,r,i){void 0===n?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof r?this._writeTriple(e,t,n,"",r):this._writeTriple(e,t,n,r,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,n){var r={};r[e]=t,this.addPrefixes(r,n)},addPrefixes:function(e,t){var n=this._prefixIRIs,r=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&n[o]!==(i+=":")&&(r=!0,n[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(r){var a="",s="";for(var u in n)a+=a?"|"+u:u,s+=(s?"|":"")+n[u];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(r?"\n":"",t)},blank:function(e,t){var n,r,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return"[]";case 1:if("["!==(n=i[0]).object[0])return"[ "+this._encodePredicate(n.predicate)+" "+this._encodeObject(n.object)+" ]";default:for(var o="[",a=0;a<r;a++)(n=i[a]).predicate===e?o+=", "+this._encodeObject(n.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(n.predicate)+" "+this._encodeObject(n.object),e=n.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,n=new Array(t),r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return"("+n.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(n,r){t=null,e(n,r)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},e.exports=a},fXKp:function(e,t,n){"use strict";var r=n("hwdV").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},fm3F:function(e,t,n){var r=n("thjG"),i=n("thjG"),o=(n("YPnX"),n("YPnX").Pattern),a=n("iHO8"),s=n("99Iv").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new s,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){if(!0!==this.ongoingModification){var t=this;if(null!=this.updateInProgress){var n=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,n[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,n[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,n){for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in this.indexMap){var s=this.indexMap[a],u=this.componentOrders[a];this._searchCallbacksInIndex(s,u,e,o,r),0!=this.pendingQueries.length&&this._searchQueriesInIndex(s=this.queriesIndexMap[a],u,o)}}this.dispatchNotifications(r),null!=n&&n(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,n){for(var r=this.emptyNotificationsMap[e]||[],i=0;i<r.length;i++)r[i](e,t);n()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var n=this.callbacksMap[t],r=e[t][Callbacks.deleted];if(null!=r)try{n(Callbacks.deleted,r)}catch(e){}for(var i in e[t])if(i!=Callbacks.deleted)try{n(i,e[t][i])}catch(e){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,n,r,i){for(var o=r[1],a=(r=r[0],0);a<t.length+1;a++){for(var s=e._||[],u=[],l=0;l<s.length;l++){var c=s[l];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][n]=i[c][n]||[],i[c][n].push(r),u.push(c))}e._=u;var h=t[a];if(null==e[""+o[h]])break;e=e[""+o[h]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var n=this.emptyNotificationsMap[e]||[];n.push(t),this.emptyNotificationsMap[e]=n},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var n=this.emptyNotificationsMap[e];null!=n&&(n=r.reject(n,function(e){return e===t})),this.emptyNotificationsMap[e]=n},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,n,r,i,a){var s=this._tokenizeComponents(e,t,n,r),u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var l=this;this.engine.normalizeQuad(s,u,!0,function(e){for(var t=new o(e),n=l._indexForPattern(t),r=l.componentOrders[n],s=l.indexMap[n],u=0;u<r.length;u++){var c=e[r[u]];if("_"===c){null==s._&&(s._=[]),l.callbackCounter++,s._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter;break}u===r.length-1?(s[c]=s[c]||{_:[]},l.callbackCounter++,s[c]._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter):(s[c]=s[c]||{},s=s[c])}null!=a&&a(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,n,r){var i={};return i.subject=null==e?Callbacks.ANYTHING:0==e.indexOf("_:")?{token:"blank",value:e}:{token:"uri",value:e},i.predicate=null==t?Callbacks.ANYTHING:{token:"uri",value:t},i.object=null==n?Callbacks.ANYTHING:{token:"uri",value:n},i.graph=null==r?Callbacks.ANYTHING:{token:"uri",value:r},i},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,n=this.indices,i=0;i<n.length;i++)for(var o=n[i],a=this.componentOrders[o],s=0;s<a.length&&!1!==r.include(t,a[s]);s++)if(s==t.length-1)return o;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,n,r;4===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,n=arguments[1],r=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",o=this,s={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,s);var u=[];this.engine.execute(i,function(t,i){if(t)r&&r(!1);else{var l=i,c=!1,h=function(e,t){if("eventsFlushed"===e&&c){c=!1;try{n(l)}catch(e){}}else if("eventsFlushed"!==e){c=!0;for(var r=0;r<t.length;r++){var i=t[r],h=a.buildRDFResource(i.subject,u,o.engine,s),f=a.buildRDFResource(i.predicate,u,o.engine,s),d=a.buildRDFResource(i.object,u,o.engine,s);null!=h&&null!=f&&null!=d&&(i=new a.Triple(h,f,d),e===Callbacks.added?l.add(i):e===Callbacks.deleted&&l.remove(i))}}};o.observersMap[n]=h,o.subscribeEmpty(Callbacks.eventsFlushed,h),o.subscribe(e,null,null,null,h,function(){try{n(l)}catch(e){}r&&r(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return!!t&&(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,n){var r=this.aqt.parseQueryString(e),a=this.aqt.parseSelect(r.units[0]),s=this.aqt.collectBasicTriples(a),u=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,i.eachSeries(s,function(e,t){null==e.graph&&(e.graph=u.engine.lexicon.defaultGraphUriTerm),u.engine.normalizeQuad(e,l,!0,function(e){for(var n=new o(e),r=u._indexForPattern(n),i=u.componentOrders[r],a=u.queriesIndexMap[r],s=0;s<i.length;s++){var l=e[i[s]];if("string"==typeof l){null==a._&&(a._=[]),a._.push(c);break}s===i.length-1?(a[l]=a[l]||{_:[]},a[l]._.push(c)):(a[l]=a[l]||{},a=a[l])}t()})},function(){u.engine.execute(e,function(e,n){e?console.log("ERROR in query callback "+n):t(n)}),null!=n&&n()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=r.reject(this.queriesList,function(e){return e===t}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,n){for(var i=n[1],o=(n=n[0],0);o<t.length+1;o++){for(var a=e._||[],s=[],u=0;u<a.length;u++){var l=a[u];r.include(this.pendingQueries,l)&&(r.remove(this.pendingQueries,function(e){return e===l}),this.matchedQueries.push(l)),null!=this.queriesMap[l]&&s.push(l)}e._=s;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,n=this,r={};i.eachSeries(this.matchedQueries,function(e,i){null==r[e]?(r[e]=!0,t=n.queriesCallbacksMap[e],n.engine.execute(n.queriesMap[e],function(e,n){if(!e)try{t(n)}catch(e){}i()})):i()},function(){e()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,e.exports=Callbacks},gQ1q:function(e,t,n){var r=n("1IWx").Transform,i=n("MCLT"),o=n("mfCV");function a(e){if(!(this instanceof a))return new a(e);r.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,n=new o(e);n.parse(function(e,n){n&&t.push(n)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,r){n.addChunk(e),r()},this._flush=function(e){n.end(),e()}}i.inherits(a,r),e.exports=a},h2QB:function(e,t,n){var r=n("1IWx").Transform,i=n("MCLT"),o=n("fWYr");function a(e){if(!(this instanceof a))return new a(e);r.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,n=new o({write:function(e,n,r){t.push(e),r&&r()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,r){n.addTriple(e,r)},this._flush=function(e){n.end(e)}}i.inherits(a,r),e.exports=a},hwdV:function(e,t,n){var r=n("tjlA"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},iHO8:function(e,t,n){var r=n("thjG"),i=n("Xerb").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var e={};for(var t in this)r.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFModel.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},RDFModel.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFModel.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},RDFModel.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFModel.UrisMap.prototype.addAll=function(e,t){for(var n in e)r.include(this.interfaceProperties,n)||(null!=this[n]?!0===t&&(this[n]=e[n]):this[n]=e[n]);return this},RDFModel.UrisMap.prototype.resolve=function(e){var t=e.split(":"),n=t[0],r=t[1];return""===n?null==this.defaultNs?null:this.defaultNs+r:null!=this[n]?this[n]+r:null},RDFModel.UrisMap.prototype.shrink=function(e){for(var t in this){var n=this[t];if(0===e.indexOf(n)&&""!==n&&"defaultNs"!=t)return t+":"+e.split(n)[1]}return e},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFModel.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFModel.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFModel.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFModel.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},RDFModel.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var e=this;for(var t in this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)}},so:function(e,t){return function(n){return n.subject.equals(e)&&n.object.equals(t)}},po:function(e,t){return function(n){return n.predicate.equals(e)&&n.object.equals(t)}},spo:function(e,t,n){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)&&r.object.equals(n)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var n=e.resolve("rdf:type");return function(e){return e.predicate.equals(n)&&e.object.equals(t)}}},RDFModel.defaultContext)this.prefixes.set(t,RDFModel.defaultContext[t])},RDFModel.RDFEnvironment.prototype=r.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFModel.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFModel.NamedNode(t):new RDFModel.NamedNode(e)},RDFModel.RDFEnvironment.prototype.createLiteral=function(e,t,n){return null!=n?new RDFModel.Literal(e,t,n.toString()):new RDFModel.Literal(e,t,n)},RDFModel.RDFEnvironment.prototype.createTriple=function(e,t,n){return new RDFModel.Triple(e,t,n)},RDFModel.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFModel.Graph;if(null!=e)for(var n=0;n<e.length;n++)t.add(e[n]);return t},RDFModel.RDFEnvironment.prototype.createAction=function(e,t){return function(n){return e(n)?t(n):n}},RDFModel.RDFEnvironment.prototype.createProfile=function(e){if(!0===e)return new RDFModel.RDFEnvironment.Profile;var t=new RDFModel.RDFEnvironment.Profile;return t.importProfile(this),t},RDFModel.RDFEnvironment.prototype.createTermMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.terms.values(),n=new RDFModel.UrisMap;for(var r in t)n[r]=t[r];return n},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.prefixes.values(),n=new RDFModel.UrisMap;for(var r in t)n[r]=t[r];return n},RDFModel.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var n=this.attributes[t];if(this[n]!=e[n])return!1}return!0},RDFModel.BlankNode=function(e){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},RDFModel.BlankNode.prototype=r.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(e,t,n){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=n&&(this.datatype=n)},RDFModel.Literal.prototype=r.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(e){RDFModel.RDFNode.call(this,"NamedNode"),this.nominalValue=null!=e.value?e.value:e},RDFModel.NamedNode.prototype=r.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(e,t,n){this.subject=e,this.predicate=t,this.object=n},RDFModel.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var n=e.subject.toString()+e.predicate.toString()+e.object.toString();return this.duplicates[n]||(this.duplicates[n]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var n=0;n<this.triples.length;n++)this.triples[n]=e(this.triples[n]);return this},RDFModel.Graph.prototype.addAll=function(e){for(var t=e.toArray(),n=0;n<t.length;n++)this.add(t[n]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(e){for(var t=null,n=0;n<this.triples.length;n++)if(this.triples[n].equals(e)){var r=e.subject.toString()+e.predicate.toString()+e.object.toString();delete this.duplicates[r],t=n;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(!0===e(this.triples[t],this))return!0;return!1},RDFModel.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(!1===e(this.triples[t],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(e){for(var t=new RDFModel.Graph,n=0;n<this.triples.length;n++)!0===e(this.triples[n],this)&&t.add(this.triples[n]);return t},RDFModel.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},RDFModel.Graph.prototype.merge=function(e){for(var t=new RDFModel.Graph,n=0;n<this.triples.length;n++)t.add(this.triples[n]);return t},RDFModel.Graph.prototype.match=function(e,t,n,r){for(var i=new RDFModel.Graph,o=0,a=0;a<this.triples.length;a++){var s=this.triples[a];if((null==e||s.subject.equals(e))&&(null==t||s.predicate.equals(t))&&(null==n||s.object.equals(n))){if(!(null==r||o<r))return i;o++,i.add(s)}}return i},RDFModel.Graph.prototype.removeMatches=function(e,t,n){for(var r=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==n||o.object.equals(n))&&r.push(o)}for(i=0;i<r.length;i++)this.remove(r[i]);return this},RDFModel.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=t.toString()}),e},RDFModel.buildRDFResource=function(e,t,n,r){if("blank"===e.token)return RDFModel.buildBlankNode(e,t,n,r);if("literal"===e.token)return RDFModel.buildLiteral(e,t,n,r);if("uri"===e.token)return RDFModel.buildNamedNode(e,t,n,r);if("var"===e.token){var i=t[e.value];return null!=i?RDFModel.buildRDFResource(i,t,n,r):null}return null},RDFModel.buildBlankNode=function(e,t,n,r){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFModel.BlankNode(e.value)},RDFModel.buildLiteral=function(e,t,n,r){return new RDFModel.Literal(e.value,e.lang,e.type)},RDFModel.buildNamedNode=function(e,t,n,r){if(null!=e.value)return new RDFModel.NamedNode(e);if(null!=e.prefix){var i=n.resolveNsInEnvironment(e.prefix,r);return e.value=i+e.suffix,new RDFModel.NamedNode(e)}return new RDFModel.NamedNode(e)},RDFModel.rdf=new RDFModel.RDFEnvironment,e.exports=RDFModel},iLxQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},ihYY:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return l}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return c}),n.d(t,"l",function(){return f}),n.d(t,"m",function(){return a}),n.d(t,"d",function(){return v}),n.d(t,"o",function(){return y}),n.d(t,"n",function(){return g});var r=function(){},i=function(){},o="*";function a(e,t){return{type:7,name:e,definitions:t,options:{}}}function s(e,t){return void 0===t&&(t=null),{type:4,styles:t,timings:e}}function u(e,t){return void 0===t&&(t=null),{type:3,steps:e,options:t}}function l(e,t){return void 0===t&&(t=null),{type:2,steps:e,options:t}}function c(e){return{type:6,styles:e,offset:null}}function h(e,t,n){return{type:0,name:e,styles:t,options:n}}function f(e,t,n){return void 0===n&&(n=null),{type:1,expr:e,animation:t,options:n}}function d(e){return void 0===e&&(e=null),{type:9,options:e}}function p(e,t,n){return void 0===n&&(n=null),{type:11,selector:e,animation:t,options:n}}function m(e){Promise.resolve(null).then(e)}var v=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.init=function(){},e.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},e.prototype.triggerMicrotask=function(){var e=this;m(function(){return e._onFinish()})},e.prototype._onStart=function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]},e.prototype.pause=function(){},e.prototype.restart=function(){},e.prototype.finish=function(){this._onFinish()},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e.prototype.triggerCallback=function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0},e}(),g=function(){function e(e){var t=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var n=0,r=0,i=0,o=this.players.length;0==o?m(function(){return t._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++n==o&&t._onFinish()}),e.onDestroy(function(){++r==o&&t._onDestroy()}),e.onStart(function(){++i==o&&t._onStart()})}),this.totalTime=this.players.reduce(function(e,t){return Math.max(e,t.totalTime)},0)}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},e.prototype.init=function(){this.players.forEach(function(e){return e.init()})},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onDestroy=function(e){this._onDestroyFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})},e.prototype.pause=function(){this.players.forEach(function(e){return e.pause()})},e.prototype.restart=function(){this.players.forEach(function(e){return e.restart()})},e.prototype.finish=function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})},e.prototype.destroy=function(){this._onDestroy()},e.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])},e.prototype.reset=function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},e.prototype.setPosition=function(e){var t=e*this.totalTime;this.players.forEach(function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})},e.prototype.getPosition=function(){var e=0;return this.players.forEach(function(t){var n=t.getPosition();e=Math.min(n,e)}),e},e.prototype.beforeDestroy=function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})},e.prototype.triggerCallback=function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0},e}(),y="!"},isby:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},jAWH:function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},"kVK+":function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*m}},kd2E:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,d,p,m=e[c].replace(s,"%20"),v=m.indexOf(n);v>=0?(h=m.substr(0,v),f=m.substr(v+1)):(h=m,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},kl5A:function(e,t,n){(function(t,r,i){var o=n("qfHW"),a=n("P7XM"),s=n("yQtW"),u=n("43KI"),l=n("2Tiy"),c=s.IncomingMessage,h=s.readyStates,f=e.exports=function(e){var n,r=this;u.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}(n,i),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};a(f,u.Writable),f.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:e,value:t})},f.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},f.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},f.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,a=e._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=o.arraybuffer?l(t.concat(e._body)):o.blobConstructor?new r.Blob(e._body.map(function(e){return l(e)}),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(a).forEach(function(e){var t=a[e].name,n=a[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode){var c=null;if(o.abortController){var f=new AbortController;c=f.signal,e._fetchAbortController=f,"requestTimeout"in n&&0!==n.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},n.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:c}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var d=e._xhr=new r.XMLHttpRequest;try{d.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in d&&(d.responseType=e._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(d.timeout=n.requestTimeout,d.ontimeout=function(){e.emit("requestTimeout")}),u.forEach(function(e){d.setRequestHeader(e[0],e[1])}),e._response=null,d.onreadystatechange=function(){switch(d.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(d.onprogress=function(){e._onXHRProgress()}),d.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{d.send(s)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},f.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},f.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},f.prototype._write=function(e,t,n){this._body.push(e),n()},f.prototype.abort=f.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},f.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),u.Writable.prototype.end.call(this,e,t,n)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n("tjlA").Buffer,n("yLpj"),n("8oxB"))},lJCZ:function(e,t,n){(function(e){var r=n("kl5A"),i=n("yQtW"),o=n("U6jy"),a=n("jAWH"),s=n("CxY0"),u=t;u.request=function(t,n){t="string"==typeof t?s.parse(t):o(t);var i=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||i,u=t.hostname||t.host,l=t.port,c=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?a+"//"+u:"")+(l?":"+l:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var h=new r(t);return n&&h.on("response",n),h},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n("yLpj"))},lO9m:function(e,t,n){"use strict";var r=n("CcnG"),i=n("DlQD");t.MarkdownToHtmlPipe=function(){function e(){}return e.prototype.transform=function(e,t){return null==e?"":i(e,t)},e.setOptions=function(e){i.setOptions(e)},e.decorators=[{type:r.Pipe,args:[{name:"MarkdownToHtml"}]}],e}()},lm0R:function(e,t,n){"use strict";(function(t){e.exports=!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?{nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}}:t}).call(this,n("8oxB"))},mfCV:function(e,t,n){var r=n("Wxc2"),i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o=i+"nil",a=i+"first",s=/^[a-z][a-z0-9+.-]*:/i,u=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,l=/(?:^|\/)\.\.?(?:$|[\/#?])/,c=0,h=0;function f(e){if(!(this instanceof f))return new f(e);this._tripleStack=[],this._graph=null,this._setBase((e=e||{}).documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),n="turtle"===t,i="trig"===t,o=/triple/.test(t),a=/quad/.test(t),s=o||a;(this._supportsNamedGraphs=!n)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||o),s&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=d,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new r({lineMode:s})}function d(){}f._resetBlankNodeIds=function(){c=h=0},f.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(u),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":this._subject=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+h++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:o,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":this._predicate=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var n=this._prefixes[e.prefix];if(void 0===n)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=n+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":this._object=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var n="_:b"+h++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:n,type:"blank"}),this._subject=n,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:o,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e);else{var n=this._prefixes[e.prefix];if(void 0===n)return this._error('Undefined prefix "'+e.prefix+':"',e);t=n+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,n=null,r=this._subject,i=this._tripleStack,u=i[i.length-1],l=this._readListItem;switch(e.type){case"IRI":t=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var c=this._prefixes[e.prefix];if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e);t=c+e.value;break;case"literal":t=e.value,l=this._readDataTypeOrLang;break;case"[":n="_:b"+h++,t="_:b"+h++,i.push({subject:n,predicate:a,object:t,type:"blank"}),this._subject=t,l=this._readBlankNodeHead;break;case"(":n="_:b"+h++,i.push({subject:n,predicate:a,object:o,type:"list"}),this._subject=null,l=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:u.subject,predicate:u.predicate,object:u.object,graph:this._graph||""}),this._subject=u.subject,null===u.predicate){if(l=this._readPredicate,u.subject===o)return l}else if(this._predicate=u.predicate,this._object=u.object,l=this._getTripleEndReader(),u.object===o)return l;n=o;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===n&&(this._subject=n="_:b"+h++),null===r?u.object===o?u.object=n:u.subject=n:this._callback(null,{subject:r,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:n,graph:this._graph||""}),null!==t&&this._callback(null,{subject:n,predicate:a,object:t,graph:this._graph||""}),l},_readPunctuation:function(e){var t,n=this._subject,r=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){r=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e),n=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);r=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==n&&this._callback(null,{subject:n,predicate:this._predicate,object:this._object,graph:r||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){return"IRI"!==e.type?this._error('Expected IRI to follow prefix "'+this._prefix+':"',e):(t=null===this._base||s.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation);var t},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||s.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+h++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!l.test(e))return e;for(var t="",n=e.length,r=-1,i=-1,o=0,a="/";r<n;){switch(a){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<n&&"/"!==e[i];)r=i;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[++r+1]){case"/":t+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return t+e.substring(o,r)+e.substr(r+1);case".":if(void 0===(a=e[++r+1])||"/"===a||"?"===a||"#"===a){if((o=(t+=e.substring(o,r-2)).lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(r+1);o=r+1}}}a=e[++r]}return t+e.substring(o)},parse:function(e,t,n){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+c+++"_","function"==typeof e&&(n=t,t=e,e=null),this._callback=t||d,this._prefixCallback=n||d;var r=this;this._lexer.tokenize(e,function(e,t){null!==e?(r._callback(e),r._callback=d):void 0!==r._readCallback&&(r._readCallback=r._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},e.exports=f},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return d}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return v}),n.d(t,"__asyncGenerator",function(){return g}),n.d(t,"__asyncDelegator",function(){return y}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return x}),n.d(t,"__importDefault",function(){return w});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}},nkY7:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},p0ib:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("6blF"),i=n("nkY7"),o=n("Zn8D"),a=n("IUTb");function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,s=null,u=e[e.length-1];return Object(i.a)(u)?(s=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof u&&(n=e.pop()),null===s&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(n)(Object(a.a)(e,s))}},psW0:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("mrSG"),i=n("zotm"),o=n("MGBS"),a=n("rPjj"),s=n("67Y/"),u=n("0/uQ");function l(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(l(function(n,r){return Object(u.a)(e(n,r)).pipe(Object(s.a)(function(e,i){return t(n,e,r,i)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new c(e,n))})}var c=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project,this.concurrent))},e}(),h=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new a.a(this,void 0,void 0);this.add(r),Object(i.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.a)},pugT:function(e,t,n){"use strict";var r=n("isby"),i=n("McSo"),o=n("2Bdj"),a=n("Ehmk"),s=n("eihs");function u(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}u.prototype=Object.create(Error.prototype);var l=u;n.d(t,"a",function(){return c});var c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,u=this._parents,c=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,p=u?u.length:0;n;)n.remove(this),n=++d<p&&u[d]||null;if(Object(o.a)(c)&&Object(a.a)(c).call(this)===s.a&&(t=!0,e=e||(s.a.e instanceof l?h(s.a.e.errors):[s.a.e])),Object(r.a)(f))for(d=-1,p=f.length;++d<p;){var m=f[d];if(Object(i.a)(m)&&Object(a.a)(m.unsubscribe).call(m)===s.a){t=!0,e=e||[];var v=s.a.e;v instanceof l?e=e.concat(h(v.errors)):e.push(v)}}if(t)throw new l(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function h(e){return e.reduce(function(e,t){return e.concat(t instanceof l?t.errors:t)},[])}},qfHW:function(e,t,n){(function(e){t.fetch=s(e.fetch)&&s(e.ReadableStream),t.writableStream=s(e.WritableStream),t.abortController=s(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var n;function r(){if(void 0!==n)return n;if(e.XMLHttpRequest){n=new e.XMLHttpRequest;try{n.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function i(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var o=void 0!==e.ArrayBuffer,a=o&&s(e.ArrayBuffer.prototype.slice);function s(e){return"function"==typeof e}t.arraybuffer=t.fetch||o&&i("arraybuffer"),t.msstream=!t.fetch&&a&&i("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&i("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&s(r().overrideMimeType),t.vbArray=s(e.VBArray),n=null}).call(this,n("yLpj"))},qqWt:function(e,t,n){n("/pP7");var r=n("thjG"),i=r,o=n("dBu6").Lexicon;PersistentLexicon=function(e,t){var n=this;r.registerIndexedDB(n),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.dbName=t||"rdfstorejs";var i=n.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,new Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){n.db=t.target.result,e(n)},i.onupgradeneeded=function(e){n.db=e.target.result,n.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),n.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(e,t,n){if(e!=this.defaultGraphOid){var r=this.db.transaction(["knownGraphs"],"readwrite");r.onerror=function(e){n(null,new Error(e.target.statusCode))};var i=r.objectStore("knownGraphs");i.get(t).onsuccess=function(r){r.target.result?n(!0):i.add({oid:e,uriToken:t}).onsuccess=function(e){n(!0)}}}else n()},PersistentLexicon.prototype.registeredGraphs=function(e,t){var n=[],r=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();r.onsuccess=function(r){var i=r.target.result;i?(n.push(!0===e?i.value.uriToken:i.value.oid),i.continue()):t(n)},r.onerror=function(e){t(null,new Error("Error retrieving data from the cursor: "+e.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=this.db.transaction(["components"],"readwrite").objectStore("components"),r=n.index("value").get("_u:"+e);r.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the URI data"+e.target.errorCode))}}else{var s=n.add({value:"_u:"+e,counter:0,uri:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the URI data"+e.target.errorCode))}}},r.onerror=function(e){t(null,new Error("Error retrieving the URI data"+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var n=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(e){var t=guid(),n=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+t,counter:0,label:!0});n.onsuccess=function(t){e(t.target.result)},n.onerror=function(t){e(null,new Error("Error inserting the URI data"+t.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(e,t){t(0)},PersistentLexicon.prototype.registerLiteral=function(e,t){var n=this.db.transaction(["components"],"readwrite").objectStore("components"),r=n.index("value").get("_l:"+e);r.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the literal data"+e.target.errorCode))}}else{var s=n.add({value:"_l:"+e,counter:0,literal:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the literal data"+e.target.errorCode))}}},r.onerror=function(e){t(null,new Error("Error retrieving the literal data"+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(e,t){var n=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(e,t){var n=that.db.transaction(["components"]).objectStore("components").index("components").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(e){return o.prototype.parseLiteral(e)},PersistentLexicon.prototype.parseUri=function(e){return o.prototype.parseUri(e)},PersistentLexicon.prototype.retrieve=function(e,t){var n,r=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((n=r.db.transaction(["components"]).objectStore("components").get(e)).onsuccess=function(e){null!=e.target.result?null!=e.target.result.label?t({token:"blank",value:"_:"+e.target.result.id}):null!=e.target.result.uri?t(r.parseUri(e.target.result.value.slice(3,e.target.result.value.length))):null!=e.target.result.literal?t(r.parseLiteral(e.target.result.value.slice(3,e.target.result.value.length))):(console.log(e.target.result),t(null,new Error("Unknown type of component "+e.target.result))):t(null,null)},n.onerror=function(e){t(null,new Error("Error searching in blanks data "+e.target.errorCode))})},PersistentLexicon.prototype.clear=function(e){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var t,n=function(){null!=e&&e()};(t=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=n,t.onerror=n},PersistentLexicon.prototype.unregister=function(e,t,n){var r=this;i.seq(function(n){r._unregisterTerm(e.subject.token,t.subject,n)},function(n){r._unregisterTerm(e.predicate.token,t.predicate,n)},function(n){r._unregisterTerm(e.object.token,t.object,n)},function(n){null!=e.graph?r._unregisterTerm(e.graph.token,t.graph,n):n()})(function(){n(!0)})},PersistentLexicon.prototype._unregisterTerm=function(e,t,n){var r=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===e?t!=this.defaultGraphOid?r.objectStore("components").delete(t).onsuccess=void(r.objectStore("knownGraphs").delete(t).onsuccess=function(){n()}):n():r.objectStore("components").delete(t).onsuccess=function(){n()}},e.exports={PersistentLexicon:PersistentLexicon}},rPjj:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n("FFOo").a)},rXFu:function(e,t,n){"use strict";(function(t,r){var i=n("lm0R");e.exports=b;var o,a=n("49sm");b.ReadableState=y,n("+qE3");var s=function(e,t){return e.listeners(t).length},u=n("QpuX"),l=n("hwdV").Buffer,c=t.Uint8Array||function(){},h=n("Onz0");h.inherits=n("P7XM");var f=n(5),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n("Xhqo"),v=n("RoFp");h.inherits(b,u);var g=["error","close","destroy","pause","resume"];function y(e,t){var r=t instanceof(o=o||n("sZro"));this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n("fXKp").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||n("sZro"),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function _(e,t,n,r,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,M(e)}}(e,a)):(i||(o=function(e,t){var n,r;return l.isBuffer(r=t)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?x(e,a,t,!1):S(e,a)):x(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&M(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=n("fXKp").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var w=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(T,e):T(e))}function T(e){d("emit readable"),e.emit("readable"),L(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){d("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),0==(e-=a)){a===o.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):M(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,t);var u=t&&!1===t.end||e===r.stdout||e===r.stderr?y:l;function l(){d("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",function t(r,i){d("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,d("cleanup"),e.removeListener("close",v),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",p),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c())});var c=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",c);var h=!1,f=!1;function p(t){d("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==k(o.pipes,e))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){d("onerror",t),y(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",g),y()}function g(){d("onfinish"),e.removeListener("close",v),y()}function y(){d("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener("error",n);e._events&&e._events.error?a(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on("error",n)}(e,0,m),e.once("close",v),e.once("finish",g),e.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=k(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.addListener=b.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&M(this):i.nextTick(C,this))}return n},b.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t))}(this,e)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=P}).call(this,n("yLpj"),n("8oxB"))},rvzF:function(e,t){},s4NR:function(e,t,n){"use strict";t.decode=t.parse=n("kd2E"),t.encode=t.stringify=n("4JlD")},sCxP:function(e,t,n){(function(r,i,o,a){var s;!function(){var u=void 0!==r&&r.versions&&r.versions.node,l=!u&&("undefined"!=typeof window||"undefined"!=typeof self);l&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var c=function(e){function t(){}e.compact=function(t,n,r,i){return arguments.length<2?e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))}):("function"==typeof r&&(i=r,r={}),r=r||{},null===n?e.nextTick(function(){i(new A("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))}):null===t?e.nextTick(function(){i(null,null)}):("base"in r||(r.base="string"==typeof t?t:""),"compactArrays"in r||(r.compactArrays=!0),"graph"in r||(r.graph=!1),"skipExpansion"in r||(r.skipExpansion=!1),"documentLoader"in r||(r.documentLoader=e.loadDocument),"link"in r||(r.link=!1),r.link&&(r.skipExpansion=!0),void function(t,n,r){if(n.skipExpansion)return e.nextTick(function(){r(null,t)});e.expand(t,n,r)}(t,r,function(t,o){if(t)return i(new A("Could not expand input before compaction.","jsonld.CompactError",{cause:t}));var a=J(r);e.processContext(a,n,r,function(e,t){if(e)return i(new A("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var a;try{a=(new C).compact(t,null,o,r)}catch(e){return i(e)}!function(e,t,r,o){o.compactArrays&&!o.graph&&ee(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&$(t)&&(t=[t]),$(n)&&"@context"in n&&(n=n["@context"]),ee(n=he(n))||(n=[n]);var a=n;n=[];for(var s=0;s<a.length;++s)(!$(a[s])||Object.keys(a[s]).length>0)&&n.push(a[s]);var u=n.length>0;if(1===n.length&&(n=n[0]),ee(t)){var l=Q(r,"@graph"),c=t;t={},u&&(t["@context"]=n),t[l]=c}else if($(t)&&u)for(var h in c=t,t={"@context":n},c)t[h]=c[h];i(null,t,r)}(0,a,t,r)})})))},e.expand=function(t,n,r){if(arguments.length<1)return e.nextTick(function(){r(new TypeError("Could not expand, too few arguments."))});function i(e){"base"in n||(n.base=e.documentUrl||"");var t={document:he(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in n){var i=he(n.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}de(t,n,function(e,t){if(e)return r(e);var i;try{var o=new C,a=J(n),s=t.document,u=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],n)),u&&(a=o.processContext(a,u,n)),$(i=o.expand(a,null,s,n,!1))&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),ee(i)||(i=[i])}catch(e){return r(e)}r(null,i)})}"function"==typeof n&&(r=n,n={}),"documentLoader"in(n=n||{})||(n.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in n||(n.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"!=typeof t)i({contextUrl:null,documentUrl:null,document:t});else{var e=function(e,t){if(e)return r(e);try{if(!t.document)throw new A("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return r(new A("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=n.documentLoader(t,e);o&&"then"in o&&o.then(e.bind(null,null),e)}})},e.flatten=function(t,n,r,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof r?(i=r,r={}):"function"==typeof n&&(i=n,n=null,r={}),"base"in(r=r||{})||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(t,o){if(t)return i(new A("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));var a;try{a=(new C).flatten(o)}catch(e){return i(e)}if(null===n)return i(null,a);r.graph=!0,r.skipExpansion=!0,e.compact(a,n,r,function(e,t){if(e)return i(new A("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));i(null,t)})})},e.frame=function(t,n,r,i){if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});function o(n){var o,a=n.document;a?(o=a["@context"],n.contextUrl?(o?ee(o)?o.push(n.contextUrl):o=[o,n.contextUrl]:o=n.contextUrl,a["@context"]=o):o=o||{}):o={},e.expand(t,r,function(t,n){if(t)return i(new A("Could not expand input before framing.","jsonld.FrameError",{cause:t}));var s=he(r);s.isFrame=!0,s.keepFreeFloatingNodes=!0,e.expand(a,s,function(t,r){if(t)return i(new A("Could not expand frame before framing.","jsonld.FrameError",{cause:t}));var a;try{a=(new C).frame(n,r,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},e.compact(a,o,s,function(t,n,r){if(t)return i(new A("Could not compact framed output.","jsonld.FrameError",{cause:t}));var o=Q(r,"@graph");s.link={},n[o]=function t(n,r,i){if(ee(r)){for(var o=[],a=0;a<r.length;++a)null!==(h=t(n,r[a],i))&&o.push(h);r=o}else if($(r)){if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(se(r))return r;if(ue(r))return r["@list"]=t(n,r["@list"],i),r;var s=Q(n,"@id");if(s in r){var u=r[s];if(u in i.link){var l=i.link[u].indexOf(r);if(-1!==l)return i.link[u][l];i.link[u].push(r)}else i.link[u]=[r]}for(var c in r){var h=t(n,r[c],i),f=e.getContextValue(n,c,"@container");i.compactArrays&&ee(h)&&1===h.length&&null===f&&(h=h[0]),r[c]=h}}return r}(r,n[o],s),i(null,n)})})})}"function"==typeof r&&(i=r,r={}),"base"in(r=r||{})||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"embed"in r||(r.embed="@last"),r.explicit=r.explicit||!1,"requireAll"in r||(r.requireAll=!0),r.omitDefault=r.omitDefault||!1,e.nextTick(function(){if("string"!=typeof n)o({contextUrl:null,documentUrl:null,document:n});else{var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new A("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new A("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=r.documentLoader(n,e);t&&"then"in t&&t.then(e.bind(null,null),e)}})},e.link=function(t,n,r,i){var o={};n&&(o["@context"]=n),o["@embed"]="@link",e.frame(t,o,r,i)},e.objectify=function(t,n,r,i){"function"==typeof r&&(i=r,r={}),"base"in(r=r||{})||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(t,o){if(t)return i(new A("Could not expand input before linking.","jsonld.LinkError",{cause:t}));var a;try{a=(new C).flatten(o)}catch(e){return i(e)}r.graph=!0,r.skipExpansion=!0,e.compact(a,n,r,function(t,n,r){if(t)return i(new A("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}));var o=n[Q(r,"@graph")][0],a=function(t){if($(t)||ee(t)){if($(t)){if(a.visited[t["@id"]])return;a.visited[t["@id"]]=!0}for(var n in t){var i=t[n],s="@id"===e.getContextValue(r,n,"@type");if(ee(i)||$(i)||s)if(ne(i)&&s)t[n]=i=o[i],a(i);else if(ee(i))for(var u=0;u<i.length;++u)ne(i[u])&&s?i[u]=o[i[u]]:$(i[u])&&"@id"in i[u]&&(i[u]=o[i[u]["@id"]]),a(i[u]);else $(i)&&(t[n]=i=o[i["@id"]],a(i))}}};for(var s in a.visited={},a(o),n.of_type={},o)if("@type"in o[s]){var u=o[s]["@type"];ee(u)||(u=[u]);for(var l=0;l<u.length;++l)u[l]in n.of_type||(n.of_type[u[l]]=[]),n.of_type[u[l]].push(o[s])}i(null,n)})})},e.normalize=function(t,n,r){if(arguments.length<1)return e.nextTick(function(){r(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof n&&(r=n,n={}),"algorithm"in(n=n||{})||(n.algorithm="URGNA2012"),"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"inputFormat"in n){if("application/nquads"!==n.inputFormat)return r(new A("Unknown normalization input format.","jsonld.NormalizeError"));var i=pe(t);(new C).normalize(i,n,r)}else{var o=he(n);delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return r(new A("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new C).normalize(t,n,r)})}},e.fromRDF=function(t,n,r){if(arguments.length<1)return e.nextTick(function(){r(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof n&&(r=n,n={}),"useRdfType"in(n=n||{})||(n.useRdfType=!1),"useNativeTypes"in n||(n.useNativeTypes=!1),"format"in n||!ne(t)||"format"in n||(n.format="application/nquads"),e.nextTick(function(){var e;if(n.format){if(!(e=n.rdfParser||f[n.format]))return r(new A("Unknown input format.","jsonld.UnknownFormat",{format:n.format}))}else e=function(){return t};var i=!1;try{t=e(t,function(e,t){if(i=!0,e)return r(e);o(t,n,r)})}catch(e){if(!i)return r(e);throw e}if(t){if("then"in t)return t.then(function(e){o(e,n,r)},r);o(t,n,r)}function o(e,t,n){(new C).fromRDF(e,t,n)}})},e.toRDF=function(t,n,r){if(arguments.length<1)return e.nextTick(function(){r(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof n&&(r=n,n={}),"base"in(n=n||{})||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(e,t){if(e)return r(new A("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=C.prototype.toRDF(t,n),n.format){if("application/nquads"===n.format)return r(null,function(e){var t=[];for(var n in e)for(var r=e[n],i=0;i<r.length;++i)"@default"===n&&(n=null),t.push(me(r[i],n));return t.sort().join("")}(i));throw new A("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}}catch(e){return r(e)}r(null,i)})},e.createNodeMap=function(t,n,r){if(arguments.length<1)return e.nextTick(function(){r(new TypeError("Could not create node map, too few arguments."))});"function"==typeof n&&(r=n,n={}),"base"in(n=n||{})||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(e,t){if(e)return r(new A("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new C).createNodeMap(t,n)}catch(e){return r(e)}r(null,i)})},e.merge=function(t,n,r,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!ee(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof r?(i=r,r={}):"function"==typeof n&&(i=n,n=null,r={}),r=r||{};for(var o=[],a=null,s=t.length,u=0;u<t.length;++u){var l={};for(var c in r)l[c]=r[c];e.expand(t[u],l,h)}function h(t,u){if(!a){if(t)return a=t,i(new A("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));o.push(u),0==--s&&function(t){var o=!0;"mergeNodes"in r&&(o=r.mergeNodes);var a,s=r.namer||r.issuer||new ve("_:b"),u={"@default":{}};try{for(var l=0;l<t.length;++l){var c=t[l];c=e.relabelBlankNodes(c,{issuer:new ve("_:b"+l+"-")});var h=o||0===l?u:{"@default":{}};if(B(c,h,"@default",s),h!==u)for(var f in h){var d=h[f];if(f in u){var p=u[f];for(var m in d)m in p||(p[m]=d[m])}else u[f]=d}}a=j(u)}catch(e){return i(e)}for(var v=[],g=Object.keys(a).sort(),y=0;y<g.length;++y){var b=a[g[y]];ae(b)||v.push(b)}if(null===n)return i(null,v);r.graph=!0,r.skipExpansion=!0,e.compact(v,n,r,function(e,t){if(e)return i(new A("Could not compact merged output.","jsonld.MergeError",{cause:e}));i(null,t)})}(o)}}},e.relabelBlankNodes=function(e,t){return function e(t,n){if(ee(n))for(var r=0;r<n.length;++r)n[r]=e(t,n[r]);else if(ue(n))n["@list"]=e(t,n["@list"]);else if($(n)){le(n)&&(n["@id"]=t.getId(n["@id"]));for(var i=Object.keys(n).sort(),o=0;o<i.length;++o){var a=i[o];"@id"!==a&&(n[a]=e(t,n[a]))}}return n}((t=t||{}).namer||t.issuer||new ve("_:b"),e)},e.prependBase=function(t,n){return function(t,n){if(null===t)return n;if(-1!==n.indexOf(":"))return n;ne(t)&&(t=e.url.parse(t||""));var r=e.url.parse(n),i={protocol:t.protocol||""};if(null!==r.authority)i.authority=r.authority,i.path=r.path,i.query=r.query;else if(i.authority=t.authority,""===r.path)i.path=t.path,i.query=null!==r.query?r.query:t.query;else{if(0===r.path.indexOf("/"))i.path=r.path;else{var o=t.path;""!==r.path&&((o=o.substr(0,o.lastIndexOf("/")+1)).length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=r.path),i.path=o}i.query=r.query}i.path=_e(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==r.fragment&&(a+="#"+r.fragment),""===a&&(a="./"),a}(t,n)},e.documentLoader=function(t,n){var r=new A("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return u?n(r,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(r)})},e.loadDocument=function(t,n){var r=e.documentLoader(t,n);r&&"then"in r&&r.then(n.bind(null,null),n)},e.promises=function(t){t=t||{};var r=Array.prototype.slice,o=e.promisify,a=t.api||{},s=t.version||"jsonld.js";"string"==typeof t.api&&(t.version||(s=t.api),a={}),a.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[e.expand].concat(r.call(arguments)))},a.compact=function(t,n){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");return o.apply(null,[function(t,n,r,i){"function"==typeof r&&(i=r,r={}),e.compact(t,n,r=r||{},function(e,t){i(e,t)})}].concat(r.call(arguments)))},a.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[e.flatten].concat(r.call(arguments)))},a.frame=function(t,n){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[e.frame].concat(r.call(arguments)))},a.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[e.fromRDF].concat(r.call(arguments)))},a.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[e.toRDF].concat(r.call(arguments)))},a.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[e.normalize].concat(r.call(arguments)))},"jsonld.js"===s&&(a.link=function(t,n){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[e.link].concat(r.call(arguments)))},a.objectify=function(t){return o.apply(null,[e.objectify].concat(r.call(arguments)))},a.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(r.call(arguments)))},a.merge=function(t){return o.apply(null,[e.merge].concat(r.call(arguments)))});try{e.Promise=i.Promise||n("7fXC").Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var l in a)a[l]=u}return a},e.promisify=function(t){if(!e.Promise)try{e.Promise=i.Promise||n("7fXC").Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var r=Array.prototype.slice.call(arguments,1);return new e.Promise(function(e,n){t.apply(null,r.concat(function(t,r){t?n(t):e(r)}))})},e.promises({api:e.promises}),(t.prototype=e.promises({version:"json-ld-1.0"})).toString=function(){return this instanceof t?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=t;var s=!!Object.defineProperty;if(s)try{Object.defineProperty({},"x",{})}catch(e){s=!1}s&&(Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t})),l&&void 0===i.JsonLdProcessor&&(s?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t}):i.JsonLdProcessor=t);var c="function"==typeof o&&o,h=c?function(e){c(e)}:function(e){setTimeout(e,0)};e.nextTick="object"==typeof r&&"function"==typeof r.nextTick?r.nextTick:h,e.setImmediate=c?h:e.nextTick,e.parseLinkHeader=function(e){for(var t={},n=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<n.length;++i){var o=n[i].match(r);if(o){for(var a={target:o[1]},s=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2];var l=a.rel||"";ee(t[l])?t[l].push(a):t[l]=l in t?[t[l],a]:a}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,n){var r=this;if(!n&&!r._usePromise)throw new Error("callback must be specified.");if(r._usePromise)return new e.Promise(function(e,n){var i=r._requests[t];i||(i=r._requests[t]=r._loader(t).then(function(e){return delete r._requests[t],e}).catch(function(e){throw delete r._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){n(e)})});t in r._requests?r._requests[t].push(n):(r._requests[t]=[n],r._loader(t,function(e,n){var i=r._requests[t];delete r._requests[t];for(var o=0;o<i.length;++o)i[o](e,n)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var n=JSON.stringify(e),r=JSON.stringify(t),i=this.cache[n];return i&&r in i?i[r]:null},e.ActiveContextCache.prototype.set=function(e,t,n){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=he(n)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,n){n=n||{};var r=new e.RequestQueue,i="usePromise"in n?n.usePromise:"undefined"!=typeof Promise;return r.wrapLoader(i?function(t){return e.promisify(o,t)}:o);function o(r,i){return 0!==r.indexOf("http:")&&0!==r.indexOf("https:")?i(new A('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):n.secure&&0!==r.indexOf("https")?i(new A('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):void t.ajax({url:r,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,n,o){var a={contextUrl:null,documentUrl:r,document:t},s=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==s){if(ee(u=e.parseLinkHeader(u)[T]))return i(new A("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),a);u&&(a.contextUrl=u.target)}i(null,a)},error:function(e,t,n){i(new A("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:n}),{contextUrl:null,documentUrl:r,document:null})}})}},e.documentLoaders.node=function(t){var r=!("strictSSL"in(t=t||{}))||t.strictSSL,i="maxRedirects"in t?t.maxRedirects:-1,o="request"in t?t.request:n("rvzF"),a="application/ld+json, application/json",s=n("rvzF"),u=new e.RequestQueue;if(t.usePromise)return u.wrapLoader(function(t){return e.promisify(c,t,[])});var l=t.headers||{};if("Accept"in l||"accept"in l)throw new RangeError('Accept header may not be specified as an option; only "'+a+'" is supported.');return u.wrapLoader(function(e,t){c(e,[],t)});function c(n,u,l){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))return l(new A('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});if(t.secure&&0!==n.indexOf("https"))return l(new A('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});var h=null;if(null!==h)return l(null,h);var f={Accept:a};for(var d in t.headers)f[d]=t.headers[d];o({url:n,headers:f,strictSSL:r,followRedirect:!1},function(t,r,o){if(h={contextUrl:null,documentUrl:n,document:o||null},t)return l(new A("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:t}),h);if(r.statusCode>=400)return l(new A("URL could not be dereferenced: "+s.STATUS_CODES[r.statusCode],"jsonld.InvalidUrl",{code:"loading document failed",url:n,httpStatusCode:r.statusCode}),h);if(r.headers.link&&"application/ld+json"!==r.headers["content-type"]){var a=e.parseLinkHeader(r.headers.link)[T];if(ee(a))return l(new A("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),h);a&&(h.contextUrl=a.target)}if(r.statusCode>=300&&r.statusCode<400&&r.headers.location)return u.length===i?l(new A("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:n,httpStatusCode:r.statusCode,redirects:u}),h):-1!==u.indexOf(n)?l(new A("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:n,httpStatusCode:r.statusCode,redirects:u}),h):(u.push(n),c(r.headers.location,u,l));u.push(n),l(t,h)})}},e.documentLoaders.xhr=function(t){t=t||{};var n=/(^|(\r\n))link:/i,r=new e.RequestQueue,i="usePromise"in t?t.usePromise:"undefined"!=typeof Promise;return r.wrapLoader(i?function(t){return e.promisify(o,t)}:o);function o(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new A('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return i(new A('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=new(t.xhr||XMLHttpRequest);o.onload=function(){if(o.status>=400)return i(new A("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:o.status}),{contextUrl:null,documentUrl:r,document:null});var t,a={contextUrl:null,documentUrl:r,document:o.response},s=o.getResponseHeader("Content-Type");if(n.test(o.getAllResponseHeaders())&&(t=o.getResponseHeader("Link")),t&&"application/ld+json"!==s){if(ee(t=e.parseLinkHeader(t)[T]))return i(new A("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),a);t&&(a.contextUrl=t.target)}i(null,a)},o.onerror=function(){i(new A("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},o.open("GET",r,!0),o.setRequestHeader("Accept","application/ld+json, application/json"),o.send()}},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new A('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,n){var r={},i=2;arguments.length>3&&(r=arguments[2]||{},i+=1);var o=arguments[i];if("base"in r||(r.base=""),"documentLoader"in r||(r.documentLoader=e.loadDocument),null===n)return o(null,J(r));$(n=he(n))&&"@context"in n||(n={"@context":n}),de(n,r,function(e,n){if(e)return o(e);try{n=(new C).processContext(t,n,r)}catch(e){return o(e)}o(null,n)})},e.hasProperty=function(e,t){var n=!1;if(t in e){var r=e[t];n=!ee(r)||r.length>0}return n},e.hasValue=function(t,n,r){var i=!1;if(e.hasProperty(t,n)){var o=t[n],a=ue(o);if(ee(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(e.compareValues(r,o[s])){i=!0;break}}else ee(r)||(i=e.compareValues(r,o))}return i},e.addValue=function(t,n,r,i){if("propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),ee(r)){0!==r.length||!i.propertyIsArray||n in t||(t[n]=[]);for(var o=0;o<r.length;++o)e.addValue(t,n,r[o],i)}else if(n in t){var a=!i.allowDuplicate&&e.hasValue(t,n,r);ee(t[n])||a&&!i.propertyIsArray||(t[n]=[t[n]]),a||t[n].push(r)}else t[n]=i.propertyIsArray?[r]:r},e.getValues=function(e,t){var n=e[t]||[];return ee(n)||(n=[n]),n},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,n,r,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=e.getValues(t,n).filter(function(t){return!e.compareValues(t,r)});0===o.length?e.removeProperty(t,n):t[n]=1!==o.length||i.propertyIsArray?o:o[0]},e.compareValues=function(e,t){return e===t||!(!se(e)||!se(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!($(e)&&"@id"in e&&$(t)&&"@id"in t)&&e["@id"]===t["@id"]},e.getContextValue=function(e,t,n){var r=null;if(null===t)return r;if("@language"===n&&n in e&&(r=e[n]),e.mappings[t]){var i=e.mappings[t];oe(n)?r=i:n in i&&(r=i[n])}return r};var f={};if(e.registerRDFParser=function(e,t){f[e]=t},e.unregisterRDFParser=function(e){delete f[e]},u){if(void 0===d)var d=null;if(void 0===p)var p={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var m="http://www.w3.org/2001/XMLSchema#boolean",v="http://www.w3.org/2001/XMLSchema#double",g="http://www.w3.org/2001/XMLSchema#integer",y="http://www.w3.org/2001/XMLSchema#string",b="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_=b+"first",x=b+"rest",w=b+"nil",E=b+"type",M=b+"langString",T="http://www.w3.org/ns/json-ld#context",S=10,A=function(e,t,n){u?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=n||{}};u?n("rvzF").inherits(A,Error):"undefined"!=typeof Error&&(A.prototype=new Error);var C=function(){};function R(e){for(var t=[],n=Object.keys(e).sort(),r=0;r<n.length;++r){var i=n[r],o=e[i];ee(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(null!==s){if(!ne(s))throw new A("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function L(e,t,n){for(var r=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],h=s[c];if("@type"===c)c=E;else if(K(c))continue;for(var f=0;f<h.length;++f){var d=h[f],p={};if(p.type=0===a.indexOf("_:")?"blank node":"IRI",p.value=a,ce(a)){var m={};if(m.type=0===c.indexOf("_:")?"blank node":"IRI",m.value=c,ce(c)&&("blank node"!==m.type||n.produceGeneralizedRdf))if(ue(d))P(d["@list"],t,p,m,r);else{var v=O(d);v&&r.push({subject:p,predicate:m,object:v})}}}}return r}function P(e,t,n,r,i){for(var o={type:"IRI",value:_},a={type:"IRI",value:x},s={type:"IRI",value:w},u=0;u<e.length;++u){var l=e[u],c={type:"blank node",value:t.getId()};i.push({subject:n,predicate:r,object:c}),n=c,r=o;var h=O(l);h&&i.push({subject:n,predicate:r,object:h}),r=a}i.push({subject:n,predicate:r,object:s})}function O(e){var t,n={};if(se(e)){n.type="literal";var r=e["@value"],i=e["@type"]||null;"boolean"==typeof(t=r)||"[object Boolean]"===Object.prototype.toString.call(t)?(n.value=r.toString(),n.datatype=i||m):ie(r)||i===v?(ie(r)||(r=parseFloat(r)),n.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),n.datatype=i||v):re(r)?(n.value=r.toFixed(0),n.datatype=i||g):"@language"in e?(n.value=r,n.datatype=i||M,n.language=e["@language"]):(n.value=r,n.datatype=i||y)}else{var o=$(e)?e["@id"]:e;n.type=0===o.indexOf("_:")?"blank node":"IRI",n.value=o}return"IRI"!==n.type||ce(n.value)?n:null}function I(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var n,r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var i=e.datatype;if(i||(i=y),t){if(i===m)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(n=r["@value"],!isNaN(parseFloat(n))&&isFinite(n))if(i===g){var o=parseInt(r["@value"],10);o.toFixed(0)===r["@value"]&&(r["@value"]=o)}else i===v&&(r["@value"]=parseFloat(r["@value"]));-1===[m,g,v,y].indexOf(i)&&(r["@type"]=i)}else i!==y&&(r["@type"]=i)}return r}function k(e,t){for(var n=["subject","predicate","object"],r=0;r<n.length;++r){var i=n[r];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}C.prototype.compact=function(t,n,r,i){if(ee(r)){for(var o=[],a=0;a<r.length;++a){var s=this.compact(t,n,r[a],i);null!==s&&o.push(s)}return i.compactArrays&&1===o.length&&null===(E=e.getContextValue(t,n,"@container"))&&(o=o[0]),o}if($(r)){if(i.link&&"@id"in r&&r["@id"]in i.link){var u=i.link[r["@id"]];for(a=0;a<u.length;++a)if(u[a].expanded===r)return u[a].compacted}if(se(r)||ae(r))return o=function(t,n,r){if(se(r)){var i=e.getContextValue(t,n,"@type"),o=e.getContextValue(t,n,"@language"),a=e.getContextValue(t,n,"@container"),s="@index"in r&&"@index"!==a;if(!s&&(r["@type"]===i||r["@language"]===o))return r["@value"];var u=Object.keys(r).length,l=1===u||2===u&&"@index"in r&&!s,c="@language"in t,h=ne(r["@value"]);if(l&&(!c||!h||t.mappings[n]&&null===t.mappings[n]["@language"]))return r["@value"];var f={};return s&&(f[Q(t,"@index")]=r["@index"]),"@type"in r?f[Q(t,"@type")]=Q(t,r["@type"],null,{vocab:!0}):"@language"in r&&(f[Q(t,"@language")]=r["@language"]),f[Q(t,"@value")]=r["@value"],f}var d=Z(t,n,{vocab:!0}),p=(i=e.getContextValue(t,n,"@type"),Q(t,r["@id"],null,{vocab:"@vocab"===i}));return"@id"===i||"@vocab"===i||"@graph"===d?p:((f={})[Q(t,"@id")]=p,f)}(t,n,r),i.link&&ae(r)&&(r["@id"]in i.link||(i.link[r["@id"]]=[]),i.link[r["@id"]].push({expanded:r,compacted:o})),o;var l="@reverse"===n;o={},i.link&&"@id"in r&&(r["@id"]in i.link||(i.link[r["@id"]]=[]),i.link[r["@id"]].push({expanded:r,compacted:o}));for(var c=Object.keys(r).sort(),h=0;h<c.length;++h){var f=c[h],d=r[f];if("@id"!==f&&"@type"!==f)if("@reverse"!==f)if("@index"!==f)if("@graph"!==f&&"@list"!==f&&K(f))M=Q(t,f),e.addValue(o,M,d);else{if(0===d.length){var p=Q(t,f,d,{vocab:!0},l);e.addValue(o,p,d,{propertyIsArray:!0})}for(S=0;S<d.length;++S){var m=d[S],v=(p=Q(t,f,m,{vocab:!0},l),E=e.getContextValue(t,p,"@container"),ue(m)),g=null;v&&(g=m["@list"]);var y,b=this.compact(t,p,v?g:m,i);if(v)if(ee(b)||(b=[b]),"@list"!==E){var _={};_[Q(t,"@list")]=b,b=_,"@index"in m&&(b[Q(t,"@index")]=m["@index"])}else if(p in o)throw new A('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});"@language"===E||"@index"===E?(p in o?y=o[p]:o[p]=y={},"@language"===E&&se(b)&&(b=b["@value"]),e.addValue(y,m[E],b)):(C=!i.compactArrays||"@set"===E||"@list"===E||ee(b)&&0===b.length||"@list"===f||"@graph"===f,e.addValue(o,p,b,{propertyIsArray:C}))}}else{if("@index"===(E=e.getContextValue(t,n,"@container")))continue;M=Q(t,f),e.addValue(o,M,d)}else{for(var x in T=this.compact(t,"@reverse",d,i))if(t.mappings[x]&&t.mappings[x].reverse){var w=T[x],E=e.getContextValue(t,x,"@container");e.addValue(o,x,w,{propertyIsArray:"@set"===E||!i.compactArrays}),delete T[x]}if(Object.keys(T).length>0){var M=Q(t,f);e.addValue(o,M,T)}}else{var T;if(ne(d))T=Q(t,d,null,{vocab:"@type"===f});else{T=[];for(var S=0;S<d.length;++S)T.push(Q(t,d[S],null,{vocab:!0}))}M=Q(t,f);var C=ee(T)&&0===d.length;e.addValue(o,M,T,{propertyIsArray:C})}}return o}return r},C.prototype.expand=function(t,n,r,i,o){var a=this;if(null===r||void 0===r)return null;if(!ee(r)&&!$(r))return o||null!==n&&"@graph"!==Z(t,n,{vocab:!0})?function(t,n,r){if(null===r||void 0===r)return null;var i=Z(t,n,{vocab:!0});if("@id"===i)return Z(t,r,{base:!0});if("@type"===i)return Z(t,r,{vocab:!0,base:!0});var o=e.getContextValue(t,n,"@type");if("@id"===o||"@graph"===i&&ne(r))return{"@id":Z(t,r,{base:!0})};if("@vocab"===o)return{"@id":Z(t,r,{vocab:!0,base:!0})};if(K(i))return r;var a={};if(null!==o)a["@type"]=o;else if(ne(r)){var s=e.getContextValue(t,n,"@language");null!==s&&(a["@language"]=s)}return-1===["boolean","number","string"].indexOf(typeof r)&&(r=r.toString()),a["@value"]=r,a}(t,n,r):null;if(ee(r)){var s=[],u=e.getContextValue(t,n,"@container");o=o||"@list"===u;for(var l=0;l<r.length;++l){var c=a.expand(t,n,r[l],i);if(o&&(ee(c)||ue(c)))throw new A("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==c&&(ee(c)?s=s.concat(c):s.push(c))}return s}"@context"in r&&(t=a.processContext(t,r["@context"],i));for(var h=Z(t,n,{vocab:!0}),f=(s={},Object.keys(r).sort()),d=0;d<f.length;++d){var p,m=f[d],v=r[m];if("@context"!==m){var g=Z(t,m,{vocab:!0});if(null!==g&&(ce(g)||K(g))){if(K(g)){if("@reverse"===h)throw new A("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:v});if(g in s)throw new A("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:g})}if("@id"===g&&!ne(v)){if(!i.isFrame)throw new A('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(!$(v))throw new A('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}if("@type"===g&&te(v),"@graph"===g&&!$(v)&&!ee(v))throw new A('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:v});if("@value"===g&&($(v)||ee(v)))throw new A('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:v});if("@language"===g){if(null===v)continue;if(!ne(v))throw new A('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:v});v=v.toLowerCase()}if("@index"===g&&!ne(v))throw new A('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:v});if("@reverse"!==g){if("@language"===(u=e.getContextValue(t,m,"@container"))&&$(v))p=R(v);else if("@index"===u&&$(v))p=function(e){for(var n=[],r=Object.keys(v).sort(),o=0;o<r.length;++o){var s=r[o],u=v[s];ee(u)||(u=[u]),u=a.expand(t,e,u,i,!1);for(var l=0;l<u.length;++l){var c=u[l];"@index"in c||(c["@index"]=s),n.push(c)}}return n}(m);else{var y="@list"===g;if(y||"@set"===g){var b=n;if(y&&"@graph"===h&&(b=null),p=a.expand(t,b,v,i,y),y&&ue(p))throw new A("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else p=a.expand(t,m,v,i,!1)}if(null!==p||"@value"===g)if("@list"===g||ue(p)||"@list"!==u||(p={"@list":p=ee(p)?p:[p]}),t.mappings[m]&&t.mappings[m].reverse)for(w=s["@reverse"]=s["@reverse"]||{},ee(p)||(p=[p]),M=0;M<p.length;++M){if(se(T=p[M])||ue(T))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});e.addValue(w,g,T,{propertyIsArray:!0})}else{var _=-1===["@index","@id","@type","@value","@language"].indexOf(g);e.addValue(s,g,p,{propertyIsArray:_})}}else{if(!$(v))throw new A('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:v});if("@reverse"in(p=a.expand(t,"@reverse",v,i)))for(var x in p["@reverse"])e.addValue(s,x,p["@reverse"][x],{propertyIsArray:!0});var w=s["@reverse"]||null;for(var x in p)if("@reverse"!==x){null===w&&(w=s["@reverse"]={}),e.addValue(w,x,[],{propertyIsArray:!0});for(var E=p[x],M=0;M<E.length;++M){var T;if(se(T=E[M])||ue(T))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});e.addValue(w,x,T,{propertyIsArray:!0})}}}}}}var S=(f=Object.keys(s)).length;if("@value"in s){if("@type"in s&&"@language"in s)throw new A('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});var C=S-1;if("@type"in s&&(C-=1),"@index"in s&&(C-=1),"@language"in s&&(C-=1),0!==C)throw new A('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});if(null===s["@value"])s=null;else{if("@language"in s&&!ne(s["@value"]))throw new A("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:s});if("@type"in s&&(!ce(s["@type"])||0===s["@type"].indexOf("_:")))throw new A('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:s})}}else if("@type"in s&&!ee(s["@type"]))s["@type"]=[s["@type"]];else if("@set"in s||"@list"in s){if(S>1&&!(2===S&&"@index"in s))throw new A('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:s});"@set"in s&&(s=s["@set"],S=(f=Object.keys(s)).length)}else 1===S&&"@language"in s&&(s=null);return!$(s)||i.keepFreeFloatingNodes||o||null!==n&&"@graph"!==h||(0===S||"@value"in s||"@list"in s||1===S&&"@id"in s)&&(s=null),s},C.prototype.createNodeMap=function(e,t){var n={"@default":{}};return B(e,n,"@default",(t=t||{}).namer||t.issuer||new ve("_:b")),j(n)},C.prototype.flatten=function(e){for(var t=this.createNodeMap(e),n=[],r=Object.keys(t).sort(),i=0;i<r.length;++i){var o=t[r[i]];ae(o)||n.push(o)}return n},C.prototype.frame=function(e,t,n){var r={options:n,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ve("_:b");B(e,r.graphs,"@merged",i),r.subjects=r.graphs["@merged"];var o=[];return function e(t,n,r,i,o){!function(e){if(!ee(e)||1!==e.length||!$(e[0]))throw new A("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}(r);for(var a=t.options,s={embed:V(r=r[0],a,"embed"),explicit:V(r,a,"explicit"),requireAll:V(r,a,"requireAll")},u=function(e,t,n,r){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];H(s,n,r)&&(i[a]=s)}return i}(t,n,r,s),l=Object.keys(u).sort(),c=0;c<l.length;++c){var h=l[c],f=u[h];if("@link"===s.embed&&h in t.link)q(i,o,t.link[h]);else{null===o&&(t.uniqueEmbeds={});var d={};if(d["@id"]=h,t.link[h]=d,"@never"===s.embed||G(f,t.subjectStack))q(i,o,d);else{"@last"===s.embed&&(h in t.uniqueEmbeds&&W(t,h),t.uniqueEmbeds[h]={parent:i,property:o}),t.subjectStack.push(f);for(var p=Object.keys(f).sort(),m=0;m<p.length;m++)if(K(E=p[m]))d[E]=he(f[E]);else if(!s.explicit||E in r)for(var v=f[E],g=0;g<v.length;++g){var y=v[g];if(ue(y)){var b={"@list":[]};q(d,E,b);var _=y["@list"];for(var x in _)if(ae(y=_[x])){var w=E in r?r[E][0]["@list"]:z(s);e(t,[y["@id"]],w,b,"@list")}else q(b,"@list",he(y))}else ae(y)?(w=E in r?r[E]:z(s),e(t,[y["@id"]],w,d,E)):q(d,E,he(y))}for(p=Object.keys(r).sort(),m=0;m<p.length;++m){var E;if(!K(E=p[m])){var M=r[E][0];if(!(V(M,a,"omitDefault")||E in d)){var T="@null";"@default"in M&&(T=he(M["@default"])),ee(T)||(T=[T]),d[E]=[{"@preserve":T}]}}}q(i,o,d),t.subjectStack.pop()}}}}(r,Object.keys(r.subjects).sort(),t,o,null),o},C.prototype.normalize=function(e,t,n){return"URDNA2015"===t.algorithm?new F(t).main(e,n):"URGNA2012"===t.algorithm?new U(t).main(e,n):void n(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},C.prototype.fromRDF=function(t,n,r){var i={},o={"@default":i},a={};for(var s in t){var u=t[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var l=o[s],c=0;c<u.length;++c){var h=u[c],f=h.subject.value,d=h.predicate.value,p=h.object;f in l||(l[f]={"@id":f});var m=l[f],v="IRI"===p.type||"blank node"===p.type;if(!v||p.value in l||(l[p.value]={"@id":p.value}),d!==E||n.useRdfType||!v){var g=I(p,n.useNativeTypes);if(e.addValue(m,d,g,{propertyIsArray:!0}),v)if(p.value===w){var y=l[p.value];"usages"in y||(y.usages=[]),y.usages.push({node:m,property:d,value:g})}else a[p.value]=!(p.value in a)&&{node:m,property:d,value:g}}else e.addValue(m,"@type",p.value,{propertyIsArray:!0})}}for(var s in o)if(w in(D=o[s])){for(var b=D[w],M=0;M<b.usages.length;++M){for(var T=b.usages[M],S=(m=T.node,T.property),A=T.value,C=[],R=[],L=Object.keys(m).length;S===x&&$(a[m["@id"]])&&ee(m[_])&&1===m[_].length&&ee(m[x])&&1===m[x].length&&(3===L||4===L&&ee(m["@type"])&&1===m["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===m["@type"][0])&&(C.push(m[_][0]),R.push(m["@id"]),m=(T=a[m["@id"]]).node,S=T.property,A=T.value,L=Object.keys(m).length,0===m["@id"].indexOf("_:")););if(S===_){if(m["@id"]===w)continue;A=D[A["@id"]][x][0],C.pop(),R.pop()}delete A["@id"],A["@list"]=C.reverse();for(var P=0;P<R.length;++P)delete D[R[P]]}delete b.usages}var O=[],k=Object.keys(i).sort();for(M=0;M<k.length;++M){var N=k[M];if(m=i[N],N in o){u=m["@graph"]=[];for(var D=o[N],F=Object.keys(D).sort(),U=0;U<F.length;++U){var B=D[F[U]];ae(B)||u.push(B)}}ae(m)||O.push(m)}r(null,O)},C.prototype.toRDF=function(e,t){var n=new ve("_:b"),r={"@default":{}};B(e,r,"@default",n);for(var i={},o=Object.keys(r).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||ce(s))&&(i[s]=L(r[s],n,t))}return i},C.prototype.processContext=function(t,n,r){$(n)&&"@context"in n&&ee(n["@context"])&&(n=n["@context"]);var i=ee(n)?n:[n];if(0===i.length)return t.clone();for(var o=t,a=0;a<i.length;++a){var s=i[a];if(null!==s){if($(s)&&"@context"in s&&(s=s["@context"]),!$(s))throw new A("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(e.cache.activeCtx){var u=e.cache.activeCtx.get(t,s);if(u){o=t=u;continue}}t=o,o=o.clone();var l={};if("@base"in s){var c=s["@base"];if(null===c)c=null;else{if(!ne(c))throw new A('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});if(""!==c&&!ce(c))throw new A('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=e.url.parse(c||"")),o["@base"]=c,l["@base"]=!0}if("@vocab"in s){if(null===(h=s["@vocab"]))delete o["@vocab"];else{if(!ne(h))throw new A('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!ce(h))throw new A('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=h}l["@vocab"]=!0}if("@language"in s){var h;if(null===(h=s["@language"]))delete o["@language"];else{if(!ne(h))throw new A('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=h.toLowerCase()}l["@language"]=!0}for(var f in s)Y(o,s,f,l);e.cache.activeCtx&&e.cache.activeCtx.set(t,s,o)}else o=t=J(r)}return o};var N,D,F=(N={subject:"s",object:"o",name:"g"},(D=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ve("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10}).prototype.doWork=function(t,n){var r=this.schedule;if(r.totalDepth>=r.MAX_TOTAL_DEPTH)return n(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,e.nextTick(i);var o=(new Date).getTime();if(r.running||(r.start=(new Date).getTime(),r.deadline=r.start+r.timeSlice),o<r.deadline)return r.running=!0,r.depth++,r.totalDepth++,t(function(e,t){r.depth--,r.totalDepth--,n(e,t)});r.depth=0,r.running=!1,e.setImmediate(i)}()},D.prototype.forEach=function(e,t,n){var r,i,o=this,a=0;if(ee(e))i=e.length,r=function(){return a!==i&&(r.value=e[a++],r.key=a,!0)};else{var s=Object.keys(e);i=s.length,r=function(){return a!==i&&(r.key=s[a++],r.value=e[r.key],!0)}}!function e(i,a){return i?n(i):r()?o.doWork(function(){t(r.value,r.key,e)}):void n()}()},D.prototype.waterfall=function(e,t){var n=this;n.forEach(e,function(e,t,r){n.doWork(e,r)},t)},D.prototype.whilst=function(e,t,n){var r=this;!function i(o){return o?n(o):e()?void r.doWork(t,i):n()}()},D.prototype.main=function(e,t){var n,r=this;if(r.schedule.start=(new Date).getTime(),r.options.format&&"application/nquads"!==r.options.format)return t(new A("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(e.name=0===t.indexOf("_:")?{type:"blank node",value:t}:{type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e];if(a.length>1)return o();var s=a[0];r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new ve("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e);i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(me(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e();n=pe(t.join("")),e()}],e)}],function(e){t(e,n)})},D.prototype.hashFirstDegreeQuads=function(e,t){var n=this,r=n.blankNodeInfo[e];if("hash"in r)return t(null,r.hash);var i=[];n.forEach(r.quads,function(t,r,o){var a={predicate:t.predicate};n.forEachComponent(t,function(t,r){a[r]=n.modifyFirstDegreeComponent(e,t,r)}),i.push(me(a)),o()},function(e){if(e)return t(e);i.sort(),r.hash=ye.hashNQuads(n.name,i),t(null,r.hash)})},D.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:((t=he(t)).value=t.value===e?"_:a":"_:z",t)},D.prototype.hashRelatedBlankNode=function(e,t,n,r,i){var o,a=this;a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):n.hasId(e)?(o=n.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,n){if(e)return t(e);o=n,t()})}],function(e){if(e)return i(e);var n=new ye(a.name);return n.update(r),"g"!==r&&n.update(a.getRelatedPredicate(t)),n.update(o),i(null,n.digest())})},D.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},D.prototype.hashNDegreeQuads=function(e,t,n){var r,i=this,o=new ye(i.name);i.waterfall([function(n){i.createHashToRelated(e,t,function(e,t){if(e)return n(e);r=t,n()})},function(e){var n=Object.keys(r).sort();i.forEach(n,function(e,n,a){o.update(e);var s,u="",l=new ge(r[e]);i.whilst(function(){return l.hasNext()},function(e){var n=l.next(),r=t.clone(),o="",a=[];i.waterfall([function(t){i.forEach(n,function(t,n,s){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(r.hasId(t)||a.push(t),o+=r.getId(t)),0!==u.length&&o.length>=u.length&&o>u)return e();s()},t)},function(t){i.forEach(a,function(t,n,a){i.hashNDegreeQuads(t,r,function(n,i){return n?a(n):(o+=r.getId(t),o+="<"+i.hash+">",r=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void a())})},t)},function(e){(0===u.length||o<u)&&(u=o,s=r),e()}],e)},function(e){if(e)return a(e);o.update(u),t=s,a()})},e)}],function(e){n(e,{hash:o.digest(),issuer:t})})},D.prototype.createHashToRelated=function(e,t,n){var r=this,i={};r.forEach(r.blankNodeInfo[e].quads,function(n,o,a){r.forEach(n,function(o,a,s){if("predicate"===a||"blank node"!==o.type||o.value===e)return s();var u=o.value;r.hashRelatedBlankNode(u,n,t,N[a],function(e,t){if(e)return s(e);t in i?i[t].push(u):i[t]=[u],s()})},a)},function(e){n(e,i)})},D.prototype.forEachComponent=function(e,t){for(var n in e)"predicate"!==n&&t(e[n],n,e)},D),U=function(){var e=function(e){F.call(this,e),this.name="URGNA2012"};return(e.prototype=new F).modifyFirstDegreeComponent=function(e,t,n){return"blank node"!==t.type?t:((t=he(t)).value="name"===n?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,n){var r=this,i={};r.forEach(r.blankNodeInfo[e].quads,function(n,o,a){var s,u;if("blank node"===n.subject.type&&n.subject.value!==e)u=n.subject.value,s="p";else{if("blank node"!==n.object.type||n.object.value===e)return a();u=n.object.value,s="r"}r.hashRelatedBlankNode(u,n,t,s,function(e,t){t in i?i[t].push(u):i[t]=[u],a()})},function(e){n(e,i)})},e}();function B(t,n,r,i,o,a){if(ee(t))for(var s=0;s<t.length;++s)B(t[s],n,r,i,void 0,a);else if($(t))if(se(t))"@type"in t&&0===(l=t["@type"]).indexOf("_:")&&(t["@type"]=l=i.getId(l)),a&&a.push(t);else{if("@type"in t){var u=t["@type"];for(s=0;s<u.length;++s){var l;0===(l=u[s]).indexOf("_:")&&i.getId(l)}}oe(o)&&(o=le(t)?i.getId(t["@id"]):t["@id"]),a&&a.push({"@id":o});var c=n[r],h=c[o]=c[o]||{};h["@id"]=o;for(var f=Object.keys(t).sort(),d=0;d<f.length;++d){var p=f[d];if("@id"!==p)if("@reverse"!==p)if("@graph"!==p)if("@type"!==p&&K(p)){if("@index"===p&&p in h&&(t[p]!==h[p]||t[p]["@id"]!==h[p]["@id"]))throw new A("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[p]=t[p]}else{var m=t[p];if(0===p.indexOf("_:")&&(p=i.getId(p)),0!==m.length)for(var v=0;v<m.length;++v){var g=m[v];if("@type"===p&&(g=0===g.indexOf("_:")?i.getId(g):g),R=void 0,R=!1,$(C=g)&&!("@value"in C||"@set"in C||"@list"in C)&&(R=Object.keys(C).length>1||!("@id"in C)),R||ae(g)){var y=le(g)?i.getId(g["@id"]):g["@id"];e.addValue(h,p,{"@id":y},{propertyIsArray:!0,allowDuplicate:!1}),B(g,n,r,i,y)}else if(ue(g)){var b=[];B(g["@list"],n,r,i,o,b),e.addValue(h,p,g={"@list":b},{propertyIsArray:!0,allowDuplicate:!1})}else B(g,n,r,i,o),e.addValue(h,p,g,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(h,p,[],{propertyIsArray:!0})}else o in n||(n[o]={}),B(t[p],n,"@merged"===r?r:o,i);else{var _={"@id":o},x=t["@reverse"];for(var w in x)for(var E=x[w],M=0;M<E.length;++M){var T=E[M],S=T["@id"];le(T)&&(S=i.getId(S)),B(T,n,r,i,S),e.addValue(c[S],w,_,{propertyIsArray:!0,allowDuplicate:!1})}}}}else a&&a.push(t);var C,R}function j(e){for(var t=e["@default"],n=Object.keys(e).sort(),r=0;r<n.length;++r){var i=n[r];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],u=Object.keys(o).sort(),l=0;l<u.length;++l){var c=o[u[l]];ae(c)||s.push(c)}}}return t}function z(e){var t={};for(var n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function G(e,t){for(var n=t.length-1;n>=0;--n)if(t[n]["@id"]===e["@id"])return!0;return!1}function V(e,t,n){var r="@"+n,i=r in e?e[r][0]:t[n];return"embed"===n&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function H(t,n,r){if("@type"in n&&(1!==n["@type"].length||!$(n["@type"][0]))){for(var i=n["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var u in n){if(K(u)){if("@id"!==u&&"@type"!==u)continue;if(a=!1,"@id"===u&&ne(n[u])){if(t[u]!==n[u])return!1;s=!0;continue}}if(a=!1,u in t){if(ee(n[u])&&0===n[u].length&&void 0!==t[u])return!1;s=!0}else{var l=ee(n[u])&&$(n[u][0])&&"@default"in n[u][0];if(r.requireAll&&!l)return!1}}return a||s}function W(t,n){var r=t.uniqueEmbeds,i=r[n],o=i.parent,a=i.property,s={"@id":n};if(ee(o)){for(var u=0;u<o.length;++u)if(e.compareValues(o[u],s)){o[u]=s;break}}else{var l=ee(o[a]);e.removeValue(o,a,s,{propertyIsArray:l}),e.addValue(o,a,s,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(r),n=0;n<t.length;++n){var i=t[n];i in r&&$(r[i].parent)&&r[i].parent["@id"]===e&&(delete r[i],c(i))}};c(n)}function q(t,n,r){$(t)?e.addValue(t,n,r,{propertyIsArray:!0}):t.push(r)}function X(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function Q(t,n,r,i,o){if(null===n)return n;oe(r)&&(r=null),oe(o)&&(o=!1),i=i||{};var a=t.getInverse();if(K(n))return n in a?a[n]["@none"]["@type"]["@none"]:n;if(i.vocab&&n in a){var s=t["@language"]||"@none",u=[];$(r)&&"@index"in r&&u.push("@index");var l="@language",c="@null";if(o)l="@type",c="@reverse",u.push("@set");else if(ue(r)){"@index"in r||u.push("@list");for(var h=r["@list"],f=0===h.length?s:null,d=null,p=0;p<h.length;++p){var m=h[p],v="@none",g="@none";if(se(m)?"@language"in m?v=m["@language"]:"@type"in m?g=m["@type"]:v="@null":g="@id",null===f?f=v:v!==f&&se(m)&&(f="@none"),null===d?d=g:g!==d&&(d="@none"),"@none"===f&&"@none"===d)break}f=f||"@none","@none"!==(d=d||"@none")?(l="@type",c=d):c=f}else se(r)?"@language"in r&&!("@index"in r)?(u.push("@language"),c=r["@language"]):"@type"in r&&(l="@type",c=r["@type"]):(l="@type",c="@id"),u.push("@set");u.push("@none");var y=function(e,t,n,r,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!ae(n))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=Q(e,n["@id"],null,{vocab:!0});a.push.apply(a,s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===n["@id"]?["@vocab","@id"]:["@id","@vocab"])}a.push("@none");for(var u=e.inverse[t],l=0;l<r.length;++l){var c=r[l];if(c in u)for(var h=u[c][i],f=0;f<a.length;++f){var d=a[f];if(d in h)return h[d]}}return null}(t,n,r,u,l,c);if(null!==y)return y}if(i.vocab&&"@vocab"in t){var b=t["@vocab"];if(0===n.indexOf(b)&&n!==b){var _=n.substr(b.length);if(!(_ in t.mappings))return _}}for(var x=null,w=0,E=[],M=t.fastCurieMap,T=n.length-1;w<T&&n[w]in M;++w)""in(M=M[n[w]])&&E.push(M[""][0]);for(p=E.length-1;p>=0;--p)for(var S=E[p],A=S.terms,C=0;C<A.length;++C){var R=A[C]+":"+n.substr(S.iri.length);(!(R in t.mappings)||null===r&&t.mappings[R]["@id"]===n)&&(null===x||X(R,x)<0)&&(x=R)}return null!==x?x:i.vocab?n:function(t,n){if(null===t)return n;ne(t)&&(t=e.url.parse(t||""));var r="";if(""!==t.href?r+=(t.protocol||"")+"//"+(t.authority||""):n.indexOf("//")&&(r+="//"),0!==n.indexOf(r))return n;for(var i=e.url.parse(n.substr(r.length)),o=t.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var u="";if(o.length>0){o.pop();for(var l=0;l<o.length;++l)u+="../"}return u+=a.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}(t["@base"],n)}function Y(e,t,n,r){if(n in r){if(r[n])return;throw new A("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}if(r[n]=!1,K(n))throw new A("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(""===n)throw new A("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[n]&&delete e.mappings[n];var i=t[n];if(null===i||$(i)&&null===i["@id"])return e.mappings[n]=null,void(r[n]=!0);if(ne(i)&&(i={"@id":i}),!$(i))throw new A("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[n]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new A("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!ne(a))throw new A("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!ce(s=Z(e,a,{vocab:!0,base:!1},t,r)))throw new A("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){if(!ne(s=i["@id"]))throw new A("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==n){if(!ce(s=Z(e,s,{vocab:!0,base:!1},t,r))&&!K(s))throw new A("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}var s,u=n.indexOf(":");if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var l=n.substr(0,u);if(l in t&&Y(e,t,l,r),e.mappings[l]){var c=n.substr(u+1);o["@id"]=e.mappings[l]["@id"]+c}else o["@id"]=n}else{if(!("@vocab"in e))throw new A("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});o["@id"]=e["@vocab"]+n}if(r[n]=!0,"@type"in i){var h=i["@type"];if(!ne(h))throw new A("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==h&&"@vocab"!==h){if(!ce(h=Z(e,h,{vocab:!0,base:!1},t,r)))throw new A("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===h.indexOf("_:"))throw new A("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=h}if("@container"in i){var f=i["@container"];if("@list"!==f&&"@set"!==f&&"@index"!==f&&"@language"!==f)throw new A("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==f&&"@set"!==f&&null!==f)throw new A("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=f}if("@language"in i&&!("@type"in i)){var d=i["@language"];if(null!==d&&!ne(d))throw new A("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==d&&(d=d.toLowerCase()),o["@language"]=d}if("@context"===(s=o["@id"])||"@preserve"===s)throw new A("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function Z(t,n,r,i,o){if(null===n||K(n))return n;if(n=String(n),i&&n in i&&!0!==o[n]&&Y(t,i,n,o),(r=r||{}).vocab){if(null===(s=t.mappings[n]))return null;if(s)return s["@id"]}var a=n.indexOf(":");if(-1!==a){var s,u=n.substr(0,a),l=n.substr(a+1);return"_"===u||0===l.indexOf("//")?n:(i&&u in i&&Y(t,i,u,o),(s=t.mappings[u])?s["@id"]+l:n)}if(r.vocab&&"@vocab"in t)return t["@vocab"]+n;var c=n;return r.base&&(c=e.prependBase(t["@base"],c)),c}function J(t){return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var e=this.inverse={},t=this.fastCurieMap={},i={},o=this["@language"]||"@none",a=this.mappings,s=Object.keys(a).sort(X),u=0;u<s.length;++u){var l=s[u],c=a[l];if(null!==c){var h=c["@container"]||"@none",f=c["@id"];ee(f)||(f=[f]);for(var d=0;d<f.length;++d){var p=f[d],m=e[p],v=K(p);if(m)v||c._termHasColon||i[p].push(l);else if(e[p]=m={},!v&&!c._termHasColon){i[p]=[l];var g={iri:p,terms:i[p]};p[0]in t?t[p[0]].push(g):t[p[0]]=[g]}m[h]||(m[h]={"@language":{},"@type":{}}),m=m[h],c.reverse?r(0,l,m["@type"],"@reverse"):"@type"in c?r(0,l,m["@type"],c["@type"]):"@language"in c?r(0,l,m["@language"],c["@language"]||"@null"):(r(0,l,m["@language"],o),r(0,l,m["@type"],"@none"),r(0,l,m["@language"],"@none"))}}}for(var y in t)n(t,y,1);return e},clone:function(){var e={};return e["@base"]=this["@base"],e.mappings=he(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}};function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},u=0;u<a.length;++u)(o=r>=(i=a[u].iri).length?"":i[r])in s?s[o].push(a[u]):s[o]=[a[u]];for(var t in s)""!==t&&n(s,t,r+1)}function r(e,t,n,r){r in n||(n[r]=t)}}function K(e){if(!ne(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function $(e){return"[object Object]"===Object.prototype.toString.call(e)}function ee(e){return Array.isArray(e)}function te(e){if(!ne(e)&&!function(e){return $(e)&&0===Object.keys(e).length}(e)){var t=!1;if(ee(e)){t=!0;for(var n=0;n<e.length;++n)if(!ne(e[n])){t=!1;break}}if(!t)throw new A('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function ne(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function re(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function ie(e){return re(e)&&-1!==String(e).indexOf(".")}function oe(e){return void 0===e}function ae(e){return $(e)&&1===Object.keys(e).length&&"@id"in e}function se(e){return $(e)&&"@value"in e}function ue(e){return $(e)&&"@list"in e}function le(e){var t=!1;return $(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function ce(e){return ne(e)&&-1!==e.indexOf(":")}function he(e){if(e&&"object"==typeof e){var t;if(ee(e)){t=[];for(var n=0;n<e.length;++n)t[n]=he(e[n])}else if($(e))for(var r in t={},e)t[r]=he(e[r]);else t=e.toString();return t}return e}function fe(t,n,r,i){var o=Object.keys(n).length;if(ee(t)){for(var a=0;a<t.length;++a)fe(t[a],n,r,i);return o<Object.keys(n).length}if($(t)){for(var s in t)if("@context"===s){var u=t[s];if(ee(u)){var l=u.length;for(a=0;a<l;++a){var c=u[a];ne(c)&&(c=e.prependBase(i,c),r?ee(c=n[c])?(Array.prototype.splice.apply(u,[a,1].concat(c)),a+=c.length-1,l=u.length):u[a]=c:c in n||(n[c]=!1))}}else ne(u)&&(u=e.prependBase(i,u),r?t[s]=n[u]:u in n||(n[u]=!1))}else fe(t[s],n,r,i);return o<Object.keys(n).length}return!1}function de(e,t,n){var r=null,i=function(e,t,n,o,a){if(Object.keys(t).length>S)return r=new A("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:S}),a(r);var s={},u=function(){fe(e,s,!0,o),a(null,e)};if(!fe(e,s,!1,o))return u();var l=[];for(var c in s)!1===s[c]&&l.push(c);for(var h=l.length,f=0;f<l.length;++f)!function(e){if(e in t)return r=new A("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(r);var o=he(t);o[e]=!0;var l=function(t,l){if(!r){var c=l?l.document:null;if(!t&&ne(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new A("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):$(c)||(t=new A("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return a(r=t);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(ee(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),i(c,o,n,e,function(t,n){if(t)return a(t);s[e]=n["@context"],0==(h-=1)&&u()})}},c=n(e,l);c&&"then"in c&&c.then(l.bind(null,null),l)}(l[f])};i(e,{},t.documentLoader,t.base,n)}function pe(e){for(var t=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),r={},i=e.split(/(?:\r\n)|(?:\n)|(?:\r)/g),o=0,a=0;a<i.length;++a){var s=i[a];if(o++,!t.test(s)){var u=s.match(n);if(null===u)throw new A("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:o});var l={};if(l.subject=oe(u[1])?{type:"blank node",value:u[2]}:{type:"IRI",value:u[1]},l.predicate={type:"IRI",value:u[3]},oe(u[4]))if(oe(u[5])){l.object={type:"literal"},oe(u[7])?oe(u[8])?l.object.datatype=y:(l.object.datatype=M,l.object.language=u[8]):l.object.datatype=u[7];var c=u[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");l.object.value=c}else l.object={type:"blank node",value:u[5]};else l.object={type:"IRI",value:u[4]};var h="@default";if(oe(u[9])?oe(u[10])||(h=u[10]):h=u[9],h in r){for(var f=!0,d=r[h],p=0;f&&p<d.length;++p)k(d[p],l)&&(f=!1);f&&d.push(l)}else r[h]=[l]}}return r}function me(e,t){var n=e.subject,r=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var a="";return a+="IRI"===n.type?"<"+n.value+">":n.value,a+=" ",a+="IRI"===r.type?"<"+r.value+">":r.value,a+=" ","IRI"===i.type?a+="<"+i.value+">":"blank node"===i.type?a+=i.value:(a+='"'+i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"')+'"',i.datatype===M?i.language&&(a+="@"+i.language):i.datatype!==y&&(a+="^^<"+i.datatype+">")),null!==o&&void 0!==o&&(0!==o.indexOf("_:")?a+=" <"+o+">":a+=" "+o),a+" .\n"}function ve(e){this.prefix=e,this.counter=0,this.existing={}}Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),e.registerRDFParser("application/nquads",pe),e.registerRDFParser("rdfa-api",function(e){for(var t={"@default":[]},n=e.getSubjects(),r=0;r<n.length;++r){var i=n[r];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var u=a[s].objects,l=0;l<u.length;++l){var c=u[l],h={};h.subject=0===i.indexOf("_:")?{type:"blank node",value:i}:{type:"IRI",value:i},h.predicate=0===s.indexOf("_:")?{type:"blank node",value:s}:{type:"IRI",value:s};var f=c.value;if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===c.type){d||be();var m=new d;f="";for(var v=0;v<c.value.length;v++)c.value[v].nodeType===p.ELEMENT_NODE?f+=m.serializeToString(c.value[v]):c.value[v].nodeType===p.TEXT_NODE&&(f+=c.value[v].nodeValue)}h.object={},"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"===c.type?h.object.type=0===c.value.indexOf("_:")?"blank node":"IRI":(h.object.type="literal","http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"===c.type?c.language?(h.object.datatype=M,h.object.language=c.language):h.object.datatype=y:h.object.datatype=c.type),h.object.value=f,t["@default"].push(h)}}}}return t}),e.IdentifierIssuer=ve,e.UniqueNamer=ve,ve.prototype.clone=function(){var e=new ve(this.prefix);return e.counter=this.counter,e.existing=he(this.existing),e},ve.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ve.prototype.getName=ve.prototype.getName,ve.prototype.isNamed=ve.prototype.hasId=function(e){return e in this.existing};var ge=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};ge.prototype.hasNext=function(){return!this.done},ge.prototype.next=function(){for(var e=this.list.slice(),t=null,n=0,r=this.list.length,i=0;i<r;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<r-1&&o>this.list[i+1])&&(t=o,n=i)}if(null===t)this.done=!0;else{var s=this.left[t]?n-1:n+1;for(this.list[n]=this.list[s],this.list[s]=t,i=0;i<r;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var ye=function(e){if(!(this instanceof ye))return new ye(e);if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);ye._init.call(this,e)};if(ye.hashNQuads=function(e,t){for(var n=new ye(e),r=0;r<t.length;++r)n.update(t[r]);return n.digest()},function(e){if(e){var t=n("rvzF");return ye._init=function(e){this.md=t.createHash(e="URDNA2015"===e?"sha256":"sha1")},ye.prototype.update=function(e){return this.md.update(e,"utf8")},void(ye.prototype.digest=function(){return this.md.digest("hex")})}ye._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new r(e)},ye.prototype.update=function(e){return this.md.update(e)},ye.prototype.digest=function(){return this.md.digest().toHex()};var r=function(e){if(!(this instanceof r))return new r(e);if(this._algorithm=e,!r._padding||r._padding.length<this._algorithm.blockSize){r._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),n=64;n>0;)1&n&&(r._padding+=t),(n>>>=1)>0&&(t+=t)}this.start()};r.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new r.ByteBuffer,this.state=this._algorithm.start(),this},r.prototype.update=function(e){e=new r.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var n=this.fullMessageLength.length-1;n>=0;--n)this.fullMessageLength[n]+=t[1],t[1]=t[0]+(this.fullMessageLength[n]/4294967296>>>0),this.fullMessageLength[n]=this.fullMessageLength[n]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},r.prototype.digest=function(){var e=new r.ByteBuffer;e.putBytes(this._input.bytes()),e.putBytes(r._padding.substr(0,this._algorithm.blockSize-(this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1)));for(var t=new r.ByteBuffer,n=0;n<this.fullMessageLength.length;++n)t.putInt32(this.fullMessageLength[n]<<3|this.fullMessageLength[n+1]>>>28);this._algorithm.writeMessageLength(e,t);var i=this._algorithm.digest(this.state.copy(),e),o=new r.ByteBuffer;return i.write(o),o},r.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},r.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},r.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},r.ByteBuffer.prototype.putBytes=function(e){this.data+=e},r.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},r.ByteBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},r.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};var i={_w:null,Algorithm:function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8}};i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var n,r,o,a,s,u,l,c=t.length(),h=i._w;c>=64;){for(r=e.h0,o=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)n=t.getInt32(),h[l]=n,n=(r<<5|r>>>27)+(s^o&(a^s))+u+1518500249+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;for(;l<20;++l)h[l]=n=(n=h[l-3]^h[l-8]^h[l-14]^h[l-16])<<1|n>>>31,n=(r<<5|r>>>27)+(s^o&(a^s))+u+1518500249+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;for(;l<32;++l)h[l]=n=(n=h[l-3]^h[l-8]^h[l-14]^h[l-16])<<1|n>>>31,n=(r<<5|r>>>27)+(o^a^s)+u+1859775393+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;for(;l<40;++l)h[l]=n=(n=h[l-6]^h[l-16]^h[l-28]^h[l-32])<<2|n>>>30,n=(r<<5|r>>>27)+(o^a^s)+u+1859775393+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;for(;l<60;++l)h[l]=n=(n=h[l-6]^h[l-16]^h[l-28]^h[l-32])<<2|n>>>30,n=(r<<5|r>>>27)+(o&a|s&(o^a))+u+2400959708+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;for(;l<80;++l)h[l]=n=(n=h[l-6]^h[l-16]^h[l-28]^h[l-32])<<2|n>>>30,n=(r<<5|r>>>27)+(o^a^s)+u+3395469782+n,u=s,s=a,a=o<<30|o>>>2,o=r,r=n;e.h0=e.h0+r|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,c-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},write:function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)}};return e};var o={_k:null,_w:null,Algorithm:function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8}};o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var n,r,i,a,s,u,l,c,h,f,d,p,m=t.length(),v=o._k,g=o._w;m>=64;){for(a=0;a<16;++a)g[a]=t.getInt32();for(;a<64;++a)g[a]=(n=((n=g[a-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10)+g[a-7]+(r=((r=g[a-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)+g[a-16]|0;for(s=e.h0,u=e.h1,l=e.h2,c=e.h3,h=e.h4,f=e.h5,d=e.h6,p=e.h7,a=0;a<64;++a)i=s&u|l&(s^u),n=p+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(d^h&(f^d))+v[a]+g[a],p=d,d=f,f=h,h=c+n|0,c=l,l=u,u=s,s=n+(r=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+i)|0;e.h0=e.h0+s|0,e.h1=e.h1+u|0,e.h2=e.h2+l|0,e.h3=e.h3+c|0,e.h4=e.h4+h|0,e.h5=e.h5+f|0,e.h6=e.h6+d|0,e.h7=e.h7+p|0,m-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},write:function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)}};return e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(u),!d)var be=function(){d=n("rvzF").XMLSerializer};function _e(e,t){var n="";0===e.indexOf("/")&&(n="/");for(var r=e.split("/"),i=[];r.length>0;)"."===r[0]||""===r[0]&&r.length>1?r.shift():".."!==r[0]?i.push(r.shift()):(r.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return n+i.join("/")}if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,n){for(var r={},i=e.url.parsers[n||"full"],o=i.regex.exec(t),a=i.keys.length;a--;)r[i.keys[a]]=void 0===o[a]?null:o[a];return r.normalizedPath=_e(r.path,!!r.authority),r},u?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),u){e.use=function(t){switch(t){case"request":e.request=n("rvzF");break;default:throw new A("Unknown extension.","jsonld.UnknownExtension",{extension:t})}};var xe={exports:{},filename:a};n("rvzF")(xe,"version"),e.version=xe.exports.version}return e},h=function(){return c(function(){return h()})};!u&&n("PDX0")?void 0===(s=(function(){return c(h),h}).apply(t,[]))||(e.exports=s):(c(h),void 0!==e&&e.exports&&(e.exports=h),l&&("undefined"==typeof jsonld?jsonld=jsonldjs=h:jsonldjs=h))}()}).call(this,n("8oxB"),n("yLpj"),n("URgk").setImmediate,"/")},sZro:function(e,t,n){"use strict";var r=n("lm0R"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var o=n("Onz0");o.inherits=n("P7XM");var a=n("rXFu"),s=n("3BRs");o.inherits(h,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},t9FE:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("yLpj"))},thjG:function(module,exports,__webpack_require__){(function(process){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(e){setTimeout(e,0)},spin=0,yieldFrequency=100,nextTick=function(e){++spin<yieldFrequency?e():(spin=0,slowNextTick(e))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return(t+=e.type||"")+(e.lang||"")}}catch(t){if("object"==typeof e){var n="";for(p in e)n=n+p+e[p];return n}return e}},lexicalFormBaseUri=function(e,t){var n=null;if(t=t||{},null==e.value){var r=e.prefix,i=e.suffix,o=t.namespaces[r];n=null!=o?o+i:r+":"+i}else n=e.value;return null===n?null:(-1==n.indexOf(":")&&(n=(t.base||"")+n),n)};parseISO8601=function(e){return Date.parse(e)},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var n=parseISO8601(e),r=parseISO8601(t);return n==r?0:n<r?-1:1},lexicalFormLiteral=function(e,t){var n=e.value,r=e.lang,i=e.type,o=null;if(null!=n&&null!=i&&"string"!=typeof i){var a=i.value;if(null==a){var s=i.suffix,u=t.namespaces[i.prefix];e.type=u+s,a=u+s}o=-1!=a.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+a+">":'"'+e.value+'"^^<'+a+">"}else o=null==r&&null==i?'"'+n+'"':null==i?'"'+n+'"@'+r:-1!=i.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var t=_dereq_("sqlite3"),n=_dereq_("indexeddb-js"),r=new t.Database(":memory:"),i=n.makeScope("sqlite3",r);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else{var o;(o="undefined"==typeof window?self:window).indexedDB=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,o.IDBKeyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.msIDBKeyRange,o.indexedDB?(e.indexedDB=o.indexedDB,e.IDBKeyRange=o.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return(t+=e.type||"")+(e.lang||"")}}catch(t){if("object"==typeof e){var n="";for(p in e)n=n+p+e[p];return n}return e}};var reject=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},include=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n])},map=function(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r]);return n},keys=function(e){var t=[];for(var n in e)t.push(n);return t},values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var n in e)t++;return t};clone=function(e){return JSON.parse(JSON.stringify(e))};var isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var n=new e;e.prototype=null}return n||void 0}}(),whilst=function(e,t,n){e()?t(function(r){if(r)return n(r);whilst(e,t,n)}):n()},eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1)>=e.length?n():nextTick(i)})};i()},eachParallel=function(e,t,n){if(n=n||function(){},!e.length)return n();for(var r=!1,i=0,o=function(t){if(t)throw r=!0,new Error(t);r||++i===e.length&&n()},a=0;a<e.length;a++)!function(e,t,n,r){nextTick(function(){try{r(e[t],function(){n()})}catch(e){n(e)}})}(e,a,o,t)},reduce=function(e,t,n,r){eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(e){yieldFrequency=e}}}).call(this,__webpack_require__("8oxB"))},tjlA:function(e,t,n){"use strict";(function(e){var r=n("H7XF"),i=n("kVK+"),o=n("49sm");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){h=!1;break}if(h)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return z(B(t,e.length-n),e,n,r)}function _(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return _(e,t,n,r)}function w(e,t,n,r){return z(j(t),e,n,r)}function E(e,t,n,r){return z(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function M(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(null,t):void 0!==n?"string"==typeof r?s(null,t).fill(n,r):s(null,t).fill(n):s(null,t)}(0,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):(function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}).apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=(r=e[a])<16?"0"+r.toString(16):r.toString(16);return o}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=u.isBuffer(e)?e:B(new u(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("yLpj"))},u67D:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("En8+"),i=function(e){return function(t){for(var n=e[r.a]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}},uT4x:function(e,t,n){var r={"./N3Lexer":"Wxc2","./N3Lexer.js":"Wxc2","./N3Parser":"mfCV","./N3Parser.js":"mfCV","./N3Store":"DwVV","./N3Store.js":"DwVV","./N3StreamParser":"gQ1q","./N3StreamParser.js":"gQ1q","./N3StreamWriter":"h2QB","./N3StreamWriter.js":"h2QB","./N3Util":"wZPa","./N3Util.js":"wZPa","./N3Writer":"fWYr","./N3Writer.js":"fWYr"};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="uT4x"},"v+EB":function(e,t,n){if(!n("thjG").isWorker()){var r=n("lJCZ"),i=n("JPgR"),o=n("CxY0");NetworkTransport={load:function(e,t,n,a){var s=null==a?3:a,u=o.parse(e,!0,!0),l={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:t}},c=null;"http:"===u.protocol?(l.port=u.port||80,c=r):"https:"===u.protocol&&(l.port=u.port||443,c=i);var h=c.request(l,function(e){var r=e.headers,i="";if("2"==(""+e.statusCode)[0])e.on("end",function(){n(null,{headers:r,data:i})}),e.on("data",function(e){i+=e});else if("3"==(""+e.statusCode)[0])if(0==s)n(new Error("Too many redirections"));else{var o=r.Location||r.location;null!=o?NetworkTransport.load(o,t,n,s-1):n(new Error("Redirection without location header"))}else n(new Error("HTTP error: "+e.statusCode))});h.on("error",n),h.end()}},e.exports={NetworkTransport:NetworkTransport}}},wZPa:function(e,t){var n={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var n,r,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=t[n=o[1]],i=o.index),void 0===r?e:0===i?r+e.substr(n.length+1):e.substr(0,i+3)+r+e.substr(i+n.length+4)},createIRI:function(e){return e&&'"'===e[0]?n.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(e)){t=e%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)},prefix:function(e){return n.prefixes({"":e})("")},prefixes:function(e){var t=Object.create(null);for(var n in e)r(n,e[n]);function r(e,n){if(n||!(e in t)){var r=Object.create(null);n=n||"",t[e]=function(e){return r[e]||(r[e]=n+e)}}return t[e]}return r}};function r(e,t){for(var r in n)t?e.prototype[r]=i(n[r]):e[r]=n[r];return e}function i(e){return function(t){return e(this,t)}}e.exports=r(r)},wq4j:function(e,t,n){e.exports=n("43KI").PassThrough},wq5Q:function(e,t){e.exports=function(){"use strict";function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),e.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=n[(i=e[t]).type](i);if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,n){n=void 0!==n?n:{};var r,i={},o={DOCUMENT:zd},a=zd,s=Ud("[1] QueryUnit"),u=Ud("[2] Query"),l=function(e,t,n){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:n}},c=Ud("[3] Prologue"),h=function(e,t){return{token:"prologue",base:e,prefixes:t}},f=Ud("[4] BaseDecl"),d="BASE",p=Dd("BASE",!1),m="base",v=Dd("base",!1),g=function(e){Lm(e);var t={token:"base"};return t.value=e,t},y=Ud("[5] PrefixDecl"),b="PREFIX",_=Dd("PREFIX",!1),x="prefix",w=Dd("prefix",!1),E=function(e,t){Rm(e,t);var n={token:"prefix"};return n.prefix=e,n.local=t,n},M=Ud("[6] SelectQuery"),T=function(e,t,n,r){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={kind:"select",token:"executableunit"};return s.dataset=i,s.projection=e.vars,s.modifier=e.modifier,s.pattern=n,null!=r&&null!=r.limit&&(s.limit=r.limit),null!=r&&null!=r.offset&&(s.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(s.order=r.order),null!=r&&null!=r.group&&(s.group=r.group),s},S=Ud("[7] SubSelect"),A=function(e,t,n){var r={kind:"select",token:"subselect"};return r.projection=e.vars,r.modifier=e.modifier,r.pattern=t,null!=n&&null!=n.limit&&(r.limit=n.limit),null!=n&&null!=n.offset&&(r.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(r.order=n.order),null!=n&&null!=n.group&&(r.group=n.group),r},C=Ud("[8] SelectClause"),R="SELECT",L=Dd("SELECT",!1),P="select",O=Dd("select",!1),I="DISTINCT",k=Dd("DISTINCT",!1),N="distinct",D=Dd("distinct",!1),F="REDUCED",U=Dd("REDUCED",!1),B="reduced",j=Dd("reduced",!1),z="(",G=Dd("(",!1),V="AS",H=Dd("AS",!1),W="as",q=Dd("as",!1),X=")",Q=Dd(")",!1),Y="*",Z=Dd("*",!1),J=function(e,t){var n=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:Pm(e)};for(var r=0;r<t.length;r++){var i=t[r];n.push(3===i.length?{token:"variable",kind:"var",value:i[1]}:{token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:n,modifier:Pm(e)}},K=Ud("[9] ConstructQuery"),$="CONSTRUCT",ee=Dd("CONSTRUCT",!1),te="construct",ne=Dd("construct",!1),re=function(e,t,n,r){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={kind:"construct",token:"executableunit"};return s.dataset=i,s.template=e,s.pattern=n,null!=r&&null!=r.limit&&(s.limit=r.limit),null!=r&&null!=r.offset&&(s.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(s.order=r.order),s},ie="WHERE",oe=Dd("WHERE",!1),ae="where",se=Dd("where",!1),ue="{",le=Dd("{",!1),ce="}",he=Dd("}",!1),fe=function(e,t,n){for(var r={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?r.implicit.push(o.graph):r.named.push(o.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={kind:"construct",token:"executableunit"};return a.dataset=r,a.template=t,a.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=n&&null!=n.limit&&(a.limit=n.limit),null!=n&&null!=n.offset&&(a.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(a.order=n.order),a},de=Ud("[10] DescribeQuery"),pe="DESCRIBE",me=Dd("DESCRIBE",!1),ve=Ud("[11] AskQuery"),ge="ASK",ye=Dd("ASK",!1),be="ask",_e=Dd("ask",!1),xe=function(e,t){for(var n={named:[],implicit:[]},r=0;r<e.length;r++){var i=e[r];"implicit"===i.kind?n.implicit.push(i.graph):n.named.push(i.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={kind:"ask",token:"executableunit"};return o.dataset=n,o.pattern=t,o},we=Ud("[12] DatasetClause"),Ee="FROM",Me=Dd("FROM",!1),Te="from",Se=Dd("from",!1),Ae=function(e){return e},Ce=Ud("[13] DefaultGraphClause"),Re=function(e){return{graph:e,kind:"default",token:"graphClause"}},Le=Ud("[14] NamedGraphClause"),Pe="NAMED",Oe=Dd("NAMED",!1),Ie="named",ke=Dd("named",!1),Ne=function(e){return{graph:e,kind:"named",token:"graphCluase"}},De=Ud("[15] SourceSelector"),Fe=Ud("[16] WhereClause"),Ue=function(e){return e},Be=Ud("[17] SolutionModifier"),je=function(e,t,n){var r={};return null!=n&&(null!=n.limit&&(r.limit=n.limit),null!=n.offset&&(r.offset=n.offset)),null!=e&&(r.group=e),r.order=t,r},ze=Ud("[18] GroupClause"),Ge="GROUP",Ve=Dd("GROUP",!1),He="group",We=Dd("group",!1),qe="BY",Xe=Dd("BY",!1),Qe="by",Ye=Dd("by",!1),Ze=function(e){return e},Je=Ud("[19] GroupCondition"),Ke=function(e){return e},$e=function(e){return e},et=function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},tt=function(e){return e},nt=Ud("[20] HavingClause"),rt="HAVING",it=Dd("HAVING",!1),ot=Ud("[21] HavingCondition"),at=Ud("[22] OrderClause"),st="ORDER",ut=Dd("ORDER",!1),lt="order",ct=Dd("order",!1),ht=function(e){return e},ft=Ud("[23] OrderCondition"),dt="ASC",pt=Dd("ASC",!1),mt="asc",vt=Dd("asc",!1),gt="DESC",yt=Dd("DESC",!1),bt="desc",_t=Dd("desc",!1),xt=function(e,t){return{direction:e.toUpperCase(),expression:t}},wt=function(e){return"var"===e.token&&(e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e}),{direction:"ASC",expression:e}},Et=Ud("[24] LimitOffsetClauses"),Mt=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];null!=r&&null!=r.limit?t.limit=r.limit:null!=r&&null!=r.offset&&(t.offset=r.offset)}return t},Tt=Ud("[25] LimitClause"),St="LIMIT",At=Dd("LIMIT",!1),Ct="limit",Rt=Dd("limit",!1),Lt=function(e){return{limit:parseInt(e.value)}},Pt=Ud("[26] OffsetClause"),Ot="OFFSET",It=Dd("OFFSET",!1),kt="offset",Nt=Dd("offset",!1),Dt=function(e){return{offset:parseInt(e.value)}},Ft=Ud("[27] BindingsClause"),Ut="BINDINGS",Bt=Dd("BINDINGS",!1),jt=Ud("[28] BindingValue"),zt="UNDEF",Gt=Dd("UNDEF",!1),Vt=Ud("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Ht="VALUES",Wt=Dd("VALUES",!1),qt="values",Xt=Dd("values",!1),Qt=function(e){return null!=e?e[1]:null},Yt=Ud("[29] UpdateUnit"),Zt=Ud("[30] Update"),Jt=";",Kt=Dd(";",!1),$t=function(e,t,n){var r={token:"query",kind:"update"};r.prologue=e;var i=[t];return null!=n&&null!=n.length&&null!=n[3]&&null!=n[3].units&&(i=i.concat(n[3].units)),r.units=i,r},en=Ud("[31] Update1"),tn=Ud("[32] Load"),nn="LOAD",rn=Dd("LOAD",!1),on="load",an=Dd("load",!1),sn="INTO",un=Dd("INTO",!1),ln="into",cn=Dd("into",!1),hn=function(e,t){var n={kind:"load",token:"executableunit"};return n.sourceGraph=e,null!=t&&(n.destinyGraph=t[2]),n},fn=Ud("[33] Clear"),dn="CLEAR",pn=Dd("CLEAR",!1),mn="clear",vn=Dd("clear",!1),gn="SILENT",yn=Dd("SILENT",!1),bn="silent",_n=Dd("silent",!1),xn=function(e){var t={kind:"clear",token:"executableunit"};return t.destinyGraph=e,t},wn=Ud("[34] Drop"),En="DROP",Mn=Dd("DROP",!1),Tn="drop",Sn=Dd("drop",!1),An=function(e){var t={kind:"drop",token:"executableunit"};return t.destinyGraph=e,t},Cn=Ud("[35] Create"),Rn="CREATE",Ln=Dd("CREATE",!1),Pn="create",On=Dd("create",!1),In=function(e){var t={kind:"create",token:"executableunit"};return t.destinyGraph=e,t},kn=Ud("[36] InsertData"),Nn="INSERT",Dn=Dd("INSERT",!1),Fn="insert",Un=Dd("insert",!1),Bn="DATA",jn=Dd("DATA",!1),zn="data",Gn=Dd("data",!1),Vn=function(e){var t={kind:"insertdata",token:"executableunit"};return t.quads=e,t},Hn=Ud("[37] DeleteData"),Wn="DELETE",qn=Dd("DELETE",!1),Xn="delete",Qn=Dd("delete",!1),Yn=function(e){var t={kind:"deletedata",token:"executableunit"};return t.quads=e,t},Zn=Ud("[38] DeleteWhere"),Jn=function(e){var t={kind:"modify"};t.pattern=e,t.with=null,t.using=null;var n=[],r=e.patterns[0];r=null==r.triplesContext&&null!=r.patterns?r.patterns[0].triplesContext:r.triplesContext;for(var i=0;i<r.length;i++){var o={},a=r[i];o.subject=a.subject,o.predicate=a.predicate,o.object=a.object,o.graph=a.graph,n.push(o)}return t.delete=n,t},Kn=Ud("[39] Modify"),$n="WITH",er=Dd("WITH",!1),tr="with",nr=Dd("with",!1),rr=function(e,t,n,r){var i={kind:"modify"};return i.with=""!=e&&null!=e?e[2]:null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=n&&(i.using=n),i.pattern=r,i},ir=Ud("[40] DeleteClause"),or=function(e){return e},ar=Ud("[41] InsertClause"),sr=Ud("[42] UsingClause"),ur="USING",lr=Dd("USING",!1),cr="using",hr=Dd("using",!1),fr=function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},dr=Ud("[43] GraphRef"),pr="GRAPH",mr=Dd("GRAPH",!1),vr="graph",gr=Dd("graph",!1),yr=function(e){return e},br=Ud("[44] GraphRefAll"),_r="DEFAULT",xr=Dd("DEFAULT",!1),wr="default",Er=Dd("default",!1),Mr=function(){return"default"},Tr=function(){return"named"},Sr="ALL",Ar=Dd("ALL",!1),Cr="all",Rr=Dd("all",!1),Lr=function(){return"all"},Pr=Ud("[45] QuadPattern"),Or=function(e){return e.quadsContext},Ir=Ud("[46] QuadData"),kr=Ud("[47] Quads"),Nr=".",Dr=Dd(".",!1),Fr=function(e,t){var n=[];if(null!=e&&null!=e.triplesContext)for(var r=0;r<e.triplesContext.length;r++)(i=e.triplesContext[r]).graph=null,n.push(i);if(t&&t.length>0&&t[0].length>0&&(n=n.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(r=0;r<t[0][2].triplesContext.length;r++){var i;(i=t[0][2].triplesContext[r]).graph=null,n.push(i)}return{token:"quads",quadsContext:n}},Ur=Ud("[48] QuadsNotTriples"),Br=function(e,t){var n=[];if(null!=t)for(var r=0;r<t.triplesContext.length;r++){var i=t.triplesContext[r];i.graph=e,n.push(i)}return{token:"quadsnottriples",quadsContext:n}},jr=Ud("[49] TriplesTemplate"),zr=function(e,t){var n=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(n=n.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:n}},Gr=Ud("[50] GroupGraphPattern"),Vr=function(e){return e},Hr=Ud("[51] GroupGraphPatternSub"),Wr=function(e,t){var n=[];null!=e&&e!=[]&&n.push(e);for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)null!=t[r][i]&&null!=t[r][i].token&&n.push(t[r][i]);var o=[],a=[],s=[],u=[];for(r=0;r<n.length;r++)if("triplespattern"!==n[r].token&&"filter"!==n[r].token&&"bind"!==n[r].token){if(0!=a.length||0!=s.length){var l=[];for(i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l}),a=[]}o.push(n[r])}else"triplespattern"===n[r].token?a.push(n[r]):"bind"===n[r].token?u.push(n[r]):s.push(n[r]);if(0!=a.length||0!=s.length){for(l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l})}return{token:"groupgraphpattern",patterns:o,filters:s,binds:u}},qr=Ud("[54] TriplesBlock"),Xr=function(e,t){var n=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(n=n.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:n}},Qr=Ud("[53] GraphPatternNotTriples"),Yr=Ud("[54] OptionalGraphPattern"),Zr="OPTIONAL",Jr=Dd("OPTIONAL",!1),Kr="optional",$r=Dd("optional",!1),ei=function(e){return{token:"optionalgraphpattern",value:e}},ti=Ud("[55] GraphGraphPattern"),ni=function(e,t){for(var n=0;n<t.patterns.length;n++)for(var r=t.patterns[n],i=0;i<r.triplesContext.length;i++)r.triplesContext[i].graph=e;return t.token="groupgraphpattern",t},ri=Ud("[56] ServiceGraphPattern"),ii="SERVICE",oi=Dd("SERVICE",!1),ai=function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},si=Ud("[57] MinusGraphPattern"),ui="MINUS",li=Dd("MINUS",!1),ci="minus",hi=Dd("minus",!1),fi=function(e){return{token:"minusgraphpattern",status:"todo",value:e}},di=Ud("[58] GroupOrUnionGraphPattern"),pi="UNION",mi=Dd("UNION",!1),vi="union",gi=Dd("union",!1),yi=function(e,t){if(0===t.length)return e;for(var n={token:"graphunionpattern",value:[e]},r=0;r<t.length;r++)r==t.length-1?n.value.push(t[r][3]):(n.value.push(t[r][3]),n={token:"graphunionpattern",value:[n]});return n},bi=Ud("[59] Filter"),_i="FILTER",xi=Dd("FILTER",!1),wi="filter",Ei=Dd("filter",!1),Mi=function(e){return{token:"filter",value:e}},Ti=Ud("[60] Bind"),Si="BIND",Ai=Dd("BIND",!1),Ci="bind",Ri=Dd("bind",!1),Li=function(e,t){return{token:"bind",expression:e,as:t}},Pi=Ud("[60] Constraint"),Oi=Ud("[61] InlineData"),Ii=function(e){return e},ki=Ud("[62] DataBlock"),Ni=Ud("[63] InlineDataOneVar"),Di=function(e,t){return{token:"inlineData",values:[{var:e,value:t}]}},Fi=Ud("[64] InlineDataFull"),Ui=function(e,t){return{token:"inlineData",values:[],todo:!0}},Bi=Ud("[65] DataBlockValue"),ji=Ud("[61] FunctionCall"),zi=function(e,t){var n={token:"expression",expressionType:"irireforfunction"};return n.iriref=e,n.args=t.value,n},Gi=Ud("[62] ArgList"),Vi=function(){return{token:"args",value:[]}},Hi=",",Wi=Dd(",",!1),qi=function(e,t,n){for(var r=[],i=0;i<n.length;i++)r.push(n[i][2]);var o={token:"args"};return o.value=[t].concat(r),o.distinct=null!=e&&"DISTINCT"===e.toUpperCase(),o},Xi=Ud("[63] ExpressionList"),Qi=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(t[r][2]);var i={token:"args"};return i.value=[e].concat(n),i},Yi=Ud("[64] ConstructTemplate"),Zi=function(e){return e},Ji=Ud("[65] ConstructTriples"),Ki=function(e,t){var n=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(n=n.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:n}},$i=Ud("[66] TriplesSameSubject"),eo=function(e,t){var n=t.triplesContext,r=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];null!=o[1].length&&(o[1]=o[1][0]),r.token&&"triplesnodecollection"===r.token?(n.push({subject:r.chainSubject[0],predicate:o[0],object:o[1]}),n=n.concat(r.triplesContext)):n.push({subject:r,predicate:o[0],object:o[1]})}var a={token:"triplessamesubject"};return a.triplesContext=n,a.chainSubject=r,a},to=function(e,t){var n=e.triplesContext,r=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<r.length;a++){var s=r[a];null!=s.triplesContext?n.concat(s.triplesContext):n.push({subject:r[a],predicate:o[0],object:o[1]})}else n.push({subject:r,predicate:o[0],object:o[1]})}var u={token:"triplessamesubject"};return u.triplesContext=n,u.chainSubject=r,u},no=Ud("[83] PropertyListPathNotEmpty"),ro=function(e,t,n){for(var r={token:"propertylist"},i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(a=0;a<n.length;a++)for(var s=n[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return r.pairs=o,r.triplesContext=i,r},io=Ud("[67] PropertyListNotEmpty"),oo=function(e,t,n){for(var r={token:"propertylist"},i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(a=0;a<n.length;a++)for(var s=n[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return r.pairs=o,r.triplesContext=i,r},ao=Ud("[68] PropertyList"),so=Ud("[86] ObjectListPath"),uo=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)"object"==typeof t[r][i]&&null!=t[r][i].token&&n.push(t[r][i]);return n},lo=Ud("[69] ObjectList"),co=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)"object"==typeof t[r][i]&&null!=t[r][i].token&&n.push(t[r][i]);return n},ho=Ud("[87] ObjectPath"),fo=Ud("[70] Object"),po=Ud("[71] Verb"),mo="a",vo=Dd("a",!1),go=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},yo=Ud("[72] TriplesSameSubjectPath"),bo=function(e,t){var n=t.triplesContext,r=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),r.token&&"triplesnodecollection"===r.token?("path"===(a={subject:r.chainSubject[0],predicate:o[0],object:o[1]}).predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),n.push(a),n=n.concat(r.triplesContext)):("path"===(a={subject:r,predicate:o[0],object:o[1]}).predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),n.push(a))}var s={token:"triplessamesubject"};return s.triplesContext=n,s.chainSubject=r,s},_o=function(e,t){var n=e.triplesContext,r=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<r.length;a++){var s=r[a];null!=s.triplesContext?n.concat(s.triplesContext):n.push({subject:r[a],predicate:o[0],object:o[1]})}else n.push({subject:r,predicate:o[0],object:o[1]})}var u={token:"triplessamesubject"};return u.triplesContext=n,u.chainSubject=r,u},xo=Ud("[73] PropertyListNotEmptyPath"),wo=function(e,t,n){for(var r={token:"propertylist"},i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(a=0;a<n.length;a++)for(var s=n[a][3],u=s[0],l=s[1]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return r.pairs=o,r.triplesContext=i,r},Eo=Ud("[74] PropertyListPath"),Mo=Ud("[75]"),To=function(e){return e},So=Ud("[76] VerbSimple"),Ao=Ud("[77] Path"),Co=Ud("[78] PathAlternative"),Ro="|",Lo=Dd("|",!1),Po=function(e,t){if(null==t||0===t.length)return e;for(var n=[],r=0;r<t.length;r++)n.push(t[1]);var i={token:"path",kind:"alternative"};return i.value=n,i},Oo=Ud("[79] PathSequence"),Io="/",ko=Dd("/",!1),No=function(e,t){if(null==t||0===t.length)return e;for(var n=[e],r=0;r<t.length;r++)n.push(t[r][1]);var i={token:"path",kind:"sequence"};return i.value=n,i},Do=Ud("[88] PathElt"),Fo=function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=n&&""!=t){var n={token:"path",kind:"element"};return n.value=e,n.modifier=t,n}return e.modifier=t,e},Uo=Ud("[81] PathEltOrInverse"),Bo="^",jo=Dd("^",!1),zo=function(e){var t={token:"path",kind:"inversePath"};return t.value=e,t},Go=Ud("[82] PathMod"),Vo="?",Ho=Dd("?",!1),Wo="+",qo=Dd("+",!1),Xo=Ud("[83] PathPrimary"),Qo="!",Yo=Dd("!",!1),Zo=Ud("[85] PathOneInPropertySet"),Jo=Ud("[86] Integer"),Ko=Ud("[100] TriplesNodePath"),$o=function(e){for(var t=[],n=[],r=null,i=0;i<e.length;i++){Am++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),r={subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&n.push(r.subject),t.push(r),t.push(r=i===e.length-1?{subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Am+1)}})}return{token:"triplesnodecollection",triplesContext:t,chainSubject:n}},ea=Ud("[87] TriplesNode"),ta=function(e){for(var t=[],n=[],r=null,i=0;i<e.length;i++){Am++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:t=t.concat((o=e[i].chainSubject).triplesContext),r={subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&n.push(r.subject),t.push(r),t.push(r=i===e.length-1?{subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Am},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Am+1)}})}return{token:"triplesnodecollection",triplesContext:t,chainSubject:n}},na=Ud("[101] BlankNodePropertyListPath"),ra="[",ia=Dd("[",!1),oa="]",aa=Dd("]",!1),sa=function(e){for(var t={token:"blank",value:"_:"+ ++Am},n=[],r=0;r<e.pairs.length;r++){var i=e.pairs[r],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],n.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(n),chainSubject:t}},ua=Ud("[88] BlankNodePropertyList"),la=function(e){for(var t={token:"blank",value:"_:"+ ++Am},n=[],r=0;r<e.pairs.length;r++){var i=e.pairs[r],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],n.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(n),chainSubject:t}},ca=Ud("[103] CollectionPath"),ha=function(e){return e},fa=Ud("[89] Collection"),da=Ud("[105] GraphNodePath"),pa=function(e){return e[1]},ma=Ud("[90] GraphNode"),va=Ud("[91] VarOrTerm"),ga=Ud("[92] VarOrIRIref"),ya=Ud("[93] Var"),ba=function(e){var t={token:"var"};return t.value=e,t},_a=Ud("[94] GraphTerm"),xa=Ud("[95] Expression"),wa=Ud("[96] ConditionalOrExpression"),Ea="||",Ma=Dd("||",!1),Ta=function(e,t){if(0===t.length)return e;for(var n={token:"expression",expressionType:"conditionalor"},r=[e],i=0;i<t.length;i++)r.push(t[i][3]);return n.operands=r,n},Sa=Ud("[97] ConditionalAndExpression"),Aa="&&",Ca=Dd("&&",!1),Ra=function(e,t){if(0===t.length)return e;for(var n={token:"expression",expressionType:"conditionaland"},r=[e],i=0;i<t.length;i++)r.push(t[i][3]);return n.operands=r,n},La=Ud("[98] ValueLogical"),Pa=Ud("[99] RelationalExpression"),Oa="=",Ia=Dd("=",!1),ka="!=",Na=Dd("!=",!1),Da="<",Fa=Dd("<",!1),Ua=">",Ba=Dd(">",!1),ja="<=",za=Dd("<=",!1),Ga=">=",Va=Dd(">=",!1),Ha="I",Wa=Dd("I",!1),qa="i",Xa=Dd("i",!1),Qa="N",Ya=Dd("N",!1),Za="n",Ja=Dd("n",!1),Ka="O",$a=Dd("O",!1),es="o",ts=Dd("o",!1),ns="T",rs=Dd("T",!1),is="t",os=Dd("t",!1),as=function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var n={};if("i"===t[0][1]||"I"===t[0][1]){var r="=";n.expressionType="conditionalor"}else r="!=",n.expressionType="conditionaland";for(var i=e,o=[],a=0;a<t[0].length;a++)if("args"===t[0][a].token){o=t[0][a].value;break}n.token="expression",n.operands=[];for(var s=0;s<o.length;s++){var u={token:"expression",expressionType:"relationalexpression"};u.operator=r,u.op1=i,u.op2=o[s],n.operands.push(u)}return n}return(n={expressionType:"relationalexpression"}).operator=t[0][1],n.op1=e,n.op2=t[0][3],n.token="expression",n},ss=Ud("[100] NumericExpression"),us=Ud("[101] AdditiveExpression"),ls="-",cs=Dd("-",!1),hs=function(e,t){if(0===t.length)return e;var n={token:"expression",expressionType:"additiveexpression"};n.summand=e,n.summands=[];for(var r=0;r<t.length;r++){var i=t[r],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var a={},s=o[0],u=o[1][3];s.value<0?(o.operator="-",s.value=-s.value):o.operator="+",a.token="expression",a.expressionType="multiplicativeexpression",a.operator=s,a.factors=[{operator:null,expression:u}],o.expression=a}n.summands.push(o)}return n},fs=Ud("[102] MultiplicativeExpression"),ds=function(e,t){if(0===t.length)return e;var n={token:"expression",expressionType:"multiplicativeexpression"};n.factor=e,n.factors=[];for(var r=0;r<t.length;r++){var i=t[r],o={};o.operator=i[1],o.expression=i[3],n.factors.push(o)}return n},ps=Ud("[103] UnaryExpression"),ms=function(e){var t={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return t.expression=e,t},vs=function(e){var t={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return t.expression=e,t},gs=function(e){var t={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return t.expression=e,t},ys=Ud("[104] PrimaryExpression"),bs=function(e){var t={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return t.value=e,t},_s=function(e){var t={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return t.value=e,t},xs=function(e){var t={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return t.value=e,t},ws=function(e){var t={token:"expression",expressionType:"atomic",primaryexpression:"var"};return t.value=e,t},Es=Ud("[105] BrackettedExpression"),Ms=function(e){return e},Ts=Ud("[106] BuiltInCall"),Ss="STR",As=Dd("STR",!1),Cs="str",Rs=Dd("str",!1),Ls=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"str"};return t.args=[e],t},Ps="LANG",Os=Dd("LANG",!1),Is="lang",ks=Dd("lang",!1),Ns=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"lang"};return t.args=[e],t},Ds="LANGMATCHES",Fs=Dd("LANGMATCHES",!1),Us="langmatches",Bs=Dd("langmatches",!1),js=function(e,t){var n={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return n.args=[e,t],n},zs="DATATYPE",Gs=Dd("DATATYPE",!1),Vs="datatype",Hs=Dd("datatype",!1),Ws=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return t.args=[e],t},qs="BOUND",Xs=Dd("BOUND",!1),Qs="bound",Ys=Dd("bound",!1),Zs=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"bound"};return t.args=[e],t},Js="IRI",Ks=Dd("IRI",!1),$s="iri",eu=Dd("iri",!1),tu=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"iri"};return t.args=[e],t},nu="URI",ru=Dd("URI",!1),iu="uri",ou=Dd("uri",!1),au=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"uri"};return t.args=[e],t},su="BNODE",uu=Dd("BNODE",!1),lu="bnode",cu=Dd("bnode",!1),hu=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return t.args=5===e.length?[e[2]]:null,t},fu="COALESCE",du=Dd("COALESCE",!1),pu="coalesce",mu=Dd("coalesce",!1),vu=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return t.args=e,t},gu="IF",yu=Dd("IF",!1),bu="if",_u=Dd("if",!1),xu=function(e,t,n){var r={token:"expression",expressionType:"builtincall",builtincall:"if"};return r.args=[e,t,n],r},wu="ISLITERAL",Eu=Dd("ISLITERAL",!1),Mu="isliteral",Tu=Dd("isliteral",!1),Su="isLITERAL",Au=Dd("isLITERAL",!1),Cu=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return t.args=[e],t},Ru="ISBLANK",Lu=Dd("ISBLANK",!1),Pu="isblank",Ou=Dd("isblank",!1),Iu="isBLANK",ku=Dd("isBLANK",!1),Nu=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return t.args=[e],t},Du="SAMETERM",Fu=Dd("SAMETERM",!1),Uu="sameterm",Bu=Dd("sameterm",!1),ju=function(e,t){var n={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return n.args=[e,t],n},zu="ISURI",Gu=Dd("ISURI",!1),Vu="isuri",Hu=Dd("isuri",!1),Wu="isURI",qu=Dd("isURI",!1),Xu="ISIRI",Qu=Dd("ISIRI",!1),Yu="isiri",Zu=Dd("isiri",!1),Ju="isIRI",Ku=Dd("isIRI",!1),$u=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return t.args=[e],t},el="custom:",tl=Dd("custom:",!1),nl="CUSTOM:",rl=Dd("CUSTOM:",!1),il=/^[a-zA-Z0-9_]/,ol=Fd([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),al=function(e,t,n){var r={token:"expression",expressionType:"custom"};r.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(n),r.args=i,r},sl=Ud("[107] RegexExpression"),ul="REGEX",ll=Dd("REGEX",!1),cl="regex",hl=Dd("regex",!1),fl=function(e,t,n){var r={token:"expression",expressionType:"regex"};return r.text=e,r.pattern=t,null!=n&&(r.flags=n[2]),r},dl=Ud("[108] ExistsFunc"),pl="EXISTS",ml=Dd("EXISTS",!1),vl="exists",gl=Dd("exists",!1),yl=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"exists"};return t.args=[e],t},bl=Ud("[109] NotExistsFunc"),_l="NOT",xl=Dd("NOT",!1),wl="not",El=Dd("not",!1),Ml=function(e){var t={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return t.args=[e],t},Tl=Ud("[110] Aggregate"),Sl="COUNT",Al=Dd("COUNT",!1),Cl="count",Rl=Dd("count",!1),Ll=function(e,t){var n={token:"expression",expressionType:"aggregate",aggregateType:"count"};return n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n},Pl="GROUP_CONCAT",Ol=Dd("GROUP_CONCAT",!1),Il="group_concat",kl=Dd("group_concat",!1),Nl="SEPARATOR",Dl=Dd("SEPARATOR",!1),Fl=function(e,t,n){var r={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r.separator=n,r},Ul="SUM",Bl=Dd("SUM",!1),jl="sum",zl=Dd("sum",!1),Gl=function(e,t){var n={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n},Vl="MIN",Hl=Dd("MIN",!1),Wl="min",ql=Dd("min",!1),Xl=function(e,t){var n={token:"expression",expressionType:"aggregate",aggregateType:"min"};return n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n},Ql="MAX",Yl=Dd("MAX",!1),Zl="max",Jl=Dd("max",!1),Kl=function(e,t){var n={token:"expression",expressionType:"aggregate",aggregateType:"max"};return n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n},$l="AVG",ec=Dd("AVG",!1),tc="avg",nc=Dd("avg",!1),rc=function(e,t){var n={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n},ic=Ud("[117] IRIrefOrFunction"),oc=function(e,t){var n={token:"expression",expressionType:"irireforfunction"};return n.iriref=e,n.args=null!=t?t.value:t,n},ac=Ud("[112] RDFLiteral"),sc="^^",uc=Dd("^^",!1),lc=function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},cc=Ud("[113] NumericLiteral"),hc=Ud("[114] NumericLiteralUnsigned"),fc=Ud("[115] NumericLiteralPositive"),dc=Ud("[116] NumericLiteralNegative"),pc=Ud("[117] BooleanLiteral"),mc="TRUE",vc=Dd("TRUE",!1),gc="true",yc=Dd("true",!1),bc=function(){return{token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}},_c="FALSE",xc=Dd("FALSE",!1),wc="false",Ec=Dd("false",!1),Mc=function(){return{token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}},Tc=Ud("[118] String"),Sc=function(e){return{token:"string",value:e}},Ac=Ud("[119] IRIref"),Cc=function(e){return{token:"uri",prefix:null,suffix:null,value:e}},Rc=function(e){return e},Lc=Ud("[120] PrefixedName"),Pc=function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},Oc=function(e){return{token:"uri",prefix:e,suffix:"",value:null}},Ic=Ud("[121] BlankNode"),kc=function(e){return{token:"blank",value:e}},Nc=function(){return{token:"blank",value:"_:"+ ++Am}},Dc=Ud("[122] IRI_REF"),Fc=/^[^<>"{}|\^`\\]/,Uc=Fd(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Bc=function(e){return e.join("")},jc=Ud("[123] PNAME_NS"),zc=":",Gc=Dd(":",!1),Vc=Ud("[124] PNAME_LN"),Hc=function(e,t){return[e,t]},Wc=Ud("[125] BLANK_NODE_LABEL"),qc="_:",Xc=Dd("_:",!1),Qc=function(e){return e},Yc=Ud("[126] VAR1"),Zc=function(e){return e},Jc=Ud("[127] VAR2"),Kc="$",$c=Dd("$",!1),eh=Ud("[128] LANGTAG"),th="@",nh=Dd("@",!1),rh=/^[a-zA-Z]/,ih=Fd([["a","z"],["A","Z"]],!1,!1),oh=/^[a-zA-Z0-9]/,ah=Fd([["a","z"],["A","Z"],["0","9"]],!1,!1),sh=function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},uh=Ud("[129] INTEGER"),lh=/^[0-9]/,ch=Fd([["0","9"]],!1,!1),hh=function(e){var t={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return t.value=Sm(e),t},fh=Ud("[130] DECIMAL"),dh=function(e,t,n){var r={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return r.value=Sm([e,t,n]),r},ph=function(e,t){var n={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return n.value=Sm([e,t]),n},mh=Ud("[131] DOUBLE"),vh=function(e,t,n,r){var i={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return i.value=Sm([e,t,n,r]),i},gh=function(e,t,n){var r={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return r.value=Sm([e,t,n]),r},yh=function(e,t){var n={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return n.value=Sm([e,t]),n},bh=Ud("[132] INTEGER_POSITIVE"),_h=function(e){return e.value="+"+e.value,e},xh=Ud("[133] DECIMAL_POSITIVE"),wh=function(e){return e.value="+"+e.value,e},Eh=Ud("[134] DOUBLE_POSITIVE"),Mh=Ud("[135] INTEGER_NEGATIVE"),Th=function(e){return e.value="-"+e.value,e},Sh=Ud("[136] DECIMAL_NEGATIVE"),Ah=Ud("[137] DOUBLE_NEGATIVE"),Ch=Ud("[138] EXPONENT"),Rh=/^[eE]/,Lh=Fd(["e","E"],!1,!1),Ph=/^[+\-]/,Oh=Fd(["+","-"],!1,!1),Ih=function(e,t,n){return Sm([e,t,n])},kh=Ud("[139] STRING_LITERAL1"),Nh="'",Dh=Dd("'",!1),Fh=/^[^'\\\n\r]/,Uh=Fd(["'","\\","\n","\r"],!0,!1),Bh=function(e){return Sm(e)},jh=Ud("[140] STRING_LITERAL2"),zh='"',Gh=Dd('"',!1),Vh=/^[^"\\\n\r]/,Hh=Fd(['"',"\\","\n","\r"],!0,!1),Wh=Ud("[141] STRING_LITERAL_LONG1"),qh="'''",Xh=Dd("'''",!1),Qh=/^[^'\\]/,Yh=Fd(["'","\\"],!0,!1),Zh=Ud("[142] STRING_LITERAL_LONG2"),Jh='"""',Kh=Dd('"""',!1),$h=/^[^"\\]/,ef=Fd(['"',"\\"],!0,!1),tf=Ud("[143] ECHAR"),nf="\\",rf=Dd("\\",!1),of=/^[tbnrf"']/,af=Fd(["t","b","n","r","f",'"',"'"],!1,!1),sf=Ud("[144] NIL"),uf=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},lf=Ud("[145] WS"),cf=/^[ ]/,hf=Fd([" "],!1,!1),ff=/^[\t]/,df=Fd(["\t"],!1,!1),pf=/^[\r]/,mf=Fd(["\r"],!1,!1),vf=/^[\n]/,gf=Fd(["\n"],!1,!1),yf=Ud(" COMMENT"),bf="#",_f=Dd("#",!1),xf=/^[^\n\r]/,wf=Fd(["\n","\r"],!0,!1),Ef=Ud("[146] ANON"),Mf=Ud("[147] PN_CHARS_BASE"),Tf=/^[A-Z]/,Sf=Fd([["A","Z"]],!1,!1),Af=/^[a-z]/,Cf=Fd([["a","z"]],!1,!1),Rf=/^[\xC0-\xD6]/,Lf=Fd([["\xc0","\xd6"]],!1,!1),Pf=/^[\xD8-\xF6]/,Of=Fd([["\xd8","\xf6"]],!1,!1),If=/^[\xF8-\u02FF]/,kf=Fd([["\xf8","\u02ff"]],!1,!1),Nf=/^[\u0370-\u037D]/,Df=Fd([["\u0370","\u037d"]],!1,!1),Ff=/^[\u037F-\u1FFF]/,Uf=Fd([["\u037f","\u1fff"]],!1,!1),Bf=/^[\u200C-\u200D]/,jf=Fd([["\u200c","\u200d"]],!1,!1),zf=/^[\u2070-\u218F]/,Gf=Fd([["\u2070","\u218f"]],!1,!1),Vf=/^[\u2C00-\u2FEF]/,Hf=Fd([["\u2c00","\u2fef"]],!1,!1),Wf=/^[\u3001-\uD7FF]/,qf=Fd([["\u3001","\ud7ff"]],!1,!1),Xf=/^[\uF900-\uFDCF]/,Qf=Fd([["\uf900","\ufdcf"]],!1,!1),Yf=/^[\uFDF0-\uFFFD]/,Zf=Fd([["\ufdf0","\ufffd"]],!1,!1),Jf=/^[\u1000-\uEFFF]/,Kf=Fd([["\u1000","\uefff"]],!1,!1),$f=Ud("[148] PN_CHARS_U"),ed="_",td=Dd("_",!1),nd=Ud("[149] VARNAME"),rd=/^[\xB7]/,id=Fd(["\xb7"],!1,!1),od=/^[\u0300-\u036F]/,ad=Fd([["\u0300","\u036f"]],!1,!1),sd=/^[\u203F-\u2040]/,ud=Fd([["\u203f","\u2040"]],!1,!1),ld=function(e,t){return e+t.join("")},cd=Ud("[150] PN_CHARS"),hd=Ud("[151] PN_PREFIX"),fd=function(e,t){if("."==t[t.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},dd=Ud("[152] PN_LOCAL"),pd=function(e,t){return e+(t||[]).join("")},md=Ud("[170] PLX"),vd=Ud("[171] PERCENT"),gd="%",yd=Dd("%",!1),bd=function(e){return e.join("")},_d=Ud("[172] HEX"),xd=/^[A-F]/,wd=Fd([["A","F"]],!1,!1),Ed=/^[a-f]/,Md=Fd([["a","f"]],!1,!1),Td=Ud("[173] PN_LOCAL_ESC"),Sd="~",Ad=Dd("~",!1),Cd="&",Rd=Dd("&",!1),Ld=function(e){return"\\"+e},Pd=0,Od=[{line:1,column:1}],Id=0,kd=[],Nd=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=o[n.startRule]}function Dd(e,t){return{type:"literal",text:e,ignoreCase:t}}function Fd(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ud(e){return{type:"other",description:e}}function Bd(e){var n,r=Od[e];if(r)return r;for(n=e-1;!Od[n];)n--;for(r={line:(r=Od[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Od[e]=r,r}function jd(e){Pd<Id||(Pd>Id&&(Id=Pd,kd=[]),kd.push(e))}function zd(){return function(){var e;return(e=function(){var e;return Nd++,e=function(){var e,n,r,o;return Nd++,e=Pd,(n=Gd())!==i?((r=function(){var e,n,r,o,a,s,u,l,c,h;if(Nd++,e=Pd,(n=Hd())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){for(o=[],a=Wd();a!==i;)o.push(a),a=Wd();if(o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Xd())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Qd())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=function(){var e,n,r,o,a,s,u,l,c;if(Nd++,e=Pd,t.substr(Pd,8)===Ut?(n=Ut,Pd+=8):(n=i,0===Nd&&jd(Bt)),n!==i){for(r=[],o=zp();o!==i;)r.push(o),o=zp();if(r!==i)if(123===t.charCodeAt(Pd)?(o=ue,Pd++):(o=i,0===Nd&&jd(le)),o!==i){if(a=[],s=Pd,40===t.charCodeAt(Pd)?(u=z,Pd++):(u=i,0===Nd&&jd(G)),u!==i){if(l=[],(c=ep())!==i)for(;c!==i;)l.push(c),c=ep();else l=i;l!==i?(41===t.charCodeAt(Pd)?(c=X,Pd++):(c=i,0===Nd&&jd(Q)),c!==i?s=u=[u,l,c]:(Pd=s,s=i)):(Pd=s,s=i)}else Pd=s,s=i;for(s===i&&(s=cm());s!==i;){if(a.push(s),s=Pd,40===t.charCodeAt(Pd)?(u=z,Pd++):(u=i,0===Nd&&jd(G)),u!==i){if(l=[],(c=ep())!==i)for(;c!==i;)l.push(c),c=ep();else l=i;l!==i?(41===t.charCodeAt(Pd)?(c=X,Pd++):(c=i,0===Nd&&jd(Q)),c!==i?s=u=[u,l,c]:(Pd=s,s=i)):(Pd=s,s=i)}else Pd=s,s=i;s===i&&(s=cm())}a!==i?(125===t.charCodeAt(Pd)?(s=ce,Pd++):(s=i,0===Nd&&jd(he)),s!==i?e=n=[n,r,o,a,s]:(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return e===i&&(e=null),Nd--,e===i&&(n=i,0===Nd&&jd(Ft)),e}())!==i?e=n=T(n,o,s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(M)),e}())===i&&(r=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,9)===$?(r=$,Pd+=9):(r=i,0===Nd&&jd(ee)),r===i&&(t.substr(Pd,9)===te?(r=te,Pd+=9):(r=i,0===Nd&&jd(ne))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,123===t.charCodeAt(Pd)?(n=ue,Pd++):(n=i,0===Nd&&jd(le)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=function e(){var n,r,o,a,s,u,l;if(Nd++,n=Pd,(r=bp())!==i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(46===t.charCodeAt(Pd)?(s=Nr,Pd++):(s=i,0===Nd&&jd(Dr)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?((l=e())===i&&(l=null),l!==i?o=a=[a,s,u,l]:(Pd=o,o=i)):(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;o===i&&(o=null),o!==i?n=r=Ki(r,o):(Pd=n,n=i)}else Pd=n,n=i;return Nd--,n===i&&(r=i,0===Nd&&jd(Ji)),n}())===i&&(o=null),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?(125===t.charCodeAt(Pd)?(s=ce,Pd++):(s=i,0===Nd&&jd(he)),s!==i?e=n=Zi(o):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Yi)),e}())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i){for(u=[],l=Wd();l!==i;)u.push(l),l=Wd();if(u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if((c=Xd())!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();h!==i&&(f=Qd())!==i?e=n=re(a,u,c,f):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,9)===$?(r=$,Pd+=9):(r=i,0===Nd&&jd(ee)),r===i&&(t.substr(Pd,9)===te?(r=te,Pd+=9):(r=i,0===Nd&&jd(ne))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i){for(a=[],s=Wd();s!==i;)a.push(s),s=Wd();if(a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(t.substr(Pd,5)===ie?(u=ie,Pd+=5):(u=i,0===Nd&&jd(oe)),u===i&&(t.substr(Pd,5)===ae?(u=ae,Pd+=5):(u=i,0===Nd&&jd(se))),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if(123===t.charCodeAt(Pd)?(c=ue,Pd++):(c=i,0===Nd&&jd(le)),c!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();if(h!==i)if((f=lp())===i&&(f=null),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();if(d!==i)if(125===t.charCodeAt(Pd)?(p=ce,Pd++):(p=i,0===Nd&&jd(he)),p!==i){for(m=[],v=hm();v!==i;)m.push(v),v=hm();m!==i&&(v=Qd())!==i?e=n=fe(a,f,v):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}return Nd--,e===i&&(n=i,0===Nd&&jd(K)),e}())===i&&(r=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,8)===pe?(n=pe,Pd+=8):(n=i,0===Nd&&jd(me)),n!==i){if(r=[],(o=jp())!==i)for(;o!==i;)r.push(o),o=jp();else r=i;if(r===i&&(42===t.charCodeAt(Pd)?(r=Y,Pd++):(r=i,0===Nd&&jd(Z))),r!==i){for(o=[],a=Wd();a!==i;)o.push(a),a=Wd();o!==i?((a=Xd())===i&&(a=null),a!==i&&(s=Qd())!==i?e=n=[n,r,o,a,s]:(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(de)),e}())===i&&(r=function(){var e,n,r,o,a,s,u;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,3)===ge?(r=ge,Pd+=3):(r=i,0===Nd&&jd(ye)),r===i&&(t.substr(Pd,3)===be?(r=be,Pd+=3):(r=i,0===Nd&&jd(_e))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i){for(a=[],s=Wd();s!==i;)a.push(s),s=Wd();if(a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();s!==i&&(u=Xd())!==i?e=n=xe(a,u):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ve)),e}()),r!==i&&(o=function(){var e,n,r,o;return Nd++,n=Pd,t.substr(Pd,6)===Ht?(r=Ht,Pd+=6):(r=i,0===Nd&&jd(Wt)),r===i&&(t.substr(Pd,6)===qt?(r=qt,Pd+=6):(r=i,0===Nd&&jd(Xt))),r!==i&&(o=pp())!==i?n=r=[r,o]:(Pd=n,n=i),n===i&&(n=null),n!==i&&(n=Qt(n)),Nd--,(e=n)===i&&(n=i,0===Nd&&jd(Vt)),e}())!==i?e=n=l(n,r,o):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(u)),e}(),Nd--,e===i&&0===Nd&&jd(s),e}())===i&&(e=function(){var e;return Nd++,e=function e(){var n,r,o,a,s,u,l,c,h;if(Nd++,n=Pd,(r=Gd())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=function(){var e;return Nd++,(e=function(){var e,n,r,o,a,s,u,l,c;if(Nd++,e=Pd,t.substr(Pd,4)===nn?(n=nn,Pd+=4):(n=i,0===Nd&&jd(rn)),n===i&&(t.substr(Pd,4)===on?(n=on,Pd+=4):(n=i,0===Nd&&jd(an))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=nm())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){if(s=Pd,t.substr(Pd,4)===sn?(u=sn,Pd+=4):(u=i,0===Nd&&jd(un)),u===i&&(t.substr(Pd,4)===ln?(u=ln,Pd+=4):(u=i,0===Nd&&jd(cn))),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i&&(c=rp())!==i?s=u=[u,l,c]:(Pd=s,s=i)}else Pd=s,s=i;s===i&&(s=null),s!==i?e=n=hn(o,s):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(tn)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,5)===dn?(n=dn,Pd+=5):(n=i,0===Nd&&jd(pn)),n===i&&(t.substr(Pd,5)===mn?(n=mn,Pd+=5):(n=i,0===Nd&&jd(vn))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,6)===gn?(o=gn,Pd+=6):(o=i,0===Nd&&jd(yn)),o===i&&(t.substr(Pd,6)===bn?(o=bn,Pd+=6):(o=i,0===Nd&&jd(_n))),o===i&&(o=null),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=ip())!==i?e=n=xn(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(fn)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,4)===En?(n=En,Pd+=4):(n=i,0===Nd&&jd(Mn)),n===i&&(t.substr(Pd,4)===Tn?(n=Tn,Pd+=4):(n=i,0===Nd&&jd(Sn))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,6)===gn?(o=gn,Pd+=6):(o=i,0===Nd&&jd(yn)),o===i&&(t.substr(Pd,6)===bn?(o=bn,Pd+=6):(o=i,0===Nd&&jd(_n))),o===i&&(o=null),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=ip())!==i?e=n=An(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(wn)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,6)===Rn?(n=Rn,Pd+=6):(n=i,0===Nd&&jd(Ln)),n===i&&(t.substr(Pd,6)===Pn?(n=Pn,Pd+=6):(n=i,0===Nd&&jd(On))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,6)===gn?(o=gn,Pd+=6):(o=i,0===Nd&&jd(yn)),o===i&&(t.substr(Pd,6)===bn?(o=bn,Pd+=6):(o=i,0===Nd&&jd(_n))),o===i&&(o=null),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=rp())!==i?e=n=In(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Cn)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,6)===Nn?(n=Nn,Pd+=6):(n=i,0===Nd&&jd(Dn)),n===i&&(t.substr(Pd,6)===Fn?(n=Fn,Pd+=6):(n=i,0===Nd&&jd(Un))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,4)===Bn?(o=Bn,Pd+=4):(o=i,0===Nd&&jd(jn)),o===i&&(t.substr(Pd,4)===zn?(o=zn,Pd+=4):(o=i,0===Nd&&jd(Gn))),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=ap())!==i?e=n=Vn(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(kn)),e}())===i&&(e=function(){var e,n,r,o,a;if(Nd++,e=Pd,t.substr(Pd,6)===Wn?(n=Wn,Pd+=6):(n=i,0===Nd&&jd(qn)),n===i&&(t.substr(Pd,6)===Xn?(n=Xn,Pd+=6):(n=i,0===Nd&&jd(Qn))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i?(t.substr(Pd,4)===Bn?(o=Bn,Pd+=4):(o=i,0===Nd&&jd(jn)),o===i&&(t.substr(Pd,4)===zn?(o=zn,Pd+=4):(o=i,0===Nd&&jd(Gn))),o!==i&&(a=ap())!==i?e=n=Yn(a):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Hn)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,6)===Wn?(n=Wn,Pd+=6):(n=i,0===Nd&&jd(qn)),n===i&&(t.substr(Pd,6)===Xn?(n=Xn,Pd+=6):(n=i,0===Nd&&jd(Qn))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,5)===ie?(o=ie,Pd+=5):(o=i,0===Nd&&jd(oe)),o===i&&(t.substr(Pd,5)===ae?(o=ae,Pd+=5):(o=i,0===Nd&&jd(se))),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=cp())!==i?e=n=Jn(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Zn)),e}())===i&&(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d;if(Nd++,e=Pd,n=Pd,t.substr(Pd,4)===$n?(r=$n,Pd+=4):(r=i,0===Nd&&jd(er)),r===i&&(t.substr(Pd,4)===tr?(r=tr,Pd+=4):(r=i,0===Nd&&jd(nr))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=nm())!==i?n=r=[r,o,a]:(Pd=n,n=i)}else Pd=n,n=i;if(n===i&&(n=null),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){if(o=Pd,(a=function(){var e,n,r;return Nd++,e=Pd,t.substr(Pd,6)===Wn?(n=Wn,Pd+=6):(n=i,0===Nd&&jd(qn)),n===i&&(t.substr(Pd,6)===Xn?(n=Xn,Pd+=6):(n=i,0===Nd&&jd(Qn))),n!==i&&(r=op())!==i?e=n=or(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(ir)),e}())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();s!==i?((u=tp())===i&&(u=null),u!==i?o=a=[a,s,u]:(Pd=o,o=i)):(Pd=o,o=i)}else Pd=o,o=i;if(o===i&&(o=tp()),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){for(s=[],u=np();u!==i;)s.push(u),u=np();if(s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(t.substr(Pd,5)===ie?(l=ie,Pd+=5):(l=i,0===Nd&&jd(oe)),l===i&&(t.substr(Pd,5)===ae?(l=ae,Pd+=5):(l=i,0===Nd&&jd(se))),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=cp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=rr(n,o,s,h):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Kn)),e}()),Nd--,e===i&&0===Nd&&jd(en),e}())!==i){for(s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?((h=e())===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)):(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i;s===i&&(s=null),s!==i?n=r=$t(r,a,s):(Pd=n,n=i)}else Pd=n,n=i;else Pd=n,n=i}else Pd=n,n=i;return Nd--,n===i&&(r=i,0===Nd&&jd(Zt)),n}(),Nd--,e===i&&0===Nd&&jd(Yt),e}()),e}()}function Gd(){var e,n,r,o,a;if(Nd++,e=Pd,(n=function(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,4)===d?(r=d,Pd+=4):(r=i,0===Nd&&jd(p)),r===i&&(t.substr(Pd,4)===m?(r=m,Pd+=4):(r=i,0===Nd&&jd(v))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=rm())!==i?e=n=g(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(f)),e}())===i&&(n=null),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){for(o=[],a=Vd();a!==i;)o.push(a),a=Vd();o!==i?e=n=h(n,o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(c)),e}function Vd(){var e,n,r,o,a,s,u;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,6)===b?(r=b,Pd+=6):(r=i,0===Nd&&jd(_)),r===i&&(t.substr(Pd,6)===x?(r=x,Pd+=6):(r=i,0===Nd&&jd(w))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=im())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();s!==i&&(u=rm())!==i?e=n=E(a,u):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(y)),e}function Hd(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,x;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,6)===R?(r=R,Pd+=6):(r=i,0===Nd&&jd(L)),r===i&&(t.substr(Pd,6)===P?(r=P,Pd+=6):(r=i,0===Nd&&jd(O))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(t.substr(Pd,8)===I?(a=I,Pd+=8):(a=i,0===Nd&&jd(k)),a===i&&(t.substr(Pd,8)===N?(a=N,Pd+=8):(a=i,0===Nd&&jd(D))),a===i&&(t.substr(Pd,7)===F?(a=F,Pd+=7):(a=i,0===Nd&&jd(U)),a===i&&(t.substr(Pd,7)===B?(a=B,Pd+=7):(a=i,0===Nd&&jd(j)))),a===i&&(a=null),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i){for(u=[],l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=zp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?l=c=[c,h,f]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i;if(l===i){for(l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(40===t.charCodeAt(Pd)?(h=z,Pd++):(h=i,0===Nd&&jd(G)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i)if((d=Gp())!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if(t.substr(Pd,2)===V?(m=V,Pd+=2):(m=i,0===Nd&&jd(H)),m===i&&(t.substr(Pd,2)===W?(m=W,Pd+=2):(m=i,0===Nd&&jd(q))),m!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();if(v!==i)if((g=zp())!==i){for(y=[],b=hm();b!==i;)y.push(b),b=hm();if(y!==i)if(41===t.charCodeAt(Pd)?(b=X,Pd++):(b=i,0===Nd&&jd(Q)),b!==i){for(_=[],x=hm();x!==i;)_.push(x),x=hm();_!==i?l=c=[c,h,f,d,p,m,v,g,y,b,_]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}if(l!==i)for(;l!==i;){for(u.push(l),l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=zp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?l=c=[c,h,f]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i;if(l===i){for(l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(40===t.charCodeAt(Pd)?(h=z,Pd++):(h=i,0===Nd&&jd(G)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i)if((d=Gp())!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if(t.substr(Pd,2)===V?(m=V,Pd+=2):(m=i,0===Nd&&jd(H)),m===i&&(t.substr(Pd,2)===W?(m=W,Pd+=2):(m=i,0===Nd&&jd(q))),m!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();if(v!==i)if((g=zp())!==i){for(y=[],b=hm();b!==i;)y.push(b),b=hm();if(y!==i)if(41===t.charCodeAt(Pd)?(b=X,Pd++):(b=i,0===Nd&&jd(Q)),b!==i){for(_=[],x=hm();x!==i;)_.push(x),x=hm();_!==i?l=c=[c,h,f,d,p,m,v,g,y,b,_]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i}}else u=i;if(u===i){for(u=Pd,l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if(42===t.charCodeAt(Pd)?(c=Y,Pd++):(c=i,0===Nd&&jd(Z)),c!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();h!==i?u=l=[l,c,h]:(Pd=u,u=i)}else Pd=u,u=i;else Pd=u,u=i}u!==i?e=n=J(a,u):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(C)),e}function Wd(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,4)===Ee?(n=Ee,Pd+=4):(n=i,0===Nd&&jd(Me)),n===i&&(t.substr(Pd,4)===Te?(n=Te,Pd+=4):(n=i,0===Nd&&jd(Se))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=function(){var e,t,n;for(Nd++,e=Pd,t=[],n=hm();n!==i;)t.push(n),n=hm();return t!==i&&(n=qd())!==i?e=t=Re(n):(Pd=e,e=i),Nd--,e===i&&(t=i,0===Nd&&jd(Ce)),e}())===i&&(o=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,5)===Pe?(n=Pe,Pd+=5):(n=i,0===Nd&&jd(Oe)),n===i&&(t.substr(Pd,5)===Ie?(n=Ie,Pd+=5):(n=i,0===Nd&&jd(ke))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=qd())!==i?e=n=Ne(o):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Le)),e}()),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?e=n=Ae(o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(we)),e}function qd(){var e;return Nd++,e=nm(),Nd--,e===i&&0===Nd&&jd(De),e}function Xd(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,5)===ie?(n=ie,Pd+=5):(n=i,0===Nd&&jd(oe)),n===i&&(t.substr(Pd,5)===ae?(n=ae,Pd+=5):(n=i,0===Nd&&jd(se))),n===i&&(n=null),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=cp())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?e=n=Ue(o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Fe)),e}function Qd(){var e,n,r,o,a;return Nd++,e=Pd,(n=function(){var e,n,r,o,a,s,u;if(Nd++,e=Pd,t.substr(Pd,5)===Ge?(n=Ge,Pd+=5):(n=i,0===Nd&&jd(Ve)),n===i&&(t.substr(Pd,5)===He?(n=He,Pd+=5):(n=i,0===Nd&&jd(We))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,2)===qe?(o=qe,Pd+=2):(o=i,0===Nd&&jd(Xe)),o===i&&(t.substr(Pd,2)===Qe?(o=Qe,Pd+=2):(o=i,0===Nd&&jd(Ye))),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){if(s=[],(u=Yd())!==i)for(;u!==i;)s.push(u),u=Yd();else s=i;s!==i?e=n=Ze(s):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ze)),e}())===i&&(n=null),n!==i?((r=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,6)===rt?(n=rt,Pd+=6):(n=i,0===Nd&&jd(it)),n!==i){if(r=[],(o=Zd())!==i)for(;o!==i;)r.push(o),o=Zd();else r=i;r!==i?e=n=[n,r]:(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(nt)),e}())===i&&(r=null),r!==i?((o=function(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,t.substr(Pd,5)===st?(n=st,Pd+=5):(n=i,0===Nd&&jd(ut)),n===i&&(t.substr(Pd,5)===lt?(n=lt,Pd+=5):(n=i,0===Nd&&jd(ct))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,2)===qe?(o=qe,Pd+=2):(o=i,0===Nd&&jd(Xe)),o===i&&(t.substr(Pd,2)===Qe?(o=Qe,Pd+=2):(o=i,0===Nd&&jd(Ye))),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){if(s=[],(u=Jd())!==i)for(;u!==i;)s.push(u),u=Jd();else s=i;if(s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?e=n=ht(s):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(at)),e}())===i&&(o=null),o!==i?((a=function(){var e,t,n,r;return Nd++,t=Pd,(n=Kd())!==i?((r=$d())===i&&(r=null),r!==i?t=n=[n,r]:(Pd=t,t=i)):(Pd=t,t=i),t===i&&(t=Pd,(n=$d())!==i?((r=Kd())===i&&(r=null),r!==i?t=n=[n,r]:(Pd=t,t=i)):(Pd=t,t=i)),t!==i&&(t=Mt(t)),Nd--,(e=t)===i&&(t=i,0===Nd&&jd(Et)),e}())===i&&(a=null),a!==i?e=n=je(n,o,a):(Pd=e,e=i)):(Pd=e,e=i)):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Be)),e}function Yd(){var e,n,r,o,a,s,u,l,c,h,f;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Zp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?e=n=Ke(r):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=vp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?e=n=$e(r):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(40===t.charCodeAt(Pd)?(r=z,Pd++):(r=i,0===Nd&&jd(G)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=Gp())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i){if(u=Pd,t.substr(Pd,2)===V?(l=V,Pd+=2):(l=i,0===Nd&&jd(H)),l===i&&(t.substr(Pd,2)===W?(l=W,Pd+=2):(l=i,0===Nd&&jd(q))),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=zp())!==i?u=l=[l,c,h]:(Pd=u,u=i)}else Pd=u,u=i;if(u===i&&(u=null),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if(41===t.charCodeAt(Pd)?(c=X,Pd++):(c=i,0===Nd&&jd(Q)),c!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();h!==i?e=n=et(a,u):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=zp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?e=n=tt(r):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}}}return Nd--,e===i&&(n=i,0===Nd&&jd(Je)),e}function Zd(){var e;return Nd++,e=dp(),Nd--,e===i&&0===Nd&&jd(ot),e}function Jd(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,3)===dt?(n=dt,Pd+=3):(n=i,0===Nd&&jd(pt)),n===i&&(t.substr(Pd,3)===mt?(n=mt,Pd+=3):(n=i,0===Nd&&jd(vt)),n===i&&(t.substr(Pd,4)===gt?(n=gt,Pd+=4):(n=i,0===Nd&&jd(yt)),n===i&&(t.substr(Pd,4)===bt?(n=bt,Pd+=4):(n=i,0===Nd&&jd(_t))))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=Yp())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?e=n=xt(n,o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i)if(e=Pd,(n=dp())===i&&(n=zp()),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i?e=n=wt(n):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ft)),e}function Kd(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,5)===St?(n=St,Pd+=5):(n=i,0===Nd&&jd(At)),n===i&&(t.substr(Pd,5)===Ct?(n=Ct,Pd+=5):(n=i,0===Nd&&jd(Rt))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=om())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?e=n=Lt(o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Tt)),e}function $d(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,6)===Ot?(n=Ot,Pd+=6):(n=i,0===Nd&&jd(It)),n===i&&(t.substr(Pd,6)===kt?(n=kt,Pd+=6):(n=i,0===Nd&&jd(Nt))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=om())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?e=n=Dt(o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Pt)),e}function ep(){var e;return Nd++,(e=nm())===i&&(e=Jp())===i&&(e=Kp())===i&&(e=em())===i&&(t.substr(Pd,5)===zt?(e=zt,Pd+=5):(e=i,0===Nd&&jd(Gt))),Nd--,e===i&&0===Nd&&jd(jt),e}function tp(){var e,n,r;return Nd++,e=Pd,t.substr(Pd,6)===Nn?(n=Nn,Pd+=6):(n=i,0===Nd&&jd(Dn)),n===i&&(t.substr(Pd,6)===Fn?(n=Fn,Pd+=6):(n=i,0===Nd&&jd(Un))),n!==i&&(r=op())!==i?e=n=or(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(ar)),e}function np(){var e,n,r,o,a,s,u,l;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,5)===ur?(r=ur,Pd+=5):(r=i,0===Nd&&jd(lr)),r===i&&(t.substr(Pd,5)===cr?(r=cr,Pd+=5):(r=i,0===Nd&&jd(hr))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i){if((a=nm())===i)if(a=Pd,t.substr(Pd,5)===Pe?(s=Pe,Pd+=5):(s=i,0===Nd&&jd(Oe)),s===i&&(t.substr(Pd,5)===Ie?(s=Ie,Pd+=5):(s=i,0===Nd&&jd(ke))),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=nm())!==i?a=s=[s,u,l]:(Pd=a,a=i)}else Pd=a,a=i;a!==i?e=n=fr(a):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(sr)),e}function rp(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,5)===pr?(n=pr,Pd+=5):(n=i,0===Nd&&jd(mr)),n===i&&(t.substr(Pd,5)===vr?(n=vr,Pd+=5):(n=i,0===Nd&&jd(gr))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=nm())!==i?e=n=yr(o):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(dr)),e}function ip(){var e,n;return Nd++,e=Pd,(n=rp())!==i&&(n=Ue(n)),(e=n)===i&&(e=Pd,t.substr(Pd,7)===_r?(n=_r,Pd+=7):(n=i,0===Nd&&jd(xr)),n===i&&(t.substr(Pd,7)===wr?(n=wr,Pd+=7):(n=i,0===Nd&&jd(Er))),n!==i&&(n=Mr()),(e=n)===i&&(e=Pd,t.substr(Pd,5)===Pe?(n=Pe,Pd+=5):(n=i,0===Nd&&jd(Oe)),n===i&&(t.substr(Pd,5)===Ie?(n=Ie,Pd+=5):(n=i,0===Nd&&jd(ke))),n!==i&&(n=Tr()),(e=n)===i&&(e=Pd,t.substr(Pd,3)===Sr?(n=Sr,Pd+=3):(n=i,0===Nd&&jd(Ar)),n===i&&(t.substr(Pd,3)===Cr?(n=Cr,Pd+=3):(n=i,0===Nd&&jd(Rr))),n!==i&&(n=Lr()),e=n))),Nd--,e===i&&(n=i,0===Nd&&jd(br)),e}function op(){var e,n,r,o,a,s,u,l,c;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(123===t.charCodeAt(Pd)?(r=ue,Pd++):(r=i,0===Nd&&jd(le)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=sp())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(125===t.charCodeAt(Pd)?(u=ce,Pd++):(u=i,0===Nd&&jd(he)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?e=n=Or(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Pr)),e}function ap(){var e,n,r,o,a,s,u,l,c;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(123===t.charCodeAt(Pd)?(r=ue,Pd++):(r=i,0===Nd&&jd(le)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=sp())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(125===t.charCodeAt(Pd)?(u=ce,Pd++):(u=i,0===Nd&&jd(he)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?e=n=Or(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ir)),e}function sp(){var e,n,r,o,a,s,u;if(Nd++,e=Pd,(n=lp())===i&&(n=null),n!==i){for(r=[],o=Pd,(a=up())!==i?(46===t.charCodeAt(Pd)?(s=Nr,Pd++):(s=i,0===Nd&&jd(Dr)),s===i&&(s=null),s!==i?((u=lp())===i&&(u=null),u!==i?o=a=[a,s,u]:(Pd=o,o=i)):(Pd=o,o=i)):(Pd=o,o=i);o!==i;)r.push(o),o=Pd,(a=up())!==i?(46===t.charCodeAt(Pd)?(s=Nr,Pd++):(s=i,0===Nd&&jd(Dr)),s===i&&(s=null),s!==i?((u=lp())===i&&(u=null),u!==i?o=a=[a,s,u]:(Pd=o,o=i)):(Pd=o,o=i)):(Pd=o,o=i);r!==i?e=n=Fr(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(kr)),e}function up(){var e,n,r,o,a,s,u,l,c,h,f,d,p;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,5)===pr?(r=pr,Pd+=5):(r=i,0===Nd&&jd(mr)),r===i&&(t.substr(Pd,5)===vr?(r=vr,Pd+=5):(r=i,0===Nd&&jd(gr))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=jp())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(123===t.charCodeAt(Pd)?(u=ue,Pd++):(u=i,0===Nd&&jd(le)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if((c=lp())===i&&(c=null),c!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();if(h!==i)if(125===t.charCodeAt(Pd)?(f=ce,Pd++):(f=i,0===Nd&&jd(he)),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i?e=n=Br(a,c):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ur)),e}function lp(){var e,n,r,o,a,s,u;if(Nd++,e=Pd,(n=bp())!==i){for(r=Pd,o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(46===t.charCodeAt(Pd)?(a=Nr,Pd++):(a=i,0===Nd&&jd(Dr)),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();s!==i?((u=lp())===i&&(u=null),u!==i?r=o=[o,a,s,u]:(Pd=r,r=i)):(Pd=r,r=i)}else Pd=r,r=i;else Pd=r,r=i;r===i&&(r=null),r!==i?e=n=zr(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(jr)),e}function cp(){var e,n,r,o,a,s;if(Nd++,e=Pd,123===t.charCodeAt(Pd)?(n=ue,Pd++):(n=i,0===Nd&&jd(le)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=function(){var e,t,n,r;return Nd++,e=Pd,(t=Hd())!==i&&(n=Xd())!==i&&(r=Qd())!==i?e=t=A(t,n,r):(Pd=e,e=i),Nd--,e===i&&(t=i,0===Nd&&jd(S)),e}())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?(125===t.charCodeAt(Pd)?(s=ce,Pd++):(s=i,0===Nd&&jd(he)),s!==i?e=n=Vr(o):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i)if(e=Pd,123===t.charCodeAt(Pd)?(n=ue,Pd++):(n=i,0===Nd&&jd(le)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=function(){var e,n,r,o,a,s,u,l,c,h;if(Nd++,e=Pd,(n=hp())===i&&(n=null),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){if(o=[],a=Pd,(s=fp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(46===t.charCodeAt(Pd)?(l=Nr,Pd++):(l=i,0===Nd&&jd(Dr)),l===i&&(l=null),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?((h=hp())===i&&(h=null),h!==i?a=s=[s,u,l,c,h]:(Pd=a,a=i)):(Pd=a,a=i)}else Pd=a,a=i;else Pd=a,a=i}else Pd=a,a=i;for(;a!==i;)if(o.push(a),a=Pd,(s=fp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(46===t.charCodeAt(Pd)?(l=Nr,Pd++):(l=i,0===Nd&&jd(Dr)),l===i&&(l=null),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?((h=hp())===i&&(h=null),h!==i?a=s=[s,u,l,c,h]:(Pd=a,a=i)):(Pd=a,a=i)}else Pd=a,a=i;else Pd=a,a=i}else Pd=a,a=i;o!==i?e=n=Wr(n,o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Hr)),e}())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?(125===t.charCodeAt(Pd)?(s=ce,Pd++):(s=i,0===Nd&&jd(he)),s!==i?e=n=Vr(o):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Gr)),e}function hp(){var e,n,r,o,a,s;if(Nd++,e=Pd,(n=function(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Bp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=Sp())!==i?e=n=bo(r,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Np())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=function(){var e;return Nd++,(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p;if(Nd++,e=Pd,(n=Ap())===i&&(n=Cp()),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=xp())!==i){for(a=[],s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i){if(h=Pd,(f=Ap())===i&&(f=Cp()),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=wp())!==i?h=f=[f,d,p]:(Pd=h,h=i)}else Pd=h,h=i;h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i}else Pd=s,s=i;else Pd=s,s=i;for(;s!==i;){for(a.push(s),s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i){if(h=Pd,(f=Ap())===i&&(f=Cp()),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=wp())!==i?h=f=[f,d,p]:(Pd=h,h=i)}else Pd=h,h=i;h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i}else Pd=s,s=i;else Pd=s,s=i}a!==i?e=n=ro(n,o,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(no)),e}())===i&&(e=null),Nd--,e===i&&0===Nd&&jd(Eo),e}())!==i?e=n=_o(r,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}return Nd--,e===i&&(n=i,0===Nd&&jd(yo)),e}())!==i){for(r=Pd,o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?(46===t.charCodeAt(Pd)?(a=Nr,Pd++):(a=i,0===Nd&&jd(Dr)),a!==i?((s=hp())===i&&(s=null),s!==i?r=o=[o,a,s]:(Pd=r,r=i)):(Pd=r,r=i)):(Pd=r,r=i),r===i&&(r=null),r!==i?e=n=Xr(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(qr)),e}function fp(){var e;return Nd++,(e=function(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=cp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,5)===pi?(s=pi,Pd+=5):(s=i,0===Nd&&jd(mi)),s===i&&(t.substr(Pd,5)===vi?(s=vi,Pd+=5):(s=i,0===Nd&&jd(gi))),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=cp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,5)===pi?(s=pi,Pd+=5):(s=i,0===Nd&&jd(mi)),s===i&&(t.substr(Pd,5)===vi?(s=vi,Pd+=5):(s=i,0===Nd&&jd(gi))),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=cp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}r!==i?e=n=yi(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(di)),e}())===i&&(e=function(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,8)===Zr?(r=Zr,Pd+=8):(r=i,0===Nd&&jd(Jr)),r===i&&(t.substr(Pd,8)===Kr?(r=Kr,Pd+=8):(r=i,0===Nd&&jd($r))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=cp())!==i?e=n=ei(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Yr)),e}())===i&&(e=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,5)===ui?(n=ui,Pd+=5):(n=i,0===Nd&&jd(li)),n===i&&(t.substr(Pd,5)===ci?(n=ci,Pd+=5):(n=i,0===Nd&&jd(hi))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=cp())!==i?e=n=fi(o):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(si)),e}())===i&&(e=function(){var e,n,r,o,a,s,u;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,5)===pr?(r=pr,Pd+=5):(r=i,0===Nd&&jd(mr)),r===i&&(t.substr(Pd,5)===vr?(r=vr,Pd+=5):(r=i,0===Nd&&jd(gr))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=jp())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();s!==i&&(u=cp())!==i?e=n=ni(a,u):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ti)),e}())===i&&(e=function(){var e,n,r,o;return Nd++,e=Pd,t.substr(Pd,7)===ii?(n=ii,Pd+=7):(n=i,0===Nd&&jd(oi)),n!==i&&(r=jp())!==i&&(o=cp())!==i?e=n=ai(r,o):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(ri)),e}())===i&&(e=function(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,6)===_i?(r=_i,Pd+=6):(r=i,0===Nd&&jd(xi)),r===i&&(t.substr(Pd,6)===wi?(r=wi,Pd+=6):(r=i,0===Nd&&jd(Ei))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=dp())!==i?e=n=Mi(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(bi)),e}())===i&&(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,4)===Si?(r=Si,Pd+=4):(r=i,0===Nd&&jd(Ai)),r===i&&(t.substr(Pd,4)===Ci?(r=Ci,Pd+=4):(r=i,0===Nd&&jd(Ri))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(40===t.charCodeAt(Pd)?(a=z,Pd++):(a=i,0===Nd&&jd(G)),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if((u=Gp())!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();if(l!==i)if(t.substr(Pd,2)===W?(c=W,Pd+=2):(c=i,0===Nd&&jd(q)),c===i&&(t.substr(Pd,2)===V?(c=V,Pd+=2):(c=i,0===Nd&&jd(H))),c!==i){for(h=[],f=hm();f!==i;)h.push(f),f=hm();if(h!==i)if((f=zp())!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i?(41===t.charCodeAt(Pd)?(p=X,Pd++):(p=i,0===Nd&&jd(Q)),p!==i?e=n=Li(u,f):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ti)),e}())===i&&(e=function(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(t.substr(Pd,6)===Ht?(r=Ht,Pd+=6):(r=i,0===Nd&&jd(Wt)),r===i&&(t.substr(Pd,6)===qt?(r=qt,Pd+=6):(r=i,0===Nd&&jd(Xt))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i&&(a=pp())!==i?e=n=Ii(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Oi)),e}()),Nd--,e===i&&0===Nd&&jd(Qr),e}function dp(){var e;return Nd++,(e=Yp())===i&&(e=Zp())===i&&(e=vp()),Nd--,e===i&&0===Nd&&jd(Pi),e}function pp(){var e;return Nd++,(e=function(){var e,n,r,o,a,s,u,l;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=zp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(123===t.charCodeAt(Pd)?(a=ue,Pd++):(a=i,0===Nd&&jd(le)),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i){for(u=[],l=mp();l!==i;)u.push(l),l=mp();u!==i?(125===t.charCodeAt(Pd)?(l=ce,Pd++):(l=i,0===Nd&&jd(he)),l!==i?e=n=Di(r,u):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ni)),e}())===i&&(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v,g;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i){if((r=cm())===i)if(r=Pd,40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){for(s=[],u=zp();u!==i;)s.push(u),u=zp();if(s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?r=o=[o,a,s,u,l]:(Pd=r,r=i)):(Pd=r,r=i)}else Pd=r,r=i}else Pd=r,r=i}else Pd=r,r=i;if(r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(123===t.charCodeAt(Pd)?(a=ue,Pd++):(a=i,0===Nd&&jd(le)),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i){for(u=[],l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(40===t.charCodeAt(Pd)?(h=z,Pd++):(h=i,0===Nd&&jd(G)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i){for(d=[],p=mp();p!==i;)d.push(p),p=mp();if(d!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if(41===t.charCodeAt(Pd)?(m=X,Pd++):(m=i,0===Nd&&jd(Q)),m!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();v!==i?l=c=[c,h,f,d,p,m,v]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i}else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i;for(l===i&&(l=cm());l!==i;){for(u.push(l),l=Pd,c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(40===t.charCodeAt(Pd)?(h=z,Pd++):(h=i,0===Nd&&jd(G)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i){for(d=[],p=mp();p!==i;)d.push(p),p=mp();if(d!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if(41===t.charCodeAt(Pd)?(m=X,Pd++):(m=i,0===Nd&&jd(Q)),m!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();v!==i?l=c=[c,h,f,d,p,m,v]:(Pd=l,l=i)}else Pd=l,l=i;else Pd=l,l=i}else Pd=l,l=i}else Pd=l,l=i}else Pd=l,l=i;else Pd=l,l=i;l===i&&(l=cm())}if(u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?(125===t.charCodeAt(Pd)?(c=ce,Pd++):(c=i,0===Nd&&jd(he)),c!==i?e=n=Ui(r,u):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Fi)),e}()),Nd--,e===i&&0===Nd&&jd(ki),e}function mp(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=rm())===i&&(r=Jp())===i&&(r=Kp())===i&&(r=em())===i&&(t.substr(Pd,5)===zt?(r=zt,Pd+=5):(r=i,0===Nd&&jd(Gt))),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?e=n=tt(r):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Bi)),e}function vp(){var e,t,n,r;if(Nd++,e=Pd,(t=nm())!==i){for(n=[],r=hm();r!==i;)n.push(r),r=hm();n!==i&&(r=gp())!==i?e=t=zi(t,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(t=i,0===Nd&&jd(ji)),e}function gp(){var e,n,r,o,a,s,u,l,c,h,f,d;if(Nd++,e=Pd,(n=cm())!==i&&(n=Vi()),(e=n)===i)if(e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,8)===I?(o=I,Pd+=8):(o=i,0===Nd&&jd(k)),o===i&&(t.substr(Pd,8)===N?(o=N,Pd+=8):(o=i,0===Nd&&jd(D))),o===i&&(o=null),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i){if(l=[],c=Pd,44===t.charCodeAt(Pd)?(h=Hi,Pd++):(h=i,0===Nd&&jd(Wi)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i&&(d=Gp())!==i?c=h=[h,f,d]:(Pd=c,c=i)}else Pd=c,c=i;for(;c!==i;)if(l.push(c),c=Pd,44===t.charCodeAt(Pd)?(h=Hi,Pd++):(h=i,0===Nd&&jd(Wi)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i&&(d=Gp())!==i?c=h=[h,f,d]:(Pd=c,c=i)}else Pd=c,c=i;l!==i?(41===t.charCodeAt(Pd)?(c=X,Pd++):(c=i,0===Nd&&jd(Q)),c!==i?e=n=qi(o,s,l):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Gi)),e}function yp(){var e,n,r,o,a,s,u,l,c,h;if(Nd++,e=Pd,(n=cm())!==i&&(n=Vi()),(e=n)===i)if(e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=nm())===i&&(o=Gp()),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i){if(s=[],u=Pd,44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?((h=nm())===i&&(h=Gp()),h!==i?u=l=[l,c,h]:(Pd=u,u=i)):(Pd=u,u=i)}else Pd=u,u=i;for(;u!==i;)if(s.push(u),u=Pd,44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?((h=nm())===i&&(h=Gp()),h!==i?u=l=[l,c,h]:(Pd=u,u=i)):(Pd=u,u=i)}else Pd=u,u=i;s!==i?(41===t.charCodeAt(Pd)?(u=X,Pd++):(u=i,0===Nd&&jd(Q)),u!==i?e=n=Qi(o,s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Xi)),e}function bp(){var e,t,n,r,o;for(Nd++,e=Pd,t=[],n=hm();n!==i;)t.push(n),n=hm();if(t!==i)if((n=Bp())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=_p())!==i?e=t=eo(n,o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i){for(e=Pd,t=[],n=hm();n!==i;)t.push(n),n=hm();if(t!==i)if((n=Dp())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=function(){var e;return Nd++,(e=_p())===i&&(e=null),Nd--,e===i&&0===Nd&&jd(ao),e}())!==i?e=t=to(n,o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}return Nd--,e===i&&(t=i,0===Nd&&jd($i)),e}function _p(){var e,n,r,o,a,s,u,l,c,h,f,d,p;if(Nd++,e=Pd,(n=Tp())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=wp())!==i){for(a=[],s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i){if(h=Pd,(f=Tp())!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=wp())!==i?h=f=[f,d,p]:(Pd=h,h=i)}else Pd=h,h=i;h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i}else Pd=s,s=i;else Pd=s,s=i;for(;s!==i;){for(a.push(s),s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i){if(h=Pd,(f=Tp())!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=wp())!==i?h=f=[f,d,p]:(Pd=h,h=i)}else Pd=h,h=i;h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i}else Pd=s,s=i;else Pd=s,s=i}a!==i?e=n=oo(n,o,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(io)),e}function xp(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=Ep())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){if(o=[],a=Pd,44===t.charCodeAt(Pd)?(s=Hi,Pd++):(s=i,0===Nd&&jd(Wi)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Ep())!==i?a=s=[s,u,l]:(Pd=a,a=i)}else Pd=a,a=i;for(;a!==i;)if(o.push(a),a=Pd,44===t.charCodeAt(Pd)?(s=Hi,Pd++):(s=i,0===Nd&&jd(Wi)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Ep())!==i?a=s=[s,u,l]:(Pd=a,a=i)}else Pd=a,a=i;o!==i?e=n=uo(n,o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(so)),e}function wp(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=Mp())!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){if(o=[],a=Pd,44===t.charCodeAt(Pd)?(s=Hi,Pd++):(s=i,0===Nd&&jd(Wi)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Mp())!==i?a=s=[s,u,l]:(Pd=a,a=i)}else Pd=a,a=i;for(;a!==i;)if(o.push(a),a=Pd,44===t.charCodeAt(Pd)?(s=Hi,Pd++):(s=i,0===Nd&&jd(Wi)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Mp())!==i?a=s=[s,u,l]:(Pd=a,a=i)}else Pd=a,a=i;o!==i?e=n=co(n,o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(lo)),e}function Ep(){var e;return Nd++,e=Fp(),Nd--,e===i&&0===Nd&&jd(ho),e}function Mp(){var e;return Nd++,e=Up(),Nd--,e===i&&0===Nd&&jd(fo),e}function Tp(){var e,n;return Nd++,(e=jp())===i&&(e=Pd,97===t.charCodeAt(Pd)?(n=mo,Pd++):(n=i,0===Nd&&jd(vo)),n!==i&&(n=go()),e=n),Nd--,e===i&&(n=i,0===Nd&&jd(po)),e}function Sp(){var e,n,r,o,a,s,u,l,c,h,f,d;if(Nd++,e=Pd,(n=Ap())===i&&(n=Cp()),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=xp())!==i){for(a=[],s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?(h=Pd,(f=Ap())===i&&(f=Cp()),f!==i&&(d=wp())!==i?h=f=[f,d]:(Pd=h,h=i),h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)):(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i;for(;s!==i;){for(a.push(s),s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(59===t.charCodeAt(Pd)?(l=Jt,Pd++):(l=i,0===Nd&&jd(Kt)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?(h=Pd,(f=Ap())===i&&(f=Cp()),f!==i&&(d=wp())!==i?h=f=[f,d]:(Pd=h,h=i),h===i&&(h=null),h!==i?s=u=[u,l,c,h]:(Pd=s,s=i)):(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i}a!==i?e=n=wo(n,o,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(xo)),e}function Ap(){var e,t;return Nd++,(t=Rp())!==i&&(t=To(t)),Nd--,(e=t)===i&&(t=i,0===Nd&&jd(Mo)),e}function Cp(){var e;return Nd++,e=zp(),Nd--,e===i&&0===Nd&&jd(So),e}function Rp(){var e;return Nd++,e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,(n=Lp())!==i){for(r=[],o=Pd,124===t.charCodeAt(Pd)?(a=Ro,Pd++):(a=i,0===Nd&&jd(Lo)),a!==i&&(s=Lp())!==i?o=a=[a,s]:(Pd=o,o=i);o!==i;)r.push(o),o=Pd,124===t.charCodeAt(Pd)?(a=Ro,Pd++):(a=i,0===Nd&&jd(Lo)),a!==i&&(s=Lp())!==i?o=a=[a,s]:(Pd=o,o=i);r!==i?e=n=Po(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Co)),e}(),Nd--,e===i&&0===Nd&&jd(Ao),e}function Lp(){var e,n,r,o,a,s;if(Nd++,e=Pd,(n=Op())!==i){for(r=[],o=Pd,47===t.charCodeAt(Pd)?(a=Io,Pd++):(a=i,0===Nd&&jd(ko)),a!==i&&(s=Op())!==i?o=a=[a,s]:(Pd=o,o=i);o!==i;)r.push(o),o=Pd,47===t.charCodeAt(Pd)?(a=Io,Pd++):(a=i,0===Nd&&jd(ko)),a!==i&&(s=Op())!==i?o=a=[a,s]:(Pd=o,o=i);r!==i?e=n=No(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Oo)),e}function Pp(){var e,n,r;return Nd++,e=Pd,(n=function(){var e,n,r,o;return Nd++,(e=nm())===i&&(e=Pd,97===t.charCodeAt(Pd)?(n=mo,Pd++):(n=i,0===Nd&&jd(vo)),n!==i&&(n=go()),(e=n)===i&&(e=Pd,33===t.charCodeAt(Pd)?(n=Qo,Pd++):(n=i,0===Nd&&jd(Yo)),n!==i&&(r=function(){var e,n,r,o,a,s,u,l;if((e=Ip())===i)if(e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i){if(r=Pd,(o=Ip())!==i){for(a=[],s=Pd,124===t.charCodeAt(Pd)?(u=Ro,Pd++):(u=i,0===Nd&&jd(Lo)),u!==i&&(l=Ip())!==i?s=u=[u,l]:(Pd=s,s=i);s!==i;)a.push(s),s=Pd,124===t.charCodeAt(Pd)?(u=Ro,Pd++):(u=i,0===Nd&&jd(Lo)),u!==i&&(l=Ip())!==i?s=u=[u,l]:(Pd=s,s=i);a!==i?r=o=[o,a]:(Pd=r,r=i)}else Pd=r,r=i;r===i&&(r=null),r!==i?(41===t.charCodeAt(Pd)?(o=X,Pd++):(o=i,0===Nd&&jd(Q)),o!==i?e=n=[n,r,o]:(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return e}())!==i?e=n=[n,r]:(Pd=e,e=i),e===i&&(e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i&&(r=Rp())!==i?(41===t.charCodeAt(Pd)?(o=X,Pd++):(o=i,0===Nd&&jd(Q)),o!==i?e=n=Vr(r):(Pd=e,e=i)):(Pd=e,e=i)))),Nd--,e===i&&(n=i,0===Nd&&jd(Xo)),e}())!==i?((r=function(){var e,n,r,o,a,s,u,l,c;return Nd++,42===t.charCodeAt(Pd)?(e=Y,Pd++):(e=i,0===Nd&&jd(Z)),e===i&&(63===t.charCodeAt(Pd)?(e=Vo,Pd++):(e=i,0===Nd&&jd(Ho)),e===i&&(43===t.charCodeAt(Pd)?(e=Wo,Pd++):(e=i,0===Nd&&jd(qo)),e===i&&(e=Pd,123===t.charCodeAt(Pd)?(n=ue,Pd++):(n=i,0===Nd&&jd(le)),n!==i?(r=Pd,(o=kp())!==i?(a=Pd,44===t.charCodeAt(Pd)?(s=Hi,Pd++):(s=i,0===Nd&&jd(Wi)),s!==i?(125===t.charCodeAt(Pd)?(u=ce,Pd++):(u=i,0===Nd&&jd(he)),u===i&&(u=Pd,(l=kp())!==i?(125===t.charCodeAt(Pd)?(c=ce,Pd++):(c=i,0===Nd&&jd(he)),c!==i?u=l=[l,c]:(Pd=u,u=i)):(Pd=u,u=i)),u!==i?a=s=[s,u]:(Pd=a,a=i)):(Pd=a,a=i),a===i&&(125===t.charCodeAt(Pd)?(a=ce,Pd++):(a=i,0===Nd&&jd(he))),a!==i?r=o=[o,a]:(Pd=r,r=i)):(Pd=r,r=i),r===i&&(r=Pd,44===t.charCodeAt(Pd)?(o=Hi,Pd++):(o=i,0===Nd&&jd(Wi)),o!==i&&(a=kp())!==i?(125===t.charCodeAt(Pd)?(s=ce,Pd++):(s=i,0===Nd&&jd(he)),s!==i?r=o=[o,a,s]:(Pd=r,r=i)):(Pd=r,r=i)),r!==i?e=n=[n,r]:(Pd=e,e=i)):(Pd=e,e=i)))),Nd--,e===i&&(n=i,0===Nd&&jd(Go)),e}())===i&&(r=null),r!==i?e=n=Fo(n,r):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Do)),e}function Op(){var e,n,r;return Nd++,(e=Pp())===i&&(e=Pd,94===t.charCodeAt(Pd)?(n=Bo,Pd++):(n=i,0===Nd&&jd(jo)),n!==i&&(r=Pp())!==i?e=n=zo(r):(Pd=e,e=i)),Nd--,e===i&&(n=i,0===Nd&&jd(Uo)),e}function Ip(){var e,n,r;return Nd++,(e=nm())===i&&(97===t.charCodeAt(Pd)?(e=mo,Pd++):(e=i,0===Nd&&jd(vo)),e===i&&(e=Pd,94===t.charCodeAt(Pd)?(n=Bo,Pd++):(n=i,0===Nd&&jd(jo)),n!==i?((r=nm())===i&&(97===t.charCodeAt(Pd)?(r=mo,Pd++):(r=i,0===Nd&&jd(vo))),r!==i?e=n=[n,r]:(Pd=e,e=i)):(Pd=e,e=i))),Nd--,e===i&&(n=i,0===Nd&&jd(Zo)),e}function kp(){var e;return Nd++,e=om(),Nd--,e===i&&0===Nd&&jd(Jo),e}function Np(){var e,n;return Nd++,e=Pd,(n=function(){var e,n,r,o,a,s,u,l,c;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(40===t.charCodeAt(Pd)?(r=z,Pd++):(r=i,0===Nd&&jd(G)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i){if(a=[],(s=Fp())!==i)for(;s!==i;)a.push(s),s=Fp();else a=i;if(a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(41===t.charCodeAt(Pd)?(u=X,Pd++):(u=i,0===Nd&&jd(Q)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?e=n=ha(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ca)),e}())!==i&&(n=$o(n)),(e=n)===i&&(e=function(){var e,n,r,o,a,s,u,l;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(91===t.charCodeAt(Pd)?(r=ra,Pd++):(r=i,0===Nd&&jd(ia)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=Sp())!==i)if(93===t.charCodeAt(Pd)?(s=oa,Pd++):(s=i,0===Nd&&jd(aa)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?e=n=sa(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(na)),e}()),Nd--,e===i&&(n=i,0===Nd&&jd(Ko)),e}function Dp(){var e,n;return Nd++,e=Pd,(n=function(){var e,n,r,o,a,s,u,l,c;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(40===t.charCodeAt(Pd)?(r=z,Pd++):(r=i,0===Nd&&jd(G)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i){if(a=[],(s=Up())!==i)for(;s!==i;)a.push(s),s=Up();else a=i;if(a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(41===t.charCodeAt(Pd)?(u=X,Pd++):(u=i,0===Nd&&jd(Q)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?e=n=ha(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(fa)),e}())!==i&&(n=ta(n)),(e=n)===i&&(e=function(){var e,n,r,o,a,s,u,l,c;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if(91===t.charCodeAt(Pd)?(r=ra,Pd++):(r=i,0===Nd&&jd(ia)),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if((a=_p())!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if(93===t.charCodeAt(Pd)?(u=oa,Pd++):(u=i,0===Nd&&jd(aa)),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?e=n=la(a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ua)),e}()),Nd--,e===i&&(n=i,0===Nd&&jd(ea)),e}function Fp(){var e,t,n,r,o,a;for(Nd++,t=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Bp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?t=n=[n,r,o]:(Pd=t,t=i)}else Pd=t,t=i;else Pd=t,t=i;if(t===i){for(t=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Np())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?t=n=[n,r,o]:(Pd=t,t=i)}else Pd=t,t=i;else Pd=t,t=i}return t!==i&&(t=pa(t)),Nd--,(e=t)===i&&(t=i,0===Nd&&jd(da)),e}function Up(){var e,t,n,r,o,a;for(Nd++,t=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Bp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?t=n=[n,r,o]:(Pd=t,t=i)}else Pd=t,t=i;else Pd=t,t=i;if(t===i){for(t=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=Dp())!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?t=n=[n,r,o]:(Pd=t,t=i)}else Pd=t,t=i;else Pd=t,t=i}return t!==i&&(t=pa(t)),Nd--,(e=t)===i&&(t=i,0===Nd&&jd(ma)),e}function Bp(){var e;return Nd++,(e=zp())===i&&(e=function(){var e;return Nd++,(e=nm())===i&&(e=Jp())===i&&(e=Kp())===i&&(e=em())===i&&(e=function(){var e,n;return Nd++,e=Pd,(n=function(){var e,n,r;return Nd++,e=Pd,t.substr(Pd,2)===qc?(n=qc,Pd+=2):(n=i,0===Nd&&jd(Xc)),n!==i&&(r=vm())!==i?e=n=Qc(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Wc)),e}())!==i&&(n=kc(n)),(e=n)===i&&(e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,91===t.charCodeAt(Pd)?(n=ra,Pd++):(n=i,0===Nd&&jd(ia)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i?(93===t.charCodeAt(Pd)?(o=oa,Pd++):(o=i,0===Nd&&jd(aa)),o!==i?e=n=[n,r,o]:(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ef)),e}())!==i&&(n=Nc()),e=n),Nd--,e===i&&(n=i,0===Nd&&jd(Ic)),e}())===i&&(e=cm()),Nd--,e===i&&0===Nd&&jd(_a),e}()),Nd--,e===i&&0===Nd&&jd(va),e}function jp(){var e;return Nd++,(e=zp())===i&&(e=nm()),Nd--,e===i&&0===Nd&&jd(ga),e}function zp(){var e,n,r,o,a;for(Nd++,e=Pd,n=[],r=hm();r!==i;)n.push(r),r=hm();if(n!==i)if((r=function(){var e,n,r;return Nd++,e=Pd,63===t.charCodeAt(Pd)?(n=Vo,Pd++):(n=i,0===Nd&&jd(Ho)),n!==i&&(r=pm())!==i?e=n=Zc(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Yc)),e}())===i&&(r=function(){var e,n,r;return Nd++,e=Pd,36===t.charCodeAt(Pd)?(n=Kc,Pd++):(n=i,0===Nd&&jd($c)),n!==i&&(r=pm())!==i?e=n=Zc(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Jc)),e}()),r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();o!==i?e=n=ba(r):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(ya)),e}function Gp(){var e;return Nd++,e=function(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=Vp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Ea?(s=Ea,Pd+=2):(s=i,0===Nd&&jd(Ma)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Vp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Ea?(s=Ea,Pd+=2):(s=i,0===Nd&&jd(Ma)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Vp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}r!==i?e=n=Ta(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(wa)),e}(),Nd--,e===i&&0===Nd&&jd(xa),e}function Vp(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=Hp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Aa?(s=Aa,Pd+=2):(s=i,0===Nd&&jd(Ca)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Hp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Aa?(s=Aa,Pd+=2):(s=i,0===Nd&&jd(Ca)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Hp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}r!==i?e=n=Ra(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Sa)),e}function Hp(){var e;return Nd++,e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p;if(Nd++,e=Pd,(n=Wp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(61===t.charCodeAt(Pd)?(s=Oa,Pd++):(s=i,0===Nd&&jd(Ia)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===ka?(s=ka,Pd+=2):(s=i,0===Nd&&jd(Na)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(60===t.charCodeAt(Pd)?(s=Da,Pd++):(s=i,0===Nd&&jd(Fa)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(62===t.charCodeAt(Pd)?(s=Ua,Pd++):(s=i,0===Nd&&jd(Ba)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===ja?(s=ja,Pd+=2):(s=i,0===Nd&&jd(za)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Ga?(s=Ga,Pd+=2):(s=i,0===Nd&&jd(Va)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(73===t.charCodeAt(Pd)?(s=Ha,Pd++):(s=i,0===Nd&&jd(Wa)),s===i&&(105===t.charCodeAt(Pd)?(s=qa,Pd++):(s=i,0===Nd&&jd(Xa))),s!==i)if(78===t.charCodeAt(Pd)?(u=Qa,Pd++):(u=i,0===Nd&&jd(Ya)),u===i&&(110===t.charCodeAt(Pd)?(u=Za,Pd++):(u=i,0===Nd&&jd(Ja))),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i&&(c=yp())!==i?o=a=[a,s,u,l,c]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(78===t.charCodeAt(Pd)?(s=Qa,Pd++):(s=i,0===Nd&&jd(Ya)),s===i&&(110===t.charCodeAt(Pd)?(s=Za,Pd++):(s=i,0===Nd&&jd(Ja))),s!==i)if(79===t.charCodeAt(Pd)?(u=Ka,Pd++):(u=i,0===Nd&&jd($a)),u===i&&(111===t.charCodeAt(Pd)?(u=es,Pd++):(u=i,0===Nd&&jd(ts))),u!==i)if(84===t.charCodeAt(Pd)?(l=ns,Pd++):(l=i,0===Nd&&jd(rs)),l===i&&(116===t.charCodeAt(Pd)?(l=is,Pd++):(l=i,0===Nd&&jd(os))),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(73===t.charCodeAt(Pd)?(h=Ha,Pd++):(h=i,0===Nd&&jd(Wa)),h===i&&(105===t.charCodeAt(Pd)?(h=qa,Pd++):(h=i,0===Nd&&jd(Xa))),h!==i)if(78===t.charCodeAt(Pd)?(f=Qa,Pd++):(f=i,0===Nd&&jd(Ya)),f===i&&(110===t.charCodeAt(Pd)?(f=Za,Pd++):(f=i,0===Nd&&jd(Ja))),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=yp())!==i?o=a=[a,s,u,l,c,h,f,d,p]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i}}}}}}}for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(61===t.charCodeAt(Pd)?(s=Oa,Pd++):(s=i,0===Nd&&jd(Ia)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===ka?(s=ka,Pd+=2):(s=i,0===Nd&&jd(Na)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(60===t.charCodeAt(Pd)?(s=Da,Pd++):(s=i,0===Nd&&jd(Fa)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(62===t.charCodeAt(Pd)?(s=Ua,Pd++):(s=i,0===Nd&&jd(Ba)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===ja?(s=ja,Pd+=2):(s=i,0===Nd&&jd(za)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,2)===Ga?(s=Ga,Pd+=2):(s=i,0===Nd&&jd(Va)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Wp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(73===t.charCodeAt(Pd)?(s=Ha,Pd++):(s=i,0===Nd&&jd(Wa)),s===i&&(105===t.charCodeAt(Pd)?(s=qa,Pd++):(s=i,0===Nd&&jd(Xa))),s!==i)if(78===t.charCodeAt(Pd)?(u=Qa,Pd++):(u=i,0===Nd&&jd(Ya)),u===i&&(110===t.charCodeAt(Pd)?(u=Za,Pd++):(u=i,0===Nd&&jd(Ja))),u!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i&&(c=yp())!==i?o=a=[a,s,u,l,c]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(78===t.charCodeAt(Pd)?(s=Qa,Pd++):(s=i,0===Nd&&jd(Ya)),s===i&&(110===t.charCodeAt(Pd)?(s=Za,Pd++):(s=i,0===Nd&&jd(Ja))),s!==i)if(79===t.charCodeAt(Pd)?(u=Ka,Pd++):(u=i,0===Nd&&jd($a)),u===i&&(111===t.charCodeAt(Pd)?(u=es,Pd++):(u=i,0===Nd&&jd(ts))),u!==i)if(84===t.charCodeAt(Pd)?(l=ns,Pd++):(l=i,0===Nd&&jd(rs)),l===i&&(116===t.charCodeAt(Pd)?(l=is,Pd++):(l=i,0===Nd&&jd(os))),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(73===t.charCodeAt(Pd)?(h=Ha,Pd++):(h=i,0===Nd&&jd(Wa)),h===i&&(105===t.charCodeAt(Pd)?(h=qa,Pd++):(h=i,0===Nd&&jd(Xa))),h!==i)if(78===t.charCodeAt(Pd)?(f=Qa,Pd++):(f=i,0===Nd&&jd(Ya)),f===i&&(110===t.charCodeAt(Pd)?(f=Za,Pd++):(f=i,0===Nd&&jd(Ja))),f!==i){for(d=[],p=hm();p!==i;)d.push(p),p=hm();d!==i&&(p=yp())!==i?o=a=[a,s,u,l,c,h,f,d,p]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i}else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i;else Pd=o,o=i}}}}}}}}r!==i?e=n=as(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Pa)),e}(),Nd--,e===i&&0===Nd&&jd(La),e}function Wp(){var e;return Nd++,e=function(){var e,n,r,o,a,s,u,l,c,h;if(Nd++,e=Pd,(n=qp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(43===t.charCodeAt(Pd)?(s=Wo,Pd++):(s=i,0===Nd&&jd(qo)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=qp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(45===t.charCodeAt(Pd)?(s=ls,Pd++):(s=i,0===Nd&&jd(cs)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=qp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i)if(o=Pd,(a=$p())===i&&(a=$p()),a!==i){for(s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(42===t.charCodeAt(Pd)?(l=Y,Pd++):(l=i,0===Nd&&jd(Z)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=Xp())!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i;if(s===i){for(s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(47===t.charCodeAt(Pd)?(l=Io,Pd++):(l=i,0===Nd&&jd(ko)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=Xp())!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i}s===i&&(s=null),s!==i?o=a=[a,s]:(Pd=o,o=i)}else Pd=o,o=i}for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(43===t.charCodeAt(Pd)?(s=Wo,Pd++):(s=i,0===Nd&&jd(qo)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=qp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(45===t.charCodeAt(Pd)?(s=ls,Pd++):(s=i,0===Nd&&jd(cs)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=qp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i)if(o=Pd,(a=$p())===i&&(a=$p()),a!==i){for(s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(42===t.charCodeAt(Pd)?(l=Y,Pd++):(l=i,0===Nd&&jd(Z)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=Xp())!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i;if(s===i){for(s=Pd,u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(47===t.charCodeAt(Pd)?(l=Io,Pd++):(l=i,0===Nd&&jd(ko)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i&&(h=Xp())!==i?s=u=[u,l,c,h]:(Pd=s,s=i)}else Pd=s,s=i;else Pd=s,s=i}s===i&&(s=null),s!==i?o=a=[a,s]:(Pd=o,o=i)}else Pd=o,o=i}}r!==i?e=n=hs(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(us)),e}(),Nd--,e===i&&0===Nd&&jd(ss),e}function qp(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,(n=Xp())!==i){for(r=[],o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(42===t.charCodeAt(Pd)?(s=Y,Pd++):(s=i,0===Nd&&jd(Z)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Xp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(47===t.charCodeAt(Pd)?(s=Io,Pd++):(s=i,0===Nd&&jd(ko)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Xp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}for(;o!==i;){for(r.push(o),o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(42===t.charCodeAt(Pd)?(s=Y,Pd++):(s=i,0===Nd&&jd(Z)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Xp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i;if(o===i){for(o=Pd,a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(47===t.charCodeAt(Pd)?(s=Io,Pd++):(s=i,0===Nd&&jd(ko)),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i&&(l=Xp())!==i?o=a=[a,s,u,l]:(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}}r!==i?e=n=ds(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(fs)),e}function Xp(){var e,n,r,o;if(Nd++,e=Pd,33===t.charCodeAt(Pd)?(n=Qo,Pd++):(n=i,0===Nd&&jd(Yo)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=Qp())!==i?e=n=ms(o):(Pd=e,e=i)}else Pd=e,e=i;if(e===i){if(e=Pd,43===t.charCodeAt(Pd)?(n=Wo,Pd++):(n=i,0===Nd&&jd(qo)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=Qp())!==i?e=n=vs(o):(Pd=e,e=i)}else Pd=e,e=i;if(e===i){if(e=Pd,45===t.charCodeAt(Pd)?(n=ls,Pd++):(n=i,0===Nd&&jd(cs)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=Qp())!==i?e=n=gs(o):(Pd=e,e=i)}else Pd=e,e=i;e===i&&(e=Qp())}}return Nd--,e===i&&(n=i,0===Nd&&jd(ps)),e}function Qp(){var e,n;return Nd++,(e=Yp())===i&&(e=Zp())===i&&(e=function(){var e,t,n,r;if(Nd++,e=Pd,(t=nm())!==i){for(n=[],r=hm();r!==i;)n.push(r),r=hm();n!==i?((r=gp())===i&&(r=null),r!==i?e=t=oc(t,r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(t=i,0===Nd&&jd(ic)),e}())===i&&(e=Pd,(n=Jp())!==i&&(n=bs(n)),(e=n)===i&&(e=Pd,(n=Kp())!==i&&(n=_s(n)),(e=n)===i&&(e=Pd,(n=em())!==i&&(n=xs(n)),(e=n)===i&&(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b;if(Nd++,e=Pd,t.substr(Pd,5)===Sl?(n=Sl,Pd+=5):(n=i,0===Nd&&jd(Al)),n===i&&(t.substr(Pd,5)===Cl?(n=Cl,Pd+=5):(n=i,0===Nd&&jd(Rl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(42===t.charCodeAt(Pd)?(l=Y,Pd++):(l=i,0===Nd&&jd(Z)),l===i&&(l=Gp()),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=Ll(s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,12)===Pl?(n=Pl,Pd+=12):(n=i,0===Nd&&jd(Ol)),n===i&&(t.substr(Pd,12)===Il?(n=Il,Pd+=12):(n=i,0===Nd&&jd(kl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){if(c=Pd,59===t.charCodeAt(Pd)?(h=Jt,Pd++):(h=i,0===Nd&&jd(Kt)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i)if(t.substr(Pd,9)===Nl?(d=Nl,Pd+=9):(d=i,0===Nd&&jd(Dl)),d!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if(61===t.charCodeAt(Pd)?(m=Oa,Pd++):(m=i,0===Nd&&jd(Ia)),m!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();if(v!==i)if((g=tm())!==i){for(y=[],b=hm();b!==i;)y.push(b),b=hm();y!==i?c=h=[h,f,d,p,m,v,g,y]:(Pd=c,c=i)}else Pd=c,c=i;else Pd=c,c=i}else Pd=c,c=i;else Pd=c,c=i}else Pd=c,c=i;else Pd=c,c=i}else Pd=c,c=i;if(c===i&&(c=null),c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=Fl(s,l,c):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,3)===Ul?(n=Ul,Pd+=3):(n=i,0===Nd&&jd(Bl)),n===i&&(t.substr(Pd,3)===jl?(n=jl,Pd+=3):(n=i,0===Nd&&jd(zl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=Gl(s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,3)===Vl?(n=Vl,Pd+=3):(n=i,0===Nd&&jd(Hl)),n===i&&(t.substr(Pd,3)===Wl?(n=Wl,Pd+=3):(n=i,0===Nd&&jd(ql))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=Xl(s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,3)===Ql?(n=Ql,Pd+=3):(n=i,0===Nd&&jd(Yl)),n===i&&(t.substr(Pd,3)===Zl?(n=Zl,Pd+=3):(n=i,0===Nd&&jd(Jl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=Kl(s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i)if(e=Pd,t.substr(Pd,3)===$l?(n=$l,Pd+=3):(n=i,0===Nd&&jd(ec)),n===i&&(t.substr(Pd,3)===tc?(n=tc,Pd+=3):(n=i,0===Nd&&jd(nc))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if(t.substr(Pd,8)===I?(s=I,Pd+=8):(s=i,0===Nd&&jd(k)),s===i&&(t.substr(Pd,8)===N?(s=N,Pd+=8):(s=i,0===Nd&&jd(D))),s===i&&(s=null),s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?e=n=rc(s,l):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}}}}return Nd--,e===i&&(n=i,0===Nd&&jd(Tl)),e}())===i&&(e=Pd,(n=zp())!==i&&(n=ws(n)),e=n)))),Nd--,e===i&&(n=i,0===Nd&&jd(ys)),e}function Yp(){var e,n,r,o,a,s;if(Nd++,e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if((o=Gp())!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i?(41===t.charCodeAt(Pd)?(s=X,Pd++):(s=i,0===Nd&&jd(Q)),s!==i?e=n=Ms(o):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Es)),e}function Zp(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v,g;if(Nd++,e=Pd,t.substr(Pd,3)===Ss?(n=Ss,Pd+=3):(n=i,0===Nd&&jd(As)),n===i&&(t.substr(Pd,3)===Cs?(n=Cs,Pd+=3):(n=i,0===Nd&&jd(Rs))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Ls(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,4)===Ps?(n=Ps,Pd+=4):(n=i,0===Nd&&jd(Os)),n===i&&(t.substr(Pd,4)===Is?(n=Is,Pd+=4):(n=i,0===Nd&&jd(ks))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Ns(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,11)===Ds?(n=Ds,Pd+=11):(n=i,0===Nd&&jd(Fs)),n===i&&(t.substr(Pd,11)===Us?(n=Us,Pd+=11):(n=i,0===Nd&&jd(Bs))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=Gp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?(41===t.charCodeAt(Pd)?(d=X,Pd++):(d=i,0===Nd&&jd(Q)),d!==i?e=n=js(s,h):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,8)===zs?(n=zs,Pd+=8):(n=i,0===Nd&&jd(Gs)),n===i&&(t.substr(Pd,8)===Vs?(n=Vs,Pd+=8):(n=i,0===Nd&&jd(Hs))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Ws(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,5)===qs?(n=qs,Pd+=5):(n=i,0===Nd&&jd(Xs)),n===i&&(t.substr(Pd,5)===Qs?(n=Qs,Pd+=5):(n=i,0===Nd&&jd(Ys))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=zp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Zs(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,3)===Js?(n=Js,Pd+=3):(n=i,0===Nd&&jd(Ks)),n===i&&(t.substr(Pd,3)===$s?(n=$s,Pd+=3):(n=i,0===Nd&&jd(eu))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=tu(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,3)===nu?(n=nu,Pd+=3):(n=i,0===Nd&&jd(ru)),n===i&&(t.substr(Pd,3)===iu?(n=iu,Pd+=3):(n=i,0===Nd&&jd(ou))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=au(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,5)===su?(n=su,Pd+=5):(n=i,0===Nd&&jd(uu)),n===i&&(t.substr(Pd,5)===lu?(n=lu,Pd+=5):(n=i,0===Nd&&jd(cu))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i){if(o=Pd,40===t.charCodeAt(Pd)?(a=z,Pd++):(a=i,0===Nd&&jd(G)),a!==i){for(s=[],u=hm();u!==i;)s.push(u),u=hm();if(s!==i)if((u=Gp())!==i){for(l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i?(41===t.charCodeAt(Pd)?(c=X,Pd++):(c=i,0===Nd&&jd(Q)),c!==i?o=a=[a,s,u,l,c]:(Pd=o,o=i)):(Pd=o,o=i)}else Pd=o,o=i;else Pd=o,o=i}else Pd=o,o=i;o===i&&(o=cm()),o!==i?e=n=hu(o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,8)===fu?(n=fu,Pd+=8):(n=i,0===Nd&&jd(du)),n===i&&(t.substr(Pd,8)===pu?(n=pu,Pd+=8):(n=i,0===Nd&&jd(mu))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=yp())!==i?e=n=vu(o):(Pd=e,e=i)}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,2)===gu?(n=gu,Pd+=2):(n=i,0===Nd&&jd(yu)),n===i&&(t.substr(Pd,2)===bu?(n=bu,Pd+=2):(n=i,0===Nd&&jd(_u))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=Gp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i)if(44===t.charCodeAt(Pd)?(d=Hi,Pd++):(d=i,0===Nd&&jd(Wi)),d!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();if(p!==i)if((m=Gp())!==i){for(v=[],g=hm();g!==i;)v.push(g),g=hm();v!==i?(41===t.charCodeAt(Pd)?(g=X,Pd++):(g=i,0===Nd&&jd(Q)),g!==i?e=n=xu(s,h,m):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,9)===wu?(n=wu,Pd+=9):(n=i,0===Nd&&jd(Eu)),n===i&&(t.substr(Pd,9)===Mu?(n=Mu,Pd+=9):(n=i,0===Nd&&jd(Tu)),n===i&&(t.substr(Pd,9)===Su?(n=Su,Pd+=9):(n=i,0===Nd&&jd(Au)))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Cu(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,7)===Ru?(n=Ru,Pd+=7):(n=i,0===Nd&&jd(Lu)),n===i&&(t.substr(Pd,7)===Pu?(n=Pu,Pd+=7):(n=i,0===Nd&&jd(Ou)),n===i&&(t.substr(Pd,7)===Iu?(n=Iu,Pd+=7):(n=i,0===Nd&&jd(ku)))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=Nu(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,8)===Du?(n=Du,Pd+=8):(n=i,0===Nd&&jd(Fu)),n===i&&(t.substr(Pd,8)===Uu?(n=Uu,Pd+=8):(n=i,0===Nd&&jd(Bu))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=Gp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();f!==i?(41===t.charCodeAt(Pd)?(d=X,Pd++):(d=i,0===Nd&&jd(Q)),d!==i?e=n=ju(s,h):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,5)===zu?(n=zu,Pd+=5):(n=i,0===Nd&&jd(Gu)),n===i&&(t.substr(Pd,5)===Vu?(n=Vu,Pd+=5):(n=i,0===Nd&&jd(Hu)),n===i&&(t.substr(Pd,5)===Wu?(n=Wu,Pd+=5):(n=i,0===Nd&&jd(qu)),n===i&&(t.substr(Pd,5)===Xu?(n=Xu,Pd+=5):(n=i,0===Nd&&jd(Qu)),n===i&&(t.substr(Pd,5)===Yu?(n=Yu,Pd+=5):(n=i,0===Nd&&jd(Zu)),n===i&&(t.substr(Pd,5)===Ju?(n=Ju,Pd+=5):(n=i,0===Nd&&jd(Ku))))))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();u!==i?(41===t.charCodeAt(Pd)?(l=X,Pd++):(l=i,0===Nd&&jd(Q)),l!==i?e=n=$u(s):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;if(e===i){if(e=Pd,t.substr(Pd,7)===el?(n=el,Pd+=7):(n=i,0===Nd&&jd(tl)),n===i&&(t.substr(Pd,7)===nl?(n=nl,Pd+=7):(n=i,0===Nd&&jd(rl))),n!==i){if(r=[],il.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ol)),o!==i)for(;o!==i;)r.push(o),il.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ol));else r=i;if(r!==i){for(o=[],a=hm();a!==i;)o.push(a),a=hm();if(o!==i)if(40===t.charCodeAt(Pd)?(a=z,Pd++):(a=i,0===Nd&&jd(G)),a!==i){for(s=[],u=Pd,l=[],c=hm();c!==i;)l.push(c),c=hm();for(l!==i&&(c=Gp())!==i?(44===t.charCodeAt(Pd)?(h=Hi,Pd++):(h=i,0===Nd&&jd(Wi)),h!==i?u=l=[l,c,h]:(Pd=u,u=i)):(Pd=u,u=i);u!==i;){for(s.push(u),u=Pd,l=[],c=hm();c!==i;)l.push(c),c=hm();l!==i&&(c=Gp())!==i?(44===t.charCodeAt(Pd)?(h=Hi,Pd++):(h=i,0===Nd&&jd(Wi)),h!==i?u=l=[l,c,h]:(Pd=u,u=i)):(Pd=u,u=i)}if(s!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if((l=Gp())!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();c!==i?(41===t.charCodeAt(Pd)?(h=X,Pd++):(h=i,0===Nd&&jd(Q)),h!==i?e=n=al(r,s,l):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;e===i&&(e=function(){var e,n,r,o,a,s,u,l,c,h,f,d,p,m,v;if(Nd++,e=Pd,t.substr(Pd,5)===ul?(n=ul,Pd+=5):(n=i,0===Nd&&jd(ll)),n===i&&(t.substr(Pd,5)===cl?(n=cl,Pd+=5):(n=i,0===Nd&&jd(hl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(40===t.charCodeAt(Pd)?(o=z,Pd++):(o=i,0===Nd&&jd(G)),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();if(a!==i)if((s=Gp())!==i){for(u=[],l=hm();l!==i;)u.push(l),l=hm();if(u!==i)if(44===t.charCodeAt(Pd)?(l=Hi,Pd++):(l=i,0===Nd&&jd(Wi)),l!==i){for(c=[],h=hm();h!==i;)c.push(h),h=hm();if(c!==i)if((h=Gp())!==i){for(f=[],d=hm();d!==i;)f.push(d),d=hm();if(f!==i){if(d=Pd,44===t.charCodeAt(Pd)?(p=Hi,Pd++):(p=i,0===Nd&&jd(Wi)),p!==i){for(m=[],v=hm();v!==i;)m.push(v),v=hm();m!==i&&(v=Gp())!==i?d=p=[p,m,v]:(Pd=d,d=i)}else Pd=d,d=i;if(d===i&&(d=null),d!==i){for(p=[],m=hm();m!==i;)p.push(m),m=hm();p!==i?(41===t.charCodeAt(Pd)?(m=X,Pd++):(m=i,0===Nd&&jd(Q)),m!==i?e=n=fl(s,h,d):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(sl)),e}())===i&&(e=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,6)===pl?(n=pl,Pd+=6):(n=i,0===Nd&&jd(ml)),n===i&&(t.substr(Pd,6)===vl?(n=vl,Pd+=6):(n=i,0===Nd&&jd(gl))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i&&(o=cp())!==i?e=n=yl(o):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(dl)),e}())===i&&(e=function(){var e,n,r,o,a,s;if(Nd++,e=Pd,t.substr(Pd,3)===_l?(n=_l,Pd+=3):(n=i,0===Nd&&jd(xl)),n===i&&(t.substr(Pd,3)===wl?(n=wl,Pd+=3):(n=i,0===Nd&&jd(El))),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();if(r!==i)if(t.substr(Pd,6)===pl?(o=pl,Pd+=6):(o=i,0===Nd&&jd(ml)),o===i&&(t.substr(Pd,6)===vl?(o=vl,Pd+=6):(o=i,0===Nd&&jd(gl))),o!==i){for(a=[],s=hm();s!==i;)a.push(s),s=hm();a!==i&&(s=cp())!==i?e=n=Ml(s):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(bl)),e}())}}}}}}}}}}}}}}return Nd--,e===i&&(n=i,0===Nd&&jd(Ts)),e}function Jp(){var e,n,r,o,a;return Nd++,e=Pd,(n=tm())!==i?((r=function(){var e,n,r,o,a,s,u,l;if(Nd++,e=Pd,64===t.charCodeAt(Pd)?(n=th,Pd++):(n=i,0===Nd&&jd(nh)),n!==i){if(r=[],rh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ih)),o!==i)for(;o!==i;)r.push(o),rh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ih));else r=i;if(r!==i){if(o=[],a=Pd,45===t.charCodeAt(Pd)?(s=ls,Pd++):(s=i,0===Nd&&jd(cs)),s!==i){if(u=[],oh.test(t.charAt(Pd))?(l=t.charAt(Pd),Pd++):(l=i,0===Nd&&jd(ah)),l!==i)for(;l!==i;)u.push(l),oh.test(t.charAt(Pd))?(l=t.charAt(Pd),Pd++):(l=i,0===Nd&&jd(ah));else u=i;u!==i?a=s=[s,u]:(Pd=a,a=i)}else Pd=a,a=i;for(;a!==i;)if(o.push(a),a=Pd,45===t.charCodeAt(Pd)?(s=ls,Pd++):(s=i,0===Nd&&jd(cs)),s!==i){if(u=[],oh.test(t.charAt(Pd))?(l=t.charAt(Pd),Pd++):(l=i,0===Nd&&jd(ah)),l!==i)for(;l!==i;)u.push(l),oh.test(t.charAt(Pd))?(l=t.charAt(Pd),Pd++):(l=i,0===Nd&&jd(ah));else u=i;u!==i?a=s=[s,u]:(Pd=a,a=i)}else Pd=a,a=i;o!==i?e=n=sh(r,o):(Pd=e,e=i)}else Pd=e,e=i}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(eh)),e}())===i&&(r=Pd,t.substr(Pd,2)===sc?(o=sc,Pd+=2):(o=i,0===Nd&&jd(uc)),o!==i&&(a=nm())!==i?r=o=[o,a]:(Pd=r,r=i)),r===i&&(r=null),r!==i?e=n=lc(n,r):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(ac)),e}function Kp(){var e;return Nd++,(e=function(){var e;return Nd++,(e=sm())===i&&(e=am())===i&&(e=om()),Nd--,e===i&&0===Nd&&jd(hc),e}())===i&&(e=function(){var e;return Nd++,(e=function(){var e,n,r;return Nd++,e=Pd,43===t.charCodeAt(Pd)?(n=Wo,Pd++):(n=i,0===Nd&&jd(qo)),n!==i&&(r=sm())!==i?e=n=wh(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Eh)),e}())===i&&(e=function(){var e,n,r;return Nd++,e=Pd,43===t.charCodeAt(Pd)?(n=Wo,Pd++):(n=i,0===Nd&&jd(qo)),n!==i&&(r=am())!==i?e=n=wh(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(xh)),e}())===i&&(e=function(){var e,n,r;return Nd++,e=Pd,43===t.charCodeAt(Pd)?(n=Wo,Pd++):(n=i,0===Nd&&jd(qo)),n!==i&&(r=om())!==i?e=n=_h(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(bh)),e}()),Nd--,e===i&&0===Nd&&jd(fc),e}())===i&&(e=$p()),Nd--,e===i&&0===Nd&&jd(cc),e}function $p(){var e;return Nd++,(e=function(){var e,n,r;return Nd++,e=Pd,45===t.charCodeAt(Pd)?(n=ls,Pd++):(n=i,0===Nd&&jd(cs)),n!==i&&(r=sm())!==i?e=n=Th(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Ah)),e}())===i&&(e=function(){var e,n,r;return Nd++,e=Pd,45===t.charCodeAt(Pd)?(n=ls,Pd++):(n=i,0===Nd&&jd(cs)),n!==i&&(r=am())!==i?e=n=Th(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Sh)),e}())===i&&(e=function(){var e,n,r;return Nd++,e=Pd,45===t.charCodeAt(Pd)?(n=ls,Pd++):(n=i,0===Nd&&jd(cs)),n!==i&&(r=om())!==i?e=n=Th(r):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Mh)),e}()),Nd--,e===i&&0===Nd&&jd(dc),e}function em(){var e,n;return Nd++,e=Pd,t.substr(Pd,4)===mc?(n=mc,Pd+=4):(n=i,0===Nd&&jd(vc)),n===i&&(t.substr(Pd,4)===gc?(n=gc,Pd+=4):(n=i,0===Nd&&jd(yc))),n!==i&&(n=bc()),(e=n)===i&&(e=Pd,t.substr(Pd,5)===_c?(n=_c,Pd+=5):(n=i,0===Nd&&jd(xc)),n===i&&(t.substr(Pd,5)===wc?(n=wc,Pd+=5):(n=i,0===Nd&&jd(Ec))),n!==i&&(n=Mc()),e=n),Nd--,e===i&&(n=i,0===Nd&&jd(pc)),e}function tm(){var e,n;return Nd++,e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,3)===qh?(n=qh,Pd+=3):(n=i,0===Nd&&jd(Xh)),n!==i){for(r=[],Qh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Yh)),o===i&&(o=lm());o!==i;)r.push(o),Qh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Yh)),o===i&&(o=lm());r!==i?(t.substr(Pd,3)===qh?(o=qh,Pd+=3):(o=i,0===Nd&&jd(Xh)),o!==i?e=n=Bh(r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Wh)),e}())!==i&&(n=Sc(n)),(e=n)===i&&(e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,t.substr(Pd,3)===Jh?(n=Jh,Pd+=3):(n=i,0===Nd&&jd(Kh)),n!==i){for(r=[],$h.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ef)),o===i&&(o=lm());o!==i;)r.push(o),$h.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ef)),o===i&&(o=lm());r!==i?(t.substr(Pd,3)===Jh?(o=Jh,Pd+=3):(o=i,0===Nd&&jd(Kh)),o!==i?e=n=Bh(r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Zh)),e}())!==i&&(n=Sc(n)),(e=n)===i&&(e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,39===t.charCodeAt(Pd)?(n=Nh,Pd++):(n=i,0===Nd&&jd(Dh)),n!==i){for(r=[],Fh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Uh)),o===i&&(o=lm());o!==i;)r.push(o),Fh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Uh)),o===i&&(o=lm());r!==i?(39===t.charCodeAt(Pd)?(o=Nh,Pd++):(o=i,0===Nd&&jd(Dh)),o!==i?e=n=Bh(r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(kh)),e}())!==i&&(n=Sc(n)),(e=n)===i&&(e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,34===t.charCodeAt(Pd)?(n=zh,Pd++):(n=i,0===Nd&&jd(Gh)),n!==i){for(r=[],Vh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Hh)),o===i&&(o=lm());o!==i;)r.push(o),Vh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Hh)),o===i&&(o=lm());r!==i?(34===t.charCodeAt(Pd)?(o=zh,Pd++):(o=i,0===Nd&&jd(Gh)),o!==i?e=n=Bh(r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(jh)),e}())!==i&&(n=Sc(n)),e=n))),Nd--,e===i&&(n=i,0===Nd&&jd(Tc)),e}function nm(){var e,t;return Nd++,e=Pd,(t=rm())!==i&&(t=Cc(t)),(e=t)===i&&(e=Pd,(t=function(){var e,t;return Nd++,e=Pd,(t=function(){var e,t,n;return Nd++,e=Pd,(t=im())!==i&&(n=vm())!==i?e=t=Hc(t,n):(Pd=e,e=i),Nd--,e===i&&(t=i,0===Nd&&jd(Vc)),e}())!==i&&(t=Pc(t)),(e=t)===i&&(e=Pd,(t=im())!==i&&(t=Oc(t)),e=t),Nd--,e===i&&(t=i,0===Nd&&jd(Lc)),e}())!==i&&(t=Rc(t)),e=t),Nd--,e===i&&(t=i,0===Nd&&jd(Ac)),e}function rm(){var e,n,r,o;if(Nd++,e=Pd,60===t.charCodeAt(Pd)?(n=Da,Pd++):(n=i,0===Nd&&jd(Fa)),n!==i){for(r=[],Fc.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Uc));o!==i;)r.push(o),Fc.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(Uc));r!==i?(62===t.charCodeAt(Pd)?(o=Ua,Pd++):(o=i,0===Nd&&jd(Ba)),o!==i?e=n=Bc(r):(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Dc)),e}function im(){var e,n,r;return Nd++,e=Pd,(n=function(){var e,n,r,o;if(Nd++,e=Pd,(n=fm())!==i){for(r=[],(o=mm())===i&&(46===t.charCodeAt(Pd)?(o=Nr,Pd++):(o=i,0===Nd&&jd(Dr)));o!==i;)r.push(o),(o=mm())===i&&(46===t.charCodeAt(Pd)?(o=Nr,Pd++):(o=i,0===Nd&&jd(Dr)));r!==i?e=n=fd(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(hd)),e}())===i&&(n=null),n!==i?(58===t.charCodeAt(Pd)?(r=zc,Pd++):(r=i,0===Nd&&jd(Gc)),r!==i?e=n=Rc(n):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(jc)),e}function om(){var e,n,r;if(Nd++,n=[],lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch)),r!==i)for(;r!==i;)n.push(r),lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch));else n=i;return n!==i&&(n=hh(n)),Nd--,(e=n)===i&&(n=i,0===Nd&&jd(uh)),e}function am(){var e,n,r,o,a;if(Nd++,e=Pd,n=[],lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch)),r!==i)for(;r!==i;)n.push(r),lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch));else n=i;if(n!==i)if(46===t.charCodeAt(Pd)?(r=Nr,Pd++):(r=i,0===Nd&&jd(Dr)),r!==i){for(o=[],lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch));a!==i;)o.push(a),lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch));o!==i?e=n=dh(n,r,o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i)if(e=Pd,46===t.charCodeAt(Pd)?(n=Nr,Pd++):(n=i,0===Nd&&jd(Dr)),n!==i){if(r=[],lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch)),o!==i)for(;o!==i;)r.push(o),lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch));else r=i;r!==i?e=n=ph(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(fh)),e}function sm(){var e,n,r,o,a;if(Nd++,e=Pd,n=[],lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch)),r!==i)for(;r!==i;)n.push(r),lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch));else n=i;if(n!==i)if(46===t.charCodeAt(Pd)?(r=Nr,Pd++):(r=i,0===Nd&&jd(Dr)),r!==i){for(o=[],lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch));a!==i;)o.push(a),lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch));o!==i&&(a=um())!==i?e=n=vh(n,r,o,a):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;if(e===i){if(e=Pd,46===t.charCodeAt(Pd)?(n=Nr,Pd++):(n=i,0===Nd&&jd(Dr)),n!==i){if(r=[],lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch)),o!==i)for(;o!==i;)r.push(o),lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch));else r=i;r!==i&&(o=um())!==i?e=n=gh(n,r,o):(Pd=e,e=i)}else Pd=e,e=i;if(e===i){if(e=Pd,n=[],lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch)),r!==i)for(;r!==i;)n.push(r),lh.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(ch));else n=i;n!==i&&(r=um())!==i?e=n=yh(n,r):(Pd=e,e=i)}}return Nd--,e===i&&(n=i,0===Nd&&jd(mh)),e}function um(){var e,n,r,o,a;if(Nd++,e=Pd,Rh.test(t.charAt(Pd))?(n=t.charAt(Pd),Pd++):(n=i,0===Nd&&jd(Lh)),n!==i)if(Ph.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(Oh)),r===i&&(r=null),r!==i){if(o=[],lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch)),a!==i)for(;a!==i;)o.push(a),lh.test(t.charAt(Pd))?(a=t.charAt(Pd),Pd++):(a=i,0===Nd&&jd(ch));else o=i;o!==i?e=n=Ih(n,r,o):(Pd=e,e=i)}else Pd=e,e=i;else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(Ch)),e}function lm(){var e,n,r;return Nd++,e=Pd,92===t.charCodeAt(Pd)?(n=nf,Pd++):(n=i,0===Nd&&jd(rf)),n!==i?(of.test(t.charAt(Pd))?(r=t.charAt(Pd),Pd++):(r=i,0===Nd&&jd(af)),r!==i?e=n=[n,r]:(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(tf)),e}function cm(){var e,n,r,o;if(Nd++,e=Pd,40===t.charCodeAt(Pd)?(n=z,Pd++):(n=i,0===Nd&&jd(G)),n!==i){for(r=[],o=hm();o!==i;)r.push(o),o=hm();r!==i?(41===t.charCodeAt(Pd)?(o=X,Pd++):(o=i,0===Nd&&jd(Q)),o!==i?e=n=uf():(Pd=e,e=i)):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(sf)),e}function hm(){var e;return Nd++,cf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(hf)),e===i&&(ff.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(df)),e===i&&(pf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(mf)),e===i&&(vf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(gf)),e===i&&(e=function(){var e,n,r,o;if(Nd++,e=Pd,35===t.charCodeAt(Pd)?(n=bf,Pd++):(n=i,0===Nd&&jd(_f)),n!==i){for(r=[],xf.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(wf));o!==i;)r.push(o),xf.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(wf));r!==i?e=n=[n,r]:(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(yf)),e}())))),Nd--,e===i&&0===Nd&&jd(lf),e}function fm(){var e;return Nd++,Tf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Sf)),e===i&&(Af.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Cf)),e===i&&(Rf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Lf)),e===i&&(Pf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Of)),e===i&&(If.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(kf)),e===i&&(Nf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Df)),e===i&&(Ff.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Uf)),e===i&&(Bf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(jf)),e===i&&(zf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Gf)),e===i&&(Vf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Hf)),e===i&&(Wf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(qf)),e===i&&(Xf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Qf)),e===i&&(Yf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Zf)),e===i&&(Jf.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Kf))))))))))))))),Nd--,e===i&&0===Nd&&jd(Mf),e}function dm(){var e;return Nd++,(e=fm())===i&&(95===t.charCodeAt(Pd)?(e=ed,Pd++):(e=i,0===Nd&&jd(td))),Nd--,e===i&&0===Nd&&jd($f),e}function pm(){var e,n,r,o;if(Nd++,e=Pd,(n=dm())===i&&(lh.test(t.charAt(Pd))?(n=t.charAt(Pd),Pd++):(n=i,0===Nd&&jd(ch))),n!==i){for(r=[],(o=dm())===i&&(lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch)),o===i&&(rd.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(id)),o===i&&(od.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ad)),o===i&&(sd.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ud))))));o!==i;)r.push(o),(o=dm())===i&&(lh.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ch)),o===i&&(rd.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(id)),o===i&&(od.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ad)),o===i&&(sd.test(t.charAt(Pd))?(o=t.charAt(Pd),Pd++):(o=i,0===Nd&&jd(ud))))));r!==i?e=n=ld(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(nd)),e}function mm(){var e;return Nd++,(e=dm())===i&&(45===t.charCodeAt(Pd)?(e=ls,Pd++):(e=i,0===Nd&&jd(cs)),e===i&&(lh.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(ch)),e===i&&(rd.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(id)),e===i&&(od.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(ad)),e===i&&(sd.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(ud))))))),Nd--,e===i&&0===Nd&&jd(cd),e}function vm(){var e,n,r,o;if(Nd++,e=Pd,(n=dm())===i&&(lh.test(t.charAt(Pd))?(n=t.charAt(Pd),Pd++):(n=i,0===Nd&&jd(ch)),n===i&&(58===t.charCodeAt(Pd)?(n=zc,Pd++):(n=i,0===Nd&&jd(Gc)),n===i&&(n=gm()))),n!==i){for(r=[],(o=mm())===i&&(46===t.charCodeAt(Pd)?(o=Nr,Pd++):(o=i,0===Nd&&jd(Dr)),o===i&&(58===t.charCodeAt(Pd)?(o=zc,Pd++):(o=i,0===Nd&&jd(Gc)),o===i&&(o=gm())));o!==i;)r.push(o),(o=mm())===i&&(46===t.charCodeAt(Pd)?(o=Nr,Pd++):(o=i,0===Nd&&jd(Dr)),o===i&&(58===t.charCodeAt(Pd)?(o=zc,Pd++):(o=i,0===Nd&&jd(Gc)),o===i&&(o=gm())));r!==i?e=n=pd(n,r):(Pd=e,e=i)}else Pd=e,e=i;return Nd--,e===i&&(n=i,0===Nd&&jd(dd)),e}function gm(){var e;return Nd++,(e=function(){var e,n,r,o,a;return Nd++,n=Pd,37===t.charCodeAt(Pd)?(r=gd,Pd++):(r=i,0===Nd&&jd(yd)),r!==i&&(o=ym())!==i&&(a=ym())!==i?n=r=[r,o,a]:(Pd=n,n=i),n!==i&&(n=bd(n)),Nd--,(e=n)===i&&(n=i,0===Nd&&jd(vd)),e}())===i&&(e=function(){var e,n,r;return Nd++,e=Pd,92===t.charCodeAt(Pd)?(n=nf,Pd++):(n=i,0===Nd&&jd(rf)),n!==i?(95===t.charCodeAt(Pd)?(r=ed,Pd++):(r=i,0===Nd&&jd(td)),r===i&&(126===t.charCodeAt(Pd)?(r=Sd,Pd++):(r=i,0===Nd&&jd(Ad)),r===i&&(46===t.charCodeAt(Pd)?(r=Nr,Pd++):(r=i,0===Nd&&jd(Dr)),r===i&&(45===t.charCodeAt(Pd)?(r=ls,Pd++):(r=i,0===Nd&&jd(cs)),r===i&&(33===t.charCodeAt(Pd)?(r=Qo,Pd++):(r=i,0===Nd&&jd(Yo)),r===i&&(36===t.charCodeAt(Pd)?(r=Kc,Pd++):(r=i,0===Nd&&jd($c)),r===i&&(38===t.charCodeAt(Pd)?(r=Cd,Pd++):(r=i,0===Nd&&jd(Rd)),r===i&&(39===t.charCodeAt(Pd)?(r=Nh,Pd++):(r=i,0===Nd&&jd(Dh)),r===i&&(40===t.charCodeAt(Pd)?(r=z,Pd++):(r=i,0===Nd&&jd(G)),r===i&&(41===t.charCodeAt(Pd)?(r=X,Pd++):(r=i,0===Nd&&jd(Q)),r===i&&(42===t.charCodeAt(Pd)?(r=Y,Pd++):(r=i,0===Nd&&jd(Z)),r===i&&(43===t.charCodeAt(Pd)?(r=Wo,Pd++):(r=i,0===Nd&&jd(qo)),r===i&&(44===t.charCodeAt(Pd)?(r=Hi,Pd++):(r=i,0===Nd&&jd(Wi)),r===i&&(59===t.charCodeAt(Pd)?(r=Jt,Pd++):(r=i,0===Nd&&jd(Kt)),r===i&&(58===t.charCodeAt(Pd)?(r=zc,Pd++):(r=i,0===Nd&&jd(Gc)),r===i&&(61===t.charCodeAt(Pd)?(r=Oa,Pd++):(r=i,0===Nd&&jd(Ia)),r===i&&(47===t.charCodeAt(Pd)?(r=Io,Pd++):(r=i,0===Nd&&jd(ko)),r===i&&(63===t.charCodeAt(Pd)?(r=Vo,Pd++):(r=i,0===Nd&&jd(Ho)),r===i&&(35===t.charCodeAt(Pd)?(r=bf,Pd++):(r=i,0===Nd&&jd(_f)),r===i&&(64===t.charCodeAt(Pd)?(r=th,Pd++):(r=i,0===Nd&&jd(nh)),r===i&&(37===t.charCodeAt(Pd)?(r=gd,Pd++):(r=i,0===Nd&&jd(yd)))))))))))))))))))))),r!==i?e=n=Ld(r):(Pd=e,e=i)):(Pd=e,e=i),Nd--,e===i&&(n=i,0===Nd&&jd(Td)),e}()),Nd--,e===i&&0===Nd&&jd(md),e}function ym(){var e;return Nd++,lh.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(ch)),e===i&&(xd.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(wd)),e===i&&(Ed.test(t.charAt(Pd))?(e=t.charAt(Pd),Pd++):(e=i,0===Nd&&jd(Md)))),Nd--,e===i&&0===Nd&&jd(_d),e}var bm,_m,xm,wm,Em,Mm,Tm,Sm=function(e){for(var t="",n=0;n<e.length;n++)t+="string"==typeof e[n]?e[n]:e[n].join("");return t},Am=0,Cm={},Rm=function(e,t){Cm[e]=t},Lm=function(e){Cm.null=e},Pm=function(e){var t="";if(null==e)return null;for(var n=0;n<e.length;n++)t+=e[n];return t.toUpperCase()};if((r=a())!==i&&Pd===t.length)return r;throw r!==i&&Pd<t.length&&jd({type:"end"}),bm=kd,_m=Id<t.length?t.charAt(Id):null,wm=Id,Em=Id<t.length?Id+1:Id,Mm=Bd(wm),Tm=Bd(Em),xm={start:{offset:wm,line:Mm.line,column:Mm.column},end:{offset:Em,line:Tm.line,column:Tm.column}},new e(e.buildMessage(bm,_m),bm,_m,xm)}}}()},xTla:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},"y+K4":function(e,t,n){var r=n("thjG"),i=n("thjG"),o={variablesInBGP:function(e){var t=e.variables;if(t)return t;var n=e.value||e;for(var r in t=[],n)n[r]&&"var"===n[r].token?t.push(n[r].value):n[r]&&"blank"===n[r].token&&t.push("blank:"+n[r].value);return e.variables=t,t},connected:function(e,t){for(var n="/"+e.vars.join("/")+"/",r=0;r<t.vars.length;r++)if(-1!=n.indexOf("/"+t.vars[r]+"/"))return!0;return!1},variablesIntersectionBGP:function(e,t){return function(e,t){for(var n={},r=0;r<e.lenght;r++)n[e[r]]=1;for(r=0;r<t.length;r++){var i=n[t[r]]||0;n[t[r]]=++i}var o=[];for(var a in n)2==n[a]&&o.push(n[a]);return o}(o.variablesInBGP(e),o.variablesInBGP(t))},executeAndBGPsGroups:function(e){for(var t={},n={},i=0,a=function(e,t){for(var n=0;n<e.length;n++)if(-1!=t.indexOf("/"+e[n]+"/"))return!0;return!1},s=function(e,r,i,o){var a=[],s="",u="";for(var l in r)s+=l,a=a.concat(t[l]),u+=n[l];u=u+f.join("/")+"/",a.push(e),i[s]=a,o[s]=u},u=0;u<e.length;u++){var l=e[u],c={},h={},f=o.variablesInBGP(l),d={};for(var p in n)a(f,n[p])?d[p]=!0:(c[p]=t[p],h[p]=n[p]);0===r.size(d)?(c["g"+i]=[l],h["g"+i]="/"+f.join("/")+"/",i++):s(l,d,c,h),t=c,n=h}return r.values(t)},intersectionSize:function(e,t){for(var n=t.i.split("_"),r=0;r<n.length;r++)if(""!=n[r]&&-1!=e.i.indexOf("_"+n[r]+"_"))return 1;return 0},createJoinTree:function(e,t){for(var n="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],a=0;a<t.vars.length;a++)-1!=n.indexOf("/"+t.vars[a]+"/")?0==t.vars[a].indexOf("_:")?o.push("blank:"+t.vars[a]):o.push(t.vars[a]):i.push(t.vars[a]);var s=t.i.split("_"),u=e.i.split("_"),l={};for(a=0;a<s.length;a++)""!=s[a]&&(l[s[a]]=!0);for(a=0;a<u.length;a++)""!=u[a]&&(l[u[a]]=!0);var c=r.keys(l);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},executeBushyTree:function(e,t,n,r,i){null==e.left?o.executeEmptyJoinBGP(e.right,t,n,r,i):null==e.right?o.executeEmptyJoinBGP(e.left,t,n,r,i):o.executeBushyTree(e.left,t,n,r,function(a){null!=a?o.executeBushyTree(e.right,t,n,r,function(t){i(null!=t?o.joinBindings2(e.join,a,t):null)}):i(null)})},executeAndBGPsDPSize:function(e,t,n,r,a){var s=o.executeAndBGPsGroups(e),u=[];i.eachSeries(s,function(e,t){n.computeCosts(e,r,function(e){var n={},r={},i={},a=1,s=null,l={};i[1]=[];for(var c=0;c<e.length;c++){var h=[];for(var f in delete e[c].variables,e[c])"_cost"!=f&&("var"===e[c][f].token?h.push(e[c][f].value):"blank"===e[c][f].token&&h.push(e[c][f].value));r["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:h};var d={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:h};n["_"+c+"_"]=d,delete e[c]._cost,l["_"+c+"_"]=!0,i[1].push("_"+c+"_"),(null==s||s.cost>d.cost)&&(s=d)}for(var p=2;p<=e.length;p++)for(var m=1;m<p;m++){var v=i[""+m]||[],g=i[""+(p-m)]||[];for(c=0;c<v.length;c++)for(var y=0;y<g.length;y++)if(v[c]!==g[y]){var b=r[v[c]],_=r[g[y]];if(0==o.intersectionSize(b,_)&&o.connected(b,_)){a=p;var x=o.createJoinTree(n[b.i],n[_.i]);if(!l[x.i]){l[x.i]=!0;var w=x.cost+1;null!=n[x.i]&&(w=n[x.i].cost);var E=i[p]||[];E.push(x.i),r[x.i]=x,i[p]=E,w>x.cost&&(a===p&&(s=x),n[x.i]=x)}}}}u.push(s),t()})},function(){var e=null;i.eachSeries(u,function(i,a){o.executeBushyTree(i,t,n,r,function(t){t?null==e?(e=t,a()):(e=o.crossProductBindings(e,t),a()):a("Error executing bushy tree")})},function(t){t?a(null,t):a(e)})})},executeEmptyJoinBGP:function(e,t,n,r,i){return o.executeBGPDatasets(e,t,n,r,i)},executeBGPDatasets:function(e,t,n,r,a){var s={};if(null==e.graph){var u=[];i.eachSeries(t.implicit,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,n.rangeQuery(e,r,function(t){t=o.buildBindingsFromRange(t,e),u.push(t),i()})):i()},function(){var e=o.unionManyBindings(u);a(e)})}else if("var"===e.graph.token){var l=e.graph.value;u=[],i.eachSeries(t.named,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,null!=u?n.rangeQuery(e,r,function(n){if(null!=n){n=o.buildBindingsFromRange(n,e);for(var r=0;r<n.length;r++)n[r][l]=t.oid;u.push(n)}else u=null;i()}):i()):i()},function(){if(null==u)a(null);else{var e=o.unionManyBindings(u);a(e)}})}else n.rangeQuery(e,r,function(t){null!=t?(t=o.buildBindingsFromRange(t,e),a(t)):a(null)})},buildBindingsFromRange:function(e,t){o.variablesInBGP(t);var n=t.value||t,r={};for(c in n)n[c]&&"var"===n[c].token?r[c]=n[c].value:n[c]&&"blank"===n[c].token&&(r[c]="blank:"+n[c].value);var i=[];if(null!=e)for(var a=0;a<e.length;a++){var s={},u=e[a],l=!1;for(var c in r){var h=u[c];if(null!=s[r[c]]&&s[r[c]]!==h){l=!0;break}s[r[c]]=h}l||i.push(s)}return i},areCompatibleBindings:function(e,t){for(var n in e)if(null!=t[n]&&t[n]!=e[n])return!1;return!0},mergeBindings:function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},joinBindings2:function(e,t,n){for(var r,i,a,s,u={},l=[],c=0;c<t.length;c++){r=t[c],s=u;for(var h=0;h<e.length;h++)i=r[e[h]],h==e.length-1?((a=s[i]||[]).push(r),s[i]=a):(s[i]=a=s[i]||{},s=a)}for(c=0;c<n.length;c++)for(r=n[c],s=u,h=0;h<e.length;h++)if(null!=s[i=r[e[h]]])if(h==e.length-1)for(var f=0;f<s[i].length;f++)l.push(o.mergeBindings(s[i][f],r));else s=s[i];return l},joinBindings:function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++){var s=t[a];o.areCompatibleBindings(i,s)&&n.push(o.mergeBindings(i,s))}return n},augmentMissingBindings:function(e,t){for(var n in t)null==e[n]&&(e[n]=null);return e},leftOuterJoinBindings:function(e,t){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=!1,s=0;s<t.length;s++){var u=t[s];o.areCompatibleBindings(i,u)&&(a=!0,n.push(o.mergeBindings(i,u)))}!1===a&&(o.augmentMissingBindings(i,u),n.push(i))}return n},crossProductBindings:function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++)n.push(o.mergeBindings(i,t[a]));return n},unionBindings:function(e,t){return e.concat(t)},unionManyBindings:function(e){for(var t=[],n=0;n<e.length;n++)t=o.unionBindings(t,e[n]);return t}};e.exports={QueryPlan:o}},y75E:function(e,t,n){t=e.exports={Lexer:void 0,Parser:void 0,Writer:void 0,Store:void 0,StreamParser:void 0,StreamWriter:void 0,Util:void 0},Object.keys(t).forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return delete t[e],t[e]=n("uT4x")("./N3"+e)}})})},yLV6:function(e,t,n){var r;!function(i,o,a,s){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),h="function",f=Math.round,d=Math.abs,p=Date.now;function m(e,t,n){return setTimeout(w(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}u="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var b=y(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),_=y(function(e,t){return b(e,t,!0)},"merge","Use `assign`.");function x(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&u(r,n)}function w(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return typeof e==h?e.apply(t&&t[0]||s,t):e}function M(e,t){return e===s?t:e}function T(e,t,n){g(R(t),function(t){e.addEventListener(t,n,!1)})}function S(e,t,n){g(R(t),function(t){e.removeEventListener(t,n,!1)})}function A(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function R(e){return e.trim().split(/\s+/g)}function L(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function P(e){return Array.prototype.slice.call(e,0)}function O(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];L(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function I(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<l.length;){if((r=(n=l[o])?n+i:t)in e)return r;o++}return s}var k=1;function N(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var D="ontouchstart"in i,F=I(i,"PointerEvent")!==s,U=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,j=1,z=4,G=8,V=1,H=2,W=4,q=8,X=16,Q=H|W,Y=q|X,Z=Q|Y,J=["x","y"],K=["clientX","clientY"];function $(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}function ee(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&j&&r-i==0,a=t&(z|G)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=te(t)),i>1&&!n.firstMultiple?n.firstMultiple=te(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,l=t.center=ne(r);t.timeStamp=p(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ae(u,l),t.distance=oe(u,l),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==j&&o.eventType!==z||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=ie(t.deltaX,t.deltaY);var c,h,f=re(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=f.x,t.overallVelocityY=f.y,t.overallVelocity=d(f.x)>d(f.y)?f.x:f.y,t.scale=a?(c=a.pointers,oe((h=r)[0],h[1],K)/oe(c[0],c[1],K)):1,t.rotation=a?function(e,t){return ae(r[1],r[0],K)+ae(e[1],e[0],K)}(a.pointers):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=G&&(u>B||a.velocity===s)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,h=re(u,l,c);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=ie(l,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var m=e.element;A(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function te(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:f(e.pointers[n].clientX),clientY:f(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:ne(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ne(e){var t=e.length;if(1===t)return{x:f(e[0].clientX),y:f(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:f(n/t),y:f(r/t)}}function re(e,t,n){return{x:t/e||0,y:n/e||0}}function ie(e,t){return e===t?V:d(e)>=d(t)?e<0?H:W:t<0?q:X}function oe(e,t,n){n||(n=J);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ae(e,t,n){return n||(n=J),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}$.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(N(this.element),this.evWin,this.domHandler)}};var se={mousedown:j,mousemove:2,mouseup:z},ue="mousedown",le="mousemove mouseup";function ce(){this.evEl=ue,this.evWin=le,this.pressed=!1,$.apply(this,arguments)}x(ce,$,{handler:function(e){var t=se[e.type];t&j&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=z),this.pressed&&(t&z&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var he={pointerdown:j,pointermove:2,pointerup:z,pointercancel:G,pointerout:G},fe={2:"touch",3:"pen",4:"mouse",5:"kinect"},de="pointerdown",pe="pointermove pointerup pointercancel";function me(){this.evEl=de,this.evWin=pe,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(de="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel"),x(me,$,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=he[r],o=fe[e.pointerType]||e.pointerType,a="touch"==o,s=L(t,e.pointerId,"pointerId");i&j&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(z|G)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var ve={touchstart:j,touchmove:2,touchend:z,touchcancel:G},ge="touchstart",ye="touchstart touchmove touchend touchcancel";function be(){this.evTarget=ge,this.evWin=ye,this.started=!1,$.apply(this,arguments)}x(be,$,{handler:function(e){var t=ve[e.type];if(t===j&&(this.started=!0),this.started){var n=(function(e,t){var n=P(e.touches),r=P(e.changedTouches);return t&(z|G)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}).call(this,e,t);t&(z|G)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var _e={touchstart:j,touchmove:2,touchend:z,touchcancel:G},xe="touchstart touchmove touchend touchcancel";function we(){this.evTarget=xe,this.targetIds={},$.apply(this,arguments)}x(we,$,{handler:function(e){var t=_e[e.type],n=(function(e,t){var n=P(e.touches),r=this.targetIds;if(t&(2|j)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return A(e.target,u)}),t===j)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),t&(z|G)&&delete r[a[i].identifier],i++;return s.length?[O(o.concat(s),"identifier",!0),s]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Ee=2500;function Me(){$.apply(this,arguments);var e=w(this.handler,this);this.touch=new we(this.manager,e),this.mouse=new ce(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Te(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},Ee)}}x(Me,$,{handler:function(e,t,n){var r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(e,t){e&j?(this.primaryTouch=t.changedPointers[0].identifier,Te.call(this,t)):e&(z|G)&&Te.call(this,t)}).call(this,t,n);else if(r&&(function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}).call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Se=I(c.style,"touchAction"),Ae=Se!==s,Ce=function(){if(!Ae)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||i.CSS.supports("touch-action",n)}),e}();function Re(e,t){this.manager=e,this.set(t)}Re.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ae&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[Se]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(C(e,"none"))return"none";var t=C(e,"pan-x"),n=C(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":C(e,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=C(r,"none")&&!Ce.none,o=C(r,"pan-y")&&!Ce["pan-y"],a=C(r,"pan-x")&&!Ce["pan-x"];if(i&&1===e.pointers.length&&e.distance<2&&e.deltaTime<250)return;if(!a||!o)return i||o&&n&Q||a&&n&Y?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Le=1,Pe=2,Oe=4,Ie=8,ke=Ie,Ne=16;function De(e){this.options=u({},this.defaults,e||{}),this.id=k++,this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=Le,this.simultaneous={},this.requireFail=[]}function Fe(e){return e&Ne?"cancel":e&Ie?"end":e&Oe?"move":e&Pe?"start":""}function Ue(e){return e==X?"down":e==q?"up":e==H?"left":e==W?"right":""}function Be(e,t){var n=t.manager;return n?n.get(e):e}function je(){De.apply(this,arguments)}function ze(){je.apply(this,arguments),this.pX=null,this.pY=null}function Ge(){je.apply(this,arguments)}function Ve(){De.apply(this,arguments),this._timer=null,this._input=null}function He(){je.apply(this,arguments)}function We(){je.apply(this,arguments)}function qe(){De.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Xe(e,t){return(t=t||{}).recognizers=M(t.recognizers,Xe.defaults.preset),new Qe(e,t)}function Qe(e,t){var n;this.options=u({},Xe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(F?me:U?we:D?Me:ce))(n,ee),this.touchAction=new Re(this,this.options.touchAction),Ye(this,!0),g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ye(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,function(i,o){n=I(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}De.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Be(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)?this:(e=Be(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===L(t,e=Be(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=Be(e,this);var t=L(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<Ie&&r(t.options.event+Fe(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Ie&&r(t.options.event+Fe(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Le)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(ke|Ne|32)&&(this.state=Le),this.state=this.process(t),this.state&(Pe|Oe|Ie|Ne)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},x(je,De,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Pe|Oe),i=this.attrTest(e);return r&&(n&G||!i)?t|Ne:r||i?n&z?t|Ie:t&Pe?t|Oe:Pe:32}}),x(ze,je,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var e=this.options.direction,t=[];return e&Q&&t.push("pan-y"),e&Y&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&Q?(i=0===o?V:o<0?H:W,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?V:a<0?q:X,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return je.prototype.attrTest.call(this,e)&&(this.state&Pe||!(this.state&Pe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ue(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),x(Ge,je,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Pe)},emit:function(e){1!==e.scale&&(e.additionalEvent=this.options.event+(e.scale<1?"in":"out")),this._super.emit.call(this,e)}}),x(Ve,De,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(z|G)&&!i)this.reset();else if(e.eventType&j)this.reset(),this._timer=m(function(){this.state=ke,this.tryEmit()},t.time,this);else if(e.eventType&z)return ke;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ke&&(e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),x(He,je,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Pe)}}),x(We,je,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|Y,pointers:1},getTouchAction:function(){return ze.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Q|Y)?t=e.overallVelocity:n&Q?t=e.overallVelocityX:n&Y&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&z},emit:function(e){var t=Ue(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),x(qe,De,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&j&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=z)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||oe(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=ke,this.tryEmit()},t.interval,this),Pe):ke}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ke&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Xe.VERSION="2.0.7",Xe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[He,{enable:!1}],[Ge,{enable:!1},["rotate"]],[We,{direction:Q}],[ze,{direction:Q},["swipe"]],[qe],[qe,{event:"doubletap",taps:2},["tap"]],[Ve]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Qe.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&ke)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(Pe|Oe|Ie)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof De)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=L(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return g(R(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return g(R(e),function(e){t?n[e]&&n[e].splice(L(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Ye(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Xe,{INPUT_START:j,INPUT_MOVE:2,INPUT_END:z,INPUT_CANCEL:G,STATE_POSSIBLE:Le,STATE_BEGAN:Pe,STATE_CHANGED:Oe,STATE_ENDED:Ie,STATE_RECOGNIZED:ke,STATE_CANCELLED:Ne,STATE_FAILED:32,DIRECTION_NONE:V,DIRECTION_LEFT:H,DIRECTION_RIGHT:W,DIRECTION_UP:q,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:Qe,Input:$,TouchAction:Re,TouchInput:we,MouseInput:ce,PointerEventInput:me,TouchMouseInput:Me,SingleTouchInput:be,Recognizer:De,AttrRecognizer:je,Tap:qe,Pan:ze,Swipe:We,Pinch:Ge,Rotate:He,Press:Ve,on:T,off:S,each:g,merge:_,extend:b,assign:u,inherit:x,bindFn:w,prefixed:I}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Xe,(r=(function(){return Xe}).call(t,n,t,e))===s||(e.exports=r)}(window,document)},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},yQtW:function(e,t,n){(function(e,r,i){var o=n("qfHW"),a=n("P7XM"),s=n("43KI"),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(t,n,a,u){var l=this;if(s.Readable.call(l),l._mode=a,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){e.nextTick(function(){l.emit("close")})}),"fetch"===a){if(l._fetchResponse=n,l.url=n.url,l.statusCode=n.status,l.statusMessage=n.statusText,n.headers.forEach(function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)}),o.writableStream){var c=new WritableStream({write:function(e){return new Promise(function(t,n){l._destroyed?n():l.push(new r(e))?t():l._resumeFetch=t})},close:function(){i.clearTimeout(u),l._destroyed||l.push(null)},abort:function(e){l._destroyed||l.emit("error",e)}});try{return void n.body.pipeTo(c).catch(function(e){i.clearTimeout(u),l._destroyed||l.emit("error",e)})}catch(e){}}var h=n.body.getReader();!function e(){h.read().then(function(t){if(!l._destroyed){if(t.done)return i.clearTimeout(u),void l.push(null);l.push(new r(t.value)),e()}}).catch(function(e){i.clearTimeout(u),l._destroyed||l.emit("error",e)})}()}else if(l._xhr=t,l._pos=0,l.url=t.responseURL,l.statusCode=t.status,l.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===l.headers[n]&&(l.headers[n]=[]),l.headers[n].push(t[2])):void 0!==l.headers[n]?l.headers[n]+=", "+t[2]:l.headers[n]=t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!o.overrideMimeType){var f=l.rawHeaders["mime-type"];if(f){var d=f.match(/;\s*charset=([^;])(;|$)/);d&&(l._charset=d[1].toLowerCase())}l._charset||(l._charset="utf-8")}};a(l,s.Readable),l.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new r(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new r(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var l=new i.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n("8oxB"),n("tjlA").Buffer,n("yLpj"))},zUnb:function(e,t,n){"use strict";n.r(t);var r=n("CcnG"),i=(n("yLV6"),function(){}),o=n("blkk"),a=n("0/uQ"),s=n("67Y/"),u=n("Mkpm"),l=n("LvDl"),c=function(){function e(e){this.http=e,this.filePaths=["./assets/duplex.ttl"]}return e.prototype.getQuery=function(e){return Object(a.a)(this._loadAndQuery(e))},e.prototype.getType=function(e){var t="SELECT ?type WHERE {<"+e+"> a ?type}";return Object(a.a)(this._loadAndQuery(t)).pipe(Object(s.a)(function(e){return 0!=e.filter(function(e){return"https://w3id.org/bot#Space"==e.type.value}).length?"Space":"Element"}))},e.prototype.getLevels=function(){var e="\n        PREFIX bot:     <https://w3id.org/bot#>\n        PREFIX props:   <https://w3id.org/props#>\n        PREFIX seas:    <https://w3id.org/seas/>\n        PREFIX opm:     <https://w3id.org/opm#>\n        PREFIX schema:  <http://schema.org/>\n        SELECT DISTINCT ?uri ?name\n        WHERE {\n            ?uri a bot:Storey ;\n                props:identityDataName/opm:hasPropertyState ?ps .\n            ?ps a opm:CurrentPropertyState ;\n                schema:value ?name .\n            # Must have a space with a 2D boundary\n            ?uri bot:hasSpace ?sp .\n            ?sp props:hasSimple2DBoundary ?geometry2d .\n        }";return Object(a.a)(this._loadAndQuery(e)).pipe(Object(s.a)(function(t){return{data:t,query:e}}))},e.prototype.getElements3D=function(){var e="\n        PREFIX bot:    <https://w3id.org/bot#>\n        PREFIX props:  <https://w3id.org/props#>\n        PREFIX opm:    <https://w3id.org/opm#>\n        PREFIX schema: <http://schema.org/>\n        SELECT ?uri ?name ?geometry\n        WHERE {\n            ?uri a bot:Element ;\n                bot:hasSimple3DModel ?geometry .\n        }";return Object(a.a)(this._loadAndQuery(e)).pipe(Object(s.a)(function(t){return{data:t.map(function(e){return{name:"none",uri:e.uri.value,geometry:e.geometry.value,type:"Element"}}),query:e}}))},e.prototype.getContainedIn3D=function(){var e="\n        PREFIX bot:    <https://w3id.org/bot#>\n        PREFIX props:  <https://w3id.org/props#>\n        PREFIX opm:    <https://w3id.org/opm#>\n        PREFIX schema: <http://schema.org/>\n        SELECT ?uri ?name ?geometry\n        WHERE {\n            ?sp bot:containsElement ?uri .\n            ?uri bot:hasSimple3DModel ?geometry .\n        }";return Object(a.a)(this._loadAndQuery(e)).pipe(Object(s.a)(function(t){return{data:t.map(function(e){return{name:"none",uri:e.uri.value,geometry:e.geometry.value,type:"Element"}}),query:e}}))},e.prototype.getAdjElements=function(e){var t="\n        PREFIX bot:    <https://w3id.org/bot#>\n\n        PREFIX props:  <https://w3id.org/props#>\n\n        PREFIX opm:    <https://w3id.org/opm#>\n\n        PREFIX schema: <http://schema.org/>\n\n        SELECT ?uri ?name ?geometry\n\n        WHERE {\n\n            <"+e+"> bot:adjacentElement ?uri .\n\n            ?uri props:identityDataName/opm:hasPropertyState ?ns ;\n\n                bot:hasSimple3DModel ?geometry .\n\n            ?ns a opm:CurrentPropertyState ;\n\n                schema:value ?name .\n\n        }";return Object(a.a)(this._loadAndQuery(t)).pipe(Object(s.a)(function(e){return{data:e.map(function(e){return{name:e.name.value,uri:e.uri.value,geometry:e.geometry.value,type:"Element"}}),query:t}}))},e.prototype.getRooms3D=function(){var e="\n        PREFIX bot:    <https://w3id.org/bot#>\n        PREFIX props:  <https://w3id.org/props#>\n        PREFIX opm:    <https://w3id.org/opm#>\n        PREFIX schema: <http://schema.org/>\n        SELECT ?uri ?name ?geometry\n        WHERE {\n            ?uri a bot:Space ;\n                props:identityDataName/opm:hasPropertyState ?ns ;\n                bot:hasSimple3DModel ?geometry .\n            ?ns a opm:CurrentPropertyState ;\n                schema:value ?name .\n        }\n        ";return Object(a.a)(this._loadAndQuery(e)).pipe(Object(s.a)(function(t){return{data:t.map(function(e){return{name:e.name.value,uri:e.uri.value,geometry:e.geometry.value,type:"Zone",opacity:.3}}),query:e}}))},e.prototype.getWindows3D=function(){var e="\n        PREFIX bot:    <https://w3id.org/bot#>\n        PREFIX props:  <https://w3id.org/props#>\n        PREFIX prod:   <https://w3id.org/product#>\n        PREFIX opm:    <https://w3id.org/opm#>\n        PREFIX schema: <http://schema.org/>\n        SELECT ?uri ?name ?geometry\n        WHERE {\n            ?uri a prod:Window ;\n                props:identityDataName/opm:hasPropertyState ?ns ;\n                bot:hasSimple3DModel ?geometry .\n            ?ns a opm:CurrentPropertyState ;\n                schema:value ?name .\n        }";return Object(a.a)(this._loadAndQuery(e)).pipe(Object(s.a)(function(t){return{data:t.map(function(e){return{name:e.name.value,uri:e.uri.value,geometry:e.geometry.value,type:"Element"}}),query:e}}))},e.prototype.getRooms2D=function(e){var t=this,n="\n        PREFIX bot:     <https://w3id.org/bot#>\n        PREFIX opm:     <https://w3id.org/opm#>\n        PREFIX schema:  <http://schema.org/>\n        PREFIX props:   <https://w3id.org/props#>\n        PREFIX geo:     <http://www.opengis.net/ont/geosparql#>\n        PREFIX inst:    <https://w3id.org/ibp/bot4osh/>\n        SELECT DISTINCT ?uri ?name ?geometry2d\n        WHERE {\n            <"+e+"> bot:hasSpace ?uri .\n            ?uri props:identityDataName/opm:hasPropertyState ?ns ;\n                props:hasSimple2DBoundary ?geometry2d .\n            ?ns a opm:CurrentPropertyState ;\n                schema:value ?name .\n        }";return Object(a.a)(this._loadAndQuery(n)).pipe(Object(s.a)(function(e){return{data:t._resToGeoJSON(e),query:n}}))},e.prototype.getElements2D=function(){var e=this,t="\n        PREFIX bot:     <https://w3id.org/bot#>\n        PREFIX opm:     <https://w3id.org/opm#>\n        PREFIX schema:  <http://schema.org/>\n        PREFIX props:   <https://w3id.org/props#>\n        PREFIX geo:     <http://www.opengis.net/ont/geosparql#>\n        PREFIX inst:    <https://w3id.org/ibp/bot4osh/>\n        SELECT DISTINCT ?uri ?name ?geometry2d\n        WHERE {\n            ?x a bot:Space ;\n                bot:adjacentElement ?uri .\n            ?uri props:identityDataName/opm:hasPropertyState ?ns ;\n                props:hasSimple2DBoundary ?geometry2d .\n            ?ns a opm:CurrentPropertyState ;\n                schema:value ?name .\n        }";return Object(a.a)(this._loadAndQuery(t)).pipe(Object(s.a)(function(n){return{data:e._resToGeoJSON(n),query:t}}))},e.prototype._resToGeoJSON=function(e){var t={type:"FeatureCollection",features:[]};return l.each(e,function(e){var n=e.uri.value,r=e.name.value,i=u(e.geometry2d.value);i.coordinates=[i.coordinates],t.features.push({type:"Feature",id:n,geometry:i,properties:{name:r,uri:n,color:"#eee"}})}),t},e.prototype._loadAndQuery=function(e){return t=this,void 0,r=function(){var t,n,r,i,o,a,s,u,l,c,h;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(f){switch(f.label){case 0:if(this.store)return[3,7];for(t=this._createStore(),n=[],r=0,i=this.filePaths;r<i.length;r++)o=this.http.get(i[r],{responseType:"text"}).toPromise(),n.push(o);return[4,Promise.all(n)];case 1:return a=f.sent(),s=this,[4,t];case 2:s.store=f.sent(),u=0,l=0,c=a,f.label=3;case 3:return l<c.length?[4,this._loadTriplesInStore(this.store,c[l])]:[3,6];case 4:h=f.sent(),u+=Number(h),f.label=5;case 5:return l++,[3,3];case 6:console.log("Added "+u+" triples to memory."),f.label=7;case 7:return[2,this._executeQuery(this.store,e)]}})},new((n=void 0)||(n=Promise))(function(e,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,a)}s((r=r.apply(t,[])).next())});var t,n,r},e.prototype._createStore=function(){return new Promise(function(e,t){o.create(function(n,r){n&&t(n),e(r)})})},e.prototype._loadTriplesInStore=function(e,t,n){return n||(n="text/turtle"),new Promise(function(r,i){e.load(n,t,function(e,t){e&&i(e),r(t)})})},e.prototype._executeQuery=function(e,t){return new Promise(function(n,r){e.execute(t,function(e,t){e&&r(e),n(t)})})},e.prototype._getGraphSize=function(){var e=this;return new Promise(function(t,n){e.store.graph(function(e,r){e&&n(e),t(r.x)})})},e}(),h=function(){function e(e,t){this.http=e,this._s=t,this.buttons=["ng-plan","ng-mesh-viewer"],this.selectedButton="ng-plan",this.mode3D="1",this.showInfo=!0}return e.prototype.ngOnInit=function(){this.getLevels(),this.switchModule("ng-plan")},e.prototype.getLevels=function(){var e=this;this._s.getLevels().subscribe(function(t){e.onLevelChange(t.data[0]),e.levels=t.data,e.query=t.query},function(e){return console.log(e)})},e.prototype.onLevelChange=function(e){var t=this;e&&(this.selectedLevel=e),this._s.getRooms2D(this.selectedLevel.uri.value).subscribe(function(e){t.query=e.query,t.data=e.data},function(e){return console.log(e)})},e.prototype.on3DModeChange=function(){var e=this;this.msg=null,"1"==this.mode3D&&(this.msg="Click space to get adjacent elements",this._s.getRooms3D().subscribe(function(t){e.data=t.data,e.query=t.query},function(e){return console.log(e)})),"2"==this.mode3D&&this._s.getWindows3D().subscribe(function(t){e.data=t.data,e.query=t.query},function(e){return console.log(e)}),"3"==this.mode3D&&this._s.getElements3D().subscribe(function(t){e.data=t.data,e.query=t.query,console.log(t)},function(e){return console.log(e)}),"4"==this.mode3D&&this._s.getContainedIn3D().subscribe(function(t){e.data=t.data,e.query=t.query},function(e){return console.log(e)})},e.prototype.switchModule=function(e){this.selectedButton=e,"ng-plan"==e&&(this.onLevelChange(null),this.msg=null),"ng-mesh-viewer"==e&&this.on3DModeChange()},e.prototype.roomClick=function(e){this.selectedSpaces=[e.uri]},e.prototype.log=function(e){var t=this,n=e.uri;console.log(n),this._s.getType(n).subscribe(function(e){"Space"==e?t._s.getAdjElements(n).subscribe(function(e){t.data=e.data,t.query=e.query},function(e){return console.log(e)}):t.switchModule("ng-mesh-viewer")},function(e){return console.log(e)})},e.prototype.canvasClick=function(){this.selectedSpaces=[]},e}(),f=n("ihYY"),d=n("mrSG");function p(e){return null!=e&&""+e!="false"}function m(e){return Array.isArray(e)?e:[e]}function v(e){return null==e?"":"string"==typeof e?e:e+"px"}var g=function(){},y=void 0,b=["en",[["a","p"],["AM","PM"],y],[["AM","PM"],y,y],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],y,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],y,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",y,"{1} 'at' {0}",y],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],_={},x=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),w=new r.InjectionToken("UseV4Plurals"),E=function(){},M=function(e){function t(t,n){var r=e.call(this)||this;return r.locale=t,r.deprecatedPluralFn=n,r}return Object(d.__extends)(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=_[t];if(n)return n;var r=t.split("-")[0];if(n=_[r])return n;if("en"===r)return b;throw new Error('Missing locale data for the locale "'+e+'".')}(e)[18]}(t||this.locale)(e)){case x.Zero:return"zero";case x.One:return"one";case x.Two:return"two";case x.Few:return"few";case x.Many:return"many";default:return"other"}},t}(E);function T(e,t){var n,r;t=encodeURIComponent(t);try{for(var i=Object(d.__values)(e.split(";")),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.indexOf("="),u=Object(d.__read)(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),l=u[1];if(u[0].trim()===t)return decodeURIComponent(l)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}var S=function(){function e(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(e.prototype,"klass",{set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClass",{set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(r["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}},e.prototype._applyKeyValueChanges=function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r["\u0275stringify"])(e.item));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))},e.prototype._removeClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})},e}(),A=function(){function e(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),C=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Object(r.isDevMode)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new A(null,t._ngForOf,-1,-1),i),a=new R(e,o);n.push(a)}else null==i?t._viewContainer.remove(r):(o=t._viewContainer.get(r),t._viewContainer.move(o,i),a=new R(e,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e}(),R=function(e,t){this.record=e,this.view=t},L=function(){function e(e,t){this._viewContainer=e,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){O("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){O("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),P=function(){this.$implicit=null,this.ngIf=null};function O(e,t){if(t&&!t.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Object(r["\u0275stringify"])(t)+"'.")}var I,k=function(){function e(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),N=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}},e}(),D=function(){function e(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new k(e,t)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),F=function(){return function(e,t,n){n._addDefault(new k(e,t))}}(),U=function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.subscribe({next:t,error:function(e){throw e}})},e.prototype.dispose=function(e){e.unsubscribe()},e.prototype.onDestroy=function(e){e.unsubscribe()},e}(),B=new(function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.then(t,function(e){throw e})},e.prototype.dispose=function(e){},e.prototype.onDestroy=function(e){},e}()),j=new U,z=function(){function e(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return e.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},e.prototype.transform=function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.WrappedValue.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)},e.prototype._subscribe=function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})},e.prototype._selectStrategy=function(t){if(Object(r["\u0275isPromise"])(t))return B;if(Object(r["\u0275isObservable"])(t))return j;throw n=e,Error("InvalidPipeArgument: '"+t+"' for pipe '"+Object(r["\u0275stringify"])(n)+"'");var n},e.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},e.prototype._updateLatestValue=function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())},e}(),G=function(){},V=new r.InjectionToken("DocumentToken"),H="browser",W="server",q="undefined"!=typeof Intl&&Intl.v8BreakIterator,X=function(){function e(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===H:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!q)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}return e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(r.PLATFORM_ID,8))},token:e,providedIn:"root"}),e}();function Q(){if(null==I&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return I=!0}}))}finally{I=I||!1}return I}var Y=function(){},Z=n("nkY7"),J=n("isby"),K=n("MGBS"),$=n("zotm"),ee=n("IUTb"),te={},ne=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new re(e,this.resultSelector))},e}(),re=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return d.__extends(t,e),t.prototype._next=function(e){this.values.push(te),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object($.a)(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,a=this.toRespond?o[n]===te?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(K.a),ie=n("K9Ia"),oe=n("6blF"),ae=n("2Bdj");function se(e){return function(t){return t.lift(new ue(e))}}var ue=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new le(e),r=Object($.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),le=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return d.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(K.a);function ce(e){var t=new oe.a(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}var he=new oe.a(function(e){return e.complete()});function fe(e){return e?function(e){return new oe.a(function(t){return e.schedule(function(){return t.complete()})})}(e):he}function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(Object(Z.a)(n)?e.pop():n=void 0,e.length){case 0:return fe(n);case 1:return n?Object(ee.a)(e,n):ce(e[0]);default:return Object(ee.a)(e,n)}}var pe=n("Zn8D");function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=e[e.length-1];Object(Z.a)(n)?e.pop():n=null;var r=e.length;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&Object(Z.a)(e[1])?Object(a.a)(e[0]):Object(pe.a)(1)(de.apply(void 0,e))}(1!==r||n?r>0?Object(ee.a)(e,n):fe(n):ce(e[0]),t)}}var ve,ge=new Set,ye=function(){function e(e){this.platform=e,this._matchMedia=this.platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):be}return e.prototype.matchMedia=function(e){return this.platform.WEBKIT&&function(e){if(!ge.has(e))try{ve||((ve=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(ve)),ve.sheet&&(ve.sheet.insertRule("@media "+e+" {.fx-query-test{ }}",0),ge.add(e))}catch(e){console.error(e)}}(e),this._matchMedia(e)},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(X))},token:e,providedIn:"root"}),e}();function be(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var _e=function(){function e(e,t){this.mediaMatcher=e,this.zone=t,this._queries=new Map,this._destroySubject=new ie.a}return e.prototype.ngOnDestroy=function(){this._destroySubject.next(),this._destroySubject.complete()},e.prototype.isMatched=function(e){var t=this;return xe(m(e)).some(function(e){return t._registerQuery(e).mql.matches})},e.prototype.observe=function(e){var t=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(Z.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(J.a)(e[0])&&(e=e[0]),Object(ee.a)(e,r).lift(new ne(n))}(xe(m(e)).map(function(e){return t._registerQuery(e).observable})).pipe(Object(s.a)(function(e){var t={matches:!1,breakpoints:{}};return e.forEach(function(e){t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches}),t}))},e.prototype._registerQuery=function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var n=this.mediaMatcher.matchMedia(e),r={observable:function e(t,n,r){return r?e(t,n).pipe(Object(s.a)(function(e){return Object(J.a)(e)?r.apply(void 0,e):r(e)})):new oe.a(function(e){var r,i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void e.error(t)}if(Object(ae.a)(n))return function(){return n(i,r)}})}(function(e){n.addListener(function(n){return t.zone.run(function(){return e(n)})})},function(e){n.removeListener(function(n){return t.zone.run(function(){return e(n)})})}).pipe(se(this._destroySubject),me(n),Object(s.a)(function(t){return{query:e,matches:t.matches}})),mql:n};return this._queries.set(e,r),r},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(ye),Object(r.inject)(r.NgZone))},token:e,providedIn:"root"}),e}();function xe(e){return e.map(function(e){return e.split(",")}).reduce(function(e,t){return e.concat(t)}).map(function(e){return e.trim()})}var we={XSmall:"(max-width: 599px)",Small:"(min-width: 600px) and (max-width: 959px)",Medium:"(min-width: 960px) and (max-width: 1279px)",Large:"(min-width: 1280px) and (max-width: 1919px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599px) and (orientation: portrait), (max-width: 959px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Ee(e,t,n,r){return Object(ae.a)(n)&&(r=n,n=void 0),r?Ee(e,t,n).pipe(Object(s.a)(function(e){return Object(J.a)(e)?r.apply(void 0,e):r(e)})):new oe.a(function(r){!function e(t,n,r,i,o){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,h=t.length;c<h;c++)e(t[c],n,r,i,o)}i.add(a)}(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}Object;var Me=n("p0ib"),Te=n("pugT"),Se=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return d.__extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return d.__extends(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Te.a)),Ae=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Ce=new(function(e){function t(n,r){void 0===r&&(r=Ae.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return d.__extends(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ae))(Se),Re=n("Ehmk"),Le=n("eihs"),Pe=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Oe(e,this.durationSelector))},e}(),Oe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return d.__extends(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=Object(Re.a)(this.durationSelector)(e);if(t===Le.a)this.destination.error(Le.a.e);else{var n=Object($.a)(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,n,r){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(K.a);function Ie(e){return!Object(J.a)(e)&&e-parseFloat(e)+1>=0}function ke(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Ne(e,t){return void 0===t&&(t=Ce),n=function(){return function(e,t,n){void 0===e&&(e=0);var r=-1;return Ie(t)?r=Number(t)<1?1:Number(t):Object(Z.a)(t)&&(n=t),Object(Z.a)(n)||(n=Ce),new oe.a(function(t){var i=Ie(e)?e:+e-n.now();return n.schedule(ke,i,{index:0,period:r,subscriber:t})})}(e,t)},function(e){return e.lift(new Pe(n))};var n}var De=n("FFOo");function Fe(e,t){return function(n){return n.lift(new Ue(e,t))}}var Ue=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Be(e,this.predicate,this.thisArg))},e}(),Be=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return d.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(De.a),je=function(){function e(e,t){this._ngZone=e,this._platform=t,this._scrolled=new ie.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return e.prototype.register=function(e){var t=this,n=e.elementScrolled().subscribe(function(){return t._scrolled.next(e)});this.scrollContainers.set(e,n)},e.prototype.deregister=function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))},e.prototype.scrolled=function(e){var t=this;return void 0===e&&(e=20),this._platform.isBrowser?oe.a.create(function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(Ne(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}}):de()},e.prototype.ngOnDestroy=function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(t,n){return e.deregister(n)}),this._scrolled.complete()},e.prototype.ancestorScrolled=function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Fe(function(e){return!e||n.indexOf(e)>-1}))},e.prototype.getAncestorScrollContainers=function(e){var t=this,n=[];return this.scrollContainers.forEach(function(r,i){t._scrollableContainsElement(i,e)&&n.push(i)}),n},e.prototype._scrollableContainsElement=function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1},e.prototype._addGlobalListener=function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return Ee(window.document,"scroll").subscribe(function(){return e._scrolled.next()})})},e.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(r.NgZone),Object(r.inject)(X))},token:e,providedIn:"root"}),e}(),ze=function(){function e(e,t){var n=this;this._platform=e,this._change=e.isBrowser?t.runOutsideAngular(function(){return Object(Me.a)(Ee(window,"resize"),Ee(window,"orientationchange"))}):de(),this._invalidateCache=this.change().subscribe(function(){return n._updateViewportSize()})}return e.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},e.prototype.getViewportSize=function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e},e.prototype.getViewportRect=function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}},e.prototype.getViewportScrollPosition=function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},e.prototype.change=function(e){return void 0===e&&(e=20),e>0?this._change.pipe(Ne(e)):this._change},e.prototype._updateViewportSize=function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(X),Object(r.inject)(r.NgZone))},token:e,providedIn:"root"}),e}(),Ge=function(){};function Ve(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Ve.prototype=Object.create(Error.prototype);var He=Ve;function We(e){return function(t){return 0===e?fe():t.lift(new qe(e))}}var qe=function(){function e(e){if(this.total=e,this.total<0)throw new He}return e.prototype.call=function(e,t){return t.subscribe(new Xe(e,this.total))},e}(),Xe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return d.__extends(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(De.a);function Qe(){throw Error("Host already has a portal attached")}var Ye=function(){function e(){}return e.prototype.attach=function(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&Qe(),this._attachedHost=e,e.attach(this)},e.prototype.detach=function(){var e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())},Object.defineProperty(e.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),e.prototype.setAttachedHost=function(e){this._attachedHost=e},e}(),Ze=function(e){function t(t,n,r){var i=e.call(this)||this;return i.component=t,i.viewContainerRef=n,i.injector=r,i}return Object(d.__extends)(t,e),t}(Ye),Je=function(e){function t(t,n,r){var i=e.call(this)||this;return i.templateRef=t,i.viewContainerRef=n,i.context=r,i}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"origin",{get:function(){return this.templateRef.elementRef},enumerable:!0,configurable:!0}),t.prototype.attach=function(t,n){return void 0===n&&(n=this.context),this.context=n,e.prototype.attach.call(this,t)},t.prototype.detach=function(){return this.context=void 0,e.prototype.detach.call(this)},t}(Ye),Ke=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.outletElement=t,o._componentFactoryResolver=n,o._appRef=r,o._defaultInjector=i,o}return Object(d.__extends)(t,e),t.prototype.attachComponentPortal=function(e){var t,n=this,r=this._componentFactoryResolver.resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.parentInjector),this.setDisposeFn(function(){return t.destroy()})):(t=r.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn(function(){n._appRef.detachView(t.hostView),t.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(t)),t},t.prototype.attachTemplatePortal=function(e){var t=this,n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context);return r.detectChanges(),r.rootNodes.forEach(function(e){return t.outletElement.appendChild(e)}),this.setDisposeFn(function(){var e=n.indexOf(r);-1!==e&&n.remove(e)}),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},t.prototype._getComponentRootNode=function(e){return e.hostView.rootNodes[0]},t}(function(){function e(){this._isDisposed=!1}return e.prototype.hasAttached=function(){return!!this._attachedPortal},e.prototype.attach=function(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Qe(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof Ze?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Je?(this._attachedPortal=e,this.attachTemplatePortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()},e.prototype.detach=function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()},e.prototype.dispose=function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0},e.prototype.setDisposeFn=function(e){this._disposeFn=e},e.prototype._invokeDisposeFn=function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)},e}()),$e=function(){},et=function(){function e(){}return e.prototype.enable=function(){},e.prototype.disable=function(){},e.prototype.attach=function(){},e}(),tt=function(){return function(e){var t=this;this.scrollStrategy=new et,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",e&&Object.keys(e).filter(function(t){return void 0!==e[t]}).forEach(function(n){return t[n]=e[n]})}}();function nt(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid "+e+' "'+t+'". Expected "top", "bottom" or "center".')}function rt(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid "+e+' "'+t+'". Expected "start", "end" or "center".')}var it=function(){function e(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}return e.prototype.attach=function(){},e.prototype.enable=function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=v(-this._previousScrollPosition.left),e.style.top=v(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}},e.prototype.disable=function(){if(this._isEnabled){var e=this._document.documentElement,t=this._document.body,n=e.style.scrollBehavior||"",r=t.style.scrollBehavior||"";this._isEnabled=!1,e.style.left=this._previousHTMLStyles.left,e.style.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),e.style.scrollBehavior=t.style.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.style.scrollBehavior=n,t.style.scrollBehavior=r}},e.prototype._canBeEnabled=function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width},e}();function ot(){return Error("Scroll strategy has already been attached.")}var at=function(){function e(e,t,n,r){var i=this;this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=function(){i.disable(),i._overlayRef.hasAttached()&&i._ngZone.run(function(){return i._overlayRef.detach()})}}return e.prototype.attach=function(e){if(this._overlayRef)throw ot();this._overlayRef=e},e.prototype.enable=function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}},e.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},e}();function st(e,t){return t.some(function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right})}function ut(e,t){return t.some(function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right})}var lt=function(){function e(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}return e.prototype.attach=function(e){if(this._overlayRef)throw ot();this._overlayRef=e},e.prototype.enable=function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),r=n.width,i=n.height;st(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(e.disable(),e._ngZone.run(function(){return e._overlayRef.detach()}))}}))},e.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},e}(),ct=function(){function e(e,t,n,r){var i=this;this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=function(){return new et},this.close=function(e){return new at(i._scrollDispatcher,i._ngZone,i._viewportRuler,e)},this.block=function(){return new it(i._viewportRuler,i._document)},this.reposition=function(e){return new lt(i._scrollDispatcher,i._viewportRuler,i._ngZone,e)},this._document=r}return e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(je),Object(r.inject)(ze),Object(r.inject)(r.NgZone),Object(r.inject)(V))},token:e,providedIn:"root"}),e}(),ht=function(){function e(e){var t=this;this._attachedOverlays=[],this._keydownListener=function(e){for(var n=t._attachedOverlays,r=n.length-1;r>-1;r--)if(n[r]._keydownEventSubscriptions>0){n[r]._keydownEvents.next(e);break}},this._document=e}return e.prototype.ngOnDestroy=function(){this._detach()},e.prototype.add=function(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener,!0),this._isAttached=!0),this._attachedOverlays.push(e)},e.prototype.remove=function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()},e.prototype._detach=function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener,!0),this._isAttached=!1)},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(V))},token:e,providedIn:"root"}),e}(),ft=function(){function e(e){this._document=e}return e.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},e.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},e.prototype._createContainer=function(){var e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this._document.body.appendChild(e),this._containerElement=e},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(V))},token:e,providedIn:"root"}),e}(),dt=function(){function e(e,t,n,r,i,o,a){var s=this;this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=a,this._backdropElement=null,this._backdropClick=new ie.a,this._attachments=new ie.a,this._detachments=new ie.a,this._keydownEventsObservable=oe.a.create(function(e){var t=s._keydownEvents.subscribe(e);return s._keydownEventSubscriptions++,function(){t.unsubscribe(),s._keydownEventSubscriptions--}}),this._keydownEvents=new ie.a,this._keydownEventSubscriptions=0,r.scrollStrategy&&r.scrollStrategy.attach(this)}return Object.defineProperty(e.prototype,"overlayElement",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backdropElement",{get:function(){return this._backdropElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._host},enumerable:!0,configurable:!0}),e.prototype.attach=function(e){var t=this,n=this._portalOutlet.attach(e);return this._config.positionStrategy&&this._config.positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(We(1)).subscribe(function(){t.hasAttached()&&t.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),n},e.prototype.detach=function(){var e=this;if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._config.positionStrategy&&this._config.positionStrategy.detach&&this._config.positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1);var t=this._portalOutlet.detach();this._detachments.next(),this._keyboardDispatcher.remove(this);var n=this._ngZone.onStable.asObservable().pipe(se(Object(Me.a)(this._attachments,this._detachments))).subscribe(function(){e._pane&&e._host&&0!==e._pane.children.length||(e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),n.unsubscribe())});return t}},e.prototype.dispose=function(){var e=this.hasAttached();this._config.positionStrategy&&this._config.positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()},e.prototype.hasAttached=function(){return this._portalOutlet.hasAttached()},e.prototype.backdropClick=function(){return this._backdropClick.asObservable()},e.prototype.attachments=function(){return this._attachments.asObservable()},e.prototype.detachments=function(){return this._detachments.asObservable()},e.prototype.keydownEvents=function(){return this._keydownEventsObservable},e.prototype.getConfig=function(){return this._config},e.prototype.updatePosition=function(){this._config.positionStrategy&&this._config.positionStrategy.apply()},e.prototype.updateSize=function(e){this._config=Object(d.__assign)({},this._config,e),this._updateElementSize()},e.prototype.setDirection=function(e){this._config=Object(d.__assign)({},this._config,{direction:e}),this._updateElementDirection()},e.prototype.getDirection=function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"},e.prototype._updateElementDirection=function(){this._host.setAttribute("dir",this.getDirection())},e.prototype._updateElementSize=function(){var e=this._pane.style;e.width=v(this._config.width),e.height=v(this._config.height),e.minWidth=v(this._config.minWidth),e.minHeight=v(this._config.minHeight),e.maxWidth=v(this._config.maxWidth),e.maxHeight=v(this._config.maxHeight)},e.prototype._togglePointerEvents=function(e){this._pane.style.pointerEvents=e?"auto":"none"},e.prototype._attachBackdrop=function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",function(t){return e._backdropClick.next(t)}),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")},e.prototype._updateStackingOrder=function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)},e.prototype.detachBackdrop=function(){var e=this,t=this._backdropElement;if(t){var n,r=function(){t&&t.parentNode&&t.parentNode.removeChild(t),e._backdropElement==t&&(e._backdropElement=null),clearTimeout(n)};t.classList.remove("cdk-overlay-backdrop-showing"),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),this._ngZone.runOutsideAngular(function(){t.addEventListener("transitionend",r)}),t.style.pointerEvents="none",n=this._ngZone.runOutsideAngular(function(){return setTimeout(r,500)})}},e.prototype._toggleClasses=function(e,t,n){var r=e.classList;m(t).forEach(function(e){n?r.add(e):r.remove(e)})},e}(),pt=function(){function e(e,t,n,r,i){var o=this;this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i,this._isInitialRender=!0,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this.scrollables=[],this._preferredPositions=[],this._positionChanges=new ie.a,this._resizeSubscription=Te.a.EMPTY,this._offsetX=0,this._offsetY=0,this._positionChangeSubscriptions=0,this.positionChanges=oe.a.create(function(e){var t=o._positionChanges.subscribe(e);return o._positionChangeSubscriptions++,function(){t.unsubscribe(),o._positionChangeSubscriptions--}}),this.setOrigin(e)}return Object.defineProperty(e.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),e.prototype.attach=function(e){var t=this;if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){return t.apply()})},e.prototype.apply=function(){if(!(this._isDisposed||this._platform&&!this._platform.isBrowser))if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._origin.getBoundingClientRect(),this._overlayRect=this._pane.getBoundingClientRect();for(var e,t=this._originRect,n=this._overlayRect,r=this._viewportRect,i=[],o=0,a=this._preferredPositions;o<a.length;o++){var s=a[o],u=this._getOriginPoint(t,s),l=this._getOverlayPoint(u,n,s),c=this._getOverlayFit(l,n,r,s);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,u);this._canFitWithFlexibleDimensions(c,l,r)?i.push({position:s,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,s)}):(!e||e.overlayFit.visibleArea<c.visibleArea)&&(e={overlayFit:c,overlayPoint:l,originPoint:u,position:s,overlayRect:n})}if(i.length){for(var h=null,f=-1,d=0,p=i;d<p.length;d++){var m=p[d],v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>f&&(f=v,h=m)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}},e.prototype.detach=function(){this._resizeSubscription.unsubscribe()},e.prototype.dispose=function(){this._isDisposed||(this.detach(),this._boundingBox=null,this._positionChanges.complete(),this._isDisposed=!0)},e.prototype.reapplyLastPosition=function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._origin.getBoundingClientRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}},e.prototype.withScrollableContainers=function(e){this.scrollables=e},e.prototype.withPositions=function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this},e.prototype.withViewportMargin=function(e){return this._viewportMargin=e,this},e.prototype.withFlexibleDimensions=function(e){return void 0===e&&(e=!0),this._hasFlexibleDimensions=e,this},e.prototype.withGrowAfterOpen=function(e){return void 0===e&&(e=!0),this._growAfterOpen=e,this},e.prototype.withPush=function(e){return void 0===e&&(e=!0),this._canPush=e,this},e.prototype.withLockedPosition=function(e){return void 0===e&&(e=!0),this._positionLocked=e,this},e.prototype.setOrigin=function(e){return this._origin=e instanceof r.ElementRef?e.nativeElement:e,this},e.prototype.withDefaultOffsetX=function(e){return this._offsetX=e,this},e.prototype.withDefaultOffsetY=function(e){return this._offsetY=e,this},e.prototype.withTransformOriginOn=function(e){return this._transformOriginSelector=e,this},e.prototype._getOriginPoint=function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}},e.prototype._getOverlayPoint=function(e,t,n){var r;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,{x:e.x+r,y:e.y+("center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height)}},e.prototype._getOverlayFit=function(e,t,n,r){var i=e.x,o=e.y,a=this._getOffset(r,"x"),s=this._getOffset(r,"y");a&&(i+=a),s&&(o+=s);var u=0-o,l=o+t.height-n.height,c=this._subtractOverflows(t.width,0-i,i+t.width-n.width),h=this._subtractOverflows(t.height,u,l),f=c*h;return{visibleArea:f,isCompletelyWithinViewport:t.width*t.height===f,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:c==t.width}},e.prototype._canFitWithFlexibleDimensions=function(e,t,n){if(this._hasFlexibleDimensions){var r=n.bottom-t.y,i=n.right-t.x,o=this._overlayRef.getConfig().minHeight,a=this._overlayRef.getConfig().minWidth;return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=i)}},e.prototype._pushOverlayOnScreen=function(e,t){var n=this._viewportRect,r=Math.max(e.x+t.width-n.right,0),i=Math.max(e.y+t.height-n.bottom,0),o=Math.max(n.top-e.y,0),a=Math.max(n.left-e.x,0);return{x:e.x+(t.width<=n.width?a||-r:n.left-e.x),y:e.y+(t.height<=n.height?o||-i:n.top-e.y)}},e.prototype._applyPosition=function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),this._lastPosition=e,this._positionChangeSubscriptions>0){var n=new function(e,t){this.connectionPair=e,this.scrollableViewProperties=t}(e,this._getScrollVisibility());this._positionChanges.next(n)}this._isInitialRender=!1},e.prototype._setTransformOrigin=function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin=t+" "+r}},e.prototype._calculateBoundingBoxRect=function(e,t){var n,r,i,o,a,s,u=this._viewportRect,l=this._isRtl();if("top"===t.overlayY)r=e.y,n=u.bottom-e.y;else if("bottom"===t.overlayY)n=u.height-(i=u.height-e.y+2*this._viewportMargin)+this._viewportMargin;else{var c=Math.min(u.bottom-e.y,e.y-u.left),h=this._lastBoundingBoxSize.height;r=e.y-c,(n=2*c)>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-h/2)}if("end"===t.overlayX&&!l||"start"===t.overlayX&&l)s=u.right-e.x+this._viewportMargin,o=e.x-u.left;else if("start"===t.overlayX&&!l||"end"===t.overlayX&&l)a=e.x,o=u.right-e.x;else{c=Math.min(u.right-e.x,e.x-u.top);var f=this._lastBoundingBoxSize.width;a=e.x-c,(o=2*c)>f&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.x-f/2)}return{top:r,left:a,bottom:i,right:s,width:o,height:n}},e.prototype._setBoundingBoxStyles=function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=v(n.height),r.top=v(n.top),r.bottom=v(n.bottom),r.width=v(n.width),r.left=v(n.left),r.right=v(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=v(i)),o&&(r.maxWidth=v(o))}this._lastBoundingBoxSize=n,mt(this._boundingBox.style,r)},e.prototype._resetBoundingBoxStyles=function(){mt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})},e.prototype._resetOverlayElementStyles=function(){mt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:""})},e.prototype._setOverlayElementStyles=function(e,t){var n={};this._hasExactPosition()?(mt(n,this._getExactOverlayY(t,e)),mt(n,this._getExactOverlayX(t,e))):n.position="static";var r="",i=this._getOffset(t,"x"),o=this._getOffset(t,"y");i&&(r+="translateX("+i+"px) "),o&&(r+="translateY("+o+"px)"),n.transform=r.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),mt(this._pane.style,n)},e.prototype._getExactOverlayY=function(e,t){var n={top:null,bottom:null},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect));var i=this._overlayContainer?this._overlayContainer.getContainerElement().getBoundingClientRect().top:0;return r.y-=i,"bottom"===e.overlayY?n.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":n.top=v(r.y),n},e.prototype._getExactOverlayX=function(e,t){var n={left:null,right:null},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect)),"right"==(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?n.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":n.left=v(r.x),n},e.prototype._getScrollVisibility=function(){var e=this._origin.getBoundingClientRect(),t=this._pane.getBoundingClientRect(),n=this.scrollables.map(function(e){return e.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:ut(e,n),isOriginOutsideView:st(e,n),isOverlayClipped:ut(t,n),isOverlayOutsideView:st(t,n)}},e.prototype._subtractOverflows=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){return e-Math.max(t,0)},e)},e.prototype._getNarrowedViewportRect=function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}},e.prototype._isRtl=function(){return"rtl"===this._overlayRef.getDirection()},e.prototype._hasExactPosition=function(){return!this._hasFlexibleDimensions||this._isPushed},e.prototype._getOffset=function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY},e.prototype._validatePositions=function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(function(e){rt("originX",e.originX),nt("originY",e.originY),rt("overlayX",e.overlayX),nt("overlayY",e.overlayY)})},e}();function mt(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var vt=function(){function e(e,t,n,r,i,o){this._preferredPositions=[],this._positionStrategy=new pt(n,r,i,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t)}return Object.defineProperty(e.prototype,"_isRtl",{get:function(){return"rtl"===this._overlayRef.getDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onPositionChange",{get:function(){return this._positionStrategy.positionChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),e.prototype.attach=function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)},e.prototype.dispose=function(){this._positionStrategy.dispose()},e.prototype.detach=function(){this._positionStrategy.detach()},e.prototype.apply=function(){this._positionStrategy.apply()},e.prototype.recalculateLastPosition=function(){this._positionStrategy.reapplyLastPosition()},e.prototype.withScrollableContainers=function(e){this._positionStrategy.withScrollableContainers(e)},e.prototype.withFallbackPosition=function(e,t,n,r){var i=new function(e,t,n,r){this.offsetX=n,this.offsetY=r,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this},e.prototype.withDirection=function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this},e.prototype.withOffsetX=function(e){return this._positionStrategy.withDefaultOffsetX(e),this},e.prototype.withOffsetY=function(e){return this._positionStrategy.withDefaultOffsetY(e),this},e.prototype.withLockedPosition=function(e){return this._positionStrategy.withLockedPosition(e),this},e.prototype.withPositions=function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this},e.prototype.setOrigin=function(e){return this._positionStrategy.setOrigin(e),this},e}(),gt=function(){function e(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return e.prototype.attach=function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper")},e.prototype.top=function(e){return void 0===e&&(e=""),this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this},e.prototype.left=function(e){return void 0===e&&(e=""),this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this},e.prototype.bottom=function(e){return void 0===e&&(e=""),this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this},e.prototype.right=function(e){return void 0===e&&(e=""),this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this},e.prototype.width=function(e){return void 0===e&&(e=""),this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this},e.prototype.height=function(e){return void 0===e&&(e=""),this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this},e.prototype.centerHorizontally=function(e){return void 0===e&&(e=""),this.left(e),this._justifyContent="center",this},e.prototype.centerVertically=function(e){return void 0===e&&(e=""),this.top(e),this._alignItems="center",this},e.prototype.apply=function(){if(this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===n.width?"0":this._leftOffset,e.marginTop="100%"===n.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,"100%"===n.width?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems="100%"===n.height?"flex-start":this._alignItems}},e.prototype.dispose=function(){},e}(),yt=function(){function e(e,t,n,r){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=r}return e.prototype.global=function(){return new gt},e.prototype.connectedTo=function(e,t,n){return new vt(t,n,e,this._viewportRuler,this._document)},e.prototype.flexibleConnectedTo=function(e){return new pt(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(ze),Object(r.inject)(V),Object(r.inject)(X,8),Object(r.inject)(ft,8))},token:e,providedIn:"root"}),e}(),bt=0,_t=function(){function e(e,t,n,r,i,o,a,s,u){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=a,this._document=s,this._directionality=u}return e.prototype.create=function(e){var t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new tt(e);return i.direction=i.direction||this._directionality.value,new dt(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document)},e.prototype.position=function(){return this._positionBuilder},e.prototype._createPaneElement=function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-"+bt++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t},e.prototype._createHostElement=function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e},e.prototype._createPortalOutlet=function(e){return this._appRef||(this._appRef=this._injector.get(r.ApplicationRef)),new Ke(e,this._componentFactoryResolver,this._appRef,this._injector)},e}(),xt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],wt=new r.InjectionToken("cdk-connected-overlay-scroll-strategy"),Et=function(e){this.elementRef=e},Mt=function(){function e(e,t,n,i,o){this._overlay=e,this._scrollStrategy=i,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Te.a.EMPTY,this.viewportMargin=0,this.scrollStrategy=this._scrollStrategy(),this.open=!1,this.backdropClick=new r.EventEmitter,this.positionChange=new r.EventEmitter,this.attach=new r.EventEmitter,this.detach=new r.EventEmitter,this.overlayKeydown=new r.EventEmitter,this._templatePortal=new Je(t,n)}return Object.defineProperty(e.prototype,"offsetX",{get:function(){return this._offsetX},set:function(e){this._offsetX=e,this._position&&this._setPositions(this._position)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this._offsetY},set:function(e){this._offsetY=e,this._position&&this._setPositions(this._position)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lockPosition",{get:function(){return this._lockPosition},set:function(e){this._lockPosition=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flexibleDiemsions",{get:function(){return this._flexibleDimensions},set:function(e){this._flexibleDimensions=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"growAfterOpen",{get:function(){return this._growAfterOpen},set:function(e){this._growAfterOpen=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"push",{get:function(){return this._push},set:function(e){this._push=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayRef",{get:function(){return this._overlayRef},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir?this._dir.value:"ltr"},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyOverlay()},e.prototype.ngOnChanges=function(e){this._position&&(e.positions&&this._position.withPositions(this.positions),e.lockPosition&&this._position.withLockedPosition(this.lockPosition),e.origin&&(this._position.setOrigin(this.origin.elementRef),this.open&&this._position.apply())),e.open&&(this.open?this._attachOverlay():this._detachOverlay())},e.prototype._createOverlay=function(){this.positions&&this.positions.length||(this.positions=xt),this._overlayRef=this._overlay.create(this._buildConfig())},e.prototype._buildConfig=function(){var e=this._position=this._createPositionStrategy(),t=new tt({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),t},e.prototype._createPositionStrategy=function(){var e=this,t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef).withFlexibleDimensions(this.flexibleDiemsions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition);return this._setPositions(t),t.positionChanges.subscribe(function(t){return e.positionChange.emit(t)}),t},e.prototype._setPositions=function(e){var t=this,n=this.positions.map(function(e){return{originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY}});e.withPositions(n)},e.prototype._attachOverlay=function(){var e=this;this._overlayRef?this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}):(this._createOverlay(),this._overlayRef.keydownEvents().subscribe(function(t){e.overlayKeydown.next(t),27===t.keyCode&&e._detachOverlay()})),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop&&(this._backdropSubscription=this._overlayRef.backdropClick().subscribe(function(t){e.backdropClick.emit(t)}))},e.prototype._detachOverlay=function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()},e.prototype._destroyOverlay=function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()},e}();function Tt(e){return function(){return e.scrollStrategies.reposition()}}var St=function(){},At=20;function Ct(e){return Error('Tooltip position "'+e+'" is invalid.')}var Rt=new r.InjectionToken("mat-tooltip-scroll-strategy");function Lt(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:At})}}var Pt=new r.InjectionToken("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),Ot=function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=this;this._overlay=e,this._elementRef=t,this._scrollDispatcher=n,this._viewContainerRef=r,this._ngZone=i,this._platform=o,this._ariaDescriber=a,this._focusMonitor=s,this._scrollStrategy=u,this._dir=l,this._defaultOptions=c,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this._message="",this._manualListeners=new Map,this._destroyed=new ie.a;var f=t.nativeElement;o.IOS||o.ANDROID?!o.IOS||"INPUT"!==f.nodeName&&"TEXTAREA"!==f.nodeName||(f.style.webkitUserSelect=f.style.userSelect=""):this._manualListeners.set("mouseenter",function(){return h.show()}).set("mouseleave",function(){return h.hide()}).forEach(function(e,t){return f.addEventListener(t,e)}),f.draggable&&"none"===f.style.webkitUserDrag&&(f.style.webkitUserDrag=""),s.monitor(f).pipe(se(this._destroyed)).subscribe(function(e){e?"keyboard"===e&&i.run(function(){return h.show()}):i.run(function(){return h.hide(0)})})}return Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=p(e),this._disabled&&this.hide(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=e?(""+e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ariaDescriber.describe(this._elementRef.nativeElement,this.message))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipClass",{get:function(){return this._tooltipClass},set:function(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){var e=this;this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._platform.IOS||(this._manualListeners.forEach(function(t,n){return e._elementRef.nativeElement.removeEventListener(n,t)}),this._manualListeners.clear()),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},e.prototype.show=function(e){var t=this;if(void 0===e&&(e=this.showDelay),!this.disabled&&this.message){var n=this._createOverlay();this._detach(),this._portal=this._portal||new Ze(It,this._viewContainerRef),this._tooltipInstance=n.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(se(this._destroyed)).subscribe(function(){return t._detach()}),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}},e.prototype.hide=function(e){void 0===e&&(e=this.hideDelay),this._tooltipInstance&&this._tooltipInstance.hide(e)},e.prototype.toggle=function(){this._isTooltipVisible()?this.hide():this.show()},e.prototype._isTooltipVisible=function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()},e.prototype._handleKeydown=function(e){this._isTooltipVisible()&&27===e.keyCode&&(e.stopPropagation(),this.hide(0))},e.prototype._handleTouchend=function(){this.hide(this._defaultOptions.touchendHideDelay)},e.prototype._createOverlay=function(){var e=this;if(this._overlayRef)return this._overlayRef;var t=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8),n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef);return t.withScrollableContainers(n),t.positionChanges.pipe(se(this._destroyed)).subscribe(function(t){e._tooltipInstance&&t.scrollableViewProperties.isOverlayClipped&&e._tooltipInstance.isVisible()&&e._ngZone.run(function(){return e.hide(0)})}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(se(this._destroyed)).subscribe(function(){return e._detach()}),this._overlayRef},e.prototype._detach=function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null},e.prototype._updatePosition=function(){var e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([Object(d.__assign)({},t.main,n.main),Object(d.__assign)({},t.fallback,n.fallback)])},e.prototype._getOrigin=function(){var e,t=!this._dir||"ltr"==this._dir.value,n=this.position;if("above"==n||"below"==n)e={originX:"center",originY:"above"==n?"top":"bottom"};else if("before"==n||"left"==n&&t||"right"==n&&!t)e={originX:"start",originY:"center"};else{if(!("after"==n||"right"==n&&t||"left"==n&&!t))throw Ct(n);e={originX:"end",originY:"center"}}var r=this._invertPosition(e.originX,e.originY);return{main:e,fallback:{originX:r.x,originY:r.y}}},e.prototype._getOverlayPosition=function(){var e,t=!this._dir||"ltr"==this._dir.value,n=this.position;if("above"==n)e={overlayX:"center",overlayY:"bottom"};else if("below"==n)e={overlayX:"center",overlayY:"top"};else if("before"==n||"left"==n&&t||"right"==n&&!t)e={overlayX:"end",overlayY:"center"};else{if(!("after"==n||"right"==n&&t||"left"==n&&!t))throw Ct(n);e={overlayX:"start",overlayY:"center"}}var r=this._invertPosition(e.overlayX,e.overlayY);return{main:e,fallback:{overlayX:r.x,overlayY:r.y}}},e.prototype._updateTooltipMessage=function(){var e=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(We(1),se(this._destroyed)).subscribe(function(){e._tooltipInstance&&e._overlayRef.updatePosition()}))},e.prototype._setTooltipClass=function(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())},e.prototype._invertPosition=function(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}},e}(),It=function(){function e(e,t){this._changeDetectorRef=e,this._breakpointObserver=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new ie.a,this._isHandset=this._breakpointObserver.observe(we.Handset)}return e.prototype.show=function(e){var t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(function(){t._visibility="visible",t._markForCheck()},e)},e.prototype.hide=function(e){var t=this;this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(function(){t._visibility="hidden",t._markForCheck()},e)},e.prototype.afterHidden=function(){return this._onHide.asObservable()},e.prototype.isVisible=function(){return"visible"===this._visibility},e.prototype._animationStart=function(){this._closeOnInteraction=!1},e.prototype._animationDone=function(e){var t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)},e.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide(0)},e.prototype._markForCheck=function(){this._changeDetectorRef.markForCheck()},e}(),kt=function(){};function Nt(e,t){return void 0===t&&(t=Ce),function(n){return n.lift(new Dt(e,t))}}var Dt=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Ft(e,this.dueTime,this.scheduler))},e}(),Ft=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return d.__extends(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ut,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(De.a);function Ut(e){e.debouncedNext()}var Bt=function(){function e(){}return e.prototype.create=function(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),jt=function(){function e(e){this._mutationObserverFactory=e,this._observedElements=new Map}return e.prototype.ngOnDestroy=function(){var e=this;this._observedElements.forEach(function(t,n){return e._cleanupObserver(n)})},e.prototype.observe=function(e){var t=this,n=e instanceof r.ElementRef?e.nativeElement:e;return oe.a.create(function(e){var r=t._observeElement(n).subscribe(e);return function(){r.unsubscribe(),t._unobserveElement(n)}})},e.prototype._observeElement=function(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{var t=new ie.a,n=this._mutationObserverFactory.create(function(e){return t.next(e)});n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream},e.prototype._unobserveElement=function(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))},e.prototype._cleanupObserver=function(e){if(this._observedElements.has(e)){var t=this._observedElements.get(e),n=t.observer,r=t.stream;n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(Bt))},token:e,providedIn:"root"}),e}(),zt=function(){function e(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new r.EventEmitter,this._disabled=!1,this._currentSubscription=null}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=p(e),this._disabled?this._unsubscribe():this._subscribe()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debounce",{get:function(){return this._debounce},set:function(e){this._debounce=function(e,t){return void 0===t&&(t=0),function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}(e),this._subscribe()},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this._currentSubscription||this.disabled||this._subscribe()},e.prototype.ngOnDestroy=function(){this._unsubscribe()},e.prototype._subscribe=function(){var e=this;this._unsubscribe();var t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(function(){e._currentSubscription=(e.debounce?t.pipe(Nt(e.debounce)):t).subscribe(e.event)})},e.prototype._unsubscribe=function(){this._currentSubscription&&this._currentSubscription.unsubscribe()},e}(),Gt=function(){},Vt=new r.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.inject)(V)}}),Ht=function(){function e(e){if(this.value="ltr",this.change=new r.EventEmitter,e){var t=(e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null);this.value="ltr"===t||"rtl"===t?t:"ltr"}}return e.prototype.ngOnDestroy=function(){this.change.complete()},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(Vt,8))},token:e,providedIn:"root"}),e}(),Wt=function(){},qt=n("+umK");function Xt(e,t,n){return function(r){return r.lift(new Qt(e,t,n))}}var Qt=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Yt(e,this.nextOrObserver,this.error,this.complete))},e}(),Yt=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tapNext=qt.a,o._tapError=qt.a,o._tapComplete=qt.a,o._tapError=r||qt.a,o._tapComplete=i||qt.a,Object(ae.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||qt.a,o._tapError=n.error||qt.a,o._tapComplete=n.complete||qt.a),o}return d.__extends(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(De.a);function Zt(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}var Jt=0,Kt=new Map,$t=null,en=function(){function e(e){this._document=e}return e.prototype.describe=function(e,t){this._canBeDescribed(e,t)&&(Kt.has(t)||this._createMessageElement(t),this._isElementDescribedByMessage(e,t)||this._addMessageReference(e,t))},e.prototype.removeDescription=function(e,t){if(this._canBeDescribed(e,t)){this._isElementDescribedByMessage(e,t)&&this._removeMessageReference(e,t);var n=Kt.get(t);n&&0===n.referenceCount&&this._deleteMessageElement(t),$t&&0===$t.childNodes.length&&this._deleteMessagesContainer()}},e.prototype.ngOnDestroy=function(){for(var e=this._document.querySelectorAll("[cdk-describedby-host]"),t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute("cdk-describedby-host");$t&&this._deleteMessagesContainer(),Kt.clear()},e.prototype._createMessageElement=function(e){var t=this._document.createElement("div");t.setAttribute("id","cdk-describedby-message-"+Jt++),t.appendChild(this._document.createTextNode(e)),this._createMessagesContainer(),$t.appendChild(t),Kt.set(e,{messageElement:t,referenceCount:0})},e.prototype._deleteMessageElement=function(e){var t=Kt.get(e),n=t&&t.messageElement;$t&&n&&$t.removeChild(n),Kt.delete(e)},e.prototype._createMessagesContainer=function(){if(!$t){var e=this._document.getElementById("cdk-describedby-message-container");e&&e.parentNode.removeChild(e),($t=this._document.createElement("div")).id="cdk-describedby-message-container",$t.setAttribute("aria-hidden","true"),$t.style.display="none",this._document.body.appendChild($t)}},e.prototype._deleteMessagesContainer=function(){$t&&$t.parentNode&&($t.parentNode.removeChild($t),$t=null)},e.prototype._removeCdkDescribedByReferenceIds=function(e){var t=Zt(e,"aria-describedby").filter(function(e){return 0!=e.indexOf("cdk-describedby-message")});e.setAttribute("aria-describedby",t.join(" "))},e.prototype._addMessageReference=function(e,t){var n,r,i,o,a=Kt.get(t);i=a.messageElement.id,(o=Zt(n=e,r="aria-describedby")).some(function(e){return e.trim()==i.trim()})||(o.push(i.trim()),n.setAttribute(r,o.join(" "))),e.setAttribute("cdk-describedby-host",""),a.referenceCount++},e.prototype._removeMessageReference=function(e,t){var n,r,i,o,a=Kt.get(t);a.referenceCount--,i=a.messageElement.id,o=Zt(n=e,r="aria-describedby").filter(function(e){return e!=i.trim()}),n.setAttribute(r,o.join(" ")),e.removeAttribute("cdk-describedby-host")},e.prototype._isElementDescribedByMessage=function(e,t){var n=Zt(e,"aria-describedby"),r=Kt.get(t),i=r&&r.messageElement.id;return!!i&&-1!=n.indexOf(i)},e.prototype._canBeDescribed=function(e,t){return e.nodeType===this._document.ELEMENT_NODE&&null!=t&&!!(""+t).trim()},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(V))},token:e,providedIn:"root"}),e}(),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.setActiveItem=function(t){this.activeItem&&this.activeItem.setInactiveStyles(),e.prototype.setActiveItem.call(this,t),this.activeItem&&this.activeItem.setActiveStyles()},t}(function(){function e(e){var t=this;this._items=e,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new ie.a,this._typeaheadSubscription=Te.a.EMPTY,this._vertical=!0,this._skipPredicateFn=function(e){return e.disabled},this._pressedLetters=[],this.tabOut=new ie.a,this.change=new ie.a,e instanceof r.QueryList&&e.changes.subscribe(function(e){if(t._activeItem){var n=e.toArray().indexOf(t._activeItem);n>-1&&n!==t._activeItemIndex&&(t._activeItemIndex=n)}})}return e.prototype.skipPredicate=function(e){return this._skipPredicateFn=e,this},e.prototype.withWrap=function(e){return void 0===e&&(e=!0),this._wrap=e,this},e.prototype.withVerticalOrientation=function(e){return void 0===e&&(e=!0),this._vertical=e,this},e.prototype.withHorizontalOrientation=function(e){return this._horizontal=e,this},e.prototype.withTypeAhead=function(e){var t=this;if(void 0===e&&(e=200),this._items.length&&this._items.some(function(e){return"function"!=typeof e.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Xt(function(e){return t._pressedLetters.push(e)}),Nt(e),Fe(function(){return t._pressedLetters.length>0}),Object(s.a)(function(){return t._pressedLetters.join("")})).subscribe(function(e){for(var n=t._getItemsArray(),r=1;r<n.length+1;r++){var i=(t._activeItemIndex+r)%n.length,o=n[i];if(!t._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){t.setActiveItem(i);break}}t._pressedLetters=[]}),this},e.prototype.setActiveItem=function(e){var t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)},e.prototype.onKeydown=function(e){var t=e.keyCode;switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical){this.setNextItemActive();break}return;case 38:if(this._vertical){this.setPreviousItemActive();break}return;case 39:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}return;case 37:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}return;default:return void(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t)))}this._pressedLetters=[],e.preventDefault()},Object.defineProperty(e.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),e.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},e.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},e.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},e.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},e.prototype.updateActiveItem=function(e){var t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItemIndex=n,this._activeItem=t[n]},e.prototype.updateActiveItemIndex=function(e){this.updateActiveItem(e)},e.prototype._setActiveItemByDelta=function(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)},e.prototype._setActiveInWrapMode=function(e){for(var t=this._getItemsArray(),n=1;n<=t.length;n++){var r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}},e.prototype._setActiveInDefaultMode=function(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)},e.prototype._setActiveItemByIndex=function(e,t){var n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}},e.prototype._getItemsArray=function(){return this._items instanceof r.QueryList?this._items.toArray():this._items},e}()),nn=function(){function e(e,t){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return e.prototype.monitor=function(e,t){var n=this;if(void 0===t&&(t=!1),!this._platform.isBrowser)return de(null);if(this._elementInfo.has(e)){var r=this._elementInfo.get(e);return r.checkChildren=t,r.subject.asObservable()}var i={unlisten:function(){},checkChildren:t,subject:new ie.a};this._elementInfo.set(e,i),this._incrementMonitoredElementCount();var o=function(t){return n._onFocus(t,e)},a=function(t){return n._onBlur(t,e)};return this._ngZone.runOutsideAngular(function(){e.addEventListener("focus",o,!0),e.addEventListener("blur",a,!0)}),i.unlisten=function(){e.removeEventListener("focus",o,!0),e.removeEventListener("blur",a,!0)},i.subject.asObservable()},e.prototype.stopMonitoring=function(e){var t=this._elementInfo.get(e);t&&(t.unlisten(),t.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())},e.prototype.focusVia=function(e,t,n){this._setOriginForCurrentEventQueue(t),"function"==typeof e.focus&&e.focus(n)},e.prototype.ngOnDestroy=function(){var e=this;this._elementInfo.forEach(function(t,n){return e.stopMonitoring(n)})},e.prototype._registerGlobalListeners=function(){var e=this;if(this._platform.isBrowser){var t=function(){e._lastTouchTarget=null,e._setOriginForCurrentEventQueue("keyboard")},n=function(){e._lastTouchTarget||e._setOriginForCurrentEventQueue("mouse")},r=function(t){null!=e._touchTimeoutId&&clearTimeout(e._touchTimeoutId),e._lastTouchTarget=t.target,e._touchTimeoutId=setTimeout(function(){return e._lastTouchTarget=null},650)},i=function(){e._windowFocused=!0,e._windowFocusTimeoutId=setTimeout(function(){return e._windowFocused=!1})};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",t,!0),document.addEventListener("mousedown",n,!0),document.addEventListener("touchstart",r,!Q()||{passive:!0,capture:!0}),window.addEventListener("focus",i)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",t,!0),document.removeEventListener("mousedown",n,!0),document.removeEventListener("touchstart",r,!Q()||{passive:!0,capture:!0}),window.removeEventListener("focus",i),clearTimeout(e._windowFocusTimeoutId),clearTimeout(e._touchTimeoutId),clearTimeout(e._originTimeoutId)}}},e.prototype._toggleClass=function(e,t,n){n?e.classList.add(t):e.classList.remove(t)},e.prototype._setClasses=function(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))},e.prototype._setOriginForCurrentEventQueue=function(e){var t=this;this._ngZone.runOutsideAngular(function(){t._origin=e,t._originTimeoutId=setTimeout(function(){return t._origin=null},1)})},e.prototype._wasCausedByTouch=function(e){var t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))},e.prototype._onFocus=function(e,t){var n=this._elementInfo.get(t);if(n&&(n.checkChildren||t===e.target)){var r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}},e.prototype._onBlur=function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))},e.prototype._emitOrigin=function(e,t){this._ngZone.run(function(){return e.next(t)})},e.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},e.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(r.NgZone),Object(r.inject)(X))},token:e,providedIn:"root"}),e}(),rn=function(){},on=null;function an(){return on}var sn,un={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},ln={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r["\u0275global"].Node&&(sn=r["\u0275global"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var hn,fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){var e;e=new t,on||(on=e)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var r;(r=e)[t].apply(r,Object(d.__spread)(n))},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return un},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return sn.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&cn.hasOwnProperty(t)&&(t=cn[t]))}return ln[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=dn||(dn=document.querySelector("base"))?dn.getAttribute("href"):null;return null==n?null:(t=n,hn||(hn=document.createElement("a")),hn.setAttribute("href",t),"/"===hn.pathname.charAt(0)?hn.pathname:"/"+hn.pathname)},t.prototype.resetBaseElement=function(){dn=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return T(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=t.getStyle(n,r[i]+"AnimationName")){t._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}return Object(d.__extends)(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),dn=null,pn=V;function mn(){return!!window.history.pushState}var vn=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return Object(d.__extends)(t,e),t.prototype._init=function(){this.location=an().getLocation(),this._history=an().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return an().getBaseHref(this._doc)},t.prototype.onPopState=function(e){an().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){an().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){mn()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){mn()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[pn]}]}]},t}(g),gn=new r.InjectionToken("TRANSITION_ID"),yn=[{provide:r.APP_INITIALIZER,useFactory:function(e,t,n){return function(){n.get(r.ApplicationInitStatus).donePromise.then(function(){var n=an();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[gn,pn,r.Injector],multi:!0}],bn=function(){function e(){}return e.init=function(){Object(r.setTestabilityGetter)(new e)},e.prototype.addToWindow=function(e){r["\u0275global"].getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r["\u0275global"].getAllAngularTestabilities=function(){return e.getAllTestabilities()},r["\u0275global"].getAllAngularRootElements=function(){return e.getAllRootElements()},r["\u0275global"].frameworkStabilizers||(r["\u0275global"].frameworkStabilizers=[]),r["\u0275global"].frameworkStabilizers.push(function(e){var t=r["\u0275global"].getAllAngularTestabilities(),n=t.length,i=!1,o=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(o)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?an().isShadowRoot(t)?this.findTestabilityInTree(e,an().getHost(t),!0):this.findTestabilityInTree(e,an().parentElement(t),!0):null},e}();function _n(e,t){"undefined"!=typeof COMPILED&&COMPILED||((r["\u0275global"].ng=r["\u0275global"].ng||{})[e]=t)}var xn={ApplicationRef:r.ApplicationRef,NgZone:r.NgZone};function wn(e){return Object(r.getDebugNode)(e)}var En=new r.InjectionToken("EventManagerPlugins"),Mn=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},e}(),Tn=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var r=an().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},e}(),Sn=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),An=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return Object(d.__extends)(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return an().remove(e)})},t}(Sn),Cn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rn=/%COMP%/g,Ln="_nghost-%COMP%",Pn="_ngcontent-%COMP%";function On(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?On(e,i,n):(i=i.replace(Rn,e),n.push(i))}return n}function In(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var kn=function(){function e(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new Nn(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Bn(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case r.ViewEncapsulation.Native:case r.ViewEncapsulation.ShadowDom:return new jn(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=On(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),Nn=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(Cn[t],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var i=Cn[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=Cn[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,i){i&r.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,i&r.RendererStyleFlags2.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&r.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){Fn(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return Fn(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,In(n)):this.eventManager.addEventListener(e,t,In(n))},e}(),Dn="@".charCodeAt(0);function Fn(e,t){if(e.charCodeAt(0)===Dn)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Un,Bn=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.component=r;var o=On(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=Pn.replace(Rn,r.id),i.hostAttr=Ln.replace(Rn,r.id),i}return Object(d.__extends)(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},t}(Nn),jn=function(e){function t(t,n,i,o){var a=e.call(this,t)||this;a.sharedStylesHost=n,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===r.ViewEncapsulation.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=On(o.id,o.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],a.shadowRoot.appendChild(l)}return a}return Object(d.__extends)(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(Nn),zn="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Gn=zn("addEventListener"),Vn=zn("removeEventListener"),Hn={},Wn="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[zn("BLACK_LISTED_EVENTS")]&&(Un={});var qn=function(e){return!!Un&&Un.hasOwnProperty(e)},Xn=function(e){var t=Hn[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==e[Wn];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Qn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.ngZone=n,r&&function(e){return e===W}(r)||i.patchEvent(),i}return Object(d.__extends)(t,e),t.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Wn]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var i=this,o=n;if(!e[Gn]||r.NgZone.isInAngularZone()&&!qn(t))e.addEventListener(t,o,!1);else{var a=Hn[t];a||(a=Hn[t]=zn("ANGULAR"+t+"FALSE"));var s=e[a],u=s&&s.length>0;s||(s=e[a]=[]);var l=qn(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===o){c=!0;break}c||s.push({zone:l,handler:o})}u||e[Gn](t,Xn,!1)}return function(){return i.removeEventListener(e,t,o)}},t.prototype.removeEventListener=function(e,t,n){var r=e[Vn];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=Hn[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(e,[t,Xn,!1]):e.removeEventListener.apply(e,[t,n,!1])},t}(Tn),Yn={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Zn=new r.InjectionToken("HammerGestureConfig"),Jn=new r.InjectionToken("HammerLoader"),Kn=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),$n=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(d.__extends)(t,e),t.prototype.supports=function(e){return!(!Yn.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},t.prototype.addEventListener=function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(e,t,n))}).catch(function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(e),a=function(e){i.runGuarded(function(){n(e)})};return o.on(t,a),function(){return o.off(t,a)}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},t}(Tn),er=["alt","control","meta","shift"],tr={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},nr=function(e){function t(t){return e.call(this,t)||this}return Object(d.__extends)(t,e),t.prototype.supports=function(e){return null!=t.parseEventName(e)},t.prototype.addEventListener=function(e,n,r){var i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return an().onAndCancel(e,i.domEventName,o)})},t.parseEventName=function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=t._normalizeKey(n.pop()),o="";if(er.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},t.getEventFullKey=function(e){var t="",n=an().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),er.forEach(function(r){r!=n&&(0,tr[r])(e)&&(t+=r+".")}),t+=n},t.eventCallback=function(e,n,r){return function(i){t.getEventFullKey(i)===e&&r.runGuarded(function(){return n(i)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},t}(Tn),rr=function(){},ir=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return Object(d.__extends)(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case r.SecurityContext.NONE:return t;case r.SecurityContext.HTML:return t instanceof ar?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),Object(r["\u0275_sanitizeHtml"])(this._doc,String(t)));case r.SecurityContext.STYLE:return t instanceof sr?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Object(r["\u0275_sanitizeStyle"])(t));case r.SecurityContext.SCRIPT:if(t instanceof ur)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case r.SecurityContext.URL:return t instanceof cr||t instanceof lr?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Object(r["\u0275_sanitizeUrl"])(String(t)));case r.SecurityContext.RESOURCE_URL:if(t instanceof cr)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof or)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new ar(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new sr(e)},t.prototype.bypassSecurityTrustScript=function(e){return new ur(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new lr(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new cr(e)},t}(rr),or=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(or),sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.getTypeName=function(){return"Style"},t}(or),ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.getTypeName=function(){return"Script"},t}(or),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.getTypeName=function(){return"URL"},t}(or),cr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(or),hr=[{provide:r.PLATFORM_ID,useValue:H},{provide:r.PLATFORM_INITIALIZER,useValue:function(){fn.makeCurrent(),bn.init()},multi:!0},{provide:g,useClass:vn,deps:[pn]},{provide:pn,useFactory:function(){return document},deps:[]}],fr=Object(r.createPlatformFactory)(r.platformCore,"browser",hr);function dr(){return new r.ErrorHandler}var pr=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return e.withServerTransition=function(t){return{ngModule:e,providers:[{provide:r.APP_ID,useValue:t.appId},{provide:gn,useExisting:r.APP_ID},yn]}},e}();"undefined"!=typeof window&&window;var mr=new r.InjectionToken("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),vr=function(){function e(e){this._sanityChecksEnabled=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return e.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Object(r.isDevMode)()&&!this._isTestEnv()},e.prototype._isTestEnv=function(){return this._window&&(this._window.__karma__||this._window.jasmine)},e.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},e.prototype._checkThemeIsPresent=function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);var t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}},e.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(this._areChecksEnabled()&&!this._window.Hammer&&console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},e}();function gr(e){return function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t)||this;return r._disabled=!1,r}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=p(e)},enumerable:!0,configurable:!0}),t}(e)}function yr(e,t){return function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return i.color=t,i}return Object(d.__extends)(n,e),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){var n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)},enumerable:!0,configurable:!0}),n}(e)}function br(e){return function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t)||this;return r._disableRipple=!1,r}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(e){this._disableRipple=p(e)},enumerable:!0,configurable:!0}),t}(e)}function _r(e,t){return void 0===t&&(t=0),function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return i._tabIndex=t,i}return Object(d.__extends)(n,e),Object.defineProperty(n.prototype,"tabIndex",{get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?e:t},enumerable:!0,configurable:!0}),n}(e)}var xr=function(){function e(){}return e.prototype.isErrorState=function(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),wr=function(){var e={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return e[e.FADING_IN]="FADING_IN",e[e.VISIBLE]="VISIBLE",e[e.FADING_OUT]="FADING_OUT",e[e.HIDDEN]="HIDDEN",e}(),Er=function(){function e(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=wr.HIDDEN}return e.prototype.fadeOut=function(){this._renderer.fadeOutRipple(this)},e}(),Mr={enterDuration:450,exitDuration:400},Tr=800,Sr=function(){function e(e,t,n,r){var i=this;this._target=e,this._ngZone=t,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._eventOptions=!!Q()&&{passive:!0},this.onMousedown=function(e){var t=function(e){return 0===e.buttons}(e),n=i._lastTouchStartEvent&&Date.now()<i._lastTouchStartEvent+Tr;i._target.rippleDisabled||t||n||(i._isPointerDown=!0,i.fadeInRipple(e.clientX,e.clientY,i._target.rippleConfig))},this.onTouchStart=function(e){i._target.rippleDisabled||(i._lastTouchStartEvent=Date.now(),i._isPointerDown=!0,i.fadeInRipple(e.touches[0].clientX,e.touches[0].clientY,i._target.rippleConfig))},this.onPointerUp=function(){i._isPointerDown&&(i._isPointerDown=!1,i._activeRipples.forEach(function(e){!e.config.persistent&&(e.state===wr.VISIBLE||e.config.terminateOnPointerUp&&e.state===wr.FADING_IN)&&e.fadeOut()}))},r.isBrowser&&(this._containerElement=n.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown),this._triggerEvents.set("mouseup",this.onPointerUp),this._triggerEvents.set("mouseleave",this.onPointerUp),this._triggerEvents.set("touchstart",this.onTouchStart),this._triggerEvents.set("touchend",this.onPointerUp))}return e.prototype.fadeInRipple=function(e,t,n){var r=this;void 0===n&&(n={});var i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object(d.__assign)({},Mr,n.animation);n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);var a=n.radius||function(e,t,n){var r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),s=e-i.left,u=t-i.top,l=o.enterDuration/(n.speedFactor||1),c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-a+"px",c.style.top=u-a+"px",c.style.height=2*a+"px",c.style.width=2*a+"px",c.style.backgroundColor=n.color||null,c.style.transitionDuration=l+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var h=new Er(this,c,n);return h.state=wr.FADING_IN,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this.runTimeoutOutsideZone(function(){var e=h===r._mostRecentTransientRipple;h.state=wr.VISIBLE,n.persistent||e&&r._isPointerDown||h.fadeOut()},l),h},e.prototype.fadeOutRipple=function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var n=e.element,r=Object(d.__assign)({},Mr,e.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",e.state=wr.FADING_OUT,this.runTimeoutOutsideZone(function(){e.state=wr.HIDDEN,n.parentNode.removeChild(n)},r.exitDuration)}},e.prototype.fadeOutAll=function(){this._activeRipples.forEach(function(e){return e.fadeOut()})},e.prototype.setupTriggerEvents=function(e){var t=this;e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(function(){t._triggerEvents.forEach(function(n,r){return e.addEventListener(r,n,t._eventOptions)})}),this._triggerElement=e)},e.prototype.runTimeoutOutsideZone=function(e,t){void 0===t&&(t=0),this._ngZone.runOutsideAngular(function(){return setTimeout(e,t)})},e.prototype._removeTriggerEvents=function(){var e=this;this._triggerElement&&this._triggerEvents.forEach(function(t,n){e._triggerElement.removeEventListener(n,t,e._eventOptions)})},e}(),Ar=new r.InjectionToken("mat-ripple-global-options"),Cr=function(){function e(e,t,n,r,i){this._elementRef=e,this.radius=0,this.speedFactor=1,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Sr(this,t,e,n),"NoopAnimations"===i&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()},e.prototype.ngOnDestroy=function(){this._rippleRenderer._removeTriggerEvents()},e.prototype.fadeOutAll=function(){this._rippleRenderer.fadeOutAll()},Object.defineProperty(e.prototype,"rippleConfig",{get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object(d.__assign)({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp,speedFactor:this.speedFactor*(this._globalOptions.baseSpeedFactor||1)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rippleDisabled",{get:function(){return this.disabled||!!this._globalOptions.disabled},enumerable:!0,configurable:!0}),e.prototype._setupTriggerEventsIfEnabled=function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)},e.prototype.launch=function(e,t,n){return void 0===t&&(t=0),"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object(d.__assign)({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object(d.__assign)({},this.rippleConfig,e))},e}(),Rr=function(){},Lr=function(e){this._animationMode=e,this.state="unchecked",this.disabled=!1},Pr=function(){},Or=0,Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelId="mat-optgroup-label-"+Or++,t}return Object(d.__extends)(t,e),t}(gr(function(){})),kr=0,Nr=new r.InjectionToken("MAT_OPTION_PARENT_COMPONENT"),Dr=function(){function e(e,t,n,i){this._element=e,this._changeDetectorRef=t,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+kr++,this.onSelectionChange=new r.EventEmitter,this._stateChanges=new ie.a}return Object.defineProperty(e.prototype,"multiple",{get:function(){return this._parent&&this._parent.multiple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.group&&this.group.disabled||this._disabled},set:function(e){this._disabled=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._parent&&this._parent.disableRipple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewValue",{get:function(){return(this._getHostElement().textContent||"").trim()},enumerable:!0,configurable:!0}),e.prototype.select=function(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())},e.prototype.deselect=function(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())},e.prototype.focus=function(){var e=this._getHostElement();"function"==typeof e.focus&&e.focus()},e.prototype.setActiveStyles=function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())},e.prototype.setInactiveStyles=function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())},e.prototype.getLabel=function(){return this.viewValue},e.prototype._handleKeydown=function(e){13!==e.keyCode&&32!==e.keyCode||(this._selectViaInteraction(),e.preventDefault())},e.prototype._selectViaInteraction=function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))},e.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},e.prototype._getHostElement=function(){return this._element.nativeElement},e.prototype.ngAfterViewChecked=function(){if(this._selected){var e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}},e.prototype.ngOnDestroy=function(){this._stateChanges.complete()},e.prototype._emitSelectionChangeEvent=function(e){void 0===e&&(e=!1),this.onSelectionChange.emit(new function(e,t){void 0===t&&(t=!1),this.source=e,this.isUserInput=t}(this,e))},e}();function Fr(e,t,n){if(n.length){for(var r=t.toArray(),i=n.toArray(),o=0,a=0;a<e+1;a++)r[a].group&&r[a].group===i[o]&&o++;return o}return 0}var Ur=function(){},Br=new r.InjectionToken("mat-label-global-options"),jr=r["\u0275crt"]({encapsulation:2,styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:2px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}@media screen and (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"initial, void, hidden",styles:{type:6,styles:{transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.0, 0.0, 0.2, 1)"},options:null},{type:1,expr:"* => hidden",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}});function zr(e){return r["\u0275vid"](2,[(e()(),r["\u0275eld"](0,0,null,null,3,"div",[["class","mat-tooltip"]],[[2,"mat-tooltip-handset",null],[24,"@state",0]],[[null,"@state.start"],[null,"@state.done"]],function(e,t,n){var r=!0,i=e.component;return"@state.start"===t&&(r=!1!==i._animationStart()&&r),"@state.done"===t&&(r=!1!==i._animationDone(n)&&r),r},null,null)),r["\u0275did"](1,278528,null,0,S,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r["\u0275pid"](131072,z,[r.ChangeDetectorRef]),(e()(),r["\u0275ted"](3,null,["",""]))],function(e,t){e(t,1,0,"mat-tooltip",t.component.tooltipClass)},function(e,t){var n=t.component;e(t,0,0,r["\u0275unv"](t,0,0,r["\u0275nov"](t,2).transform(n._isHandset)).matches,n._visibility),e(t,3,0,n.message)})}var Gr=r["\u0275ccf"]("mat-tooltip-component",It,function(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"mat-tooltip-component",[["aria-hidden","true"]],[[4,"zoom",null]],[["body","click"]],function(e,t,n){var i=!0;return"body:click"===t&&(i=!1!==r["\u0275nov"](e,1)._handleBodyInteraction()&&i),i},zr,jr)),r["\u0275did"](1,49152,null,0,It,[r.ChangeDetectorRef,_e],null,null)],null,function(e,t){e(t,0,0,"visible"===r["\u0275nov"](t,1)._visibility?1:null)})},{},{},[]),Vr="accent",Hr="primary",Wr=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],qr=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;o._platform=n,o._focusMonitor=r,o._animationMode=i,o.isRoundButton=o._hasHostAttributes("mat-fab","mat-mini-fab"),o.isIconButton=o._hasHostAttributes("mat-icon-button");for(var a=0,s=Wr;a<s.length;a++){var u=s[a];o._hasHostAttributes(u)&&t.nativeElement.classList.add(u)}return o._focusMonitor.monitor(o._elementRef.nativeElement,!0),o.isRoundButton?o.color=Vr:o._hasHostAttributes("mat-flat-button")&&(o.color=Hr),o}return Object(d.__extends)(t,e),t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},t.prototype.focus=function(){this._getHostElement().focus()},t.prototype._getHostElement=function(){return this._elementRef.nativeElement},t.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},t.prototype._hasHostAttributes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some(function(t){return e._getHostElement().hasAttribute(t)})},t}(yr(gr(br(function(e){this._elementRef=e})))),Xr=function(){},Qr=n("NSYL"),Yr=function(e){function t(t,n){var i=e.call(this)||this;return i._nextAnimationId=0,i._renderer=t.createRenderer(n.body,{id:"0",encapsulation:r.ViewEncapsulation.None,styles:[],data:{animation:[]}}),i}return Object(d.__extends)(t,e),t.prototype.build=function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?Object(f.i)(e):e;return Kr(this._renderer,null,t,"register",[n]),new Zr(t,this._renderer)},t}(f.b),Zr=function(e){function t(t,n){var r=e.call(this)||this;return r._id=t,r._renderer=n,r}return Object(d.__extends)(t,e),t.prototype.create=function(e,t){return new Jr(this._id,e,t||{},this._renderer)},t}(f.c),Jr=function(){function e(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return e.prototype._listen=function(e,t){return this._renderer.listen(this.element,"@@"+this.id+":"+e,t)},e.prototype._command=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Kr(this._renderer,this.element,this.id,e,t)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){return 0},e}();function Kr(e,t,n,r,i){return e.setProperty(t,"@@"+n+":"+r,i)}var $r=function(){function e(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new ei("",r,this.engine),this._rendererCache.set(r,i)),i}var o=t.id,a=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,e),t.data.animation.forEach(function(t){return n.engine.registerTrigger(o,a,e,t.name,t)}),new ti(this,a,r,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then(function(){e._microtaskId++})},e.prototype.scheduleListenerCallback=function(e,t,n){var r=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return t(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(e){var t=Object(d.__read)(e,2);(0,t[0])(t[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}(),ei=function(){function e(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(e){return t.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,t){return this.delegate.createElement(e,t)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)},e.prototype.insertBefore=function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)},e.prototype.removeChild=function(e,t){this.engine.onRemove(this.namespaceId,t,this.delegate)},e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)},e.prototype.setValue=function(e,t){this.delegate.setValue(e,t)},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.disableAnimations=function(e,t){this.engine.disableAnimations(e,t)},e}(),ti=function(e){function t(t,n,r,i){var o=e.call(this,n,r,i)||this;return o.factory=t,o.namespaceId=n,o}return Object(d.__extends)(t,e),t.prototype.setProperty=function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)},t.prototype.listen=function(e,t,n){var r,i,o,a=this;if("@"==t.charAt(0)){var s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),u=t.substr(1),l="";return"@"!=u.charAt(0)&&(u=(r=Object(d.__read)((i=u,o=i.indexOf("."),[i.substring(0,o),i.substr(o+1)]),2))[0],l=r[1]),this.engine.listen(this.namespaceId,s,u,l,function(e){a.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)},t}(ei),ni=function(e){function t(t,n,r){return e.call(this,t.body,n,r)||this}return Object(d.__extends)(t,e),t}(Qr.b);function ri(){return Object(Qr.h)()?new Qr.f:new Qr.d}function ii(){return new Qr.g}function oi(e,t,n){return new $r(e,t,n)}var ai=new r.InjectionToken("AnimationModuleType"),si=function(){},ui=r["\u0275crt"]({encapsulation:2,styles:[".mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button[disabled]{box-shadow:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-fab::-moz-focus-inner{border:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-fab[disabled]{box-shadow:none}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-mini-fab[disabled]{box-shadow:none}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function li(e){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{ripple:0}),(e()(),r["\u0275eld"](1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),r["\u0275ncd"](null,0),(e()(),r["\u0275eld"](3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](4,212992,[[1,4]],0,Cr,[r.ElementRef,r.NgZone,X,[2,Ar],[2,ai]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(e()(),r["\u0275eld"](5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())},function(e,t){var n=t.component;e(t,3,0,n.isRoundButton||n.isIconButton,r["\u0275nov"](t,4).unbounded)})}var ci=r["\u0275crt"]({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}@media screen and (-ms-high-contrast:active){.mat-option{margin:0 1px}.mat-option.mat-active{border:solid 1px currentColor;margin:0}}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}});function hi(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null],[2,"_mat-animation-noopable",null]],null,null,pi,di)),r["\u0275did"](1,49152,null,0,Lr,[[2,ai]],{state:[0,"state"],disabled:[1,"disabled"]},null)],function(e,t){var n=t.component;e(t,1,0,n.selected?"checked":"",n.disabled)},function(e,t){e(t,0,0,"indeterminate"===r["\u0275nov"](t,1).state,"checked"===r["\u0275nov"](t,1).state,r["\u0275nov"](t,1).disabled,"NoopAnimations"===r["\u0275nov"](t,1)._animationMode)})}function fi(e){return r["\u0275vid"](2,[(e()(),r["\u0275and"](16777216,null,null,1,null,hi)),r["\u0275did"](1,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),r["\u0275ncd"](null,0),(e()(),r["\u0275eld"](4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](5,212992,null,0,Cr,[r.ElementRef,r.NgZone,X,[2,Ar],[2,ai]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(e,t){var n=t.component;e(t,1,0,n.multiple),e(t,5,0,n.disabled||n.disableRipple,n._getHostElement())},function(e,t){e(t,4,0,r["\u0275nov"](t,5).unbounded)})}var di=r["\u0275crt"]({encapsulation:2,styles:[".mat-pseudo-checkbox{width:20px;height:20px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:7px;left:0;width:16px;opacity:1}.mat-pseudo-checkbox-checked::after{top:3px;left:1px;width:12px;height:5px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1}"],data:{}});function pi(e){return r["\u0275vid"](2,[],null,null)}var mi=function(){};function vi(e){return Error("A hint was already declared for 'align=\""+e+"\"'.")}var gi=0,yi=yr(function(e){this._elementRef=e},"primary"),bi=new r.InjectionToken("MAT_FORM_FIELD_DEFAULT_OPTIONS"),_i=function(e){function t(t,n,r,i,o,a,s,u){var l=e.call(this,t)||this;return l._elementRef=t,l._changeDetectorRef=n,l._dir=i,l._defaults=o,l._platform=a,l._ngZone=s,l._outlineGapCalculationNeeded=!1,l._showAlwaysAnimate=!1,l._subscriptAnimationState="",l._hintLabel="",l._hintLabelId="mat-hint-"+gi++,l._labelId="mat-form-field-label-"+gi++,l._labelOptions=r||{},l.floatLabel=l._labelOptions.float||"auto",l._animationsEnabled="NoopAnimations"!==u,l.appearance=o&&o.appearance?o.appearance:"legacy",l}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"appearance",{get:function(){return this._appearance},set:function(e){var t=this,n=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&n!==e&&(this._ngZone?this._ngZone.onStable.pipe(We(1)).subscribe(function(){t._ngZone.runOutsideAngular(function(){return t.updateOutlineGap()})}):Promise.resolve().then(function(){return t.updateOutlineGap()}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideRequiredMarker",{get:function(){return this._hideRequiredMarker},set:function(e){this._hideRequiredMarker=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_shouldAlwaysFloat",{get:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_canLabelFloat",{get:function(){return"never"!==this.floatLabel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hintLabel",{get:function(){return this._hintLabel},set:function(e){this._hintLabel=e,this._processHints()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floatLabel",{get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(e){e!==this._floatLabel&&(this._floatLabel=e||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),t.prototype.getConnectedOverlayOrigin=function(){return this._connectionContainerRef||this._elementRef},t.prototype.ngAfterContentInit=function(){var e=this;this._validateControlChild(),this._control.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+this._control.controlType),this._control.stateChanges.pipe(me(null)).subscribe(function(){e._validatePlaceholders(),e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()});var t=this._control.ngControl&&this._control.ngControl.valueChanges||he;Object(Me.a)(t,this._prefixChildren.changes,this._suffixChildren.changes).subscribe(function(){return e._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(me(null)).subscribe(function(){e._processHints(),e._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(me(null)).subscribe(function(){e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})},t.prototype.ngAfterContentChecked=function(){this._validateControlChild(),this._outlineGapCalculationNeeded&&this.updateOutlineGap()},t.prototype.ngAfterViewInit=function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()},t.prototype._shouldForward=function(e){var t=this._control?this._control.ngControl:null;return t&&t[e]},t.prototype._hasPlaceholder=function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)},t.prototype._hasLabel=function(){return!!this._labelChild},t.prototype._shouldLabelFloat=function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)},t.prototype._hideControlPlaceholder=function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()},t.prototype._hasFloatingLabel=function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()},t.prototype._getDisplayedMessages=function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"},t.prototype._animateAndLockLabel=function(){var e=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,Ee(this._label.nativeElement,"transitionend").pipe(We(1)).subscribe(function(){e._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())},t.prototype._validatePlaceholders=function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")},t.prototype._processHints=function(){this._validateHints(),this._syncDescribedByIds()},t.prototype._validateHints=function(){var e,t,n=this;this._hintChildren&&this._hintChildren.forEach(function(r){if("start"===r.align){if(e||n.hintLabel)throw vi("start");e=r}else if("end"===r.align){if(t)throw vi("end");t=r}})},t.prototype._syncDescribedByIds=function(){if(this._control){var e=[];if("hint"===this._getDisplayedMessages()){var t=this._hintChildren?this._hintChildren.find(function(e){return"start"===e.align}):null,n=this._hintChildren?this._hintChildren.find(function(e){return"end"===e.align}):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&(e=this._errorChildren.map(function(e){return e.id}));this._control.setDescribedByIds(e)}},t.prototype._validateControlChild=function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")},t.prototype.updateOutlineGap=function(){var e=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&(!this._platform||this._platform.isBrowser))if(document.documentElement.contains(this._elementRef.nativeElement)){var t=0,n=0,r=this._connectionContainerRef.nativeElement.querySelectorAll(".mat-form-field-outline-start"),i=this._connectionContainerRef.nativeElement.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){for(var o=this._getStartEnd(this._connectionContainerRef.nativeElement.getBoundingClientRect()),a=this._getStartEnd(e.children[0].getBoundingClientRect()),s=0,u=0,l=e.children;u<l.length;u++)s+=l[u].offsetWidth;t=a-o-5,n=s>0?.75*s+10:0}for(var c=0;c<r.length;c++)r.item(c).style.width=t+"px";for(c=0;c<i.length;c++)i.item(c).style.width=n+"px";this._outlineGapCalculationNeeded=!1}else this._outlineGapCalculationNeeded=!0},t.prototype._getStartEnd=function(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left},t}(yi),xi=function(){},wi=r["\u0275crt"]({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media screen and (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media screen and (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Ei(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(e()(),r["\u0275eld"](2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),r["\u0275eld"](3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),r["\u0275eld"](4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(e()(),r["\u0275eld"](5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(e()(),r["\u0275eld"](6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),r["\u0275eld"](7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),r["\u0275eld"](8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function Mi(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}function Ti(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),r["\u0275ncd"](null,2),(e()(),r["\u0275ted"](2,null,["",""]))],null,function(e,t){e(t,2,0,t.component._control.placeholder)})}function Si(e){return r["\u0275vid"](0,[r["\u0275ncd"](null,3),(e()(),r["\u0275and"](0,null,null,0))],null,null)}function Ai(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(e()(),r["\u0275ted"](-1,null,["\xa0*"]))],null,null)}function Ci(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],function(e,t,n){var r=!0;return"cdkObserveContent"===t&&(r=!1!==e.component.updateOutlineGap()&&r),r},null,null)),r["\u0275did"](1,16384,null,0,N,[],{ngSwitch:[0,"ngSwitch"]},null),r["\u0275did"](2,1196032,null,0,zt,[jt,r.ElementRef,r.NgZone],null,{event:"cdkObserveContent"}),(e()(),r["\u0275and"](16777216,null,null,1,null,Ti)),r["\u0275did"](4,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Si)),r["\u0275did"](6,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Ai)),r["\u0275did"](8,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n._hasLabel()),e(t,4,0,!1),e(t,6,0,!0),e(t,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(e,t){var n=t.component;e(t,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function Ri(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),r["\u0275ncd"](null,4)],null,null)}function Li(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,1,0,"accent"==n.color,"warn"==n.color)})}function Pi(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),r["\u0275ncd"](null,5)],null,function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function Oi(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(e()(),r["\u0275ted"](1,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,n._hintLabelId),e(t,1,0,n.hintLabel)})}function Ii(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,Oi)),r["\u0275did"](2,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275ncd"](null,6),(e()(),r["\u0275eld"](4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),r["\u0275ncd"](null,7)],function(e,t){e(t,2,0,t.component.hintLabel)},function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function ki(e){return r["\u0275vid"](2,[r["\u0275qud"](671088640,1,{underlineRef:0}),r["\u0275qud"](402653184,2,{_connectionContainerRef:0}),r["\u0275qud"](402653184,3,{_inputContainerRef:0}),r["\u0275qud"](671088640,4,{_label:0}),(e()(),r["\u0275eld"](4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(e()(),r["\u0275eld"](5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==(i._control.onContainerClick&&i._control.onContainerClick(n))&&r),r},null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,Ei)),r["\u0275did"](7,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Mi)),r["\u0275did"](9,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),r["\u0275ncd"](null,1),(e()(),r["\u0275eld"](12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,Ci)),r["\u0275did"](14,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Ri)),r["\u0275did"](16,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Li)),r["\u0275did"](18,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),r["\u0275did"](20,16384,null,0,N,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Pi)),r["\u0275did"](22,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Ii)),r["\u0275did"](24,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,t){var n=t.component;e(t,7,0,"outline"==n.appearance),e(t,9,0,n._prefixChildren.length),e(t,14,0,n._hasFloatingLabel()),e(t,16,0,n._suffixChildren.length),e(t,18,0,"outline"!=n.appearance),e(t,20,0,n._getDisplayedMessages()),e(t,22,0,"error"),e(t,24,0,"hint")},null)}var Ni=function(){function e(e,t,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var r=this;this._multiple=e,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=this._emitChanges?new ie.a:null,this.onChange=this.changed,t&&t.length&&(e?t.forEach(function(e){return r._markSelected(e)}):this._markSelected(t[0]),this._selectedToEmit.length=0)}return Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected},enumerable:!0,configurable:!0}),e.prototype.select=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._verifyValueAssignment(t),t.forEach(function(t){return e._markSelected(t)}),this._emitChangeEvent()},e.prototype.deselect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._verifyValueAssignment(t),t.forEach(function(t){return e._unmarkSelected(t)}),this._emitChangeEvent()},e.prototype.toggle=function(e){this.isSelected(e)?this.deselect(e):this.select(e)},e.prototype.clear=function(){this._unmarkAll(),this._emitChangeEvent()},e.prototype.isSelected=function(e){return this._selection.has(e)},e.prototype.isEmpty=function(){return 0===this._selection.size},e.prototype.hasValue=function(){return!this.isEmpty()},e.prototype.sort=function(e){this._multiple&&this.selected&&this._selected.sort(e)},e.prototype.isMultipleSelection=function(){return this._multiple},e.prototype._emitChangeEvent=function(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed&&this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])},e.prototype._markSelected=function(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))},e.prototype._unmarkSelected=function(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))},e.prototype._unmarkAll=function(){var e=this;this.isEmpty()||this._selection.forEach(function(t){return e._unmarkSelected(t)})},e.prototype._verifyValueAssignment=function(e){if(e.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")},e}(),Di=function(){function e(){this._listeners=[]}return e.prototype.notify=function(e,t){for(var n=0,r=this._listeners;n<r.length;n++)(0,r[n])(e,t)},e.prototype.listen=function(e){var t=this;return this._listeners.push(e),function(){t._listeners=t._listeners.filter(function(t){return e!==t})}},e.prototype.ngOnDestroy=function(){this._listeners=[]},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Fi=n("rPjj"),Ui=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Bi(e,this.project))},e}(),Bi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return d.__extends(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new Fi.a(this,void 0,void 0);this.add(i),this.innerSubscription=Object($.a)(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(K.a),ji=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new zi(e,this.compare,this.keySelector))},e}(),zi=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return d.__extends(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=Object(Re.a)(this.keySelector)(e))===Le.a)return this.destination.error(Le.a.e);var n=!1;if(this.hasKey){if((n=Object(Re.a)(this.compare)(this.key,t))===Le.a)return this.destination.error(Le.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},t}(De.a),Gi=0,Vi=new r.InjectionToken("mat-select-scroll-strategy");function Hi(e){return function(){return e.scrollStrategies.reposition()}}var Wi=function(e){function t(t,n,i,o,u,l,c,h,f,d,p,m){var v,g=e.call(this,u,o,c,h,d)||this;return g._viewportRuler=t,g._changeDetectorRef=n,g._ngZone=i,g._dir=l,g._parentFormField=f,g.ngControl=d,g._scrollStrategyFactory=m,g._panelOpen=!1,g._required=!1,g._scrollTop=0,g._multiple=!1,g._compareWith=function(e,t){return e===t},g._uid="mat-select-"+Gi++,g._destroy=new ie.a,g._triggerFontSize=0,g._onChange=function(){},g._onTouched=function(){},g._optionIds="",g._transformOrigin="top",g._panelDoneAnimating=!1,g._panelDoneAnimatingStream=new ie.a,g._scrollStrategy=g._scrollStrategyFactory(),g._offsetY=0,g._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],g._disableOptionCentering=!1,g._focused=!1,g.controlType="mat-select",g.ariaLabel="",g.optionSelectionChanges=(v=function(){return g.options?Me.a.apply(void 0,g.options.map(function(e){return e.onSelectionChange})):g._ngZone.onStable.asObservable().pipe(We(1),function e(t,n){return"function"==typeof n?function(r){return r.pipe(e(function(e,r){return Object(a.a)(t(e,r)).pipe(Object(s.a)(function(t,i){return n(e,t,r,i)}))}))}:function(e){return e.lift(new Ui(t))}}(function(){return g.optionSelectionChanges}))},new oe.a(function(e){var t;try{t=v()}catch(t){return void e.error(t)}return(t?Object(a.a)(t):fe()).subscribe(e)})),g.openedChange=new r.EventEmitter,g._openedStream=g.openedChange.pipe(Fe(function(e){return e}),Object(s.a)(function(){})),g._closedStream=g.openedChange.pipe(Fe(function(e){return!e}),Object(s.a)(function(){})),g.selectionChange=new r.EventEmitter,g.valueChange=new r.EventEmitter,g.ngControl&&(g.ngControl.valueAccessor=g),g.tabIndex=parseInt(p)||0,g.id=g.id,g}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"focused",{get:function(){return this._focused||this._panelOpen},set:function(e){this._focused=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=p(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},set:function(e){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableOptionCentering",{get:function(){return this._disableOptionCentering},set:function(e){this._disableOptionCentering=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compareWith",{get:function(){return this._compareWith},set:function(e){if("function"!=typeof e)throw Error("`compareWith` must be a function.");this._compareWith=e,this._selectionModel&&this._initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this.writeValue(e),this._value=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this._uid,this.stateChanges.next()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this._selectionModel=new Ni(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(function(e){return e.lift(new ji(void 0,void 0))},se(this._destroy)).subscribe(function(){e.panelOpen?(e._scrollTop=0,e.openedChange.emit(!0)):(e.openedChange.emit(!1),e._panelDoneAnimating=!1,e.overlayDir.offsetX=0,e._changeDetectorRef.markForCheck())})},t.prototype.ngAfterContentInit=function(){var e=this;this._initKeyManager(),this._selectionModel.onChange.pipe(se(this._destroy)).subscribe(function(e){e.added.forEach(function(e){return e.select()}),e.removed.forEach(function(e){return e.deselect()})}),this.options.changes.pipe(me(null),se(this._destroy)).subscribe(function(){e._resetOptions(),e._initializeSelection()})},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.ngOnChanges=function(e){e.disabled&&this.stateChanges.next()},t.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()},t.prototype.toggle=function(){this.panelOpen?this.close():this.open()},t.prototype.open=function(){var e=this;!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"]),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(We(1)).subscribe(function(){e._triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize=e._triggerFontSize+"px")}))},t.prototype.close=function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())},t.prototype.writeValue=function(e){this.options&&this._setSelectionByValue(e)},t.prototype.registerOnChange=function(e){this._onChange=e},t.prototype.registerOnTouched=function(e){this._onTouched=e},t.prototype.setDisabledState=function(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()},Object.defineProperty(t.prototype,"panelOpen",{get:function(){return this._panelOpen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triggerValue",{get:function(){if(this.empty)return"";if(this._multiple){var e=this._selectionModel.selected.map(function(e){return e.viewValue});return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue},enumerable:!0,configurable:!0}),t.prototype._isRtl=function(){return!!this._dir&&"rtl"===this._dir.value},t.prototype._handleKeydown=function(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))},t.prototype._handleClosedKeydown=function(e){var t=e.keyCode;13===t||32===t||(this.multiple||e.altKey)&&(40===t||38===t||37===t||39===t)?(e.preventDefault(),this.open()):this.multiple||this._keyManager.onKeydown(e)},t.prototype._handleOpenKeydown=function(e){var t=e.keyCode,n=40===t||38===t,r=this._keyManager;if(36===t||35===t)e.preventDefault(),36===t?r.setFirstItemActive():r.setLastItemActive();else if(n&&e.altKey)e.preventDefault(),this.close();else if(13!==t&&32!==t||!r.activeItem)if(this._multiple&&65===t&&e.ctrlKey){e.preventDefault();var i=this.options.some(function(e){return!e.disabled&&!e.selected});this.options.forEach(function(e){e.disabled||(i?e.select():e.deselect())})}else{var o=r.activeItemIndex;r.onKeydown(e),this._multiple&&n&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==o&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()},t.prototype._onFadeInDone=function(){this._panelDoneAnimating=this.panelOpen,this._changeDetectorRef.markForCheck()},t.prototype._onFocus=function(){this.disabled||(this._focused=!0,this.stateChanges.next())},t.prototype._onBlur=function(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())},t.prototype._onAttached=function(){var e=this;this.overlayDir.positionChange.pipe(We(1)).subscribe(function(){e._changeDetectorRef.detectChanges(),e._calculateOverlayOffsetX(),e.panel.nativeElement.scrollTop=e._scrollTop})},t.prototype._getPanelTheme=function(){return this._parentFormField?"mat-"+this._parentFormField.color:""},Object.defineProperty(t.prototype,"empty",{get:function(){return!this._selectionModel||this._selectionModel.isEmpty()},enumerable:!0,configurable:!0}),t.prototype._initializeSelection=function(){var e=this;Promise.resolve().then(function(){e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value)})},t.prototype._setSelectionByValue=function(e){var t=this;if(this.multiple&&e){if(!Array.isArray(e))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),e.forEach(function(e){return t._selectValue(e)}),this._sortValues()}else{this._selectionModel.clear();var n=this._selectValue(e);n&&this._keyManager.setActiveItem(n)}this._changeDetectorRef.markForCheck()},t.prototype._selectValue=function(e){var t=this,n=this.options.find(function(n){try{return null!=n.value&&t._compareWith(n.value,e)}catch(e){return Object(r.isDevMode)()&&console.warn(e),!1}});return n&&this._selectionModel.select(n),n},t.prototype._initKeyManager=function(){var e=this;this._keyManager=new tn(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._keyManager.tabOut.pipe(se(this._destroy)).subscribe(function(){e.focus(),e.close()}),this._keyManager.change.pipe(se(this._destroy)).subscribe(function(){e._panelOpen&&e.panel?e._scrollActiveOptionIntoView():e._panelOpen||e.multiple||!e._keyManager.activeItem||e._keyManager.activeItem._selectViaInteraction()})},t.prototype._resetOptions=function(){var e=this,t=Object(Me.a)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(se(t)).subscribe(function(t){e._onSelect(t.source,t.isUserInput),t.isUserInput&&!e.multiple&&e._panelOpen&&(e.close(),e.focus())}),Me.a.apply(void 0,this.options.map(function(e){return e._stateChanges})).pipe(se(t)).subscribe(function(){e._changeDetectorRef.markForCheck(),e.stateChanges.next()}),this._setOptionIds()},t.prototype._onSelect=function(e,t){var n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()},t.prototype._sortValues=function(){if(this.multiple){var e=this.options.toArray();this._selectionModel.sort(function(t,n){return e.indexOf(t)-e.indexOf(n)}),this.stateChanges.next()}},t.prototype._propagateChanges=function(e){var t;t=this.multiple?this.selected.map(function(e){return e.value}):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new function(e,t){this.source=e,this.value=t}(this,t)),this._changeDetectorRef.markForCheck()},t.prototype._setOptionIds=function(){this._optionIds=this.options.map(function(e){return e.id}).join(" ")},t.prototype._highlightCorrectOption=function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))},t.prototype._scrollActiveOptionIntoView=function(){var e,t,n,r=this._keyManager.activeItemIndex||0,i=Fr(r,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=(n=(r+i)*(e=this._getItemHeight()))<(t=this.panel.nativeElement.scrollTop)?n:n+e>t+256?Math.max(0,n-256+e):t},t.prototype.focus=function(){this._elementRef.nativeElement.focus()},t.prototype._getOptionIndex=function(e){return this.options.reduce(function(t,n,r){return void 0===t?e===n?r:void 0:t},void 0)},t.prototype._calculateOverlayPosition=function(){var e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),r=t*e-n,i=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);i+=Fr(i,this.options,this.optionGroups);var o=n/2;this._scrollTop=this._calculateOverlayScroll(i,o,r),this._offsetY=this._calculateOverlayOffsetY(i,o,r),this._checkOverlayWithinViewport(r)},t.prototype._calculateOverlayScroll=function(e,t,n){var r=this._getItemHeight();return Math.min(Math.max(0,r*e-t+r/2),n)},t.prototype._getAriaLabel=function(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder},t.prototype._getAriaLabelledby=function(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null},t.prototype._getAriaActiveDescendant=function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null},t.prototype._calculateOverlayOffsetX=function(){var e,t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),i=this.multiple?60:32;if(this.multiple)e=44;else{var o=this._selectionModel.selected[0]||this.options.first;e=o&&o.group?32:16}r||(e*=-1);var a=0-(t.left+e-(r?i:0)),s=t.right+e-n.width+(r?0:i);a>0?e+=a+8:s>0&&(e-=s+8),this.overlayDir.offsetX=Math.round(e),this.overlayDir.overlayRef.updatePosition()},t.prototype._calculateOverlayOffsetY=function(e,t,n){var r,i=this._getItemHeight(),o=(i-this._triggerRect.height)/2,a=Math.floor(256/i);return this._disableOptionCentering?0:(r=0===this._scrollTop?e*i:this._scrollTop===n?(e-(this._getItemCount()-a))*i+(i-(this._getItemCount()*i-256)%i):t-i/2,Math.round(-1*r-o))},t.prototype._checkOverlayWithinViewport=function(e){var t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,i=n.height-this._triggerRect.bottom-8,o=Math.abs(this._offsetY),a=Math.min(this._getItemCount()*t,256)-o-this._triggerRect.height;a>i?this._adjustPanelUp(a,i):o>r?this._adjustPanelDown(o,r,e):this._transformOrigin=this._getOriginBasedOnOption()},t.prototype._adjustPanelUp=function(e,t){var n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")},t.prototype._adjustPanelDown=function(e,t,n){var r=Math.round(e-t);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")},t.prototype._getOriginBasedOnOption=function(){var e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return"50% "+(Math.abs(this._offsetY)-t+e/2)+"px 0px"},t.prototype._getItemCount=function(){return this.options.length+this.optionGroups.length},t.prototype._getItemHeight=function(){return 3*this._triggerFontSize},t.prototype.setDescribedByIds=function(e){this._ariaDescribedby=e.join(" ")},t.prototype.onContainerClick=function(){this.focus(),this.open()},Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return this._panelOpen||!this.empty},enumerable:!0,configurable:!0}),t}(br(_r(gr(function(e){return function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t)||this;return r.errorState=!1,r.stateChanges=new ie.a,r}return Object(d.__extends)(t,e),t.prototype.updateErrorState=function(){var e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())},t}(function(e,t,n,r,i){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i})}())))),qi=function(){};function Xi(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(J.a)(t[0])&&(t=t[0]),0===t.length?he:e?Xi(t).pipe(Object(s.a)(function(t){return e.apply(void 0,t)})):new oe.a(function(e){return new Qi(e,t)})}var Qi=function(e){function t(t,n){var r=e.call(this,t)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],s=Object($.a)(r,a,null,o);s&&r.add(s)}return r}return d.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()},t}(K.a),Yi=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t}(Yi);function Ji(e){return null==e||0===e.length}var Ki=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,$i=function(){function e(){}return e.min=function(e){return function(t){if(Ji(t.value)||Ji(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Ji(t.value)||Ji(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Ji(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Ji(e.value)?null:Ki.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){if(Ji(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},e.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Ji(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(eo);return 0==t.length?null:function(e){return no(function(e,n){return t.map(function(t){return t(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(eo);return 0==t.length?null:function(e){return Xi(function(e,n){return t.map(function(t){return t(e)})}(e).map(to)).pipe(Object(s.a)(no))}},e}();function eo(e){return null!=e}function to(e){var t=Object(r["\u0275isPromise"])(e)?Object(a.a)(e):e;if(!Object(r["\u0275isObservable"])(t))throw new Error("Expected validator to return Promise or Observable.");return t}function no(e){var t=e.reduce(function(e,t){return null!=t?Object(d.__assign)({},e,t):e},{});return 0===Object.keys(t).length?null:t}var ro=new r.InjectionToken("NgValueAccessor"),io=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),oo=function(){function e(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=an()?an().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function ao(e){return e.validate?function(t){return e.validate(t)}:e}function so(e){return e.validate?function(t){return e.validate(t)}:e}var uo=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function lo(){throw new Error("unimplemented")}var co=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"validator",{get:function(){return lo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return lo()},enumerable:!0,configurable:!0}),t}(Yi),ho=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},e}(),fo=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(co),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),po=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),mo='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',vo='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',go='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',yo=function(){function e(){}return e.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+mo)},e.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+vo+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+go)},e.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+mo)},e.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+vo)},e.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},e.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},e.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},e}();function bo(e,t){return Object(d.__spread)(t.path,[e])}function _o(e,t){e||Mo(t,"Cannot find control with"),t.valueAccessor||Mo(t,"No value accessor for form control with"),e.validator=$i.compose([e.validator,t.validator]),e.asyncValidator=$i.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&xo(e,t)})}(e,t),function(e,t){e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&xo(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function xo(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function wo(e,t){null==e&&Mo(t,"Cannot find control with"),e.validator=$i.compose([e.validator,t.validator]),e.asyncValidator=$i.composeAsync([e.asyncValidator,t.asyncValidator])}function Eo(e){return Mo(e,"There is no FormControl instance attached to form control element with")}function Mo(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function To(e){return null!=e?$i.compose(e.map(ao)):null}function So(e){return null!=e?$i.composeAsync(e.map(so)):null}var Ao=[io,po,uo,function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var t,n;try{for(var r=Object(d.__values)(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}(),function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=t._getOptionValue(a.value);r.push(s)}else for(i=n.options,o=0;o<i.length;o++)(a=i.item(o)).selected&&(s=t._getOptionValue(a.value),r.push(s));t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var t,n;try{for(var r=Object(d.__values)(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}(),fo];function Co(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Ro(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Lo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return bo(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return To(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return So(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){},t}(Zi),Po=function(e){function t(t){return e.call(this,t)||this}return Object(d.__extends)(t,e),t}(function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}());function Oo(e){var t=ko(e)?e.validators:e;return Array.isArray(t)?To(t):t||null}function Io(e,t){var n=ko(t)?t.asyncValidators:e;return Array.isArray(n)?So(n):n||null}function ko(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var No=function(){function e(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=Oo(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=Io(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object(d.__assign)({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(t){t.enable(Object(d.__assign)({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=to(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return t.setErrors(n,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof Fo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Uo&&e.at(t)||null},e))}(this,e)},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new r.EventEmitter,this.statusChanges=new r.EventEmitter},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){ko(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),Do=function(e){function t(t,n,r){void 0===t&&(t=null);var i=e.call(this,Oo(n),Io(r,n))||this;return i._onChange=[],i._applyFormState(t),i._setUpdateStrategy(n),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return Object(d.__extends)(t,e),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},t.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},t.prototype._updateValue=function(){},t.prototype._anyControls=function(e){return!1},t.prototype._allControlsDisabled=function(){return this.disabled},t.prototype.registerOnChange=function(e){this._onChange.push(e)},t.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},t.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},t.prototype._forEachChild=function(e){},t.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},t.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},t}(No),Fo=function(e){function t(t,n,r){var i=e.call(this,Oo(n),Io(r,n))||this;return i.controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(d.__extends)(t,e),t.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},t.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Do?t.value:t.getRawValue(),e})},t.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},t.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},t.prototype._updateValue=function(){this.value=this._reduceValue()},t.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(r,i){n=n||t.contains(i)&&e(r)}),n},t.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})},t.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=Object(d.__values)(Object.keys(this.controls)),r=n.next();!r.done;r=n.next())if(this.controls[r.value].enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},t}(No),Uo=function(e){function t(t,n,r){var i=e.call(this,Oo(n),Io(r,n))||this;return i.controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(d.__extends)(t,e),t.prototype.at=function(e){return this.controls[e]},t.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},t.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(t.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach(function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Do?e.value:e.getRawValue()})},t.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},t.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},t.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},t.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=Object(d.__values)(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},t.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},t}(No),Bo=Promise.resolve(null),jo=function(e){function t(t,n){var i=e.call(this)||this;return i.submitted=!1,i._directives=[],i.ngSubmit=new r.EventEmitter,i.form=new Fo({},To(t),So(n)),i}return Object(d.__extends)(t,e),t.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this;Bo.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),_o(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){var t=this;Bo.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),Ro(t._directives,e)})},t.prototype.addFormGroup=function(e){var t=this;Bo.then(function(){var n=t._findContainer(e.path),r=new Fo({});wo(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},t.prototype.removeFormGroup=function(e){var t=this;Bo.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){var n=this;Bo.then(function(){n.form.get(e.path).setValue(t)})},t.prototype.setValue=function(e){this.control.setValue(e)},t.prototype.onSubmit=function(e){return this.submitted=!0,Co(this.form,this._directives),this.ngSubmit.emit(e),!1},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},t.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},t}(Zi),zo=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+mo+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+vo+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+go)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+vo+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+go)},e}(),Go=function(e){function t(t,n,r){var i=e.call(this)||this;return i._parent=t,i._validators=n,i._asyncValidators=r,i}return Object(d.__extends)(t,e),t.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof jo||zo.modelGroupParentException()},t}(Lo),Vo=Promise.resolve(null),Ho=function(e){function t(t,n,i,o){var a=e.call(this)||this;return a.control=new Do,a._registered=!1,a.update=new r.EventEmitter,a._parent=t,a._rawValidators=n||[],a._rawAsyncValidators=i||[],a.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||Mo(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach(function(t){var o;t.constructor===oo?n=t:(o=t,Ao.some(function(e){return o.constructor===e})?(r&&Mo(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Mo(e,"More than one custom value accessor matches form control with"),i=t))}),i||r||n||(Mo(e,"No valid value accessor for form control with"),null)}(a,o),a}return Object(d.__extends)(t,e),t.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object(r["\u0275looseIdentical"])(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(t.prototype,"path",{get:function(){return this._parent?bo(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return To(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return So(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},t.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},t.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},t.prototype._setUpStandalone=function(){_o(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},t.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},t.prototype._checkParentType=function(){!(this._parent instanceof Go)&&this._parent instanceof Lo?zo.formGroupNameException():this._parent instanceof Go||this._parent instanceof jo||zo.modelParentException()},t.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||zo.missingNameException()},t.prototype._updateValue=function(e){var t=this;Vo.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},t.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Vo.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},t}(co),Wo=function(e){function t(t,n){var i=e.call(this)||this;return i._validators=t,i._asyncValidators=n,i.submitted=!1,i.directives=[],i.form=null,i.ngSubmit=new r.EventEmitter,i}return Object(d.__extends)(t,e),t.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this.form.get(e.path);return _o(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){Ro(this.directives,e)},t.prototype.addFormGroup=function(e){var t=this.form.get(e.path);wo(t,e),t.updateValueAndValidity({emitEvent:!1})},t.prototype.removeFormGroup=function(e){},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.addFormArray=function(e){var t=this.form.get(e.path);wo(t,e),t.updateValueAndValidity({emitEvent:!1})},t.prototype.removeFormArray=function(e){},t.prototype.getFormArray=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},t.prototype.onSubmit=function(e){return this.submitted=!0,Co(this.form,this.directives),this.ngSubmit.emit(e),!1},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._updateDomValue=function(){var e=this;this.directives.forEach(function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange(function(){return Eo(t)}),t.valueAccessor.registerOnTouched(function(){return Eo(t)}),t._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(t.control,t),n&&_o(n,t),t.control=n)}),this.form._updateTreeValidity({emitEvent:!1})},t.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},t.prototype._updateValidators=function(){var e=To(this._validators);this.form.validator=$i.compose([this.form.validator,e]);var t=So(this._asyncValidators);this.form.asyncValidator=$i.composeAsync([this.form.asyncValidator,t])},t.prototype._checkFormPresent=function(){this.form||yo.missingFormException()},t}(Zi),qo=function(){},Xo=function(){},Qo=r["\u0275crt"]({encapsulation:2,styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper,.mat-form-field-appearance-standard .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}"],data:{animation:[{type:7,name:"transformPanel",definitions:[{type:0,name:"void",styles:{type:6,styles:{transform:"scaleY(0)",minWidth:"100%",opacity:0},offset:null},options:void 0},{type:0,name:"showing",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:0,name:"showing-multiple",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:1,expr:"void => *",animation:{type:3,steps:[{type:11,selector:"@fadeInContent",animation:{type:9,options:null},options:null},{type:4,styles:null,timings:"150ms cubic-bezier(0.25, 0.8, 0.25, 1)"}],options:null},options:null},{type:1,expr:"* => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"250ms 100ms linear"}],options:null}],options:{}},{type:7,name:"fadeInContent",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => showing",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Yo(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"span",[["class","mat-select-placeholder"]],null,null,null,null,null)),(e()(),r["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.placeholder||"\xa0")})}function Zo(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r["\u0275ted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.triggerValue||"\xa0")})}function Jo(e){return r["\u0275vid"](0,[r["\u0275ncd"](null,0),(e()(),r["\u0275and"](0,null,null,0))],null,null)}function Ko(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,5,"span",[["class","mat-select-value-text"]],null,null,null,null,null)),r["\u0275did"](1,16384,null,0,N,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Zo)),r["\u0275did"](3,16384,null,0,F,[r.ViewContainerRef,r.TemplateRef,N],null,null),(e()(),r["\u0275and"](16777216,null,null,1,null,Jo)),r["\u0275did"](5,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,t){e(t,1,0,!!t.component.customTrigger),e(t,5,0,!0)},null)}function $o(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,[[2,0],["panel",1]],null,3,"div",[],[[24,"@transformPanel",0],[4,"transformOrigin",null],[2,"mat-select-panel-done-animating",null],[4,"font-size","px"]],[[null,"@transformPanel.done"],[null,"keydown"]],function(e,t,n){var r=!0,i=e.component;return"@transformPanel.done"===t&&(r=!1!==i._panelDoneAnimatingStream.next(n.toState)&&r),"keydown"===t&&(r=!1!==i._handleKeydown(n)&&r),r},null,null)),r["\u0275did"](1,278528,null,0,S,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),r["\u0275eld"](2,0,null,null,1,"div",[["class","mat-select-content"]],[[24,"@fadeInContent",0]],[[null,"@fadeInContent.done"]],function(e,t,n){var r=!0;return"@fadeInContent.done"===t&&(r=!1!==e.component._onFadeInDone()&&r),r},null,null)),r["\u0275ncd"](null,1)],function(e,t){var n=t.component;e(t,1,0,r["\u0275inlineInterpolate"](1,"mat-select-panel ",n._getPanelTheme(),""),n.panelClass)},function(e,t){var n=t.component;e(t,0,0,n.multiple?"showing-multiple":"showing",n._transformOrigin,n._panelDoneAnimating,n._triggerFontSize),e(t,2,0,"showing")})}function ea(e){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{trigger:0}),r["\u0275qud"](671088640,2,{panel:0}),r["\u0275qud"](402653184,3,{overlayDir:0}),(e()(),r["\u0275eld"](3,0,[[1,0],["trigger",1]],null,9,"div",[["aria-hidden","true"],["cdk-overlay-origin",""],["class","mat-select-trigger"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.toggle()&&r),r},null,null)),r["\u0275did"](4,16384,[["origin",4]],0,Et,[r.ElementRef],null,null),(e()(),r["\u0275eld"](5,0,null,null,5,"div",[["class","mat-select-value"]],null,null,null,null,null)),r["\u0275did"](6,16384,null,0,N,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Yo)),r["\u0275did"](8,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,Ko)),r["\u0275did"](10,278528,null,0,D,[r.ViewContainerRef,r.TemplateRef,N],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r["\u0275eld"](11,0,null,null,1,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(e()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,function(e,t,n){var r=!0,i=e.component;return"backdropClick"===t&&(r=!1!==i.close()&&r),"attach"===t&&(r=!1!==i._onAttached()&&r),"detach"===t&&(r=!1!==i.close()&&r),r},$o)),r["\u0275did"](14,671744,[[3,4]],0,Mt,[_t,r.TemplateRef,r.ViewContainerRef,wt,[2,Ht]],{origin:[0,"origin"],positions:[1,"positions"],offsetY:[2,"offsetY"],minWidth:[3,"minWidth"],backdropClass:[4,"backdropClass"],scrollStrategy:[5,"scrollStrategy"],open:[6,"open"],hasBackdrop:[7,"hasBackdrop"],lockPosition:[8,"lockPosition"]},{backdropClick:"backdropClick",attach:"attach",detach:"detach"})],function(e,t){var n=t.component;e(t,6,0,n.empty),e(t,8,0,!0),e(t,10,0,!1),e(t,14,0,r["\u0275nov"](t,4),n._positions,n._offsetY,null==n._triggerRect?null:n._triggerRect.width,"cdk-overlay-transparent-backdrop",n._scrollStrategy,n.panelOpen,"","")},null)}var ta=0,na=function(e,t){this.source=e,this.value=t},ra=function(e){function t(t){var n=e.call(this)||this;return n._changeDetector=t,n._value=null,n._name="mat-radio-group-"+ta++,n._selected=null,n._isInitialized=!1,n._labelPosition="after",n._disabled=!1,n._required=!1,n._controlValueAccessorChangeFn=function(){},n.onTouched=function(){},n.change=new r.EventEmitter,n}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._updateRadioButtonNames()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())},enumerable:!0,configurable:!0}),t.prototype._checkSelectedRadioButton=function(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=p(e),this._markRadiosForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=p(e),this._markRadiosForCheck()},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._isInitialized=!0},t.prototype._touch=function(){this.onTouched&&this.onTouched()},t.prototype._updateRadioButtonNames=function(){var e=this;this._radios&&this._radios.forEach(function(t){t.name=e.name})},t.prototype._updateSelectedRadioFromValue=function(){var e=this;this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(function(t){t.checked=e.value===t.value,t.checked&&(e._selected=t)}))},t.prototype._emitChangeEvent=function(){this._isInitialized&&this.change.emit(new na(this._selected,this._value))},t.prototype._markRadiosForCheck=function(){this._radios&&this._radios.forEach(function(e){return e._markForCheck()})},t.prototype.writeValue=function(e){this.value=e,this._changeDetector.markForCheck()},t.prototype.registerOnChange=function(e){this._controlValueAccessorChangeFn=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t.prototype.setDisabledState=function(e){this.disabled=e,this._changeDetector.markForCheck()},t}(gr(function(){})),ia=function(e){function t(t,n,i,o,a,s){var u=e.call(this,n)||this;return u._changeDetector=i,u._focusMonitor=o,u._radioDispatcher=a,u._animationMode=s,u._uniqueId="mat-radio-"+ ++ta,u.id=u._uniqueId,u.change=new r.EventEmitter,u._checked=!1,u._value=null,u._removeUniqueSelectionListener=function(){},u.radioGroup=t,u._removeUniqueSelectionListener=a.listen(function(e,t){e!==u.id&&t===u.name&&(u.checked=!1)}),u}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){var t=p(e);this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"},set:function(e){this._labelPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled},set:function(e){var t=p(e);this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required||this.radioGroup&&this.radioGroup.required},set:function(e){this._required=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},t.prototype._markForCheck=function(){this._changeDetector.markForCheck()},t.prototype.ngOnInit=function(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)},t.prototype.ngAfterViewInit=function(){var e=this;this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(t){return e._onInputFocusChange(t)})},t.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement),this._removeUniqueSelectionListener()},t.prototype._emitChangeEvent=function(){this.change.emit(new na(this,this._value))},t.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},t.prototype._onInputClick=function(e){e.stopPropagation()},t.prototype._onInputChange=function(e){e.stopPropagation();var t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),this.radioGroup._touch(),t&&this.radioGroup._emitChangeEvent())},t.prototype._onInputFocusChange=function(e){this._focusRipple||"keyboard"!==e?e||(this.radioGroup&&this.radioGroup._touch(),this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null)):this._focusRipple=this._ripple.launch(0,0,{persistent:!0})},t}(yr(br(_r(function(e){this._elementRef=e})),"accent")),oa=function(){},aa=r["\u0275crt"]({encapsulation:2,styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent}.mat-radio-label{cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)}@media screen and (-ms-high-contrast:active){.mat-radio-checked .mat-radio-inner-circle{border:solid 10px}}.mat-radio-label-content{display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-ripple{position:absolute;left:calc(50% - 25px);top:calc(50% - 25px);height:50px;width:50px;z-index:1;pointer-events:none}"],data:{}});function sa(e){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{_ripple:0}),r["\u0275qud"](402653184,2,{_inputElement:0}),(e()(),r["\u0275eld"](2,0,[["label",1]],null,11,"label",[["class","mat-radio-label"]],[[1,"for",0]],null,null,null,null)),(e()(),r["\u0275eld"](3,0,null,null,5,"div",[["class","mat-radio-container"]],null,null,null,null,null)),(e()(),r["\u0275eld"](4,0,null,null,0,"div",[["class","mat-radio-outer-circle"]],null,null,null,null,null)),(e()(),r["\u0275eld"](5,0,null,null,0,"div",[["class","mat-radio-inner-circle"]],null,null,null,null,null)),(e()(),r["\u0275eld"](6,0,null,null,2,"div",[["class","mat-radio-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](7,212992,[[1,4]],0,Cr,[r.ElementRef,r.NgZone,X,[2,Ar],[2,ai]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),r["\u0275pod"](8,{enterDuration:0}),(e()(),r["\u0275eld"](9,0,[[2,0],["input",1]],null,0,"input",[["class","mat-radio-input cdk-visually-hidden"],["type","radio"]],[[8,"id",0],[8,"checked",0],[8,"disabled",0],[8,"tabIndex",0],[1,"name",0],[8,"required",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"change"],[null,"click"]],function(e,t,n){var r=!0,i=e.component;return"change"===t&&(r=!1!==i._onInputChange(n)&&r),"click"===t&&(r=!1!==i._onInputClick(n)&&r),r},null,null)),(e()(),r["\u0275eld"](10,0,null,null,3,"div",[["class","mat-radio-label-content"]],[[2,"mat-radio-label-before",null]],null,null,null,null)),(e()(),r["\u0275eld"](11,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),r["\u0275ted"](-1,null,["\xa0"])),r["\u0275ncd"](null,0)],function(e,t){var n=t.component;e(t,7,0,!0,23,e(t,8,0,150),n._isRippleDisabled(),r["\u0275nov"](t,2))},function(e,t){var n=t.component;e(t,2,0,n.inputId),e(t,6,0,r["\u0275nov"](t,7).unbounded),e(t,9,0,n.inputId,n.checked,n.disabled,n.tabIndex,n.name,n.required,n.ariaLabel,n.ariaLabelledby,n.ariaDescribedby),e(t,10,0,"before"==n.labelPosition)})}var ua=function(){function e(e,t){this.x=e,this.y=t}return e.fromEvent=function(t){return t instanceof MouseEvent?new e(t.clientX,t.clientY):new e(t.changedTouches[0].clientX,t.changedTouches[0].clientY)},e.isIPosition=function(e){return!!e&&"x"in e&&"y"in e},e.getCurrent=function(t){var n=new e(0,0);if(window){var r=window.getComputedStyle(t);return r&&(n.x=parseInt(r.getPropertyValue("left"),10),n.y=parseInt(r.getPropertyValue("top"),10)),n}return console.error("Not Supported!"),null},e.copy=function(t){return new e(0,0).set(t)},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.reset=function(){return this.x=0,this.y=0,this},e.prototype.set=function(e){return this.x=e.x,this.y=e.y,this},e}(),la=function(){function e(e,t){this.parent=e,this.renderer=t,this._added=!1;var n=t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(n,"width","100%"),t.setStyle(n,"height","100%"),t.setStyle(n,"background-color","transparent"),t.setStyle(n,"top","0"),t.setStyle(n,"left","0"),this._helper=n}return e.prototype.add=function(){this.parent&&!this._added&&(this.parent.appendChild(this._helper),this._added=!0)},e.prototype.remove=function(){this.parent&&this._added&&(this.parent.removeChild(this._helper),this._added=!1)},e.prototype.dispose=function(){this._helper=null,this._added=!1},Object.defineProperty(e.prototype,"el",{get:function(){return this._helper},enumerable:!0,configurable:!0}),e}(),ca=function(){function e(e,t){this.el=e,this.renderer=t,this.allowDrag=!0,this.moving=!1,this.orignal=null,this.oldTrans=new ua(0,0),this.tempTrans=new ua(0,0),this.oldZIndex="",this._zIndex="",this.needTransform=!1,this._helperBlock=null,this.started=new r.EventEmitter,this.stopped=new r.EventEmitter,this.edge=new r.EventEmitter,this.outOfBounds={top:!1,right:!1,bottom:!1,left:!1},this.gridSize=1,this.inBounds=!1,this.trackPosition=!0,this.scale=1,this.preventDefaultEvent=!1,this.position={x:0,y:0},this.movingOffset=new r.EventEmitter,this.endOffset=new r.EventEmitter,this._helperBlock=new la(e.nativeElement,t)}return Object.defineProperty(e.prototype,"zIndex",{set:function(e){this.renderer.setStyle(this.el.nativeElement,"z-index",e),this._zIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngDraggable",{set:function(e){if(void 0!==e&&null!==e&&""!==e){this.allowDrag=!!e;var t=this.handle?this.handle:this.el.nativeElement;this.allowDrag?this.renderer.addClass(t,"ng-draggable"):this.renderer.removeClass(t,"ng-draggable")}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.allowDrag&&this.renderer.addClass(this.handle?this.handle:this.el.nativeElement,"ng-draggable"),this.resetPosition()},e.prototype.ngOnDestroy=function(){this.bounds=null,this.handle=null,this.orignal=null,this.oldTrans=null,this.tempTrans=null,this._helperBlock.dispose(),this._helperBlock=null},e.prototype.ngOnChanges=function(e){if(e.position&&!e.position.isFirstChange()){var t=e.position.currentValue;this.moving?this.needTransform=!0:(ua.isIPosition(t)?this.oldTrans.set(t):this.oldTrans.reset(),this.transform())}},e.prototype.ngAfterViewInit=function(){this.inBounds&&(this.boundsCheck(),this.oldTrans.add(this.tempTrans),this.tempTrans.reset())},e.prototype.resetPosition=function(){ua.isIPosition(this.position)?this.oldTrans.set(this.position):this.oldTrans.reset(),this.tempTrans.reset(),this.transform()},e.prototype.moveTo=function(e){this.orignal&&(e.subtract(this.orignal),this.tempTrans.set(e),this.transform(),this.bounds&&this.edge.emit(this.boundsCheck()),this.movingOffset.emit({x:this.tempTrans.x+this.oldTrans.x,y:this.tempTrans.y+this.oldTrans.y}))},e.prototype.transform=function(){var e=this.tempTrans.x+this.oldTrans.x,t=this.tempTrans.y+this.oldTrans.y;this.gridSize>1&&(e=Math.round(e/this.gridSize)*this.gridSize,t=Math.round(t/this.gridSize)*this.gridSize);var n="translate("+e+"px, "+t+"px)";1!==this.scale&&(n+=" scale("+this.scale+")"),this.renderer.setStyle(this.el.nativeElement,"transform",n),this.renderer.setStyle(this.el.nativeElement,"-webkit-transform",n),this.renderer.setStyle(this.el.nativeElement,"-ms-transform",n),this.renderer.setStyle(this.el.nativeElement,"-moz-transform",n),this.renderer.setStyle(this.el.nativeElement,"-o-transform",n)},e.prototype.pickUp=function(){this.oldZIndex=this.el.nativeElement.style.zIndex?this.el.nativeElement.style.zIndex:"",window&&(this.oldZIndex=window.getComputedStyle(this.el.nativeElement,null).getPropertyValue("z-index")),this.zIndexMoving&&this.renderer.setStyle(this.el.nativeElement,"z-index",this.zIndexMoving),this.moving||(this.started.emit(this.el.nativeElement),this.moving=!0)},e.prototype.boundsCheck=function(){if(this.bounds){var e=this.bounds.getBoundingClientRect(),t=this.el.nativeElement.getBoundingClientRect(),n={top:!!this.outOfBounds.top||e.top<t.top,right:!!this.outOfBounds.right||e.right>t.right,bottom:!!this.outOfBounds.bottom||e.bottom>t.bottom,left:!!this.outOfBounds.left||e.left<t.left};return this.inBounds&&(n.top||(this.tempTrans.y-=t.top-e.top),n.bottom||(this.tempTrans.y-=t.bottom-e.bottom),n.right||(this.tempTrans.x-=t.right-e.right),n.left||(this.tempTrans.x-=t.left-e.left),this.transform()),n}},e.prototype.putBack=function(){this._zIndex?this.renderer.setStyle(this.el.nativeElement,"z-index",this._zIndex):this.zIndexMoving&&(this.oldZIndex?this.renderer.setStyle(this.el.nativeElement,"z-index",this.oldZIndex):this.el.nativeElement.style.removeProperty("z-index")),this.moving&&(this.stopped.emit(this.el.nativeElement),this._helperBlock.remove(),this.needTransform&&(ua.isIPosition(this.position)?this.oldTrans.set(this.position):this.oldTrans.reset(),this.transform(),this.needTransform=!1),this.bounds&&this.edge.emit(this.boundsCheck()),this.moving=!1,this.endOffset.emit({x:this.tempTrans.x+this.oldTrans.x,y:this.tempTrans.y+this.oldTrans.y}),this.trackPosition&&this.oldTrans.add(this.tempTrans),this.tempTrans.reset(),this.trackPosition||this.transform())},e.prototype.checkHandleTarget=function(e,t){if("BUTTON"===t.tagName)return!1;if(t===e)return!0;for(var n in t.children)if(t.children.hasOwnProperty(n)&&this.checkHandleTarget(e,t.children[n]))return!0;return!1},e.prototype.onMouseDown=function(e){e instanceof MouseEvent&&2===e.button||(void 0===this.handle||this.checkHandleTarget(e.target||e.srcElement,this.handle))&&(this.preventDefaultEvent&&(e.stopPropagation(),e.preventDefault()),this.orignal=ua.fromEvent(e),this.pickUp())},e.prototype.onMouseLeave=function(){this.putBack()},e.prototype.onMouseMove=function(e){this.moving&&this.allowDrag&&(this.preventDefaultEvent&&(e.stopPropagation(),e.preventDefault()),this._helperBlock.add(),this.moveTo(ua.fromEvent(e)))},e}(),ha=function(){},fa=n("lO9m");function da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};if(!e||""===e)return n;for(var r=/(\w+\([\w+., -]*\))/g,i=/([-\d.]+)[, ]?/g,o=null;o=r.exec(e);){for(var a=/(\w+)\(([^\)]+)\)/g.exec(o[1]),s=a[1],u=a[2],l=[],c=null;c=i.exec(u);)l.push(c[1]);n[s]=!0===t?s+"("+l.join(",")+")":l}return n}var pa=function(){function e(e,t){this.matIconRegistry=e,this.domSanitizer=t,this.clickedRoom=new r.EventEmitter,this.clickedCanvas=new r.EventEmitter,this.selectedColor="#ebefe4",this.defaultColor="#f2flec",this.baseScale=.9,this.baseOffsetX=0,this.baseOffsetY=0,this.transform="translate("+this.baseOffsetX+","+this.baseOffsetY+") scale("+this.baseScale+","+this.baseScale+")",this.movedX=0,this.movedY=0,this.scaled=1,this.panMode=!1,this.addNodeMode=!1}return e.prototype.ngAfterViewInit=function(){this.getCanvasSize()},e.prototype.ngOnChanges=function(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,this.extractRooms(),this.getScaleOffset(),this.zoomExtents()),e.colors&&e.colors.currentValue&&this.defineColors(),e.selected&&this.updateSelection()},e.prototype.updateSelection=function(){var e=this;this.rooms&&(this.rooms=this.rooms.map(function(t){return t.selected=-1!=e.selected.indexOf(t.uri),t}))},e.prototype.defineColors=function(){var e=this;this.rooms.map(function(t){var n=e.colors.filter(function(e){return e.uri==t.uri});return n.length>0&&(t.color=n[0].color,t.description=n[0].value),t})},e.prototype.getCanvasSize=function(){var e=this.planContainer.nativeElement.getBoundingClientRect();this.canvasWidth=e.width,this.canvasHeight=e.height,this.canvasCentroid=[this.canvasWidth/2,this.canvasHeight/2]},e.prototype.extractRooms=function(){var e,t,n,r,i=this;if(!this.data.features)return this.rooms=null;this.rooms=this.data.features.map(function(o){var a,s=[],u="";if(o.geometry&&"Polygon"==o.geometry.type){var l=[];o.geometry.coordinates.forEach(function(i){var o="",s="";i.map(function(i,a){var u=i[0],l=-i[1];return o+=u+","+l+" ",s+=0==a?"M"+u+","+l+" ":"L"+u+","+l+" ",i[1]=l,(!e||u<e)&&(e=u),(!n||u>n)&&(n=u),(!t||l<t)&&(t=l),(!r||l>r)&&(r=l),i}),o=o.trim(),s=s.trim(),l.length<1&&(a=function(e){for(var t,n,r=-1,i=e.length,o=0,a=0,s=e[i-1],u=0;++r<i;)u+=n=(t=s)[0]*(s=e[r])[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o/(u*=3),a/u]}(i)),l.push(o),u+=s}),s.push(l)}var c=o.properties.name,h=o.properties.uri,f=o.properties.color?o.properties.color:i.defaultColor,d=o.properties.description?o.properties.description:"";return i.boundingBox=[e,t,n,r],{name:c,uri:h,description:d,color:f,polygons:s,path:u,centroid:a}})},e.prototype.getScaleOffset=function(){var e=this.boundingBox,t=e[2]-e[0],n=e[3]-e[1],r=Math.min(this.canvasHeight/n,this.canvasWidth/t),i=[r*(e[0]+t/2),r*(e[1]+n/2)],o=this.canvasCentroid[0]-i[0],a=this.canvasCentroid[1]-i[1];return this.baseOffsetX=o,this.baseOffsetY=a,this.baseScale=r,[r,o,a]},e.prototype.move=function(e){e&&this.zoomHandler(void 0,e)},e.prototype.moveEnd=function(e){this.movedX=this.movedX+e[0],this.movedY=this.movedY+e[1]},e.prototype.onWindowResize=function(){this.getCanvasSize(),this.getScaleOffset(),this.zoomExtents()},e.prototype.zoomExtents=function(){this.scaled=.95*this.baseScale,this.movedX=0,this.movedY=0,this.zoomHandler()},e.prototype.zoomOut=function(e){this.scaled=this.scaled-this.baseScale/5,this.zoomHandler(e)},e.prototype.zoomIn=function(e){this.scaled=this.scaled+this.baseScale/5,this.zoomHandler(e)},e.prototype.zoomHandler=function(e,t){if(t)var n=this.baseOffsetX+this.movedX+t[0],r=this.baseOffsetY+this.movedY+t[1];else n=this.baseOffsetX+this.movedX,r=this.baseOffsetY+this.movedY;da(this.transform),da(this.transform),this.transform="translate("+n+","+r+")scale("+this.scaled+","+this.scaled+")"},e.prototype.selectRoom=function(e,t){var n=this.scaled;this.clickedRoom.emit({uri:t.uri,coordinates:[(e.offsetX-(this.baseOffsetX+this.movedX))/n,-(e.offsetX-(this.baseOffsetY+this.movedY))/n]})},e.prototype.onCanvasClick=function(e){"canvas"==e.target.id&&this.clickedCanvas.emit()},e}(),ma=function(){function e(){this.zoomOut=new r.EventEmitter,this.zoomIn=new r.EventEmitter,this.moveInit=new r.EventEmitter,this.move=new r.EventEmitter,this.moveEnd=new r.EventEmitter,this.panMode=new r.EventEmitter,this.addNodeMode=new r.EventEmitter,this.mouseDown=!1,this.dragMode=!1}return e.prototype.onMouseWheelChrome=function(e){this.mouseWheelFunc(e)},e.prototype.onMouseWheelFirefox=function(e){this.mouseWheelFunc(e)},e.prototype.onMouseWheelIE=function(e){this.mouseWheelFunc(e)},e.prototype.onKeyDown=function(e){"ArrowDown"==e.key&&this.zoomIn.emit(e),"ArrowUp"==e.key&&this.zoomOut.emit(e),"Alt"==e.key&&(this.dragMode=!0,this.panMode.emit(!0)),"Control"==e.key&&this.addNodeMode.emit(!0)},e.prototype.onKeyUp=function(e){"Alt"==e.key&&(this.dragMode=!1,this.panMode.emit(!1)),"Control"==e.key&&this.addNodeMode.emit(!1)},e.prototype.onMouseClick=function(e){this.mouseDown=!0,1==e.button&&(this.dragMode=!0),this.dragMode&&(this.clickX=e.offsetX,this.clickY=e.offsetY,this.panMode.emit(!0),this.moveInit.emit([e.offsetX,e.offsetY]))},e.prototype.onMouseMove=function(e){this.dragMode&&this.mouseDown&&this.move.emit([e.offsetX-this.clickX,e.offsetY-this.clickY])},e.prototype.onMouseUp=function(e){this.mouseDown=!1,this.dragMode&&(this.dragMode=!1,this.panMode.emit(!1),this.moveEnd.emit([e.offsetX-this.clickX,e.offsetY-this.clickY]))},e.prototype.mouseWheelFunc=function(e){e=window.event||e;var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));t>0?this.zoomIn.emit(e):t<0&&this.zoomOut.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()},e}(),va=function(){},ga=n("psW0"),ya=function(){},ba=function(){},_a=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var r=e.slice(0,n),i=r.toLowerCase(),o=e.slice(n+1).trim();t.maybeSetNormalizedName(r,i),t.headers.has(i)?t.headers.get(i).push(o):t.headers.set(i,[o])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var r=e[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(t.headers.set(i,r),t.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,Object(d.__spread)(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var o=this.headers.get(t);if(!o)return;0===(o=o.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),xa=function(){function e(){}return e.prototype.encodeKey=function(e){return wa(e)},e.prototype.encodeValue=function(e){return wa(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function wa(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Ea=function(){function e(e){void 0===e&&(e={});var t,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new xa,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,r=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),i=Object(d.__read)(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),o=i[0],a=i[1],s=r.get(o)||[];s.push(a),r.set(o,s)}),r)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];i.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=null)},e}();function Ma(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Ta(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Sa(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Aa=function(){function e(e,t,n,r){var i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new _a),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{var a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ea,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:Ma(this.body)||Ta(this.body)||Sa(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ea?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:Sa(this.body)?null:Ta(this.body)?this.body.type||null:Ma(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ea?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(l=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},l)),new e(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},e}(),Ca=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),Ra=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new _a,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),La=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=Ca.ResponseHeader,n}return Object(d.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(Ra),Pa=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=Ca.Response,n.body=void 0!==t.body?t.body:null,n}return Object(d.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(Ra),Oa=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return Object(d.__extends)(t,e),t}(Ra);function Ia(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var ka=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var r,i=this;if(void 0===n&&(n={}),e instanceof Aa)r=e;else{var o;o=n.headers instanceof _a?n.headers:new _a(n.headers);var a=void 0;n.params&&(a=n.params instanceof Ea?n.params:new Ea({fromObject:n.params})),r=new Aa(e,t,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var u,l=de(r).pipe((u=function(e){return i.handler.handle(e)},Object(ga.a)(u,void 0,1)));if(e instanceof Aa||"events"===n.observe)return l;var c=l.pipe(Fe(function(e){return e instanceof Pa}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return c.pipe(Object(s.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return c.pipe(Object(s.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return c.pipe(Object(s.a)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return c.pipe(Object(s.a)(function(e){return e.body}))}case"response":return c;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new Ea).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,Ia(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,Ia(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,Ia(n,t))},e}(),Na=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),Da=new r.InjectionToken("HTTP_INTERCEPTORS"),Fa=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),Ua=/^\)\]\}',?\n/,Ba=function(){},ja=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),za=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new oe.a(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var o=e.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new _a(r.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new La({headers:i,status:t,statusText:n,url:o})},l=function(){var t=u(),i=t.headers,o=t.status,a=t.statusText,s=t.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(Ua,"");try{l=""!==l?JSON.parse(l):null}catch(e){l=h,c&&(c=!1,l={error:e,text:l})}}c?(n.next(new Pa({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new Oa({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(e){var t=new Oa({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(t)},h=!1,f=function(t){h||(n.next(u()),h=!0);var i={type:Ca.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:Ca.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),e.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:Ca.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),e.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.abort()}})},e}(),Ga=new r.InjectionToken("XSRF_COOKIE_NAME"),Va=new r.InjectionToken("XSRF_HEADER_NAME"),Ha=function(){},Wa=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=T(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),qa=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)},e}(),Xa=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(Da,[]);this.chain=t.reduceRight(function(e,t){return new Na(e,t)},this.backend)}return this.chain.handle(e)},e}(),Qa=function(){function e(){}return e.disable=function(){return{ngModule:e,providers:[{provide:qa,useClass:Fa}]}},e.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:Ga,useValue:t.cookieName}:[],t.headerName?{provide:Va,useValue:t.headerName}:[]]}},e}(),Ya=function(){},Za=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new Ja(e,this.callback))},e}(),Ja=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new Te.a(n)),r}return d.__extends(t,e),t}(De.a),Ka=n("S1nX"),$a=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new es(e,this.selector,this.caught))},e}(),es=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return d.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new Fi.a(this,void 0,void 0);this.add(r),Object($.a)(this,n,void 0,void 0,r)}},t}(K.a);function ts(e){return Error('Unable to find icon with the name "'+e+'"')}function ns(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \""+e+'".')}function rs(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was \""+e+'".')}var is=function(e){e.nodeName?this.svgElement=e:this.url=e},os=function(){function e(e,t,n){this._httpClient=e,this._sanitizer=t,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}return e.prototype.addSvgIcon=function(e,t){return this.addSvgIconInNamespace("",e,t)},e.prototype.addSvgIconLiteral=function(e,t){return this.addSvgIconLiteralInNamespace("",e,t)},e.prototype.addSvgIconInNamespace=function(e,t,n){return this._addSvgIconConfig(e,t,new is(n))},e.prototype.addSvgIconLiteralInNamespace=function(e,t,n){var i=this._sanitizer.sanitize(r.SecurityContext.HTML,n);if(!i)throw rs(n);var o=this._createSvgElementForSingleIcon(i);return this._addSvgIconConfig(e,t,new is(o))},e.prototype.addSvgIconSet=function(e){return this.addSvgIconSetInNamespace("",e)},e.prototype.addSvgIconSetLiteral=function(e){return this.addSvgIconSetLiteralInNamespace("",e)},e.prototype.addSvgIconSetInNamespace=function(e,t){return this._addSvgIconSetConfig(e,new is(t))},e.prototype.addSvgIconSetLiteralInNamespace=function(e,t){var n=this._sanitizer.sanitize(r.SecurityContext.HTML,t);if(!n)throw rs(t);var i=this._svgElementFromString(n);return this._addSvgIconSetConfig(e,new is(i))},e.prototype.registerFontClassAlias=function(e,t){return void 0===t&&(t=e),this._fontCssClassesByAlias.set(e,t),this},e.prototype.classNameForFontAlias=function(e){return this._fontCssClassesByAlias.get(e)||e},e.prototype.setDefaultFontSetClass=function(e){return this._defaultFontSetClass=e,this},e.prototype.getDefaultFontSetClass=function(){return this._defaultFontSetClass},e.prototype.getSvgIconFromUrl=function(e){var t=this,n=this._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,e);if(!n)throw ns(e);var i=this._cachedIconsByUrl.get(n);return i?de(as(i)):this._loadSvgIconFromConfig(new is(e)).pipe(Xt(function(e){return t._cachedIconsByUrl.set(n,e)}),Object(s.a)(function(e){return as(e)}))},e.prototype.getNamedSvgIcon=function(e,t){void 0===t&&(t="");var n=ss(t,e),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var i,o=this._iconSetConfigs.get(t);return o?this._getSvgFromIconSetConfigs(e,o):(i=ts(n),new oe.a(function(e){return e.error(i)}))},e.prototype._getSvgFromConfig=function(e){return e.svgElement?de(as(e.svgElement)):this._loadSvgIconFromConfig(e).pipe(Xt(function(t){return e.svgElement=t}),Object(s.a)(function(e){return as(e)}))},e.prototype._getSvgFromIconSetConfigs=function(e,t){var n=this,i=this._extractIconWithNameFromAnySet(e,t);return i?de(i):Xi(t.filter(function(e){return!e.svgElement}).map(function(e){return n._loadSvgIconSetFromConfig(e).pipe((t=function(t){var i=n._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,e.url);return console.error("Loading icon set URL: "+i+" failed: "+t.message),de(null)},function(e){var n=new $a(t),r=e.lift(n);return n.caught=r}));var t})).pipe(Object(s.a)(function(){var r=n._extractIconWithNameFromAnySet(e,t);if(!r)throw ts(e);return r}))},e.prototype._extractIconWithNameFromAnySet=function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.svgElement){var i=this._extractSvgIconFromSet(r.svgElement,e);if(i)return i}}return null},e.prototype._loadSvgIconFromConfig=function(e){var t=this;return this._fetchUrl(e.url).pipe(Object(s.a)(function(e){return t._createSvgElementForSingleIcon(e)}))},e.prototype._loadSvgIconSetFromConfig=function(e){var t=this;return e.svgElement?de(e.svgElement):this._fetchUrl(e.url).pipe(Object(s.a)(function(n){return e.svgElement||(e.svgElement=t._svgElementFromString(n)),e.svgElement}))},e.prototype._createSvgElementForSingleIcon=function(e){var t=this._svgElementFromString(e);return this._setSvgAttributes(t),t},e.prototype._extractSvgIconFromSet=function(e,t){var n=e.querySelector("#"+t);if(!n)return null;var r=n.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r));var i=this._svgElementFromString("<svg></svg>");return i.appendChild(r),this._setSvgAttributes(i)},e.prototype._svgElementFromString=function(e){var t=this._document.createElement("DIV");t.innerHTML=e;var n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n},e.prototype._toSvgElement=function(e){for(var t=this._svgElementFromString("<svg></svg>"),n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[n].cloneNode(!0));return t},e.prototype._setSvgAttributes=function(e){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),e},e.prototype._fetchUrl=function(e){var t=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==e)throw Error('Cannot fetch icon from URL "'+e+'".');var n=this._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,e);if(!n)throw ns(e);var i=this._inProgressUrlFetches.get(n);if(i)return i;var o,a=this._httpClient.get(n,{responseType:"text"}).pipe((o=function(){return t._inProgressUrlFetches.delete(n)},function(e){return e.lift(new Za(o))}),Object(Ka.a)());return this._inProgressUrlFetches.set(n,a),a},e.prototype._addSvgIconConfig=function(e,t,n){return this._svgIconConfigs.set(ss(e,t),n),this},e.prototype._addSvgIconSetConfig=function(e,t){var n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(ka,8),Object(r.inject)(rr),Object(r.inject)(V,8))},token:e,providedIn:"root"}),e}();function as(e){return e.cloneNode(!0)}function ss(e,t){return e+":"+t}var us=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i._iconRegistry=n,i._inline=!1,r||t.nativeElement.setAttribute("aria-hidden","true"),i}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"inline",{get:function(){return this._inline},set:function(e){this._inline=p(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSet",{get:function(){return this._fontSet},set:function(e){this._fontSet=this._cleanupFontValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(e){this._fontIcon=this._cleanupFontValue(e)},enumerable:!0,configurable:!0}),t.prototype._splitIconName=function(e){if(!e)return["",""];var t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error('Invalid icon name: "'+e+'"')}},t.prototype.ngOnChanges=function(e){var t=this;if(e.svgIcon)if(this.svgIcon){var n=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(n[1],n[0]).pipe(We(1)).subscribe(function(e){return t._setSvgElement(e)},function(e){return console.log("Error retrieving icon: "+e.message)})}else this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()},t.prototype.ngOnInit=function(){this._usingFontIcon()&&this._updateFontIconClasses()},t.prototype._usingFontIcon=function(){return!this.svgIcon},t.prototype._setSvgElement=function(e){this._clearSvgElement();for(var t=e.querySelectorAll("style"),n=0;n<t.length;n++)t[n].textContent+=" ";this._elementRef.nativeElement.appendChild(e)},t.prototype._clearSvgElement=function(){for(var e=this._elementRef.nativeElement,t=e.childNodes.length;t--;){var n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}},t.prototype._updateFontIconClasses=function(){if(this._usingFontIcon()){var e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}},t.prototype._cleanupFontValue=function(e){return"string"==typeof e?e.trim().split(" ")[0]:e},t}(yr(function(e){this._elementRef=e})),ls=function(){},cs=r["\u0275crt"]({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function hs(e){return r["\u0275vid"](2,[r["\u0275ncd"](null,0)],null,null)}var fs=r["\u0275crt"]({encapsulation:0,styles:[".canvas[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;z-index:-1}.polygon[_ngcontent-%COMP%]{stroke:#000;stroke-width:1;vector-effect:non-scaling-stroke;fill-rule:evenodd}.room[_ngcontent-%COMP%]:hover{opacity:.5;cursor:pointer}.selected-space[_ngcontent-%COMP%]{stroke-width:2}.toolbar[_ngcontent-%COMP%]{position:absolute;color:red;right:20px;width:100%}.icon-div[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{float:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:rgba(220,220,220,.3);border-width:1px;border-radius:5px;margin-left:5px;padding:5px;z-index:1}.mat-icon[_ngcontent-%COMP%]{color:rgba(0,0,0,.6);font-size:30px;height:30px;width:30px;z-index:10}.mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer;color:rgba(0,0,0,1)}.footer[_ngcontent-%COMP%]{background-color:rgba(220,220,220,.3);position:absolute;font-family:consolas;font-size:12px;padding:0 10px;border-radius:5px;bottom:10px}"],data:{}});function ds(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,14,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,16777216,null,null,4,"div",[["class","icon-div"],["matTooltip","Zoom in"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(e,t,n){var i=!0,o=e.component;return"longpress"===t&&(i=!1!==r["\u0275nov"](e,2).show()&&i),"keydown"===t&&(i=!1!==r["\u0275nov"](e,2)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==r["\u0275nov"](e,2)._handleTouchend()&&i),"click"===t&&(i=!1!==o.zoomIn(null)&&i),i},null,null)),r["\u0275did"](2,147456,null,0,Ot,[_t,r.ElementRef,je,r.ViewContainerRef,r.NgZone,X,en,nn,Rt,[2,Ht],[2,Pt]],{message:[0,"message"]},null),(e()(),r["\u0275eld"](3,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,hs,cs)),r["\u0275did"](4,638976,null,0,us,[r.ElementRef,os,[8,null]],null,null),(e()(),r["\u0275ted"](-1,0,["zoom_in"])),(e()(),r["\u0275eld"](6,16777216,null,null,4,"div",[["class","icon-div"],["matTooltip","Zoom out"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(e,t,n){var i=!0,o=e.component;return"longpress"===t&&(i=!1!==r["\u0275nov"](e,7).show()&&i),"keydown"===t&&(i=!1!==r["\u0275nov"](e,7)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==r["\u0275nov"](e,7)._handleTouchend()&&i),"click"===t&&(i=!1!==o.zoomOut(null)&&i),i},null,null)),r["\u0275did"](7,147456,null,0,Ot,[_t,r.ElementRef,je,r.ViewContainerRef,r.NgZone,X,en,nn,Rt,[2,Ht],[2,Pt]],{message:[0,"message"]},null),(e()(),r["\u0275eld"](8,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,hs,cs)),r["\u0275did"](9,638976,null,0,us,[r.ElementRef,os,[8,null]],null,null),(e()(),r["\u0275ted"](-1,0,["zoom_out"])),(e()(),r["\u0275eld"](11,16777216,null,null,3,"div",[["class","icon-div"],["matTooltip","Zoom extents"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(e,t,n){var i=!0,o=e.component;return"longpress"===t&&(i=!1!==r["\u0275nov"](e,12).show()&&i),"keydown"===t&&(i=!1!==r["\u0275nov"](e,12)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==r["\u0275nov"](e,12)._handleTouchend()&&i),"click"===t&&(i=!1!==o.zoomExtents()&&i),i},null,null)),r["\u0275did"](12,147456,null,0,Ot,[_t,r.ElementRef,je,r.ViewContainerRef,r.NgZone,X,en,nn,Rt,[2,Ht],[2,Pt]],{message:[0,"message"]},null),(e()(),r["\u0275eld"](13,0,null,null,1,"mat-icon",[["class","mat-icon"],["role","img"],["svgIcon","zoom_extents"]],[[2,"mat-icon-inline",null]],null,null,hs,cs)),r["\u0275did"](14,638976,null,0,us,[r.ElementRef,os,[8,null]],{svgIcon:[0,"svgIcon"]},null)],function(e,t){e(t,2,0,"Zoom in"),e(t,4,0),e(t,7,0,"Zoom out"),e(t,9,0),e(t,12,0,"Zoom extents"),e(t,14,0,"zoom_extents")},function(e,t){e(t,3,0,r["\u0275nov"](t,4).inline),e(t,8,0,r["\u0275nov"](t,9).inline),e(t,13,0,r["\u0275nov"](t,14).inline)})}function ps(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,":svg:circle",[["fill","black"]],[[1,"cx",0],[1,"cy",0],[1,"r",0]],null,null,null,null))],null,function(e,t){e(t,0,0,t.parent.context.$implicit.centroid[0],t.parent.context.$implicit.centroid[1],500*t.component.scaled)})}function ms(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,":svg:text",[["alignment-baseline","central"],["dy","150"],["style","font-family:roboto; fill: black;"],["text-anchor","middle"]],[[4,"font-size","em"],[1,"x",0],[1,"y",0]],null,null,null,null)),(e()(),r["\u0275ted"](1,null,[" "," "]))],null,function(e,t){e(t,0,0,"10",t.parent.context.$implicit.centroid[0],t.parent.context.$implicit.centroid[1]),e(t,1,0,t.parent.context.$implicit.description)})}function vs(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,7,":svg:g",[["class","room"]],[[1,"transform",0],[8,"id",0],[1,"fill",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.selectRoom(n,e.context.$implicit)&&r),r},null,null)),(e()(),r["\u0275eld"](1,0,null,null,0,":svg:path",[["class","polygon"]],[[2,"selected-space",null],[1,"d",0]],null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,ps)),r["\u0275did"](3,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](4,0,null,null,1,":svg:text",[["alignment-baseline","central"],["style","font-family:roboto; fill: black;"],["text-anchor","middle"]],[[4,"font-size","em"],[1,"x",0],[1,"dy",0],[1,"y",0]],null,null,null,null)),(e()(),r["\u0275ted"](5,null,[" "," "])),(e()(),r["\u0275and"](16777216,null,null,1,null,ms)),r["\u0275did"](7,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,3,0,t.component.centroids),e(t,7,0,t.context.$implicit.description)},function(e,t){var n=t.component;e(t,0,0,n.transform,t.context.$implicit.uri,t.context.$implicit.selected?n.selectedColor:t.context.$implicit.color),e(t,1,0,t.context.$implicit.selected,t.context.$implicit.path),e(t,4,0,"12",t.context.$implicit.centroid[0],t.context.$implicit.description?-150:0,t.context.$implicit.centroid[1]),e(t,5,0,t.context.$implicit.name)})}function gs(e){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{planContainer:0}),(e()(),r["\u0275and"](16777216,null,null,1,null,ds)),r["\u0275did"](2,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](3,0,null,null,2,"div",[["class","footer"]],null,null,null,null,null)),(e()(),r["\u0275eld"](4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r["\u0275ted"](-1,null,['Press and hold "Alt" to pan'])),(e()(),r["\u0275eld"](6,0,[[1,0],["canvas",1]],null,3,":svg:svg",[["canvasEvents",""],["class","canvas"],["id","canvas"]],[[4,"cursor",null]],[[null,"click"],[null,"zoomOut"],[null,"zoomIn"],[null,"panMode"],[null,"move"],[null,"moveEnd"],["window","resize"],[null,"addNodeMode"],[null,"mousewheel"],[null,"DOMMouseScroll"],[null,"onmousewheel"],["document","keydown"],["document","keyup"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"]],function(e,t,n){var i=!0,o=e.component;return"mousewheel"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseWheelChrome(n)&&i),"DOMMouseScroll"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseWheelFirefox(n)&&i),"onmousewheel"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseWheelIE(n)&&i),"document:keydown"===t&&(i=!1!==r["\u0275nov"](e,7).onKeyDown(n)&&i),"document:keyup"===t&&(i=!1!==r["\u0275nov"](e,7).onKeyUp(n)&&i),"mousedown"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseClick(n)&&i),"mousemove"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseMove(n)&&i),"mouseup"===t&&(i=!1!==r["\u0275nov"](e,7).onMouseUp(n)&&i),"click"===t&&(i=!1!==o.onCanvasClick(n)&&i),"zoomOut"===t&&(i=!1!==o.zoomOut(n)&&i),"zoomIn"===t&&(i=!1!==o.zoomIn(n)&&i),"panMode"===t&&(i=!1!==(o.panMode=n)&&i),"move"===t&&(i=!1!==o.move(n)&&i),"moveEnd"===t&&(i=!1!==o.moveEnd(n)&&i),"window:resize"===t&&(i=!1!==o.onWindowResize()&&i),"addNodeMode"===t&&(i=!1!==(o.addNodeMode=n)&&i),i},null,null)),r["\u0275did"](7,16384,null,0,ma,[],null,{zoomOut:"zoomOut",zoomIn:"zoomIn",move:"move",moveEnd:"moveEnd",panMode:"panMode",addNodeMode:"addNodeMode"}),(e()(),r["\u0275and"](16777216,null,null,1,null,vs)),r["\u0275did"](9,278528,null,0,C,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.toolbar),e(t,9,0,n.rooms)},function(e,t){e(t,6,0,t.component.panMode?"move":"default")})}function ys(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(ys.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var bs,_s,xs,ws,Es,Ms,Ts,Ss,As,Cs="95",Rs=0,Ls=1,Ps=2,Os=1,Is=2,ks=0,Ns=1,Ds=2,Fs=0,Us=1,Bs=2,js=0,zs=1,Gs=2,Vs=3,Hs=4,Ws=5,qs=100,Xs=101,Qs=102,Ys=103,Zs=104,Js=200,Ks=201,$s=202,eu=203,tu=204,nu=205,ru=206,iu=207,ou=208,au=209,su=210,uu=0,lu=1,cu=2,hu=3,fu=4,du=5,pu=6,mu=7,vu=0,gu=1,yu=2,bu=0,_u=1,xu=2,wu=3,Eu=4,Mu=301,Tu=302,Su=303,Au=304,Cu=305,Ru=306,Lu=307,Pu=1e3,Ou=1001,Iu=1002,ku=1003,Nu=1004,Du=1005,Fu=1006,Uu=1007,Bu=1008,ju=1009,zu=1010,Gu=1011,Vu=1012,Hu=1013,Wu=1014,qu=1015,Xu=1016,Qu=1017,Yu=1018,Zu=1019,Ju=1020,Ku=1021,$u=1022,el=1023,tl=1024,nl=1025,rl=1026,il=1027,ol=33776,al=33777,sl=33778,ul=33779,ll=35840,cl=35841,hl=35842,fl=35843,dl=36196,pl=37808,ml=37809,vl=37810,gl=37811,yl=37812,bl=37813,_l=37814,xl=37815,wl=37816,El=37817,Ml=37818,Tl=37819,Sl=37820,Al=37821,Cl=2201,Rl=2400,Ll=0,Pl=1,Ol=2,Il=3e3,kl=3001,Nl=3007,Dl=3002,Fl=3004,Ul=3005,Bl=3006,jl=3200,zl=3201,Gl=0,Vl=1,Hl={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Hl.DEG2RAD},radToDeg:function(e){return e*Hl.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Wl(e,t){this.x=e||0,this.y=t||0}function ql(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Xl(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Ql(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Yl(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Wl.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Wl.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(bs=new Wl,_s=new Wl,function(e,t){return bs.set(e,e),_s.set(t,t),this.clamp(bs,_s)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(ql.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new ql).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(Ss=new Ql,function(e){var t=this.elements,n=e.elements,r=1/Ss.setFromMatrixColumn(e,0).length(),i=1/Ss.setFromMatrixColumn(e,1).length(),o=1/Ss.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=u*l;t[0]=(g=s*l)+(y=u*c)*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=m*a-v,t[6]=y+g*a,t[10]=o*s}else if("ZXY"===e.order){var g,y;m=s*c,v=u*l,t[0]=(g=s*l)-(y=u*c)*a,t[4]=-o*c,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*l,t[9]=y-g*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order)h=o*l,f=o*c,d=a*l,p=a*c,t[0]=s*l,t[4]=d*u-f,t[8]=h*u+p,t[1]=s*c,t[5]=p*u+h,t[9]=f*u-d,t[2]=-u,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var b=o*s,_=o*u,x=a*s,w=a*u;t[0]=s*l,t[4]=w-b*c,t[8]=x*c+_,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=_*c+x,t[10]=b-w*c}else"XZY"===e.order&&(b=o*s,_=o*u,x=a*s,w=a*u,t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+w,t[5]=o*l,t[9]=_*c-x,t[2]=x*c-_,t[6]=a*l,t[10]=w*c+b);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new Ql(0,0,0),t=new Ql(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:(Es=new Ql,Ms=new Ql,Ts=new Ql,function(e,t,n){var r=this.elements;return Ts.subVectors(e,t),0===Ts.lengthSq()&&(Ts.z=1),Ts.normalize(),Es.crossVectors(n,Ts),0===Es.lengthSq()&&(1===Math.abs(n.z)?Ts.x+=1e-4:Ts.z+=1e-4,Ts.normalize(),Es.crossVectors(n,Ts)),Es.normalize(),Ms.crossVectors(Ts,Es),r[0]=Es.x,r[4]=Ms.x,r[8]=Ts.x,r[1]=Es.y,r[5]=Ms.y,r[9]=Ts.y,r[2]=Es.z,r[6]=Ms.z,r[10]=Ts.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],A=r[9],C=r[13],R=r[2],L=r[6],P=r[10],O=r[14],I=r[3],k=r[7],N=r[11],D=r[15];return i[0]=o*x+a*T+s*R+u*I,i[4]=o*w+a*S+s*L+u*k,i[8]=o*E+a*A+s*P+u*N,i[12]=o*M+a*C+s*O+u*D,i[1]=l*x+c*T+h*R+f*I,i[5]=l*w+c*S+h*L+f*k,i[9]=l*E+c*A+h*P+f*N,i[13]=l*M+c*C+h*O+f*D,i[2]=d*x+p*T+m*R+v*I,i[6]=d*w+p*S+m*L+v*k,i[10]=d*E+p*A+m*P+v*N,i[14]=d*M+p*C+m*O+v*D,i[3]=g*x+y*T+b*R+_*I,i[7]=g*w+y*S+b*L+_*k,i[11]=g*E+y*A+b*P+_*N,i[15]=g*M+y*C+b*O+_*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Ql;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+e[15]*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*c*m-l*y*m-d*c*b+l*p*b,x=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,w=f*g*h-v*d*h+v*l*m-u*g*m-f*l*b+u*d*b,E=v*d*c-f*g*c-v*l*p+u*g*p+f*l*y-u*d*y,M=i*_+o*x+a*w+s*E;if(0===M){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=_*S,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*S,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*S,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*S,n[4]=x*S,n[5]=(f*y*s-v*p*s+v*a*m-i*y*m-f*a*b+i*p*b)*S,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*b-i*c*b)*S,n[7]=(u*p*s-f*c*s+f*a*h-i*p*h-u*a*m+i*c*m)*S,n[8]=w*S,n[9]=(v*d*s-f*g*s-v*o*m+i*g*m+f*o*b-i*d*b)*S,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*b+i*l*b)*S,n[11]=(f*l*s-u*d*s-f*o*h+i*d*h+u*o*m-i*l*m)*S,n[12]=E*S,n[13]=(f*g*a-v*d*a+v*o*p-i*g*p-f*o*y+i*d*y)*S,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*S,n[15]=(u*d*a-f*l*a+f*o*c-i*d*c-u*o*p+i*l*p)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(xs=new Ql,ws=new ql,function(e,t,n){var r=this.elements,i=xs.set(r[0],r[1],r[2]).length(),o=xs.set(r[4],r[5],r[6]).length(),a=xs.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ws.copy(this);var s=1/i,u=1/o,l=1/a;return ws.elements[0]*=s,ws.elements[1]*=s,ws.elements[2]*=s,ws.elements[4]*=u,ws.elements[5]*=u,ws.elements[6]*=u,ws.elements[8]*=l,ws.elements[9]*=l,ws.elements[10]*=l,t.setFromRotationMatrix(ws),n.x=i,n.y=o,n.z=a,this}),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=2*i/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Xl,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var x=a*g;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Object.defineProperties(Xl.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Xl.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"YXZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"ZXY"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"ZYX"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"YZX"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):"XZY"===o&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Ql;return function(n,r){return void 0===t&&(t=new Ql),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Hl.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize()}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Ql.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(As=new Xl,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(As.setFromEuler(e))}),applyAxisAngle:function(){var e=new Xl;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(){var e=new ql;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new ql;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Ql,t=new Ql;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Ql;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Ql;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Hl.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Yl.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Ql;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*x,i[6]=o*v+a*b+s*w,i[1]=u*p+l*g+c*_,i[4]=u*m+l*y+c*x,i[7]=u*v+l*b+c*w,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*x,i[8]=h*v+f*b+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,v=i*d+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(l*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Zl,Jl,Kl,$l,ec={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{"undefined"!=typeof OffscreenCanvas?t=new OffscreenCanvas(e.width,e.height):((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height);var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},tc=0;function nc(e,t,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:tc++}),this.uuid=Hl.generateUUID(),this.name="",this.image=void 0!==e?e:nc.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:nc.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ou,this.wrapT=void 0!==r?r:Ou,this.magFilter=void 0!==i?i:Fu,this.minFilter=void 0!==o?o:Bu,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:el,this.type=void 0!==s?s:ju,this.offset=new Wl(0,0),this.repeat=new Wl(1,1),this.center=new Wl(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Il,this.version=0,this.onUpdate=null}function rc(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function ic(e,t,n){this.width=e,this.height=t,this.scissor=new rc(0,0,e,t),this.scissorTest=!1,this.viewport=new rc(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Fu),this.texture=new nc(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function oc(e,t,n){ic.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function ac(e,t,n,r,i,o,a,s,u,l,c,h){nc.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:ku,this.minFilter=void 0!==l?l:ku,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function sc(e,t){this.min=void 0!==e?e:new Ql(1/0,1/0,1/0),this.max=void 0!==t?t:new Ql(-1/0,-1/0,-1/0)}function uc(e,t){this.center=void 0!==e?e:new Ql,this.radius=void 0!==t?t:0}function lc(e,t){this.normal=void 0!==e?e:new Ql(1,0,0),this.constant=void 0!==t?t:0}function cc(e,t,n,r,i,o){this.planes=[void 0!==e?e:new lc,void 0!==t?t:new lc,void 0!==n?n:new lc,void 0!==r?r:new lc,void 0!==i?i:new lc,void 0!==o?o:new lc]}nc.DEFAULT_IMAGE=void 0,nc.DEFAULT_MAPPING=300,nc.prototype=Object.assign(Object.create(ys.prototype),{constructor:nc,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Hl.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(ec.getDataURL(r[o]))}else i=ec.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pu:e.x=e.x-Math.floor(e.x);break;case Ou:e.x=e.x<0?0:1;break;case Iu:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Pu:e.y=e.y-Math.floor(e.y);break;case Ou:e.y=e.y<0?0:1;break;case Iu:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(nc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(rc.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,t),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new rc,t=new rc),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),ic.prototype=Object.assign(Object.create(ys.prototype),{constructor:ic,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(oc.prototype=Object.create(ic.prototype)).constructor=oc,oc.prototype.isWebGLRenderTargetCube=!0,(ac.prototype=Object.create(nc.prototype)).constructor=ac,ac.prototype.isDataTexture=!0,Object.assign(sc.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ql;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ql),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ql),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Ql;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ql),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Zl=new Ql,function(e){return this.clampPoint(e.center,Zl),Zl.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new Ql,t=new Ql,n=new Ql,r=new Ql,i=new Ql,o=new Ql,a=new Ql,s=new Ql,u=new Ql,l=new Ql;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),l=e.dot(a),c=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(h)&&!!c(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(h=[l.x,l.y,l.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ql),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ql;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Ql;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new uc),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,n=t[0]*this.min.x,r=t[1]*this.min.x,i=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,u=t[4]*this.min.y,l=t[5]*this.min.y,c=t[6]*this.min.y,h=t[4]*this.max.y,f=t[5]*this.max.y,d=t[6]*this.max.y,p=t[8]*this.min.z,m=t[9]*this.min.z,v=t[10]*this.min.z,g=t[8]*this.max.z,y=t[9]*this.max.z,b=t[10]*this.max.z;return this.min.x=Math.min(n,o)+Math.min(u,h)+Math.min(p,g)+t[12],this.min.y=Math.min(r,a)+Math.min(l,f)+Math.min(m,y)+t[13],this.min.z=Math.min(i,s)+Math.min(c,d)+Math.min(v,b)+t[14],this.max.x=Math.max(n,o)+Math.max(u,h)+Math.max(p,g)+t[12],this.max.y=Math.max(r,a)+Math.max(l,f)+Math.max(m,y)+t[13],this.max.z=Math.max(i,s)+Math.max(c,d)+Math.max(v,b)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(uc.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Jl=new sc,function(e,t){var n=this.center;void 0!==t?n.copy(t):Jl.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Ql),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new sc),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(lc.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Ql,t=new Ql;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Ql),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Ql;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Ql);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Ql),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ql,t=new Yl;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(cc.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+u,p+f,y+v).normalize(),t[3].setComponents(a-i,c-u,p-f,y-v).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this},intersectsObject:($l=new uc,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$l.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($l)}),intersectsSprite:function(){var e=new uc;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Kl=new Ql,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Kl.x=r.normal.x>0?e.max.x:e.min.x,Kl.y=r.normal.y>0?e.max.y:e.min.y,Kl.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Kl)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var hc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},fc={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return t}},dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pc(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(pc.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Hl.euclideanModulo(t,1),n=Hl.clamp(n,0,1),r=Hl.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,a,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(u=dc[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-r)/l+2;break;case o:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var mc,vc={common:{diffuse:{value:new pc(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Yl},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Wl(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pc(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new pc(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Yl}},sprite:{diffuse:{value:new pc(15658734)},opacity:{value:1},center:{value:new Wl(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Yl}}},gc={basic:{uniforms:fc.merge([vc.common,vc.specularmap,vc.envmap,vc.aomap,vc.lightmap,vc.fog]),vertexShader:hc.meshbasic_vert,fragmentShader:hc.meshbasic_frag},lambert:{uniforms:fc.merge([vc.common,vc.specularmap,vc.envmap,vc.aomap,vc.lightmap,vc.emissivemap,vc.fog,vc.lights,{emissive:{value:new pc(0)}}]),vertexShader:hc.meshlambert_vert,fragmentShader:hc.meshlambert_frag},phong:{uniforms:fc.merge([vc.common,vc.specularmap,vc.envmap,vc.aomap,vc.lightmap,vc.emissivemap,vc.bumpmap,vc.normalmap,vc.displacementmap,vc.gradientmap,vc.fog,vc.lights,{emissive:{value:new pc(0)},specular:{value:new pc(1118481)},shininess:{value:30}}]),vertexShader:hc.meshphong_vert,fragmentShader:hc.meshphong_frag},standard:{uniforms:fc.merge([vc.common,vc.envmap,vc.aomap,vc.lightmap,vc.emissivemap,vc.bumpmap,vc.normalmap,vc.displacementmap,vc.roughnessmap,vc.metalnessmap,vc.fog,vc.lights,{emissive:{value:new pc(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:hc.meshphysical_vert,fragmentShader:hc.meshphysical_frag},points:{uniforms:fc.merge([vc.points,vc.fog]),vertexShader:hc.points_vert,fragmentShader:hc.points_frag},dashed:{uniforms:fc.merge([vc.common,vc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hc.linedashed_vert,fragmentShader:hc.linedashed_frag},depth:{uniforms:fc.merge([vc.common,vc.displacementmap]),vertexShader:hc.depth_vert,fragmentShader:hc.depth_frag},normal:{uniforms:fc.merge([vc.common,vc.bumpmap,vc.normalmap,vc.displacementmap,{opacity:{value:1}}]),vertexShader:hc.normal_vert,fragmentShader:hc.normal_frag},sprite:{uniforms:fc.merge([vc.sprite,vc.fog]),vertexShader:hc.sprite_vert,fragmentShader:hc.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hc.cube_vert,fragmentShader:hc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hc.equirect_vert,fragmentShader:hc.equirect_frag},distanceRGBA:{uniforms:fc.merge([vc.common,vc.displacementmap,{referencePosition:{value:new Ql},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hc.distanceRGBA_vert,fragmentShader:hc.distanceRGBA_frag},shadow:{uniforms:fc.merge([vc.lights,vc.fog,{color:{value:new pc(0)},opacity:{value:1}}]),vertexShader:hc.shadow_vert,fragmentShader:hc.shadow_frag}};function yc(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function bc(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||bc.DefaultOrder}function _c(){this.mask=1}gc.physical={uniforms:fc.merge([gc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:hc.meshphysical_vert,fragmentShader:hc.meshphysical_frag},bc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],bc.DefaultOrder="XYZ",Object.defineProperties(bc.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(bc.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Hl.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new ql;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(mc=new Xl,function(e){return mc.setFromEuler(this),this.setFromQuaternion(mc,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ql(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_c.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var xc,wc,Ec,Mc,Tc=0;function Sc(){Object.defineProperty(this,"id",{value:Tc++}),this.uuid=Hl.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sc.DefaultUp.clone();var e=new Ql,t=new bc,n=new Xl,r=new Ql(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new ql},normalMatrix:{value:new Yl}}),this.matrix=new ql,this.matrixWorld=new ql,this.matrixAutoUpdate=Sc.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _c,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ac(){Sc.call(this),this.type="Camera",this.matrixWorldInverse=new ql,this.projectionMatrix=new ql}function Cc(e,t,n,r,i,o){Ac.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Rc(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Ql,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new pc,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Sc.DefaultUp=new Ql(0,1,0),Sc.DefaultMatrixAutoUpdate=!0,Sc.prototype=Object.assign(Object.create(ys.prototype),{constructor:Sc,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Mc=new Xl,function(e,t){return Mc.setFromAxisAngle(e,t),this.quaternion.multiply(Mc),this}),rotateOnWorldAxis:function(){var e=new Xl;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Ql(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Ql(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Ql(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Ql;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Ql(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Ql(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Ql(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Ec=new ql,function(e){return e.applyMatrix4(Ec.getInverse(this.matrixWorld))}),lookAt:function(){var e=new ql,t=new Ql;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Ql),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(xc=new Ql,wc=new Ql,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Xl),this.updateMatrixWorld(!0),this.matrixWorld.decompose(xc,e,wc),e}),getWorldScale:function(){var e=new Ql,t=new Xl;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Ql),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Xl;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Ql),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++)i(e.shapes,a[s]);else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object);if(t){var c=p(e.geometries),h=p(e.materials),f=p(e.textures),d=p(e.images);a=p(e.shapes),c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),f.length>0&&(n.textures=f),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function p(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}),Ac.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Ac,isCamera:!0,copy:function(e,t){return Sc.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Xl;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Ql),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Sc.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Cc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Cc,isOrthographicCamera:!0,copy:function(e,t){return Ac.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=Sc.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Rc.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Lc,Pc,Oc=0;function Ic(){Object.defineProperty(this,"id",{value:Oc+=2}),this.uuid=Hl.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function kc(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Nc(e,t,n){kc.call(this,new Int8Array(e),t,n)}function Dc(e,t,n){kc.call(this,new Uint8Array(e),t,n)}function Fc(e,t,n){kc.call(this,new Uint8ClampedArray(e),t,n)}function Uc(e,t,n){kc.call(this,new Int16Array(e),t,n)}function Bc(e,t,n){kc.call(this,new Uint16Array(e),t,n)}function jc(e,t,n){kc.call(this,new Int32Array(e),t,n)}function zc(e,t,n){kc.call(this,new Uint32Array(e),t,n)}function Gc(e,t,n){kc.call(this,new Float32Array(e),t,n)}function Vc(e,t,n){kc.call(this,new Float64Array(e),t,n)}function Hc(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Wc(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Ic.prototype=Object.assign(Object.create(ys.prototype),{constructor:Ic,isGeometry:!0,applyMatrix:function(e){for(var t=(new Yl).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new ql;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ql;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ql;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new ql;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new ql;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(Pc=new Sc,function(e){Pc.lookAt(e),Pc.updateMatrix(),this.applyMatrix(Pc.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],h=[],f=0,d=0;f<i.length;f+=3,d+=2)t.vertices.push(new Ql(i[f],i[f+1],i[f+2])),void 0!==o&&l.push(new Ql(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new pc(a[f],a[f+1],a[f+2])),void 0!==s&&c.push(new Wl(s[d],s[d+1])),void 0!==u&&h.push(new Wl(u[d],u[d+1]));function p(e,n,r,i){var f=new Rc(e,n,r,void 0!==o?[l[e].clone(),l[n].clone(),l[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[n].clone(),c[r].clone()]),void 0!==u&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}var m=e.groups;if(m.length>0)for(f=0;f<m.length;f++)for(var v=m[f],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==n?p(n[d],n[d+1],n[d+2],v.materialIndex):p(d,d+1,d+2,v.materialIndex);else if(void 0!==n)for(f=0;f<n.length;f+=3)p(n[f],n[f+1],n[f+2]);else for(f=0;f<i.length/3;f+=3)p(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Lc=new Ql,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lc).negate(),this.translate(Lc.x,Lc.y,Lc.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new ql;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Ql,t=new Ql,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Ql;if(e){var s,u,l=new Ql,c=new Ql;for(r=0,i=this.faces.length;r<i;r++)s=this.vertices[(o=this.faces[r]).a],l.subVectors(this.vertices[o.c],u=this.vertices[o.b]),c.subVectors(s,u),l.cross(c),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Ic;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new Ql,l={a:new Ql,b:new Ql,c:new Ql},a.push(u),s.push(l)}var u,l,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)l=c.vertexNormals[n],(u=c.faceNormals[n]).copy((i=this.faces[n]).normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new sc),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new uc),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Yl).getNormalMatrix(t));for(var d=0,p=a.length;d<p;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,p=f.length;d<p;d++)h.push(f[d].clone());for(d=0,p=u.length;d<p;d++){var v,g,y=u[d],b=y.vertexNormals,_=y.vertexColors;(v=new Rc(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var x=0,w=b.length;x<w;x++)g=b[x].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(y.color),x=0,w=_.length;x<w;x++)v.vertexColors.push(_[x].clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(d=0,p=c.length;d<p;d++){var E=c[d],M=[];if(void 0!==E){for(x=0,w=E.length;x<w;x++)M.push(E[x].clone());l.push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Ql(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b=E(b,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),a.push(b),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];a.push(S(_[0]),S(_[1]),S(_[2]))}if(m&&a.push(M(d.normal)),v){var x=d.vertexNormals;a.push(M(x[0]),M(x[1]),M(x[2]))}if(g&&a.push(T(d.color)),y){var w=d.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/2,h.push(e.x,e.y),f[t])}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Ic).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++)f.push(h[o].clone());this.faceVertexUvs[t].push(f)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var p={};if(p.name=d[t].name,void 0!==d[t].vertices)for(p.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)p.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(p.normals=[],r=0,i=d[t].normals.length;r<i;r++)p.normals.push(d[t].normals[r].clone());this.morphTargets.push(p)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],r=0,i=m[t].vertexNormals.length;r<i;r++){var g=m[t].vertexNormals[r],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],r=0,i=m[t].faceNormals.length;r<i;r++)v.faceNormals.push(m[t].faceNormals[r].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(kc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(kc.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new pc),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Wl),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Ql),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new rc),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(Nc.prototype=Object.create(kc.prototype)).constructor=Nc,(Dc.prototype=Object.create(kc.prototype)).constructor=Dc,(Fc.prototype=Object.create(kc.prototype)).constructor=Fc,(Uc.prototype=Object.create(kc.prototype)).constructor=Uc,(Bc.prototype=Object.create(kc.prototype)).constructor=Bc,(jc.prototype=Object.create(kc.prototype)).constructor=jc,(zc.prototype=Object.create(kc.prototype)).constructor=zc,(Gc.prototype=Object.create(kc.prototype)).constructor=Gc,(Vc.prototype=Object.create(kc.prototype)).constructor=Vc,Object.assign(Hc.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var c,h=e.morphNormals,f=h.length;if(f>0){for(c=[],l=0;l<f;l++)c[l]=[];this.morphTargets.normal=c}var d=e.skinIndices,p=e.skinWeights,m=d.length===r.length,v=p.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Wl,new Wl,new Wl))),!0===a&&(void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Wl,new Wl,new Wl)));for(var E=0;E<u;E++){var M=s[E].vertices;t[E].push(M[g.a],M[g.b],M[g.c])}for(E=0;E<f;E++){var T=h[E].vertexNormals[l];c[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var qc=1;function Xc(){Object.defineProperty(this,"id",{value:qc+=2}),this.uuid=Hl.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Qc(e,t,n,r,i,o){Ic.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Yc(e,t,n,r,i,o)),this.mergeVertices()}function Yc(e,t,n,r,i,o){Xc.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function d(e,t,n,r,i,o,d,p,m,v,g){var y,b,_=o/m,x=d/v,w=o/2,E=d/2,M=p/2,T=m+1,S=v+1,A=0,C=0,R=new Ql;for(b=0;b<S;b++){var L=b*x-E;for(y=0;y<T;y++)R[e]=(y*_-w)*r,R[t]=L*i,R[n]=M,u.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=p>0?1:-1,l.push(R.x,R.y,R.z),c.push(y/m),c.push(1-b/v),A+=1}for(b=0;b<v;b++)for(y=0;y<m;y++){var P=h+y+T*(b+1),O=h+(y+1)+T*(b+1),I=h+(y+1)+T*b;s.push(h+y+T*b,P,I),s.push(P,O,I),C+=6}a.addGroup(f,C,g),f+=C,h+=A}d("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),d("z","y","x",1,-1,n,t,-e,o,i,1),d("x","z","y",1,1,e,n,t,r,o,2),d("x","z","y",1,-1,e,n,-t,r,o,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Gc(u,3)),this.addAttribute("normal",new Gc(l,3)),this.addAttribute("uv",new Gc(c,2))}function Zc(e,t,n,r){Ic.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Jc(e,t,n,r)),this.mergeVertices()}function Jc(e,t,n,r){Xc.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=e/u,d=t/l,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<c;i++)m.push(i*f-a,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}for(o=0;o<l;o++)for(i=0;i<u;i++){var b=i+c*(o+1),_=i+1+c*(o+1),x=i+1+c*o;p.push(i+c*o,b,x),p.push(b,_,x)}this.setIndex(p),this.addAttribute("position",new Gc(m,3)),this.addAttribute("normal",new Gc(v,3)),this.addAttribute("uv",new Gc(g,2))}Xc.prototype=Object.assign(Object.create(ys.prototype),{constructor:Xc,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(Wc(e)>65535?zc:Bc)(e,1):e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new kc(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new Yl).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new ql;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ql;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ql;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new ql;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new ql;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Sc;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Ql;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Gc(3*t.vertices.length,3),r=new Gc(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Gc(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Gc(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Hc).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new kc(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new kc(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new kc(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new kc(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new kc(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new Gc(3*h.length,3);s.push(f.copyVector3sArray(h))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new Gc(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Gc(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new sc);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new sc,t=new Ql;return function(){null===this.boundingSphere&&(this.boundingSphere=new uc);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new kc(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,u,l,c=t.normal.array,h=new Ql,f=new Ql,d=new Ql,p=new Ql,m=new Ql;if(e){var v=e.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var b=n[g],_=b.start;for(o=_,a=_+b.count;o<a;o+=3)u=3*v[o+1],l=3*v[o+2],h.fromArray(r,s=3*v[o+0]),f.fromArray(r,u),d.fromArray(r,l),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}}else for(o=0,a=r.length;o<a;o+=9)h.fromArray(r,o),f.fromArray(r,o+3),d.fromArray(r,o+6),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[o]=p.x,c[o+1]=p.y,c[o+2]=p.z,c[o+3]=p.x,c[o+4]=p.y,c[o+5]=p.z,c[o+6]=p.x,c[o+7]=p.y,c[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,u=o.itemSize*t;s<a.length;s++,u++)i[u]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Ql;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Xc,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),u=0,l=0,c=0,h=t.length;c<h;c++){u=t[c]*a;for(var f=0;f<a;f++)s[l++]=o[u++]}e.addAttribute(r,new kc(s,a))}var d=this.groups;for(c=0,h=d.length;c<h;c++){var p=d[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new Xc).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o)this.addAttribute(t,o[t].clone());var a=e.morphAttributes;for(t in a){var s=[],u=a[t];for(n=0,r=u.length;n<r;n++)s.push(u[n].clone());this.morphAttributes[t]=s}var l=e.groups;for(n=0,r=l.length;n<r;n++){var c=l[n];this.addGroup(c.start,c.count,c.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Qc.prototype=Object.create(Ic.prototype)).constructor=Qc,(Yc.prototype=Object.create(Xc.prototype)).constructor=Yc,(Zc.prototype=Object.create(Ic.prototype)).constructor=Zc,(Jc.prototype=Object.create(Xc.prototype)).constructor=Jc;var Kc,$c,eh,th,nh,rh,ih,oh,ah,sh,uh,lh=0;function ch(){Object.defineProperty(this,"id",{value:lh++}),this.uuid=Hl.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=zs,this.side=ks,this.flatShading=!1,this.vertexColors=Fs,this.opacity=1,this.transparent=!1,this.blendSrc=tu,this.blendDst=nu,this.blendEquation=qs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hu,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function hh(e){ch.call(this),this.type="MeshBasicMaterial",this.color=new pc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function fh(e){ch.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function dh(e,t){this.origin=void 0!==e?e:new Ql,this.direction=void 0!==t?t:new Ql}function ph(e,t,n){this.a=void 0!==e?e:new Ql,this.b=void 0!==t?t:new Ql,this.c=void 0!==n?n:new Ql}function mh(e,t){Sc.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Xc,this.material=void 0!==t?t:new hh({color:16777215*Math.random()}),this.drawMode=Ll,this.updateMorphTargets()}function vh(e,t){return Math.abs(t[1])-Math.abs(e[1])}function gh(e,t,n,r,i,o,a,s,u,l){nc.call(this,e=void 0!==e?e:[],t=void 0!==t?t:Mu,n,r,i,o,a,s,u,l),this.flipY=!1}ch.prototype=Object.assign(Object.create(ys.prototype),{constructor:ch,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==zs&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==ks&&(n.side=this.side),this.vertexColors!==Fs&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(hh.prototype=Object.create(ch.prototype)).constructor=hh,hh.prototype.isMeshBasicMaterial=!0,hh.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},(fh.prototype=Object.create(ch.prototype)).constructor=fh,fh.prototype.isShaderMaterial=!0,fh.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fc.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},fh.prototype.toJSON=function(e){var t=ch.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(dh.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Ql),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Ql;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Ql),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ql;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:($c=new Ql,eh=new Ql,th=new Ql,function(e,t,n,r){$c.copy(e).add(t).multiplyScalar(.5),eh.copy(t).sub(e).normalize(),th.copy(this.origin).sub($c);var i,o,a,s,u=.5*e.distanceTo(t),l=-this.direction.dot(eh),c=th.dot(this.direction),h=-th.dot(eh),f=th.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(o=l*c-h,s=u*d,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var p=1/d;a=(i*=p)*(i+l*(o*=p)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(eh).multiplyScalar(o).add($c),a}),intersectSphere:function(){var e=new Ql;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:this.at(s<0?u:s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(Kc=new Ql,function(e){return null!==this.intersectBox(e,Kc)}),intersectTriangle:function(){var e=new Ql,t=new Ql,n=new Ql,r=new Ql;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=l*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var d=-l*e.dot(r);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ph,{getNormal:(nh=new Ql,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ql),r.subVectors(n,t),nh.subVectors(e,t),r.cross(nh);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new Ql,t=new Ql,n=new Ql;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),c=e.dot(n),h=t.dot(t),f=t.dot(n),d=u*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Ql),0===d)return s.set(-2,-1,-1);var p=1/d,m=(h*c-l*f)*p,v=(u*f-l*c)*p;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new Ql;return function(t,n,r,i){return ph.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(ph.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Ql,t=new Ql;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Ql),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ph.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ql),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ph.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ph.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(rh=new Ql,ih=new Ql,oh=new Ql,ah=new Ql,sh=new Ql,uh=new Ql,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Ql);var n,r,i=this.a,o=this.b,a=this.c;rh.subVectors(o,i),ih.subVectors(a,i),ah.subVectors(e,i);var s=rh.dot(ah),u=ih.dot(ah);if(s<=0&&u<=0)return t.copy(i);sh.subVectors(e,o);var l=rh.dot(sh),c=ih.dot(sh);if(l>=0&&c<=l)return t.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(rh,n);uh.subVectors(e,a);var f=rh.dot(uh),d=ih.dot(uh);if(d>=0&&f<=d)return t.copy(a);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(ih,r);var m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return oh.subVectors(a,o),r=(c-l)/(c-l+(f-d)),t.copy(o).addScaledVector(oh,r);var v=1/(m+p+h);return n=p*v,r=h*v,t.copy(i).addScaledVector(rh,n).addScaledVector(ih,r)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),mh.prototype=Object.assign(Object.create(Sc.prototype),{constructor:mh,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Sc.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new ql,t=new dh,n=new uc,r=new Ql,i=new Ql,o=new Ql,a=new Ql,s=new Ql,u=new Ql,l=new Wl,c=new Wl,h=new Wl,f=new Ql,d=new Ql,p=new Ql;function m(e,t,n,r,i,o,a){return ph.getBarycoord(e,t,n,r,f),i.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),i.add(o).add(a),i.clone()}function v(e,t,n,r,i,o,a,s){if(null===(t.side===Ns?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==Ds,s)))return null;p.copy(s),p.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(p);return u<n.near||u>n.far?null:{distance:u,point:p.clone(),object:e}}function g(e,t,n,a,s,u,f,p,g){r.fromBufferAttribute(s,f),i.fromBufferAttribute(s,p),o.fromBufferAttribute(s,g);var y=v(e,t,n,a,r,i,o,d);if(y){u&&(l.fromBufferAttribute(u,f),c.fromBufferAttribute(u,p),h.fromBufferAttribute(u,g),y.uv=m(d,r,i,o,l,c,h));var b=new Rc(f,p,g);ph.getNormal(r,i,o,b.normal),y.face=b}return y}return function(f,p){var y,b=this.geometry,_=this.material,x=this.matrixWorld;if(void 0!==_&&(null===b.boundingSphere&&b.computeBoundingSphere(),n.copy(b.boundingSphere),n.applyMatrix4(x),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(f.ray).applyMatrix4(e),null===b.boundingBox||!1!==t.intersectsBox(b.boundingBox))))if(b.isBufferGeometry){var w,E,M,T,S,A,C,R,L,P=b.index,O=b.attributes.position,I=b.attributes.uv,k=b.groups,N=b.drawRange;if(null!==P)if(Array.isArray(_))for(T=0,A=k.length;T<A;T++)for(L=_[(R=k[T]).materialIndex],S=Math.max(R.start,N.start),C=Math.min(R.start+R.count,N.start+N.count);S<C;S+=3)w=P.getX(S),E=P.getX(S+1),M=P.getX(S+2),(y=g(this,L,f,t,O,I,w,E,M))&&(y.faceIndex=Math.floor(S/3),p.push(y));else for(T=Math.max(0,N.start),A=Math.min(P.count,N.start+N.count);T<A;T+=3)w=P.getX(T),E=P.getX(T+1),M=P.getX(T+2),(y=g(this,_,f,t,O,I,w,E,M))&&(y.faceIndex=Math.floor(T/3),p.push(y));else if(void 0!==O)if(Array.isArray(_))for(T=0,A=k.length;T<A;T++)for(L=_[(R=k[T]).materialIndex],S=Math.max(R.start,N.start),C=Math.min(R.start+R.count,N.start+N.count);S<C;S+=3)(y=g(this,L,f,t,O,I,w=S,E=S+1,M=S+2))&&(y.faceIndex=Math.floor(S/3),p.push(y));else for(T=Math.max(0,N.start),A=Math.min(O.count,N.start+N.count);T<A;T+=3)(y=g(this,_,f,t,O,I,w=T,E=T+1,M=T+2))&&(y.faceIndex=Math.floor(T/3),p.push(y))}else if(b.isGeometry){var D,F,U,B,j=Array.isArray(_),z=b.vertices,G=b.faces,V=b.faceVertexUvs[0];V.length>0&&(B=V);for(var H=0,W=G.length;H<W;H++){var q=G[H],X=j?_[q.materialIndex]:_;if(void 0!==X){if(D=z[q.a],F=z[q.b],U=z[q.c],!0===X.morphTargets){var Q=b.morphTargets,Y=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Z=0,J=Q.length;Z<J;Z++){var K=Y[Z];if(0!==K){var $=Q[Z].vertices;r.addScaledVector(a.subVectors($[q.a],D),K),i.addScaledVector(s.subVectors($[q.b],F),K),o.addScaledVector(u.subVectors($[q.c],U),K)}}r.add(D),i.add(F),o.add(U),D=r,F=i,U=o}if(y=v(this,X,f,t,D,F,U,d)){if(B&&B[H]){var ee=B[H];l.copy(ee[0]),c.copy(ee[1]),h.copy(ee[2]),y.uv=m(d,D,F,U,l,c,h)}y.face=q,y.faceIndex=H,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(gh.prototype=Object.create(nc.prototype)).constructor=gh,gh.prototype.isCubeTexture=!0,Object.defineProperty(gh.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var yh=new nc,bh=new gh;function _h(){this.seq=[],this.map={}}var xh=[],wh=[],Eh=new Float32Array(16),Mh=new Float32Array(9),Th=new Float32Array(4);function Sh(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=xh[i];if(void 0===o&&(o=new Float32Array(i),xh[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)e[a].toArray(o,s+=n)}return o}function Ah(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ch(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Rh(e,t){var n=wh[t];void 0===n&&(n=new Int32Array(t),wh[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Lh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ph(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Oh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ah(n,t))return;e.uniform2fv(this.addr,t),Ch(n,t)}}function Ih(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ah(n,t))return;e.uniform3fv(this.addr,t),Ch(n,t)}}function kh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ah(n,t))return;e.uniform4fv(this.addr,t),Ch(n,t)}}function Nh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ah(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ch(n,t)}else{if(Ah(n,r))return;Th.set(r),e.uniformMatrix2fv(this.addr,!1,Th),Ch(n,r)}}function Dh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ah(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ch(n,t)}else{if(Ah(n,r))return;Mh.set(r),e.uniformMatrix3fv(this.addr,!1,Mh),Ch(n,r)}}function Fh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ah(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ch(n,t)}else{if(Ah(n,r))return;Eh.set(r),e.uniformMatrix4fv(this.addr,!1,Eh),Ch(n,r)}}function Uh(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||yh,i)}function Bh(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||bh,i)}function jh(e,t){var n=this.cache;Ah(n,t)||(e.uniform2iv(this.addr,t),Ch(n,t))}function zh(e,t){var n=this.cache;Ah(n,t)||(e.uniform3iv(this.addr,t),Ch(n,t))}function Gh(e,t){var n=this.cache;Ah(n,t)||(e.uniform4iv(this.addr,t),Ch(n,t))}function Vh(e,t){var n=this.cache;Ah(n,t)||(e.uniform1fv(this.addr,t),Ch(n,t))}function Hh(e,t){var n=this.cache;Ah(n,t)||(e.uniform1iv(this.addr,t),Ch(n,t))}function Wh(e,t){var n=this.cache,r=Sh(t,this.size,2);Ah(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function qh(e,t){var n=this.cache,r=Sh(t,this.size,3);Ah(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Xh(e,t){var n=this.cache,r=Sh(t,this.size,4);Ah(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Qh(e,t){var n=this.cache,r=Sh(t,this.size,4);Ah(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Yh(e,t){var n=this.cache,r=Sh(t,this.size,9);Ah(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Zh(e,t){var n=this.cache,r=Sh(t,this.size,16);Ah(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Jh(e,t,n){var r=this.cache,i=t.length,o=Rh(n,i);!1===Ah(r,o)&&(e.uniform1iv(this.addr,o),Ch(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||yh,o[a])}function Kh(e,t,n){var r=this.cache,i=t.length,o=Rh(n,i);!1===Ah(r,o)&&(e.uniform1iv(this.addr,o),Ch(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||bh,o[a])}function $h(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(t.type){case 5126:return Lh;case 35664:return Oh;case 35665:return Ih;case 35666:return kh;case 35674:return Nh;case 35675:return Dh;case 35676:return Fh;case 35678:case 36198:return Uh;case 35680:return Bh;case 5124:case 35670:return Ph;case 35667:case 35671:return jh;case 35668:case 35672:return zh;case 35669:case 35673:return Gh}}()}function ef(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return Vh;case 35664:return Wh;case 35665:return qh;case 35666:return Xh;case 35674:return Qh;case 35675:return Yh;case 35676:return Zh;case 35678:return Jh;case 35680:return Kh;case 5124:case 35670:return Hh;case 35667:case 35671:return jh;case 35668:case 35672:return zh;case 35669:case 35673:return Gh}}()}function tf(e){this.id=e,_h.call(this)}ef.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ch(t,e)},tf.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var nf=/([\w\d_]+)(\])?(\[|\.)?/g;function rf(e,t){e.seq.push(t),e.map[t.id]=t}function of(e,t,n){var r=e.name,i=r.length;for(nf.lastIndex=0;;){var o=nf.exec(r),a=o[1],s=o[3];if("]"===o[2]&&(a|=0),void 0===s||"["===s&&nf.lastIndex+2===i){rf(n,void 0===s?new $h(a,e,t):new ef(a,e,t));break}var u=n.map[a];void 0===u&&rf(n,u=new tf(a)),n=u}}function af(e,t,n){_h.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);of(o,e.getUniformLocation(t,o.name),this)}}function sf(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}af.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},af.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},af.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},af.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var uf=0;function lf(e){switch(e){case Il:return["Linear","( value )"];case kl:return["sRGB","( value )"];case Dl:return["RGBE","( value )"];case Fl:return["RGBM","( value, 7.0 )"];case Ul:return["RGBM","( value, 16.0 )"];case Bl:return["RGBD","( value, 256.0 )"];case Nl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function cf(e,t){var n=lf(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function hf(e){return""!==e}function ff(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function df(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function pf(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var n=hc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return pf(n)})}function mf(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function vf(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function gf(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}var yf,bf,_f,xf,wf,Ef,Mf=0;function Tf(){var e=new function(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ql,color:new pc,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wl};break;case"SpotLight":n={position:new Ql,direction:new Ql,color:new pc,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wl};break;case"PointLight":n={position:new Ql,color:new pc,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wl,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Ql,skyColor:new pc,groundColor:new pc};break;case"RectAreaLight":n={color:new pc,position:new Ql,halfWidth:new Ql,halfHeight:new Ql}}return e[t.id]=n,n}}},t={id:Mf++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Ql,r=new ql,i=new ql;return{setup:function(o,a,s){for(var u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var b=o[g],_=b.color,x=b.intensity,w=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*x,l+=_.g*x,c+=_.b*x;else if(b.isDirectionalLight)(T=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.directionalShadowMap[h]=E,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=T,h++;else if(b.isSpotLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_).multiplyScalar(x),T.distance=w,T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(b.angle),T.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.spotShadowMap[d]=E,t.spotShadowMatrix[d]=b.shadow.matrix,t.spot[d]=T,d++;else if(b.isRectAreaLight)(T=e.get(b)).color.copy(_).multiplyScalar(x),T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*b.width,0,0),T.halfHeight.set(0,.5*b.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),t.rectArea[p]=T,p++;else if(b.isPointLight){var M;(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b.color).multiplyScalar(b.intensity),T.distance=b.distance,T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(T.shadowBias=(M=b.shadow).bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize,T.shadowCameraNear=M.camera.near,T.shadowCameraFar=M.camera.far),t.pointShadowMap[f]=E,t.pointShadowMatrix[f]=b.shadow.matrix,t.point[f]=T,f++}else if(b.isHemisphereLight){var T;(T=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(b.color).multiplyScalar(x),T.groundColor.copy(b.groundColor).multiplyScalar(x),t.hemi[m]=T,m++}}t.ambient[0]=u,t.ambient[1]=l,t.ambient[2]=c,t.directional.length=h,t.spot.length=d,t.rectArea.length=p,t.point.length=f,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=f,t.hash.spotLength=d,t.hash.rectAreaLength=p,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}},t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Sf(e){ch.call(this),this.type="MeshDepthMaterial",this.depthPacking=jl,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Af(e){ch.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ql,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Cf(e,t,n){for(var r=new cc,i=new ql,o=new Wl,a=new Wl(n,n),s=new Ql,u=new Ql,l=1,c=2,h=1+(l|c),f=new Array(h),d=new Array(h),p={},m={0:Ns,1:ks,2:Ds},v=[new Ql(1,0,0),new Ql(-1,0,0),new Ql(0,0,1),new Ql(0,0,-1),new Ql(0,1,0),new Ql(0,-1,0)],g=[new Ql(0,1,0),new Ql(0,1,0),new Ql(0,1,0),new Ql(0,1,0),new Ql(0,0,1),new Ql(0,0,-1)],y=[new rc,new rc,new rc,new rc,new rc,new rc],b=0;b!==h;++b){var _=0!=(b&l),x=0!=(b&c),w=new Sf({depthPacking:zl,morphTargets:_,skinning:x});f[b]=w;var E=new Af({morphTargets:_,skinning:x});d[b]=E}var M=this;function T(t,n,r,i,o,a){var s=t.geometry,u=null,h=f,v=t.customDepthMaterial;if(r&&(h=d,v=t.customDistanceMaterial),v)u=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=0;g&&(y|=l),t.isSkinnedMesh&&n.skinning&&(y|=c),u=h[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=u.uuid,_=n.uuid,x=p[b];void 0===x&&(p[b]=x={});var w=x[_];void 0===w&&(w=u.clone(),x[_]=w),u=w}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function S(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=T(n,p,a,u,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,d)}}else l.visible&&(m=T(n,l,a,u,o.near,o.far),e.renderBufferDirect(o,null,s,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)S(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Os,this.render=function(t,n,l){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var c,h=e.state;h.disable(e.context.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,d=t.length;f<d;f++){var p=t[f],m=p.shadow,b=p&&p.isPointLight;if(void 0!==m){var _=m.camera;if(o.copy(m.mapSize),o.min(a),b){var x=o.x,w=o.y;y[0].set(2*x,w,x,w),y[1].set(0,w,x,w),y[2].set(3*x,w,x,w),y[3].set(x,w,x,w),y[4].set(3*x,0,x,w),y[5].set(x,0,x,w),o.x*=4,o.y*=2}null===m.map&&(m.map=new ic(o.x,o.y,{minFilter:ku,magFilter:ku,format:el}),m.map.texture.name=p.name+".shadowMap",_.updateProjectionMatrix()),m.isSpotLightShadow&&m.update(p);var E=m.map,T=m.matrix;u.setFromMatrixPosition(p.matrixWorld),_.position.copy(u),b?(c=6,T.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(p.target.matrixWorld),_.lookAt(s),_.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(_.projectionMatrix),T.multiply(_.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var A=0;A<c;A++)b&&(s.copy(_.position),s.add(v[A]),_.up.copy(g[A]),_.lookAt(s),_.updateMatrixWorld(),h.viewport(y[A])),i.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),r.setFromMatrix(i),S(n,l,_,b)}else console.warn("THREE.WebGLShadowMap:",p,"has no shadow.")}M.needsUpdate=!1}}}function Rf(){Sc.call(this),this.type="Group"}function Lf(e,t,n,r){Ac.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Pf(e){Lf.call(this),this.cameras=e||[]}function Of(e){var t=this,n=null,r=null,i=null,o=[],a=new ql,s=new ql;"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",g,!1));var u=new ql,l=new Xl,c=new Ql,h=new Lf;h.bounds=new rc(0,0,.5,1),h.layers.enable(1);var f=new Lf;f.bounds=new rc(.5,0,.5,1),f.layers.enable(2);var d,p,m=new Pf([h,f]);function v(){return null!==n&&!0===n.isPresenting}function g(){if(v()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;p=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*i,o,1),_.start()}else t.enabled&&(e.setDrawingBufferSize(d.width,d.height,p),_.stop())}m.layers.enable(1),m.layers.enable(2);var y=[];function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=o[e];return void 0===t&&((t=new Rf).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),_.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e.position.set(0,t.userHeight,0),e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var d=n.stageParameters;d?a.fromArray(d.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var p=r.pose,v=null!==i?i:e;if(v.matrix.copy(a),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==p.orientation&&(l.fromArray(p.orientation),v.quaternion.multiply(l)),null!==p.position&&(l.setFromRotationMatrix(a),c.fromArray(p.position),c.applyQuaternion(l),v.position.add(c)),v.updateMatrixWorld(),!1===n.isPresenting)return e;h.near=e.near,f.near=e.near,h.far=e.far,f.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),h.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),h.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s);var g=v.parent;null!==g&&(u.getInverse(g.matrixWorld),h.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u)),h.matrixWorld.getInverse(h.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),h.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),m.projectionMatrix.copy(h.projectionMatrix);var _=n.getLayers();if(_.length){var x=_[0];null!==x.leftBounds&&4===x.leftBounds.length&&h.bounds.fromArray(x.leftBounds),null!==x.rightBounds&&4===x.rightBounds.length&&f.bounds.fromArray(x.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],n=b(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;y[e]!==n.buttons[i].pressed&&(y[e]=n.buttons[i].pressed,!0===y[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=v;var _=new yc;this.setAnimationLoop=function(e){_.setAnimationLoop(e)},this.submitFrame=function(){v()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",g)}}function If(e){console.log("THREE.WebGLRenderer",Cs);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=_u,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,d,p,m,v,g,y,b,_,x,w,E,M,T,S,A,C,R,L=this,P=!1,O=null,I=null,k=null,N=-1,D={geometry:null,program:null,wireframe:!1},F=null,U=null,B=new rc,j=new rc,z=null,G=0,V=t.width,H=t.height,W=1,q=new rc(0,0,V,H),X=new rc(0,0,V,H),Q=!1,Y=new cc,Z=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new lc,a=new Yl,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,r,i){var u=null!==t?t.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==u;++f,d+=4)o.copy(t[f]).applyMatrix4(h,a),o.normal.toArray(l,d),l[d+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=l(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,c,h,f){if(!r||null===e||0===e.length||i&&!a)i?l(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=l(e,c,p,f);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}},J=!1,K=!1,$=new ql,ee=new Ql;function te(){return null===I?W:1}try{var ne={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l};if(t.addEventListener("webglcontextlost",ae,!1),t.addEventListener("webglcontextrestored",se,!1),null===(f=n||t.getContext("webgl",ne)||t.getContext("experimental-webgl",ne)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function re(){d=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(f),(p=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(f,d,e)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),R=new function(e,t,n){return{convert:function(r){var i;if(r===Pu)return e.REPEAT;if(r===Ou)return e.CLAMP_TO_EDGE;if(r===Iu)return e.MIRRORED_REPEAT;if(r===ku)return e.NEAREST;if(r===Nu)return e.NEAREST_MIPMAP_NEAREST;if(r===Du)return e.NEAREST_MIPMAP_LINEAR;if(r===Fu)return e.LINEAR;if(r===Uu)return e.LINEAR_MIPMAP_NEAREST;if(r===Bu)return e.LINEAR_MIPMAP_LINEAR;if(r===ju)return e.UNSIGNED_BYTE;if(r===Qu)return e.UNSIGNED_SHORT_4_4_4_4;if(r===Yu)return e.UNSIGNED_SHORT_5_5_5_1;if(r===Zu)return e.UNSIGNED_SHORT_5_6_5;if(r===zu)return e.BYTE;if(r===Gu)return e.SHORT;if(r===Vu)return e.UNSIGNED_SHORT;if(r===Hu)return e.INT;if(r===Wu)return e.UNSIGNED_INT;if(r===qu)return e.FLOAT;if(r===Xu){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(r===Ku)return e.ALPHA;if(r===$u)return e.RGB;if(r===el)return e.RGBA;if(r===tl)return e.LUMINANCE;if(r===nl)return e.LUMINANCE_ALPHA;if(r===rl)return e.DEPTH_COMPONENT;if(r===il)return e.DEPTH_STENCIL;if(r===qs)return e.FUNC_ADD;if(r===Xs)return e.FUNC_SUBTRACT;if(r===Qs)return e.FUNC_REVERSE_SUBTRACT;if(r===Js)return e.ZERO;if(r===Ks)return e.ONE;if(r===$s)return e.SRC_COLOR;if(r===eu)return e.ONE_MINUS_SRC_COLOR;if(r===tu)return e.SRC_ALPHA;if(r===nu)return e.ONE_MINUS_SRC_ALPHA;if(r===ru)return e.DST_ALPHA;if(r===iu)return e.ONE_MINUS_DST_ALPHA;if(r===ou)return e.DST_COLOR;if(r===au)return e.ONE_MINUS_DST_COLOR;if(r===su)return e.SRC_ALPHA_SATURATE;if((r===ol||r===al||r===sl||r===ul)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(r===ol)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===al)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===sl)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===ul)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===ll||r===cl||r===hl||r===fl)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(r===ll)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===cl)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===hl)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===fl)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===dl&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===pl||r===ml||r===vl||r===gl||r===yl||r===bl||r===_l||r===xl||r===wl||r===El||r===Ml||r===Tl||r===Sl||r===Al)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(r===Ys||r===Zs){if(n.isWebGL2){if(r===Ys)return e.MIN;if(r===Zs)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(r===Ys)return i.MIN_EXT;if(r===Zs)return i.MAX_EXT}}if(r===Ju){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}(f,d,p),(m=new function(e,t,n,r){var i=new function(){var t=!1,n=new rc,r=null,i=new rc(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?U(e.DEPTH_TEST):B(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case uu:e.depthFunc(e.NEVER);break;case lu:e.depthFunc(e.ALWAYS);break;case cu:e.depthFunc(e.LESS);break;case hu:e.depthFunc(e.LEQUAL);break;case fu:e.depthFunc(e.EQUAL);break;case du:e.depthFunc(e.GEQUAL);break;case pu:e.depthFunc(e.GREATER);break;case mu:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?U(e.STENCIL_TEST):B(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=new Uint8Array(s),l=new Uint8Array(s),c=new Uint8Array(s),h={},f=null,d=null,p=null,m=null,v=null,g=null,y=null,b=null,_=null,x=!1,w=null,E=null,M=null,T=null,S=null,A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),C=!1,R=0,L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),C=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),C=R>=2);var P=null,O={},I=new rc,k=new rc;function N(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var D={};function F(n,i){u[n]=1,0===l[n]&&(e.enableVertexAttribArray(n),l[n]=1),c[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function U(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function B(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function j(t,r,i,o,a,s,u,l){if(t!==js?U(e.BLEND):B(e.BLEND),t!==Ws){if(t!==p||l!==x)switch(t){case Gs:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case Vs:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case Hs:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}m=null,v=null,g=null,y=null,b=null,_=null}else a=a||r,s=s||i,u=u||o,r===m&&a===y||(e.blendEquationSeparate(n.convert(r),n.convert(a)),m=r,y=a),i===v&&o===g&&s===b&&u===_||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),v=i,g=o,b=s,_=u);p=t,x=l}function z(t){w!==t&&(e.frontFace(t?e.CW:e.CCW),w=t)}function G(t){t!==Rs?(U(e.CULL_FACE),t!==E&&e.cullFace(t===Ls?e.BACK:t===Ps?e.FRONT:e.FRONT_AND_BACK)):B(e.CULL_FACE),E=t}function V(t,n,r){t?(U(e.POLYGON_OFFSET_FILL),T===n&&S===r||(e.polygonOffset(n,r),T=n,S=r)):B(e.POLYGON_OFFSET_FILL)}function H(t){void 0===t&&(t=e.TEXTURE0+A-1),P!==t&&(e.activeTexture(t),P=t)}return D[e.TEXTURE_2D]=N(e.TEXTURE_2D,e.TEXTURE_2D,1),D[e.TEXTURE_CUBE_MAP]=N(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),U(e.DEPTH_TEST),o.setFunc(hu),z(!1),G(Ls),U(e.CULL_FACE),U(e.BLEND),j(zs),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(e){F(e,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var t=0,n=l.length;t!==n;++t)l[t]!==u[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:U,disable:B,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)f.push(n[r]);return f},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:j,setMaterial:function(t,n){t.side===Ds?B(e.CULL_FACE):U(e.CULL_FACE);var r=t.side===Ns;n&&(r=!r),z(r),t.blending===zs&&!1===t.transparent?j(js):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),V(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:z,setCullFace:G,setLineWidth:function(t){t!==M&&(C&&e.lineWidth(t),M=t)},setPolygonOffset:V,setScissorTest:function(t){t?U(e.SCISSOR_TEST):B(e.SCISSOR_TEST)},activeTexture:H,bindTexture:function(t,n){null===P&&H();var r=O[P];void 0===r&&(O[P]=r={type:void 0,texture:void 0}),r.type===t&&r.texture===n||(e.bindTexture(t,n||D[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===k.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),k.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);h={},f=null,P=null,O={},d=null,p=null,w=null,E=null,i.reset(),o.reset(),a.reset()}}}(f,d,R,p)).scissor(j.copy(X).multiplyScalar(W)),m.viewport(B.copy(q).multiplyScalar(W)),v=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(f),g=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&e.set(t,n={}),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}},y=new function(e,t,n,r,i,o,a){var s,u={};function l(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function c(e){return Hl.isPowerOfTwo(e.width)&&Hl.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==ku&&e.minFilter!==Fu}function f(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function d(t,n){if(!i.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function p(t){return t===ku||t===Nu||t===Du?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete u[n.id],a.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}(n),a.memory.textures--}function g(t,p){var v=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;u[t]!==n&&(u[t]=n,e.update())}(t),t.version>0&&v.__version!==t.version){var g=t.image;if(void 0===g)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==g.complete)return void function(t,r,u){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+u),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var p=l(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==Ou||e.wrapT!==Ou||e.minFilter!==ku&&e.minFilter!==Fu)})(r)&&!1===c(p)&&(p=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Hl.floorPowerOfTwo(e.width),s.height=Hl.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(p));var v=c(p),g=o.convert(r.format),b=o.convert(r.type),_=d(g,b);y(e.TEXTURE_2D,r,v);var x,w=r.mipmaps;if(r.isDepthTexture){if(_=e.DEPTH_COMPONENT,r.type===qu){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(_=e.DEPTH_COMPONENT16);r.format===rl&&_===e.DEPTH_COMPONENT&&r.type!==Vu&&r.type!==Wu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Vu,b=o.convert(r.type)),r.format===il&&(_=e.DEPTH_STENCIL,r.type!==Ju&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ju,b=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,g,b,null)}else if(r.isDataTexture)if(w.length>0&&v){for(var E=0,M=w.length;E<M;E++)n.texImage2D(e.TEXTURE_2D,E,_,(x=w[E]).width,x.height,0,g,b,x.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,g,b,p.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,M=w.length;E<M;E++)x=w[E],r.format!==el&&r.format!==$u?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,_,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,_,x.width,x.height,0,g,b,x.data);t.__maxMipLevel=w.length-1}else if(w.length>0&&v){for(E=0,M=w.length;E<M;E++)n.texImage2D(e.TEXTURE_2D,E,_,g,b,x=w[E]);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,g,b,p),t.__maxMipLevel=0;h(r,v)&&f(e.TEXTURE_2D,r,p.width,p.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(v,t,p);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,v.__webglTexture)}function y(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Ou&&a.wrapT===Ou||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==ku&&a.minFilter!==Fu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===qu&&null===t.get("OES_texture_float_linear"))return;if(a.type===Xu&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function b(t,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=d(u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function _(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(t,s){var u=r.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",m),u.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var p=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],b=0;b<6;b++)g[b]=p||v?v?t.image[b].image:t.image[b]:l(t.image[b],i.maxCubemapSize);var _=g[0],x=c(_),w=o.convert(t.format),E=o.convert(t.type),M=d(w,E);for(y(e.TEXTURE_CUBE_MAP,t,x),b=0;b<6;b++)if(p)for(var T,S=g[b].mipmaps,A=0,C=S.length;A<C;A++)T=S[A],t.format!==el&&t.format!==$u?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,A,M,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,A,M,T.width,T.height,0,w,E,T.data);else v?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,M,g[b].width,g[b].height,0,w,E,g[b].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,M,w,E,g[b]);u.__maxMipLevel=p?S.length-1:0,h(t,x)&&f(e.TEXTURE_CUBE_MAP,t,_.width,_.height),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",v),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,u=c(t);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,u),l=0;l<6;l++)b(i.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);h(t.texture,u)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),y(e.TEXTURE_2D,t.texture,u),b(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,u)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===rl)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==il)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),_(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),_(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(h(i,c(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),f(o,i,t.width,t.height),n.bindTexture(o,null)}}}(f,d,m,g,p,R,v),b=new function(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var o=n.array,a=n.updateRange;e.bindBuffer(r,i.buffer),!1===n.dynamic?e.bufferData(r,o,e.STATIC_DRAW):-1===a.count?e.bufferSubData(r,0,o):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(0,n,r),i.version=n.version)}}}(f),_=new function(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var l=i[s.id];l&&(t.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Xc).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,u=n.attributes;if(null!==s)for(var l=0,c=(o=s.array).length;l<c;l+=3)a.push(h=o[l+0],f=o[l+1],f,d=o[l+2],d,h);else for(l=0,c=(o=u.position.array).length/3-1;l<c;l+=3){var h,f,d;a.push(h=l+0,f=l+1,f,d=l+2,d,h)}return r=new(Wc(a)>65535?zc:Bc)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}(f,b,v),x=new function(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(_,v),S=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,l=t[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];t[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(d=l[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),f&&i.removeAttribute("morphNormal"+c));for(c=0;c<u;c++)(d=l[c])[0]=c,d[1]=s[c];for(l.sort(vh),c=0;c<8;c++){var d;if(d=l[c]){var p=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+c,h[p]),f&&i.addAttribute("morphNormal"+c,f[p]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(f),w=new function(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Il,n===Il&&t&&(n=Nl),n}this.getParameters=function(t,r,o,s,u,l,c){var h=i[t.type],f=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=Math.floor((n.maxVertexUniforms-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(c):0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Ru||t.envMap.mapping===Lu),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Vl,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Ds,flipSided:t.side===Ns,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,l=0,c=r.length;l<c;l++){var h=r[l];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new function(e,t,n,r,i,o,a){var s=e.context,u=r.defines,l=i.vertexShader,c=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===Os?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===Is&&(h="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case Mu:case Tu:f="ENVMAP_TYPE_CUBE";break;case Ru:case Lu:f="ENVMAP_TYPE_CUBE_UV";break;case Su:case Au:f="ENVMAP_TYPE_EQUIREC";break;case Cu:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case Tu:case Au:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case vu:p="ENVMAP_BLENDING_MULTIPLY";break;case gu:p="ENVMAP_BLENDING_MIX";break;case yu:p="ENVMAP_BLENDING_ADD"}}var m,v,g,y,b,_=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hf).join("\n")}(r.extensions,o,t),w=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(u),E=s.createProgram();if(r.isRawShaderMaterial?((m=[w].filter(hf).join("\n")).length>0&&(m+="\n"),(v=[x,w].filter(hf).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(hf).join("\n"),v=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==bu?"#define TONE_MAPPING":"",o.toneMapping!==bu?hc.tonemapping_pars_fragment:"",o.toneMapping!==bu?function(e,t){var n;switch(t){case _u:n="Linear";break;case xu:n="Reinhard";break;case wu:n="Uncharted2";break;case Eu:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?hc.encodings_pars_fragment:"",o.mapEncoding?cf("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?cf("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?cf("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",y=o.outputEncoding,b=lf(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(hf).join("\n")),l=df(l=ff(l=pf(l),o),o),c=df(c=ff(c=pf(c),o),o),l=mf(l),c=mf(c),a.isWebGL2&&!r.isRawShaderMaterial){var M=!1,T=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(T)&&null!==c.match(T)&&(M=!0,l=l.replace(T,""),c=c.replace(T,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",M?"":"out highp vec4 pc_fragColor;",M?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var S=v+c,A=sf(s,s.VERTEX_SHADER,m+l),C=sf(s,s.FRAGMENT_SHADER,S);s.attachShader(E,A),s.attachShader(E,C),void 0!==r.index0AttributeName?s.bindAttribLocation(E,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);var R,L,P=s.getProgramInfoLog(E).trim(),O=s.getShaderInfoLog(A).trim(),I=s.getShaderInfoLog(C).trim(),k=!0,N=!0;return!1===s.getProgramParameter(E,s.LINK_STATUS)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(E,s.VALIDATE_STATUS),"gl.getProgramInfoLog",P,O,I)):""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==O&&""!==I||(N=!1),N&&(this.diagnostics={runnable:k,material:r,programLog:P,vertexShader:{log:O,prefix:m},fragmentShader:{log:I,prefix:v}}),s.deleteShader(A),s.deleteShader(C),this.getUniforms=function(){return void 0===R&&(R=new af(s,E,e)),R},this.getAttributes=function(){return void 0===L&&(L=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,E)),L},this.destroy=function(){s.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=uf++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=A,this.fragmentShader=C,this}(e,t,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}(L,d,p),E=new function(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,u){var l=e[t];void 0===l?e[t]=l={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:u}:(l.id=i.id,l.object=i,l.geometry=o,l.material=a,l.program=a.program,l.renderOrder=i.renderOrder,l.z=s,l.group=u),(!0===a.transparent?r:n).push(l),t++},sort:function(){n.length>1&&n.sort(vf),r.length>1&&r.sort(gf)}}},e[r]=i),i},dispose:function(){e={}}}},M=new function(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new Tf,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new Tf,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}},T=new function(e,t,n,r){var i,o,a,s=new pc(0),u=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),l(s,u=void 0!==t?t:1)},getClearAlpha:function(){return u},setClearAlpha:function(e){l(s,u=e)},render:function(t,r,c,h){var f=r.background;null===f?l(s,u):f&&f.isColor&&(l(f,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===a&&((a=new mh(new Yc(1,1,1),new fh({uniforms:gc.cube.uniforms,vertexShader:gc.cube.vertexShader,fragmentShader:gc.cube.fragmentShader,side:Ns,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=f,t.push(a,a.geometry,a.material,0,null)):f&&f.isTexture&&(void 0===i&&(i=new Cc(-1,1,1,-1,0,1),o=new mh(new Jc(2,2),new hh({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o)),o.material.map=f,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}(L,m,x,s),A=new function(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}(f,d,v,p),C=new function(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,u,l){var c;if(r.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,o,u*a,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}(f,d,v,p),v.programs=w.programs,L.context=f,L.capabilities=p,L.extensions=d,L.properties=g,L.renderLists=E,L.state=m,L.info=v}re();var ie="xr"in navigator?new function(e){var t=e.context,n=null,r=null,i=null,o=null,a=[],s=[];function u(){return null!==r&&null!==i}var l=new Lf;l.layers.enable(1),l.viewport=new rc;var c=new Lf;c.layers.enable(2),c.viewport=new rc;var h=new Pf([l,c]);function f(e){var t=a[s.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function d(){e.setFramebuffer(null),v.stop()}function p(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Rf).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setSession=function(n,o){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",d),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(o.frameOfReferenceType).then(function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),v.setContext(r),v.start()}),s=r.getInputSources(),r.addEventListener("inputsourceschange",function(){s=r.getInputSources(),console.log(s)}))},this.getCamera=function(e){if(u()){var t=e.parent,n=h.cameras;p(h,t);for(var r=0;r<n.length;r++)p(n[r],t);e.matrixWorld.copy(h.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return h}return e},this.isPresenting=u;var m=null,v=new yc;v.setAnimationLoop(function(e,t){if(null!==(o=t.getDevicePose(i)))for(var n=r.baseLayer,u=t.views,l=0;l<u.length;l++){var c=u[l],f=n.getViewport(c),d=o.getViewMatrix(c),p=h.cameras[l];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(c.projectionMatrix),p.viewport.set(f.x,f.y,f.width,f.height),0===l&&(h.matrix.copy(p.matrix),h.projectionMatrix.copy(p.projectionMatrix))}for(l=0;l<a.length;l++){var v=a[l],g=s[l];if(g){var y=t.getInputPose(g,i);if(null!==y){v.matrix.elements=y.pointerMatrix,v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}m&&m(e)}),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(L):new Of(L);this.vr=ie;var oe=new Cf(L,x,p.maxTextureSize);function ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1,re()}function ue(e){var t=e.target;t.removeEventListener("dispose",ue),function(e){le(e),g.remove(e)}(t)}function le(e){var t=g.get(e).program;e.program=void 0,void 0!==t&&w.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(e){void 0!==e&&(W=e,this.setSize(V,H,!1))},this.getSize=function(){return{width:V,height:H}},this.setSize=function(e,n,r){ie.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(V=e,H=n,t.width=e*W,t.height=n*W,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:V*W,height:H*W}},this.setDrawingBufferSize=function(e,n,r){V=e,H=n,W=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return B},this.setViewport=function(e,t,n,r){q.set(e,H-t-r,n,r),m.viewport(B.copy(q).multiplyScalar(W))},this.setScissor=function(e,t,n,r){X.set(e,H-t-r,n,r),m.scissor(j.copy(X).multiplyScalar(W))},this.setScissorTest=function(e){m.setScissorTest(Q=e)},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=f.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=f.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=f.STENCIL_BUFFER_BIT),f.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",ae,!1),t.removeEventListener("webglcontextrestored",se,!1),E.dispose(),M.dispose(),g.dispose(),x.dispose(),ie.dispose(),fe.stop()},this.renderBufferImmediate=function(e,t){m.initAttributes();var n=g.get(e);e.hasPositions&&!n.position&&(n.position=f.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=f.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=f.createBuffer()),e.hasColors&&!n.color&&(n.color=f.createBuffer());var r=t.getAttributes();e.hasPositions&&(f.bindBuffer(f.ARRAY_BUFFER,n.position),f.bufferData(f.ARRAY_BUFFER,e.positionArray,f.DYNAMIC_DRAW),m.enableAttribute(r.position),f.vertexAttribPointer(r.position,3,f.FLOAT,!1,0,0)),e.hasNormals&&(f.bindBuffer(f.ARRAY_BUFFER,n.normal),f.bufferData(f.ARRAY_BUFFER,e.normalArray,f.DYNAMIC_DRAW),m.enableAttribute(r.normal),f.vertexAttribPointer(r.normal,3,f.FLOAT,!1,0,0)),e.hasUvs&&(f.bindBuffer(f.ARRAY_BUFFER,n.uv),f.bufferData(f.ARRAY_BUFFER,e.uvArray,f.DYNAMIC_DRAW),m.enableAttribute(r.uv),f.vertexAttribPointer(r.uv,2,f.FLOAT,!1,0,0)),e.hasColors&&(f.bindBuffer(f.ARRAY_BUFFER,n.color),f.bufferData(f.ARRAY_BUFFER,e.colorArray,f.DYNAMIC_DRAW),m.enableAttribute(r.color),f.vertexAttribPointer(r.color,3,f.FLOAT,!1,0,0)),m.disableUnusedAttributes(),f.drawArrays(f.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;m.setMaterial(r,a);var s=ve(e,t,r,i),u=!1;D.geometry===n.id&&D.program===s.id&&D.wireframe===(!0===r.wireframe)||(D.geometry=n.id,D.program=s.id,D.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(S.update(i,n,r,s),u=!0);var l,c=n.index,h=n.attributes.position,v=1;!0===r.wireframe&&(c=_.getWireframeAttribute(n),v=2);var g=A;null!==c&&(l=b.get(c),(g=C).setIndex(l)),u&&(function(e,t,n){if(n&&n.isInstancedBufferGeometry&!p.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{m.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=b.get(u);if(void 0===h)continue;var v=h.buffer,g=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var _=u.data,x=_.stride,w=u.offset;_&&_.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,_.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=_.meshPerAttribute*_.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,v),f.vertexAttribPointer(s,c,g,l,x*y,w*y)}else u.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):m.enableAttribute(s),f.bindBuffer(f.ARRAY_BUFFER,v),f.vertexAttribPointer(s,c,g,l,0,0)}else if(void 0!==o){var E=o[a];if(void 0!==E)switch(E.length){case 2:f.vertexAttrib2fv(s,E);break;case 3:f.vertexAttrib3fv(s,E);break;case 4:f.vertexAttrib4fv(s,E);break;default:f.vertexAttrib1fv(s,E)}}}}m.disableUnusedAttributes()}}(r,s,n),null!==c&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var x=n.drawRange.start*v,w=n.drawRange.count*v,E=null!==o?o.start*v:0,M=null!==o?o.count*v:1/0,T=Math.max(x,E),R=Math.min(y,x+w,E+M)-1,L=Math.max(0,R-T+1);if(0!==L){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*te()),g.setMode(f.LINES);else switch(i.drawMode){case Ll:g.setMode(f.TRIANGLES);break;case Pl:g.setMode(f.TRIANGLE_STRIP);break;case Ol:g.setMode(f.TRIANGLE_FAN)}else if(i.isLine){var P=r.linewidth;void 0===P&&(P=1),m.setLineWidth(P*te()),g.setMode(i.isLineSegments?f.LINES:i.isLineLoop?f.LINE_LOOP:f.LINE_STRIP)}else i.isPoints?g.setMode(f.POINTS):i.isSprite&&g.setMode(f.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,T,L):g.render(T,L)}},this.compile=function(e,t){(h=M.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)me(t.material[n],e.fog,t);else me(t.material,e.fog,t)})};var ce,he=null,fe=new yc;function de(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){U=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){if("viewport"in p)m.viewport(B.copy(p.viewport));else{var v=p.bounds;m.viewport(B.set(v.x*V,v.y*H,v.z*V,v.w*H).multiplyScalar(W))}pe(s,t,p,u,l,c)}}}else U=null,pe(s,t,n,u,l,c)}}function pe(e,t,n,r,i,o){if(e.onBeforeRender(L,t,n,r,i,o),h=M.get(t,U||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){m.setMaterial(i);var a=ve(n,t.fog,i,e);D.geometry=null,D.program=null,D.wireframe=!1,function(e,t){e.render(function(e){L.renderBufferImmediate(e,t)})}(e,a)}else L.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(L,t,n,r,i,o),h=M.get(t,U||n)}function me(e,t,n){var r=g.get(e),i=h.state.lights,o=r.lightsHash,a=i.state.hash,s=w.getParameters(e,i.state,h.state.shadowsArray,t,Z.numPlanes,Z.numIntersection,n),u=w.getProgramCode(e,s),l=r.program,c=!0;if(void 0===l)e.addEventListener("dispose",ue);else if(l.code!==u)le(e);else if(o.stateID!==a.stateID||o.directionalLength!==a.directionalLength||o.pointLength!==a.pointLength||o.spotLength!==a.spotLength||o.rectAreaLength!==a.rectAreaLength||o.hemiLength!==a.hemiLength||o.shadowsLength!==a.shadowsLength)o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var f=gc[s.shaderID];r.shader={name:e.type,uniforms:fc.clone(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,L),u=w.getProgramCode(e,s),l=w.acquireProgram(e,r.shader,s,u),r.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<L.maxMorphTargets;p++)d["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,p=0;p<L.maxMorphNormals;p++)d["morphNormal"+p]>=0&&e.numSupportedMorphNormals++;var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Z.numPlanes,r.numIntersection=Z.numIntersection,m.clippingPlanes=Z.uniform),r.fog=t,void 0===o&&(r.lightsHash=o={}),o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,e.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),y=af.seqWithValue(v.seq,m);r.uniformsList=y}function ve(e,t,n,r){G=0;var i=g.get(n),o=i.lightsHash,a=h.state.lights.state.hash;J&&(K||e!==F)&&Z.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,e===F&&n.id===N),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||o.stateID===a.stateID&&o.directionalLength===a.directionalLength&&o.pointLength===a.pointLength&&o.spotLength===a.spotLength&&o.rectAreaLength===a.rectAreaLength&&o.hemiLength===a.hemiLength&&o.shadowsLength===a.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===Z.numPlanes&&i.numIntersection===Z.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(me(n,t,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,d=!1,v=i.program,y=v.getUniforms(),b=i.shader.uniforms;if(m.useProgram(v.program)&&(l=!0,c=!0,d=!0),n.id!==N&&(N=n.id,c=!0),l||e!==F){if(y.setValue(f,"projectionMatrix",e.projectionMatrix),p.logarithmicDepthBuffer&&y.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),F!==(U||e)&&(F=U||e,c=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=y.map.cameraPosition;void 0!==_&&_.setValue(f,ee.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&y.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){y.setOptional(f,r,"bindMatrix"),y.setOptional(f,r,"bindMatrixInverse");var x=r.skeleton;if(x)if(p.floatVertexTextures){if(void 0===x.boneTexture){var w=Math.sqrt(4*x.bones.length);w=Hl.ceilPowerOfTwo(w),w=Math.max(w,4);var E=new Float32Array(w*w*4);E.set(x.boneMatrices);var M=new ac(E,w,w,el,qu);M.needsUpdate=!0,x.boneMatrices=E,x.boneTexture=M,x.boneTextureSize=w}y.setValue(f,"boneTexture",x.boneTexture),y.setValue(f,"boneTextureSize",x.boneTextureSize)}else y.setOptional(f,x,"boneMatrices")}return c&&(y.setValue(f,"toneMappingExposure",L.toneMappingExposure),y.setValue(f,"toneMappingWhitePoint",L.toneMappingWhitePoint),n.lights&&((s=b).ambientLightColor.needsUpdate=u=d,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(b,t),n.isMeshBasicMaterial?ge(b,n):n.isMeshLambertMaterial?(ge(b,n),function(e,t){t.emissiveMap&&(b.emissiveMap.value=t.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(ge(b,n),n.isMeshToonMaterial?function(e,t){ye(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(b,n):ye(b,n)):n.isMeshStandardMaterial?(ge(b,n),n.isMeshPhysicalMaterial?function(e,t){be(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(b,n):be(b,n)):n.isMeshDepthMaterial?(ge(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isMeshDistanceMaterial?(ge(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(b,n)):n.isMeshNormalMaterial?(ge(b,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ns&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ns&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(b,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(b,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*W,e.scale.value=.5*H,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isShadowMaterial&&(b.color.value=n.color,b.opacity.value=n.opacity),void 0!==b.ltc_1&&(b.ltc_1.value=vc.LTC_1),void 0!==b.ltc_2&&(b.ltc_2.value=vc.LTC_2),af.upload(f,i.uniformsList,b,L)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(af.upload(f,i.uniformsList,b,L),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(f,"center",r.center),y.setValue(f,"modelViewMatrix",r.modelViewMatrix),y.setValue(f,"normalMatrix",r.normalMatrix),y.setValue(f,"modelMatrix",r.matrixWorld),v}function ge(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=g.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function ye(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ns&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ns&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function be(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ns&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ns&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}fe.setAnimationLoop(function(e){ie.isPresenting()||he&&he(e)}),"undefined"!=typeof window&&fe.setContext(window),this.setAnimationLoop=function(e){he=e,ie.setAnimationLoop(e),fe.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!P){D.geometry=null,D.program=null,D.wireframe=!1,N=-1,F=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ie.enabled&&(t=ie.getCamera(t)),(h=M.get(e,t)).init(),e.onBeforeRender(L,e,t,n),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Y.setFromMatrix($),J=Z.init(this.clippingPlanes,K=this.localClippingEnabled,t),(c=E.get(e,t)).init(),function e(t,n,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Y.intersectsSprite(t)){r&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4($);var i=x.update(t);c.push(t,i,o=t.material,ee.z,null)}}else if(t.isImmediateRenderObject)r&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4($),c.push(t,null,t.material,ee.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Y.intersectsObject(t))){r&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4($),i=x.update(t);var o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],f=o[l.materialIndex];f&&f.visible&&c.push(t,i,f,ee.z,l)}else o.visible&&c.push(t,i,o,ee.z,null)}var d=t.children;for(s=0,u=d.length;s<u;s++)e(d[s],n,r)}}(e,t,L.sortObjects),!0===L.sortObjects&&c.sort(),J&&Z.beginShadows(),oe.render(h.state.shadowsArray,e,t),h.setupLights(t),J&&Z.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),T.render(c,e,t,r);var i=c.opaque,o=c.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;i.length&&de(i,e,t,a),o.length&&de(o,e,t,a)}else i.length&&de(i,e,t),o.length&&de(o,e,t);n&&y.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),e.onAfterRender(L,e,t),ie.enabled&&ie.submitFrame(),c=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=G;return e>=p.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+p.maxTextures),G+=1,e},this.setTexture2D=(ce=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ce||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ce=!0),e=e.texture),y.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),y.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,n):y.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){O=e},this.getRenderTarget=function(){return I},this.setRenderTarget=function(e){I=e,e&&void 0===g.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var t=O,n=!1;if(e){var r=g.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,B.copy(e.viewport),j.copy(e.scissor),z=e.scissorTest}else B.copy(q).multiplyScalar(W),j.copy(X).multiplyScalar(W),z=Q;if(k!==t&&(f.bindFramebuffer(f.FRAMEBUFFER,t),k=t),m.viewport(B),m.scissor(j),m.setScissorTest(z),n){var i=g.get(e.texture);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=g.get(e).__webglFramebuffer;if(a){var s=!1;a!==k&&(f.bindFramebuffer(f.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==el&&R.convert(l)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===ju||R.convert(c)===f.getParameter(f.IMPLEMENTATION_COLOR_READ_TYPE)||c===qu&&(p.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||c===Xu&&d.get(p.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&f.readPixels(t,n,r,i,R.convert(l),R.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&f.bindFramebuffer(f.FRAMEBUFFER,k)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=R.convert(t.format);this.setTexture2D(t,0),f.copyTexImage2D(f.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=R.convert(n.format),s=R.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):f.texSubImage2D(f.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function kf(e,t){this.name="",this.color=new pc(e),this.density=void 0!==t?t:25e-5}function Nf(e,t,n){this.name="",this.color=new pc(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Df(){Sc.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ff(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Uf(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Bf(e){ch.call(this),this.type="SpriteMaterial",this.color=new pc(16777215),this.map=null,this.rotation=0,this.lights=!1,this.transparent=!0,this.setValues(e)}function jf(e){if(Sc.call(this),this.type="Sprite",void 0===yf){yf=new Xc;var t=new Ff(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);yf.setIndex([0,1,2,0,2,3]),yf.addAttribute("position",new Uf(t,3,0,!1)),yf.addAttribute("uv",new Uf(t,2,3,!1))}this.geometry=yf,this.material=void 0!==e?e:new Bf,this.center=new Wl(.5,.5)}function zf(){Sc.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Gf(e,t){if(this.bones=(e=e||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ql)}}function Vf(){Sc.call(this),this.type="Bone"}function Hf(e,t){mh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ql,this.bindMatrixInverse=new ql;var n=new Gf(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Wf(e){ch.call(this),this.type="LineBasicMaterial",this.color=new pc(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function qf(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Sc.call(this),this.type="Line",this.geometry=void 0!==e?e:new Xc,this.material=void 0!==t?t:new Wf({color:16777215*Math.random()})}function Xf(e,t){qf.call(this,e,t),this.type="LineSegments"}function Qf(e,t){qf.call(this,e,t),this.type="LineLoop"}function Yf(e){ch.call(this),this.type="PointsMaterial",this.color=new pc(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Zf(e,t){Sc.call(this),this.type="Points",this.geometry=void 0!==e?e:new Xc,this.material=void 0!==t?t:new Yf({color:16777215*Math.random()})}function Jf(e,t,n,r,i,o,a,s,u){nc.call(this,e,t,n,r,i,o,a,s,u),this.generateMipmaps=!1}function Kf(e,t,n,r,i,o,a,s,u,l,c,h){nc.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function $f(e,t,n,r,i,o,a,s,u){nc.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function ed(e,t,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:rl)!==rl&&l!==il)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===rl&&(n=Vu),void 0===n&&l===il&&(n=Ju),nc.call(this,null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:ku,this.minFilter=void 0!==s?s:ku,this.flipY=!1,this.generateMipmaps=!1}function td(e){Xc.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,l,c,h=[],f=[0,0],d={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[p[n]],u=v[p[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]})}for(l in d)h.push((c=e.vertices[(a=d[l]).index1]).x,c.y,c.z),h.push((c=e.vertices[a.index2]).x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,b,_,x;if(c=new Ql,null!==e.index){for(g=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=x=(_=b[i]).start,r=x+_.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),u=y.getX(t+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+","+f[1]]&&(d[l]={index1:f[0],index2:f[1]});for(l in d)c.fromBufferAttribute(g,(a=d[l]).index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)c.fromBufferAttribute(g,3*t+n),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,3*t+(n+1)%3),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Gc(h,3))}function nd(e,t,n){Ic.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new rd(e,t,n)),this.mergeVertices()}function rd(e,t,n){Xc.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=new Ql,c=new Ql,h=new Ql,f=new Ql,d=new Ql;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,m,c),a.push(c.x,c.y,c.z),v-1e-5>=0?(e(v-1e-5,m,h),f.subVectors(c,h)):(e(v+1e-5,m,h),f.subVectors(h,c)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(c,h)):(e(v,m+1e-5,h),d.subVectors(h,c)),l.crossVectors(f,d).normalize(),s.push(l.x,l.y,l.z),u.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*p+i+1,y=(r+1)*p+i+1,b=(r+1)*p+i;o.push(r*p+i,g,b),o.push(g,y,b)}this.setIndex(o),this.addAttribute("position",new Gc(a,3)),this.addAttribute("normal",new Gc(s,3)),this.addAttribute("uv",new Gc(u,2))}function id(e,t,n,r){Ic.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new od(e,t,n,r)),this.mergeVertices()}function od(e,t,n,r){Xc.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Ql,r=new Ql,i=new Ql,o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Ql,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Ql,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Ql,t=new Ql,n=new Ql,r=new Ql,a=new Wl,s=new Wl,u=new Wl,h=0,f=0;h<i.length;h+=9,f+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=c(r);l(a,f+0,e,d),l(s,f+2,t,d),l(u,f+4,n,d)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Gc(i,3)),this.addAttribute("normal",new Gc(i.slice(),3)),this.addAttribute("uv",new Gc(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function ad(e,t){Ic.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new sd(e,t)),this.mergeVertices()}function sd(e,t){od.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ud(e,t){Ic.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ld(e,t)),this.mergeVertices()}function ld(e,t){od.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function cd(e,t){Ic.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hd(e,t)),this.mergeVertices()}function hd(e,t){var n=(1+Math.sqrt(5))/2;od.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fd(e,t){Ic.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new dd(e,t)),this.mergeVertices()}function dd(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;od.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function pd(e,t,n,r,i,o){Ic.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new md(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function md(e,t,n,r,i){Xc.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8;var o=e.computeFrenetFrames(t,i=i||!1);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new Ql,l=new Ql,c=new Wl,h=new Ql,f=[],d=[],p=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,p.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*s+(a-1),n=(r+1)*s+a,i=(r+1)*(s-1)+a;m.push((r+1)*(s-1)+(a-1),e,i),m.push(e,n,i)}}()}(),this.setIndex(m),this.addAttribute("position",new Gc(f,3)),this.addAttribute("normal",new Gc(d,3)),this.addAttribute("uv",new Gc(p,2))}function vd(e,t,n,r,i,o,a){Ic.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new gd(e,t,n,r,i,o)),this.mergeVertices()}function gd(e,t,n,r,i,o){Xc.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],f=new Ql,d=new Ql,p=new Ql,m=new Ql,v=new Ql,g=new Ql,y=new Ql;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(S(b,i,o,e,p),S(b+.01,i,o,e,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,x=-t*Math.cos(_),w=t*Math.sin(_);f.x=p.x+(x*y.x+w*v.x),f.y=p.y+(x*y.y+w*v.y),f.z=p.z+(x*y.z+w*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*s+(a-1),M=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push((r+1)*(s-1)+(a-1),E,T),u.push(E,M,T)}function S(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new Gc(l,3)),this.addAttribute("normal",new Gc(c,3)),this.addAttribute("uv",new Gc(h,2))}function yd(e,t,n,r,i){Ic.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new bd(e,t,n,r,i)),this.mergeVertices()}function bd(e,t,n,r,i){Xc.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new Ql,f=new Ql,d=new Ql;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var p=a/r*i,m=o/n*Math.PI*2;f.x=(e+t*Math.cos(m))*Math.cos(p),f.y=(e+t*Math.cos(m))*Math.sin(p),f.z=t*Math.sin(m),u.push(f.x,f.y,f.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*(o-1)+a-1,g=(r+1)*(o-1)+a,y=(r+1)*o+a;s.push((r+1)*o+a-1,v,y),s.push(v,g,y)}this.setIndex(s),this.addAttribute("position",new Gc(u,3)),this.addAttribute("normal",new Gc(l,3)),this.addAttribute("uv",new Gc(c,2))}function _d(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Ud(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Ud(o,e[o],e[o+1],a);return a&&kd(a,a.next)&&(Bd(a),a=a.next),a}function xd(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!kd(r,r.next)&&0!==Id(r.prev,r,r.next))r=r.next;else{if(Bd(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function wd(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Rd(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Md(e,r,i,o):Ed(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Bd(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?wd(e=Td(e,t,n),t,n,r,i,o,2):2===a&&Sd(e,t,n,r,i,o):wd(xd(e),t,n,r,i,o,1);break}}}function Ed(e){var t=e.prev,n=e,r=e.next;if(Id(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Pd(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Id(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Md(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Id(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Rd(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),c=Rd(s,u,t,n,r),h=e.nextZ;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&Pd(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Id(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=e.prevZ;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&Pd(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Id(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function Td(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!kd(i,o)&&Nd(i,r,r.next,o)&&Dd(i,o)&&Dd(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Bd(r),Bd(r.next),r=e=o),r=r.next}while(r!==e);return r}function Sd(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Od(a,s)){var u=Fd(a,s);return a=xd(a,a.next),u=xd(u,u.next),wd(a,t,n,r,i,o),void wd(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Ad(e,t){return e.x-t.x}function Cd(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Pd(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Dd(r,e)&&(n=r,f=u),r=r.next;return n}(e,t)){var n=Fd(t,e);xd(n,n.next)}}function Rd(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ld(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Pd(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Od(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Nd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Dd(e,t)&&Dd(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Id(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function kd(e,t){return e.x===t.x&&e.y===t.y}function Nd(e,t,n,r){return!!(kd(e,t)&&kd(n,r)||kd(e,r)&&kd(n,t))||Id(e,t,n)>0!=Id(e,t,r)>0&&Id(n,r,e)>0!=Id(n,r,t)>0}function Dd(e,t){return Id(e.prev,e,e.next)<0?Id(e,t,e.next)>=0&&Id(e,e.prev,t)>=0:Id(e,t,e.prev)<0||Id(e,e.next,t)<0}function Fd(e,t){var n=new jd(e.i,e.x,e.y),r=new jd(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ud(e,t,n,r){var i=new jd(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}(Sf.prototype=Object.create(ch.prototype)).constructor=Sf,Sf.prototype.isMeshDepthMaterial=!0,Sf.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},(Af.prototype=Object.create(ch.prototype)).constructor=Af,Af.prototype.isMeshDistanceMaterial=!0,Af.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Rf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Rf,isGroup:!0}),Lf.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Lf,isPerspectiveCamera:!0,copy:function(e,t){return Ac.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Hl.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Hl.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Hl.RAD2DEG*Math.atan(Math.tan(.5*Hl.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Hl.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=Sc.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Pf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Pf,isArrayCamera:!0}),kf.prototype.isFogExp2=!0,kf.prototype.clone=function(){return new kf(this.color,this.density)},kf.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Nf.prototype.isFog=!0,Nf.prototype.clone=function(){return new Nf(this.color,this.near,this.far)},Nf.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Df.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Df,copy:function(e,t){return Sc.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Sc.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Ff.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ff.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Uf.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Uf.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),(Bf.prototype=Object.create(ch.prototype)).constructor=Bf,Bf.prototype.isSpriteMaterial=!0,Bf.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},jf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:jf,isSprite:!0,raycast:function(){var e=new Ql,t=new Ql,n=new Ql,r=new Wl,i=new Wl,o=new ql,a=new Ql,s=new Ql,u=new Ql;function l(e,t,n,a,s,u){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var c,h,f=this.material.rotation;0!==f&&(h=Math.cos(f),c=Math.sin(f));var d=this.center;l(a.set(-.5,-.5,0),n,d,t,c,h),l(s.set(.5,-.5,0),n,d,t,c,h),l(u.set(.5,.5,0),n,d,t,c,h);var p=r.ray.intersectTriangle(a,s,u,!1,e);if(null!==p||(l(s.set(-.5,.5,0),n,d,t,c,h),null!==(p=r.ray.intersectTriangle(a,u,s,!1,e)))){var m=r.ray.origin.distanceTo(e);m<r.near||m>r.far||i.push({distance:m,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Sc.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),zf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:zf,copy:function(e){Sc.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(bf=new Ql,function(e,t){bf.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(bf);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new Ql,t=new Ql;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=Sc.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Gf.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new ql;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(_f=new ql,xf=new ql,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++)_f.multiplyMatrices(e[i]?e[i].matrixWorld:xf,t[i]),_f.toArray(n,16*i);void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new Gf(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Vf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Vf,isBone:!0}),Hf.prototype=Object.assign(Object.create(mh.prototype),{constructor:Hf,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new Vf,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new rc,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){mh.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Wf.prototype=Object.create(ch.prototype)).constructor=Wf,Wf.prototype.isLineBasicMaterial=!0,Wf.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},qf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:qf,isLine:!0,computeLineDistances:(wf=new Ql,Ef=new Ql,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)wf.fromBufferAttribute(t,r-1),Ef.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=wf.distanceTo(Ef);e.addAttribute("lineDistance",new Gc(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var e=new ql,t=new dh,n=new uc;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var l=new Ql,c=new Ql,h=new Ql,f=new Ql,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=d){var b=v[g+1];l.fromArray(m,3*v[g]),c.fromArray(m,3*b),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=d)l.fromArray(m,3*g),c.fromArray(m,3*g+3),t.distanceSqToSegment(l,c,f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var _=s.vertices,x=_.length;for(g=0;g<x-1;g+=d){var w;t.distanceSqToSegment(_[g],_[g+1],f,h)>a||(f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Xf.prototype=Object.assign(Object.create(qf.prototype),{constructor:Xf,isLineSegments:!0,computeLineDistances:function(){var e=new Ql,t=new Ql;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new Gc(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Qf.prototype=Object.assign(Object.create(qf.prototype),{constructor:Qf,isLineLoop:!0}),(Yf.prototype=Object.create(ch.prototype)).constructor=Yf,Yf.prototype.isPointsMaterial=!0,Yf.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Zf.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Zf,isPoints:!0,raycast:function(){var e=new ql,t=new dh,n=new uc;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new Ql,f=new Ql;if(a.isBufferGeometry){var d=a.index,p=a.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(p,3*y),x(h,y)}else{v=0;for(var b=p.length/3;v<b;v++)h.fromArray(p,3*v),x(h,v)}}else{var _=a.vertices;for(v=0,b=_.length;v<b;v++)x(_[v],v)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<c){t.closestPointToPoint(e,f),f.applyMatrix4(s);var u=r.ray.origin.distanceTo(f);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Jf.prototype=Object.assign(Object.create(nc.prototype),{constructor:Jf,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(Kf.prototype=Object.create(nc.prototype)).constructor=Kf,Kf.prototype.isCompressedTexture=!0,($f.prototype=Object.create(nc.prototype)).constructor=$f,$f.prototype.isCanvasTexture=!0,(ed.prototype=Object.create(nc.prototype)).constructor=ed,ed.prototype.isDepthTexture=!0,(td.prototype=Object.create(Xc.prototype)).constructor=td,(nd.prototype=Object.create(Ic.prototype)).constructor=nd,(rd.prototype=Object.create(Xc.prototype)).constructor=rd,(id.prototype=Object.create(Ic.prototype)).constructor=id,(od.prototype=Object.create(Xc.prototype)).constructor=od,(ad.prototype=Object.create(Ic.prototype)).constructor=ad,(sd.prototype=Object.create(od.prototype)).constructor=sd,(ud.prototype=Object.create(Ic.prototype)).constructor=ud,(ld.prototype=Object.create(od.prototype)).constructor=ld,(cd.prototype=Object.create(Ic.prototype)).constructor=cd,(hd.prototype=Object.create(od.prototype)).constructor=hd,(fd.prototype=Object.create(Ic.prototype)).constructor=fd,(dd.prototype=Object.create(od.prototype)).constructor=dd,(pd.prototype=Object.create(Ic.prototype)).constructor=pd,(md.prototype=Object.create(Xc.prototype)).constructor=md,(vd.prototype=Object.create(Ic.prototype)).constructor=vd,(gd.prototype=Object.create(Xc.prototype)).constructor=gd,(yd.prototype=Object.create(Ic.prototype)).constructor=yd,(bd.prototype=Object.create(Xc.prototype)).constructor=bd;var zd={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return zd.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Gd(e),Vd(n,e);var o=e.length;t.forEach(Gd);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Vd(n,t[a]);var s=function(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=_d(e,0,h,n,!0),d=[];if(!f)return d;if(c&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=_d(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ld(a));for(s.sort(Ad),i=0;i<s.length;i++)Cd(s[i],n),n=xd(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)u=e[p+1],(s=e[p])<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return wd(f,d,n,r,i,l),d}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Gd(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Vd(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Hd(e,t){Ic.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Wd(e,t)),this.mergeVertices()}function Wd(e,t){Xc.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++)s(e[o]);function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,p=void 0!==t.UVGenerator?t.UVGenerator:qd;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var m,v,g,y,b,_,x,w,E=!1;d&&(m=d.getSpacedPoints(s),E=!0,l=!1,v=d.computeFrenetFrames(s,!1),g=new Ql,y=new Ql,b=new Ql),l||(f=0,c=0,h=0);var M=e.extractPoints(a),T=M.shape,S=M.holes;if(!zd.isClockWise(T))for(T=T.reverse(),x=0,w=S.length;x<w;x++)zd.isClockWise(_=S[x])&&(S[x]=_.reverse());var A=zd.triangulateShape(T,S),C=T;for(x=0,w=S.length;x<w;x++)T=T.concat(_=S[x]);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,P,O,I,k,N,D=T.length,F=A.length;function U(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=a*a+s*s;if(Math.abs(a*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+a/h,m=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(a*l-s*u),v=(r=d+a*m-e.x)*r+(i=p+s*m-e.y)*i;if(v<=2)return new Wl(r,i);o=Math.sqrt(v/2)}else{var g=!1;a>Number.EPSILON?u>Number.EPSILON&&(g=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Wl(r/o,i/o)}for(var B=[],j=0,z=C.length,G=z-1,V=j+1;j<z;j++,G++,V++)G===z&&(G=0),V===z&&(V=0),B[j]=U(C[j],C[G],C[V]);var H,W,q=[],X=B.concat();for(x=0,w=S.length;x<w;x++){for(H=[],G=(z=(_=S[x]).length)-1,V=1+(j=0);j<z;j++,G++,V++)G===z&&(G=0),V===z&&(V=0),H[j]=U(_[j],_[G],_[V]);q.push(H),X=X.concat(H)}for(L=0;L<f;L++){for(O=L/f,I=c*Math.cos(O*Math.PI/2),P=h*Math.sin(O*Math.PI/2),j=0,z=C.length;j<z;j++)Y((k=R(C[j],B[j],P)).x,k.y,-I);for(x=0,w=S.length;x<w;x++)for(H=q[x],j=0,z=(_=S[x]).length;j<z;j++)Y((k=R(_[j],H[j],P)).x,k.y,-I)}for(P=h,j=0;j<D;j++)k=l?R(T[j],X[j],P):T[j],E?(y.copy(v.normals[0]).multiplyScalar(k.x),g.copy(v.binormals[0]).multiplyScalar(k.y),b.copy(m[0]).add(y).add(g),Y(b.x,b.y,b.z)):Y(k.x,k.y,0);for(W=1;W<=s;W++)for(j=0;j<D;j++)k=l?R(T[j],X[j],P):T[j],E?(y.copy(v.normals[W]).multiplyScalar(k.x),g.copy(v.binormals[W]).multiplyScalar(k.y),b.copy(m[W]).add(y).add(g),Y(b.x,b.y,b.z)):Y(k.x,k.y,u/s*W);for(L=f-1;L>=0;L--){for(O=L/f,I=c*Math.cos(O*Math.PI/2),P=h*Math.sin(O*Math.PI/2),j=0,z=C.length;j<z;j++)Y((k=R(C[j],B[j],P)).x,k.y,u+I);for(x=0,w=S.length;x<w;x++)for(H=q[x],j=0,z=(_=S[x]).length;j<z;j++)k=R(_[j],H[j],P),E?Y(k.x,k.y+m[s-1].y,m[s-1].x+I):Y(k.x,k.y,u+I)}function Q(e,t){var n,r;for(j=e.length;--j>=0;){n=j,(r=j-1)<0&&(r=e.length-1);var i=0,o=s+2*f;for(i=0;i<o;i++){var a=D*i,u=D*(i+1);J(t+n+a,t+r+a,t+r+u,t+n+u)}}}function Y(e,t,n){o.push(e),o.push(t),o.push(n)}function Z(e,t,i){K(e),K(t),K(i);var o=r.length/3,a=p.generateTopUV(n,r,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function J(e,t,i,o){K(e),K(t),K(o),K(t),K(i),K(o);var a=r.length/3,s=p.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function K(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function $(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=D*t;for(j=0;j<F;j++)Z((N=A[j])[2]+i,N[1]+i,N[0]+i);for(i=D*(t=s+2*f),j=0;j<F;j++)Z((N=A[j])[0]+i,N[1]+i,N[2]+i)}else{for(j=0;j<F;j++)Z((N=A[j])[2],N[1],N[0]);for(j=0;j<F;j++)Z((N=A[j])[0]+D*s,N[1]+D*s,N[2]+D*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Q(C,t),t+=C.length,x=0,w=S.length;x<w;x++)Q(_=S[x],t),t+=_.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Gc(r,3)),this.addAttribute("uv",new Gc(i,2)),this.computeVertexNormals()}(Hd.prototype=Object.create(Ic.prototype)).constructor=Hd,Hd.prototype.toJSON=function(){var e=Ic.prototype.toJSON.call(this);return Xd(this.parameters.shapes,this.parameters.options,e)},(Wd.prototype=Object.create(Xc.prototype)).constructor=Wd,Wd.prototype.toJSON=function(){var e=Xc.prototype.toJSON.call(this);return Xd(this.parameters.shapes,this.parameters.options,e)};var qd={generateTopUV:function(e,t,n,r,i){var o=t[3*r],a=t[3*r+1],s=t[3*i],u=t[3*i+1];return[new Wl(t[3*n],t[3*n+1]),new Wl(o,a),new Wl(s,u)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<.01?[new Wl(a,1-u),new Wl(l,1-h),new Wl(f,1-p),new Wl(m,1-g)]:[new Wl(s,1-u),new Wl(c,1-h),new Wl(d,1-p),new Wl(v,1-g)]}};function Xd(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Qd(e,t){Ic.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Yd(e,t)),this.mergeVertices()}function Yd(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ic;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Wd.call(this,r,t),this.type="TextBufferGeometry"}function Zd(e,t,n,r,i,o,a){Ic.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Jd(e,t,n,r,i,o,a)),this.mergeVertices()}function Jd(e,t,n,r,i,o,a){Xc.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,h=[],f=new Ql,d=new Ql,p=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n;for(s=0;s<=t;s++){var _=s/t;f.x=-e*Math.cos(r+_*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+_*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),v.push(d.x,d.y,d.z),g.push(_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var x=h[u][s],w=h[u+1][s],E=h[u+1][s+1];(0!==u||o>0)&&p.push(h[u][s+1],x,E),(u!==n-1||l<Math.PI)&&p.push(x,w,E)}this.setIndex(p),this.addAttribute("position",new Gc(m,3)),this.addAttribute("normal",new Gc(v,3)),this.addAttribute("uv",new Gc(g,2))}function Kd(e,t,n,r,i,o){Ic.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new $d(e,t,n,r,i,o)),this.mergeVertices()}function $d(e,t,n,r,i,o){Xc.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],f=[],d=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Ql,v=new Wl;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y);d+=p}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=(a=u+g)+n+1,b=a+n+2,_=a+1;l.push(a,y,_),l.push(y,b,_)}}this.setIndex(l),this.addAttribute("position",new Gc(c,3)),this.addAttribute("normal",new Gc(h,3)),this.addAttribute("uv",new Gc(f,2))}function ep(e,t,n,r){Ic.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new tp(e,t,n,r)),this.mergeVertices()}function tp(e,t,n,r){Xc.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Hl.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/t,h=new Ql,f=new Wl;for(o=0;o<=t;o++){var d=n+o*c*r,p=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,u.push(h.x,h.y,h.z),f.x=o/t,f.y=a/(e.length-1),l.push(f.x,f.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=(i=a+o*e.length)+e.length,g=i+e.length+1,y=i+1;s.push(i,v,y),s.push(v,g,y)}if(this.setIndex(s),this.addAttribute("position",new Gc(u,3)),this.addAttribute("uv",new Gc(l,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,_=new Ql,x=new Ql,w=new Ql;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],x.x=b[i+a+0],x.y=b[i+a+1],x.z=b[i+a+2],w.addVectors(_,x).normalize(),b[a+0]=b[i+a+0]=w.x,b[a+1]=b[i+a+1]=w.y,b[a+2]=b[i+a+2]=w.z}}function np(e,t){Ic.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new rp(e,t)),this.mergeVertices()}function rp(e,t){Xc.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))l(e);else for(var u=0;u<e.length;u++)l(e[u]),this.addGroup(a,s,u),a+=s,s=0;function l(e){var a,u,l,c=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;if(!1===zd.isClockWise(f))for(f=f.reverse(),a=0,u=d.length;a<u;a++)!0===zd.isClockWise(l=d[a])&&(d[a]=l.reverse());var p=zd.triangulateShape(f,d);for(a=0,u=d.length;a<u;a++)f=f.concat(l=d[a]);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var v=p[a];n.push(v[0]+c,v[1]+c,v[2]+c),s+=3}}this.setIndex(n),this.addAttribute("position",new Gc(r,3)),this.addAttribute("normal",new Gc(i,3)),this.addAttribute("uv",new Gc(o,2))}function ip(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}function op(e,t){Xc.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Hl.DEG2RAD*t),u=[0,0],l={},c=["a","b","c"];e.isBufferGeometry?(o=new Ic).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var g=l[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),a.push((y=h[g.index2]).x,y.y,y.z)}}this.addAttribute("position",new Gc(a,3))}function ap(e,t,n,r,i,o,a,s){Ic.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new sp(e,t,n,r,i,o,a,s)),this.mergeVertices()}function sp(e,t,n,r,i,o,a,s){Xc.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],d=0,p=[],m=n/2,v=0;function g(n){var i,o,p,g=new Wl,y=new Ql,b=0,_=!0===n?e:t,x=!0===n?1:-1;for(o=d,i=1;i<=r;i++)c.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),d++;for(p=d,i=0;i<=r;i++){var w=i/r*s+a,E=Math.cos(w),M=Math.sin(w);y.x=_*M,y.y=m*x,y.z=_*E,c.push(y.x,y.y,y.z),h.push(0,x,0),g.x=.5*E+.5,g.y=.5*M*x+.5,f.push(g.x,g.y),d++}for(i=0;i<r;i++){var T=o+i,S=p+i;!0===n?l.push(S,S+1,T):l.push(S+1,S,T),b+=3}u.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new Ql,b=new Ql,_=0,x=(t-e)/n;for(g=0;g<=i;g++){var w=[],E=g/i,M=E*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,S=T*s+a,A=Math.sin(S),C=Math.cos(S);b.x=M*A,b.y=-E*n+m,b.z=M*C,c.push(b.x,b.y,b.z),y.set(A,x,C).normalize(),h.push(y.x,y.y,y.z),f.push(T,1-E),w.push(d++)}p.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var R=p[g+1][o],L=p[g+1][o+1],P=p[g][o+1];l.push(p[g][o],R,P),l.push(R,L,P),_+=6}u.addGroup(v,_,0),v+=_}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new Gc(c,3)),this.addAttribute("normal",new Gc(h,3)),this.addAttribute("uv",new Gc(f,2))}function up(e,t,n,r,i,o,a){ap.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function lp(e,t,n,r,i,o,a){sp.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function cp(e,t,n,r){Ic.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new hp(e,t,n,r)),this.mergeVertices()}function hp(e,t,n,r){Xc.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new Ql,h=new Wl;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,l.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Gc(s,3)),this.addAttribute("normal",new Gc(u,3)),this.addAttribute("uv",new Gc(l,2))}(Qd.prototype=Object.create(Ic.prototype)).constructor=Qd,(Yd.prototype=Object.create(Wd.prototype)).constructor=Yd,(Zd.prototype=Object.create(Ic.prototype)).constructor=Zd,(Jd.prototype=Object.create(Xc.prototype)).constructor=Jd,(Kd.prototype=Object.create(Ic.prototype)).constructor=Kd,($d.prototype=Object.create(Xc.prototype)).constructor=$d,(ep.prototype=Object.create(Ic.prototype)).constructor=ep,(tp.prototype=Object.create(Xc.prototype)).constructor=tp,(np.prototype=Object.create(Ic.prototype)).constructor=np,np.prototype.toJSON=function(){var e=Ic.prototype.toJSON.call(this);return ip(this.parameters.shapes,e)},(rp.prototype=Object.create(Xc.prototype)).constructor=rp,rp.prototype.toJSON=function(){var e=Xc.prototype.toJSON.call(this);return ip(this.parameters.shapes,e)},(op.prototype=Object.create(Xc.prototype)).constructor=op,(ap.prototype=Object.create(Ic.prototype)).constructor=ap,(sp.prototype=Object.create(Xc.prototype)).constructor=sp,(up.prototype=Object.create(ap.prototype)).constructor=up,(lp.prototype=Object.create(sp.prototype)).constructor=lp,(cp.prototype=Object.create(Ic.prototype)).constructor=cp,(hp.prototype=Object.create(Xc.prototype)).constructor=hp;var fp=Object.freeze({WireframeGeometry:td,ParametricGeometry:nd,ParametricBufferGeometry:rd,TetrahedronGeometry:ad,TetrahedronBufferGeometry:sd,OctahedronGeometry:ud,OctahedronBufferGeometry:ld,IcosahedronGeometry:cd,IcosahedronBufferGeometry:hd,DodecahedronGeometry:fd,DodecahedronBufferGeometry:dd,PolyhedronGeometry:id,PolyhedronBufferGeometry:od,TubeGeometry:pd,TubeBufferGeometry:md,TorusKnotGeometry:vd,TorusKnotBufferGeometry:gd,TorusGeometry:yd,TorusBufferGeometry:bd,TextGeometry:Qd,TextBufferGeometry:Yd,SphereGeometry:Zd,SphereBufferGeometry:Jd,RingGeometry:Kd,RingBufferGeometry:$d,PlaneGeometry:Zc,PlaneBufferGeometry:Jc,LatheGeometry:ep,LatheBufferGeometry:tp,ShapeGeometry:np,ShapeBufferGeometry:rp,ExtrudeGeometry:Hd,ExtrudeBufferGeometry:Wd,EdgesGeometry:op,ConeGeometry:up,ConeBufferGeometry:lp,CylinderGeometry:ap,CylinderBufferGeometry:sp,CircleGeometry:cp,CircleBufferGeometry:hp,BoxGeometry:Qc,BoxBufferGeometry:Yc});function dp(e){ch.call(this),this.type="ShadowMaterial",this.color=new pc(0),this.transparent=!0,this.setValues(e)}function pp(e){fh.call(this,e),this.type="RawShaderMaterial"}function mp(e){ch.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pc(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Wl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vp(e){mp.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function gp(e){ch.call(this),this.type="MeshPhongMaterial",this.color=new pc(16777215),this.specular=new pc(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Wl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yp(e){gp.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function bp(e){ch.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Wl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _p(e){ch.call(this),this.type="MeshLambertMaterial",this.color=new pc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xp(e){Wf.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}(dp.prototype=Object.create(ch.prototype)).constructor=dp,dp.prototype.isShadowMaterial=!0,dp.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this},(pp.prototype=Object.create(fh.prototype)).constructor=pp,pp.prototype.isRawShaderMaterial=!0,(mp.prototype=Object.create(ch.prototype)).constructor=mp,mp.prototype.isMeshStandardMaterial=!0,mp.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(vp.prototype=Object.create(mp.prototype)).constructor=vp,vp.prototype.isMeshPhysicalMaterial=!0,vp.prototype.copy=function(e){return mp.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},(gp.prototype=Object.create(ch.prototype)).constructor=gp,gp.prototype.isMeshPhongMaterial=!0,gp.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(yp.prototype=Object.create(gp.prototype)).constructor=yp,yp.prototype.isMeshToonMaterial=!0,yp.prototype.copy=function(e){return gp.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},(bp.prototype=Object.create(ch.prototype)).constructor=bp,bp.prototype.isMeshNormalMaterial=!0,bp.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(_p.prototype=Object.create(ch.prototype)).constructor=_p,_p.prototype.isMeshLambertMaterial=!0,_p.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(xp.prototype=Object.create(Wf.prototype)).constructor=xp,xp.prototype.isLineDashedMaterial=!0,xp.prototype.copy=function(e){return Wf.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var wp=Object.freeze({ShadowMaterial:dp,SpriteMaterial:Bf,RawShaderMaterial:pp,ShaderMaterial:fh,PointsMaterial:Yf,MeshPhysicalMaterial:vp,MeshStandardMaterial:mp,MeshPhongMaterial:gp,MeshToonMaterial:yp,MeshNormalMaterial:bp,MeshLambertMaterial:_p,MeshDepthMaterial:Sf,MeshDistanceMaterial:Af,MeshBasicMaterial:hh,LineDashedMaterial:xp,LineBasicMaterial:Wf,Material:ch}),Ep={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Mp(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Tp=new Mp,Sp={};function Ap(e){this.manager=void 0!==e?e:Tp}function Cp(e){this.manager=void 0!==e?e:Tp}function Rp(e){this.manager=void 0!==e?e:Tp}function Lp(e){this.manager=void 0!==e?e:Tp}function Pp(){this.type="Curve",this.arcLengthDivisions=200}function Op(e,t,n,r,i,o,a,s){Pp.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ip(e,t,n,r,i,o){Op.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function kp(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(Ap.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ep.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===Sp[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}window.setTimeout(function(){t&&t(c),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{Sp[e]=[],Sp[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Ep.add(e,n);var r=Sp[e];if(delete Sp[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Sp[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Sp[e];delete Sp[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}Sp[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign((function(e){this.manager=void 0!==e?e:Tp,this._parser=null}).prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Kf;a.image=o;var s=new Ap(this.manager);function u(u){s.load(e[u],function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Fu),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,c=0,h=e.length;c<h;++c)u(c);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Fu),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign((function(e){this.manager=void 0!==e?e:Tp,this._parser=null}).prototype,{load:function(e,t,n,r){var i=this,o=new ac,a=new Ap(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ou,o.wrapT=void 0!==n.wrapT?n.wrapT:Ou,o.magFilter=void 0!==n.magFilter?n.magFilter:Fu,o.minFilter=void 0!==n.minFilter?n.minFilter:Bu,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Fu),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(Cp.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ep.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Ep.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Rp.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new gh,o=new Cp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6==++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var u=0;u<e.length;++u)s(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Lp.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new nc,o=new Cp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?$u:el,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Pp.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i=new Ql,o=[],a=[],s=[],u=new Ql,l=new ql;for(n=0;n<=e;n++)o[n]=this.getTangentAt(n/e),o[n].normalize();a[0]=new Ql,s[0]=new Ql;var c=Number.MAX_VALUE,h=Math.abs(o[0].x),f=Math.abs(o[0].y),d=Math.abs(o[0].z);for(h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),d<=c&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),n=1;n<=e;n++)a[n]=a[n-1].clone(),s[n]=s[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Hl.clamp(o[n-1].dot(o[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(u,r))),s[n].crossVectors(o[n],a[n]);if(!0===t)for(r=Math.acos(Hl.clamp(a[0].dot(a[e]),-1,1)),r/=e,o[0].dot(u.crossVectors(a[0],a[e]))>0&&(r=-r),n=1;n<=e;n++)a[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),s[n].crossVectors(o[n],a[n]);return{tangents:o,normals:a,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),(Op.prototype=Object.create(Pp.prototype)).constructor=Op,Op.prototype.isEllipseCurve=!0,Op.prototype.getPoint=function(e,t){for(var n=t||new Wl,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},Op.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Op.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Op.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},(Ip.prototype=Object.create(Op.prototype)).constructor=Ip,Ip.prototype.isArcCurve=!0;var Np=new Ql,Dp=new kp,Fp=new kp,Up=new kp;function Bp(e,t,n,r){Pp.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function jp(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function zp(e,t,n,r){return function(e,n){var r=1-e;return r*r*t}(e)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*r}(e)}function Gp(e,t,n,r,i){return function(e,n){var r=1-e;return r*r*r*t}(e)+function(e,t){var r=1-e;return 3*r*r*e*n}(e)+function(e,t){return 3*(1-e)*e*e*r}(e)+function(e,t){return e*e*e*i}(e)}function Vp(e,t,n,r){Pp.call(this),this.type="CubicBezierCurve",this.v0=e||new Wl,this.v1=t||new Wl,this.v2=n||new Wl,this.v3=r||new Wl}function Hp(e,t,n,r){Pp.call(this),this.type="CubicBezierCurve3",this.v0=e||new Ql,this.v1=t||new Ql,this.v2=n||new Ql,this.v3=r||new Ql}function Wp(e,t){Pp.call(this),this.type="LineCurve",this.v1=e||new Wl,this.v2=t||new Wl}function qp(e,t){Pp.call(this),this.type="LineCurve3",this.v1=e||new Ql,this.v2=t||new Ql}function Xp(e,t,n){Pp.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Wl,this.v1=t||new Wl,this.v2=n||new Wl}function Qp(e,t,n){Pp.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Ql,this.v1=t||new Ql,this.v2=n||new Ql}function Yp(e){Pp.call(this),this.type="SplineCurve",this.points=e||[]}(Bp.prototype=Object.create(Pp.prototype)).constructor=Bp,Bp.prototype.isCatmullRomCurve3=!0,Bp.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Ql,s=this.points,u=s.length,l=(u-(this.closed?0:1))*e,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(Np.subVectors(s[0],s[1]).add(s[0]),n=Np),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(Np.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Np),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),f),p=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Dp.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,d,p,m),Fp.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,d,p,m),Up.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,d,p,m)}else"catmullrom"===this.curveType&&(Dp.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Fp.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Up.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Dp.calc(h),Fp.calc(h),Up.calc(h)),a},Bp.prototype.copy=function(e){Pp.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Bp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Bp.prototype.fromJSON=function(e){Pp.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Ql).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},(Vp.prototype=Object.create(Pp.prototype)).constructor=Vp,Vp.prototype.isCubicBezierCurve=!0,Vp.prototype.getPoint=function(e,t){var n=t||new Wl,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Gp(e,r.x,i.x,o.x,a.x),Gp(e,r.y,i.y,o.y,a.y)),n},Vp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Vp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Vp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(Hp.prototype=Object.create(Pp.prototype)).constructor=Hp,Hp.prototype.isCubicBezierCurve3=!0,Hp.prototype.getPoint=function(e,t){var n=t||new Ql,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Gp(e,r.x,i.x,o.x,a.x),Gp(e,r.y,i.y,o.y,a.y),Gp(e,r.z,i.z,o.z,a.z)),n},Hp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Hp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Hp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(Wp.prototype=Object.create(Pp.prototype)).constructor=Wp,Wp.prototype.isLineCurve=!0,Wp.prototype.getPoint=function(e,t){var n=t||new Wl;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Wp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wp.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(qp.prototype=Object.create(Pp.prototype)).constructor=qp,qp.prototype.isLineCurve3=!0,qp.prototype.getPoint=function(e,t){var n=t||new Ql;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},qp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},qp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Xp.prototype=Object.create(Pp.prototype)).constructor=Xp,Xp.prototype.isQuadraticBezierCurve=!0,Xp.prototype.getPoint=function(e,t){var n=t||new Wl,r=this.v0,i=this.v1,o=this.v2;return n.set(zp(e,r.x,i.x,o.x),zp(e,r.y,i.y,o.y)),n},Xp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Qp.prototype=Object.create(Pp.prototype)).constructor=Qp,Qp.prototype.isQuadraticBezierCurve3=!0,Qp.prototype.getPoint=function(e,t){var n=t||new Ql,r=this.v0,i=this.v1,o=this.v2;return n.set(zp(e,r.x,i.x,o.x),zp(e,r.y,i.y,o.y),zp(e,r.z,i.z,o.z)),n},Qp.prototype.copy=function(e){return Pp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qp.prototype.fromJSON=function(e){return Pp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Yp.prototype=Object.create(Pp.prototype)).constructor=Yp,Yp.prototype.isSplineCurve=!0,Yp.prototype.getPoint=function(e,t){var n=t||new Wl,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(jp(a,s.x,u.x,l.x,c.x),jp(a,s.y,u.y,l.y,c.y)),n},Yp.prototype.copy=function(e){Pp.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},Yp.prototype.toJSON=function(){var e=Pp.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},Yp.prototype.fromJSON=function(e){Pp.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Wl).fromArray(r))}return this};var Zp=Object.freeze({ArcCurve:Ip,CatmullRomCurve3:Bp,CubicBezierCurve:Vp,CubicBezierCurve3:Hp,EllipseCurve:Op,LineCurve:Wp,LineCurve3:qp,QuadraticBezierCurve:Xp,QuadraticBezierCurve3:Qp,SplineCurve:Yp});function Jp(){Pp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Kp(e){Jp.call(this),this.type="Path",this.currentPoint=new Wl,e&&this.setFromPoints(e)}function $p(e){Kp.call(this,e),this.uuid=Hl.generateUUID(),this.type="Shape",this.holes=[]}function em(e,t){Sc.call(this),this.type="Light",this.color=new pc(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function tm(e,t,n){em.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Sc.DefaultUp),this.updateMatrix(),this.groundColor=new pc(t)}function nm(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Wl(512,512),this.map=null,this.matrix=new ql}function rm(){nm.call(this,new Lf(50,1,.5,500))}function im(e,t,n,r,i,o){em.call(this,e,t),this.type="SpotLight",this.position.copy(Sc.DefaultUp),this.updateMatrix(),this.target=new Sc,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new rm}function om(e,t,n,r){em.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new nm(new Lf(90,1,.5,500))}function am(){nm.call(this,new Cc(-5,5,5,-5,.5,500))}function sm(e,t){em.call(this,e,t),this.type="DirectionalLight",this.position.copy(Sc.DefaultUp),this.updateMatrix(),this.target=new Sc,this.shadow=new am}function um(e,t){em.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function lm(e,t,n,r){em.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Jp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Jp,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Wp(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-i/a)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e),s=0;s<a.length;s++){var u=a[s];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Pp.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Pp.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Pp.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Zp[r.type]).fromJSON(r))}return this}}),Kp.prototype=Object.assign(Object.create(Jp.prototype),{constructor:Kp,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Wp(this.currentPoint.clone(),new Wl(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Xp(this.currentPoint.clone(),new Wl(e,t),new Wl(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Vp(this.currentPoint.clone(),new Wl(e,t),new Wl(n,r),new Wl(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Yp([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new Op(e,t,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Jp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Jp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Jp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),$p.prototype=Object.assign(Object.create(Kp.prototype),{constructor:$p,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Kp.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Kp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Kp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Kp).fromJSON(r))}return this}}),em.prototype=Object.assign(Object.create(Sc.prototype),{constructor:em,isLight:!0,copy:function(e){return Sc.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Sc.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),tm.prototype=Object.assign(Object.create(em.prototype),{constructor:tm,isHemisphereLight:!0,copy:function(e){return em.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(nm.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),rm.prototype=Object.assign(Object.create(nm.prototype),{constructor:rm,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Hl.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),im.prototype=Object.assign(Object.create(em.prototype),{constructor:im,isSpotLight:!0,copy:function(e){return em.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),om.prototype=Object.assign(Object.create(em.prototype),{constructor:om,isPointLight:!0,copy:function(e){return em.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),am.prototype=Object.assign(Object.create(nm.prototype),{constructor:am}),sm.prototype=Object.assign(Object.create(em.prototype),{constructor:sm,isDirectionalLight:!0,copy:function(e){return em.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),um.prototype=Object.assign(Object.create(em.prototype),{constructor:um,isAmbientLight:!0}),lm.prototype=Object.assign(Object.create(em.prototype),{constructor:lm,isRectAreaLight:!0,copy:function(e){return em.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=em.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var cm={arraySlice:function(e,t,n){return cm.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function hm(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function fm(e,t,n,r){hm.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function dm(e,t,n,r){hm.call(this,e,t,n,r)}function pm(e,t,n,r){hm.call(this,e,t,n,r)}function mm(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cm.convertArray(t,this.TimeBufferType),this.values=cm.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function vm(e,t,n){mm.call(this,e,t,n)}function gm(e,t,n,r){mm.call(this,e,t,n,r)}function ym(e,t,n,r){mm.call(this,e,t,n,r)}function bm(e,t,n,r){hm.call(this,e,t,n,r)}function _m(e,t,n,r){mm.call(this,e,t,n,r)}function xm(e,t,n,r){mm.call(this,e,t,n,r)}function wm(e,t,n,r){mm.call(this,e,t,n,r)}function Em(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Hl.generateUUID(),this.duration<0&&this.resetDuration()}function Mm(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ym;case"vector":case"vector2":case"vector3":case"vector4":return wm;case"color":return gm;case"quaternion":return _m;case"bool":case"boolean":return vm;case"string":return xm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];cm.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Tm(e){this.manager=void 0!==e?e:Tp,this.textures={}}function Sm(e){this.manager=void 0!==e?e:Tp}Object.assign(hm.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(hm.prototype,{beforeStart_:hm.prototype.copySampleValue_,afterEnd_:hm.prototype.copySampleValue_}),fm.prototype=Object.assign(Object.create(hm.prototype),{constructor:fm,DefaultSettings_:{endingStart:Rl,endingEnd:Rl},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}),dm.prototype=Object.assign(Object.create(hm.prototype),{constructor:dm,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),pm.prototype=Object.assign(Object.create(hm.prototype),{constructor:pm,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(mm,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:cm.convertArray(e.times,Array),values:cm.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(mm.prototype,{constructor:mm,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new pm(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new dm(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new fm(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=cm.arraySlice(n,i,o),this.values=cm.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&cm.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[p+f]}++i}}if(o>0){for(e[i]=e[o],p=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[p+f];++i}return i!==e.length&&(this.times=cm.arraySlice(e,0,i),this.values=cm.arraySlice(t,0,i*n)),this}}),vm.prototype=Object.assign(Object.create(mm.prototype),{constructor:vm,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),gm.prototype=Object.assign(Object.create(mm.prototype),{constructor:gm,ValueTypeName:"color"}),ym.prototype=Object.assign(Object.create(mm.prototype),{constructor:ym,ValueTypeName:"number"}),bm.prototype=Object.assign(Object.create(hm.prototype),{constructor:bm,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),l=s+a;s!==l;s+=4)Xl.slerpFlat(i,0,o,s-a,o,s,u);return i}}),_m.prototype=Object.assign(Object.create(mm.prototype),{constructor:_m,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new bm(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),xm.prototype=Object.assign(Object.create(mm.prototype),{constructor:xm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wm.prototype=Object.assign(Object.create(mm.prototype),{constructor:wm,ValueTypeName:"vector"}),Object.assign(Em,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Mm(n[i]).scale(r));return new Em(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(mm.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=cm.getKeyframeOrder(s);s=cm.sortedArray(s,1,l),u=cm.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ym(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new Em(e,-1,o)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(Em.CreateFromMorphTargetSequence(h,r[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];cm.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new ym(".morphTargetInfluence["+d+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(wm,g+".position",l,"pos",r),n(_m,g+".quaternion",l,"rot",r),n(wm,g+".scale",l,"scl",r)}}return 0===r.length?null:new Em(i,o,r)}}),Object.assign(Em.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Tm.prototype,{load:function(e,t,n,r){var i=this;new Ap(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new wp[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Wl).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(Sm.prototype,{load:function(e,t,n,r){var i=this;new Ap(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Xc,n=e.data.index;if(void 0!==n){var r=new Pm[n.type](n.array);t.setIndex(new kc(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new Pm[a.type](a.array),t.addAttribute(o,new kc(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var u=0,l=s.length;u!==l;++u){var c=s[u];t.addGroup(c.start,c.count,c.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var f=new Ql;void 0!==h.center&&f.fromArray(h.center),t.boundingSphere=new uc(f,h.radius)}return t}});var Am,Cm,Rm,Lm,Pm={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Om(){}Om.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n+1];if(t[n].test(e))return i}return null}},Object.assign(Om.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(Am={NoBlending:js,NormalBlending:zs,AdditiveBlending:Gs,SubtractiveBlending:Vs,MultiplyBlending:Hs,CustomBlending:Ws},Cm=new pc,Rm=new Lp,Lm=new Tm,function(e,t,n){var r={};function i(e,i,o,a,s){var u,l=t+e,c=Om.Handlers.get(l);null!==c?u=c.load(l):(Rm.setCrossOrigin(n),u=Rm.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=Pu),1!==i[1]&&(u.wrapT=Pu)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=Pu),"mirror"===a[0]&&(u.wrapS=Iu),"repeat"===a[1]&&(u.wrapT=Pu),"mirror"===a[1]&&(u.wrapT=Iu)),void 0!==s&&(u.anisotropy=s);var h=Hl.generateUUID();return r[h]=u,h}var o={uuid:Hl.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var s=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Am[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=Cm.fromArray(s).getHex();break;case"colorSpecular":o.specular=Cm.fromArray(s).getHex();break;case"colorEmissive":o.emissive=Cm.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=Ns;break;case"doubleSided":o.side=Ds;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=Bs),"face"===s&&(o.vertexColors=Us);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Lm.setTextures(r),Lm.parse(o)})});var Im=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function km(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Tp,this.withCredentials=!1}Object.assign(km.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Im(e),a=new Ap(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,o);t(u.geometry,u.materials)},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0!==e.scale?1/e.scale:1;var n=new Ic;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,x,w,E,M,T,S,A,C=e.faces,R=e.vertices,L=e.normals,P=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(a=0,s=R.length;a<s;)(_=new Ql).x=R[a++]*O,_.y=R[a++]*O,_.z=R[a++]*O,t.vertices.push(_);for(a=0,s=C.length;a<s;)if(d=n(f=C[a++],0),p=n(f,1),m=n(f,3),v=n(f,4),g=n(f,5),y=n(f,6),b=n(f,7),d){if((w=new Rc).a=C[a],w.b=C[a+1],w.c=C[a+3],(E=new Rc).a=C[a+1],E.b=C[a+2],E.c=C[a+3],a+=4,p&&(h=C[a++],w.materialIndex=h,E.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)A=new Wl(S[2*(c=C[a++])],S[2*c+1]),2!==i&&t.faceVertexUvs[r][o].push(A),0!==i&&t.faceVertexUvs[r][o+1].push(A);if(v&&(l=3*C[a++],w.normal.set(L[l++],L[l++],L[l]),E.normal.copy(w.normal)),g)for(r=0;r<4;r++)l=3*C[a++],T=new Ql(L[l++],L[l++],L[l]),2!==r&&w.vertexNormals.push(T),0!==r&&E.vertexNormals.push(T);if(y&&(u=C[a++],w.color.setHex(M=P[u]),E.color.setHex(M)),b)for(r=0;r<4;r++)M=P[u=C[a++]],2!==r&&w.vertexColors.push(new pc(M)),0!==r&&E.vertexColors.push(new pc(M));t.faces.push(w),t.faces.push(E)}else{if((x=new Rc).a=C[a++],x.b=C[a++],x.c=C[a++],p&&(h=C[a++],x.materialIndex=h),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)A=new Wl(S[2*(c=C[a++])],S[2*c+1]),t.faceVertexUvs[r][o].push(A);if(v&&(l=3*C[a++],x.normal.set(L[l++],L[l++],L[l])),g)for(r=0;r<3;r++)l=3*C[a++],T=new Ql(L[l++],L[l++],L[l]),x.vertexNormals.push(T);if(y&&(u=C[a++],x.color.setHex(P[u])),b)for(r=0;r<3;r++)u=C[a++],x.vertexColors.push(new pc(P[u]));t.faces.push(x)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n)t.skinWeights.push(new rc(e.skinWeights[r],n>1?e.skinWeights[r+1]:0,n>2?e.skinWeights[r+2]:0,n>3?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n)t.skinIndices.push(new rc(e.skinIndices[r],n>1?e.skinIndices[r+1]:0,n>2?e.skinIndices[r+2]:0,n>3?e.skinIndices[r+3]:0));t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,u=a.length;s<u;s+=3){var l=new Ql;l.x=a[s]*n,l.y=a[s+1]*n,l.z=a[s+2]*n,o.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,h=e.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(h,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=Em.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=Em.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Om.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign((function(e){this.manager=void 0!==e?e:Tp,this.texturePath=""}).prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new Ap(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new $p).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new km,i=new Sm,o=0,a=e.length;o<a;o++){var s,u=e[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new fp[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new fp[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new fp[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new fp[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new fp[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new fp[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new fp[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new fp[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new fp[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new fp[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new fp[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new fp[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=u.shapes.length;c<h;c++)l.push(t[u.shapes[c]]);s=new fp[u.type](l,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=u.shapes.length;c<h;c++)l.push(t[u.shapes[c]]);var f=u.options.extrudePath;void 0!==f&&(u.options.extrudePath=(new Zp[f.type]).fromJSON(f)),s=new fp[u.type](l,u.options);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Tm;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(r.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Em.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Cp(new Mp(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=l[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.texturePath+f;r[u.uuid].push(i(d))}}else d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url,r[u.uuid]=i(d)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new gh(t[s.image]):new nc(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Dm)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Fm),a.wrapT=n(s.wrap[1],Fm)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Um)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Um)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Df,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new pc(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Nf(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new kf(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Lf(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Cc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new um(e.color,e.intensity);break;case"DirectionalLight":r=new sm(e.color,e.intensity);break;case"PointLight":r=new om(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new lm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new im(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new tm(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new Hf(a,s):new mh(a,s);break;case"LOD":r=new zf;break;case"Line":r=new qf(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Qf(i(e.geometry),o(e.material));break;case"LineSegments":r=new Xf(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Zf(i(e.geometry),o(e.material));break;case"Sprite":r=new jf(o(e.material));break;case"Group":r=new Rf;break;default:r=new Sc}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var f=c[h],d=r.getObjectByProperty("uuid",f.object);void 0!==d&&r.addLevel(d,f.distance)}return r}});var Nm,Dm={UVMapping:300,CubeReflectionMapping:Mu,CubeRefractionMapping:Tu,EquirectangularReflectionMapping:Su,EquirectangularRefractionMapping:Au,SphericalReflectionMapping:Cu,CubeUVReflectionMapping:Ru,CubeUVRefractionMapping:Lu},Fm={RepeatWrapping:Pu,ClampToEdgeWrapping:Ou,MirroredRepeatWrapping:Iu},Um={NearestFilter:ku,NearestMipMapNearestFilter:Nu,NearestMipMapLinearFilter:Du,LinearFilter:Fu,LinearMipMapNearestFilter:Uu,LinearMipMapLinearFilter:Bu};function Bm(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Tp,this.options=void 0}function jm(){this.type="ShapePath",this.color=new pc,this.subPaths=[],this.currentPath=null}function zm(e){this.type="Font",this.data=e}function Gm(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,l,c,h,f,d,p=new jm;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(a,s);break;case"q":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,f=m[v++]*t+n,d=m[v++]*t+r,p.bezierCurveTo(c,h,f,d,u,l)}return{offsetX:o.ha*t,path:p}}}Bm.prototype={constructor:Bm,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Ep.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){Ep.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(jm.prototype,{moveTo:function(e,t){this.currentPath=new Kp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new $p;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=zd.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new $p).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!c&&p[v]&&v++,p[v]={s:new $p,p:h},p[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,_=[],x=0,w=p.length;x<w;x++)d[x]=[];for(x=0,w=p.length;x<w;x++)for(var E=m[x],M=0;M<E.length;M++){for(var T=E[M],S=!0,A=0;A<p.length;A++)r(T.p,p[A].p)&&(x!==A&&_.push({froms:x,tos:A,hole:M}),S?(S=!1,d[A].push(T)):b=!0);S&&d[x].push(T)}_.length>0&&(b||(m=d))}g=0;for(var C=p.length;g<C;g++){l.push(u=p[g].s);for(var R=0,L=(f=m[g]).length;R<L;R++)u.holes.push(f[R].h)}return l}}),Object.assign(zm.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=Gm(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign((function(e){this.manager=void 0!==e?e:Tp}).prototype,{load:function(e,t,n,r){var i=this,o=new Ap(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new zm(e)},setPath:function(e){return this.path=e,this}});var Vm,Hm,Wm,qm,Xm,Qm,Ym,Zm,Jm,Km,$m,ev,tv,nv,rv,iv={getContext:function(){return void 0===Nm&&(Nm=new(window.AudioContext||window.webkitAudioContext)),Nm},setContext:function(e){Nm=e}};function ov(e){this.manager=void 0!==e?e:Tp}function av(e,t,n){Sc.call(this),this.type="CubeCamera";var r=new Lf(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Ql(1,0,0)),this.add(r);var i=new Lf(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Ql(-1,0,0)),this.add(i);var o=new Lf(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Ql(0,1,0)),this.add(o);var a=new Lf(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Ql(0,-1,0)),this.add(a);var s=new Lf(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Ql(0,0,1)),this.add(s);var u=new Lf(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Ql(0,0,-1)),this.add(u),this.renderTarget=new oc(n,n,{format:$u,magFilter:Fu,minFilter:Fu}),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function sv(){Sc.call(this),this.type="AudioListener",this.context=iv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function uv(e){Sc.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function lv(e){uv.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function cv(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function hv(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function fv(e,t,n){var r=n||dv.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function dv(e,t,n){this.path=t,this.parsedPath=n||dv.parseTrackName(t),this.node=dv.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function pv(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Rl,endingEnd:Rl},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Cl,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function mv(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function vv(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function gv(){Xc.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function yv(e,t,n){Ff.call(this,e,t),this.meshPerAttribute=n||1}function bv(e,t,n){kc.call(this,e,t),this.meshPerAttribute=n||1}function _v(e,t,n,r){this.ray=new dh(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function xv(e,t){return e.distance-t.distance}function wv(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)wv(i[o],t,n,!0)}function Ev(e,t){this.min=void 0!==e?e:new Wl(1/0,1/0),this.max=void 0!==t?t:new Wl(-1/0,-1/0)}function Mv(e,t){this.start=void 0!==e?e:new Ql,this.end=void 0!==t?t:new Ql}function Tv(e){Sc.call(this),this.material=e,this.render=function(){}}function Sv(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Xc,l=new Gc(2*a*3,3);u.addAttribute("position",l),Xf.call(this,u,new Wf({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Av(e,t){Sc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Xc,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Gc(r,3));var u=new Wf({fog:!1});this.cone=new Xf(n,u),this.add(this.cone),this.update()}function Cv(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new Xc,r=[],i=[],o=new pc(0,0,1),a=new pc(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Gc(r,3)),n.addAttribute("color",new Gc(i,3));var l=new Wf({vertexColors:Bs,depthTest:!1,depthWrite:!1,transparent:!0});Xf.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Rv(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Jd(t,4,2),i=new hh({wireframe:!0,fog:!1});mh.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Lv(e,t){Sc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Wf({fog:!1}),r=new Xc;r.addAttribute("position",new kc(new Float32Array(15),3)),this.line=new qf(r,n),this.add(this.line),this.update()}function Pv(e,t,n){Sc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new ld(t);r.rotateY(.5*Math.PI),this.material=new hh({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Bs);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new kc(o,3)),this.add(new mh(r,this.material)),this.update()}function Ov(e,t,n,r){e=e||10,t=t||10,n=new pc(void 0!==n?n:4473924),r=new pc(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],l=0,c=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===i?n:r;f.toArray(u,c),f.toArray(u,c+=3),f.toArray(u,c+=3),f.toArray(u,c+=3),c+=3}var d=new Xc;d.addAttribute("position",new Gc(s,3)),d.addAttribute("color",new Gc(u,3));var p=new Wf({vertexColors:Bs});Xf.call(this,d,p)}function Iv(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new pc(void 0!==i?i:4473924),o=new pc(void 0!==o?o:8947848);var a,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(a,0,s),p.push((f=1&l?i:o).r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:o,h=e-e/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new Xc;m.addAttribute("position",new Gc(d,3)),m.addAttribute("color",new Gc(p,3));var v=new Wf({vertexColors:Bs});Xf.call(this,m,v)}function kv(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Xc,l=new Gc(2*a*3,3);u.addAttribute("position",l),Xf.call(this,u,new Wf({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Nv(e,t,n){Sc.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Xc;r.addAttribute("position",new Gc([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Wf({fog:!1});this.lightPlane=new qf(r,i),this.add(this.lightPlane),(r=new Xc).addAttribute("position",new Gc([0,0,0,0,0,1],3)),this.targetLine=new qf(r,i),this.add(this.targetLine),this.update()}function Dv(e){var t=new Xc,n=new Wf({color:16777215,vertexColors:Us}),r=[],i=[],o={},a=new pc(16755200),s=new pc(16711680),u=new pc(43775),l=new pc(16777215),c=new pc(3355443);function h(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.addAttribute("position",new Gc(r,3)),t.addAttribute("color",new Gc(i,3)),Xf.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Fv(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Xc;i.setIndex(new kc(n,1)),i.addAttribute("position",new kc(r,3)),Xf.call(this,i,new Wf({color:t})),this.matrixAutoUpdate=!1,this.update()}function Uv(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Xc;i.setIndex(new kc(r,1)),i.addAttribute("position",new Gc([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Xf.call(this,i,new Wf({color:n})),this.geometry.computeBoundingSphere()}function Bv(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Xc;i.addAttribute("position",new Gc([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),qf.call(this,i,new Wf({color:r}));var o=new Xc;o.addAttribute("position",new Gc([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new mh(o,new hh({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function jv(e,t,n,r,i,o){Sc.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===ev&&((ev=new Xc).addAttribute("position",new Gc([0,0,0,0,1,0],3)),(tv=new sp(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new qf(ev,new Wf({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mh(tv,new hh({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function zv(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Xc;n.addAttribute("position",new Gc(t,3)),n.addAttribute("color",new Gc([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Wf({vertexColors:Bs});Xf.call(this,n,r)}function Gv(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Bp.call(this,e),this.type="catmullrom"}Object.assign(ov.prototype,{load:function(e,t,n,r){var i=new Ap(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=e.slice(0);iv.getContext().decodeAudioData(n,function(e){t(e)})},n,r)}}),Object.assign((function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Lf,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Lf,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}).prototype,{update:function(){var e,t,n,r,i,o,a,s,u=new ql,l=new ql;return function(c){if(e!==this||t!==c.focus||n!==c.fov||r!==c.aspect*this.aspect||i!==c.near||o!==c.far||a!==c.zoom||s!==this.eyeSep){e=this,t=c.focus,n=c.fov,r=c.aspect*this.aspect,i=c.near,o=c.far,a=c.zoom;var h,f,d=c.projectionMatrix.clone(),p=(s=this.eyeSep/2)*i/t,m=i*Math.tan(Hl.DEG2RAD*n*.5)/a;l.elements[12]=-s,u.elements[12]=s,d.elements[0]=2*i/((f=m*r+p)-(h=-m*r+p)),d.elements[8]=(f+h)/(f-h),this.cameraL.projectionMatrix.copy(d),d.elements[0]=2*i/((f=m*r-p)-(h=-m*r-p)),d.elements[8]=(f+h)/(f-h),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(u)}}()}),(av.prototype=Object.create(Sc.prototype)).constructor=av,sv.prototype=Object.assign(Object.create(Sc.prototype),{constructor:sv,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Ql,t=new Xl,n=new Ql,r=new Ql;return function(i){Sc.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),uv.prototype=Object.assign(Object.create(Sc.prototype),{constructor:uv,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),lv.prototype=Object.assign(Object.create(uv.prototype),{constructor:lv,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new Ql,t=new Xl,n=new Ql,r=new Ql;return function(i){Sc.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(cv.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(hv.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else this._mixBufferRegion(n,i,0,t/(o+=t),r);this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,i<1&&this._mixBufferRegion(n,r,3*t,1-i,t);for(var a=t,s=t+t;a!==s;++a)if(n[a]!==n[a+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Xl.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}}),Object.assign(fv.prototype,{getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(dv,{Composite:fv,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new dv.Composite(e,t,n):new dv(e,t,n)},sanitizeNodeName:(Jm=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(Jm,"")}),parseTrackName:(Vm="[^\\[\\]\\.:\\/]",Hm="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Wm=/((?:WC+[\/:])*)/.source.replace("WC",Vm),qm=/(WCOD+)?/.source.replace("WCOD",Hm),Xm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Vm),Qm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Vm),Ym=new RegExp("^"+Wm+qm+Xm+Qm+"$"),Zm=["material","materials","bones"],function(e){var t=Ym.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Zm.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(dv.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=dv.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(dv.prototype,{_getValue_unbound:dv.prototype.getValue,_setValue_unbound:dv.prototype.setValue}),Object.assign((function(){this.uuid=Hl.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}).prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=r[f];if(void 0===d){d=t++,r[f]=d,e.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new dv(h,i[p],o[p]))}else if(d<n){u=e[d];var v=--n,g=e[v];for(r[g.uuid]=d,e[d]=g,r[f]=v,e[v]=h,p=0,m=s;p!==m;++p){var y=a[p],b=y[d];y[d]=y[v],void 0===b&&(b=new dv(h,i[p],o[p])),y[v]=b}}else e[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=t){var c=t++,h=e[c];n[h.uuid]=l,e[l]=h,n[u]=c,e[c]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[l];p[l]=p[c],p[c]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,l=r[u];if(void 0!==l)if(delete r[u],l<n){var c=--n,h=e[c],f=e[v=--t];r[h.uuid]=l,e[l]=h,r[f.uuid]=c,e[c]=f,e.pop();for(var d=0,p=o;d!==p;++d){var m=(g=i[d])[v];g[l]=g[c],g[c]=m,g.pop()}}else{var v;for(r[(f=e[v=--t]).uuid]=l,e[l]=f,e.pop(),d=0,p=o;d!==p;++d){var g;(g=i[d])[l]=g[v],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[e]=r=i.length,o.push(e),a.push(t),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new dv(s[c],e,t);return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(pv.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=r/i;e.warp(1,i/r,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:Rl:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:Rl:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),mv.prototype=Object.assign(Object.create(ys.prototype),{constructor:mv,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new hv(dv.create(n,f,t&&t._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(r[t]=i={}),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i];e:{for(var l in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new dm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Em.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new pv(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Em.findByName(n,e):e,o=this._actionsByClip[i?i.uuid:e];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),vv.prototype.clone=function(){return new vv(void 0===this.value.clone?this.value:this.value.clone())},gv.prototype=Object.assign(Object.create(Xc.prototype),{constructor:gv,isInstancedBufferGeometry:!0,copy:function(e){return Xc.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),yv.prototype=Object.assign(Object.create(Ff.prototype),{constructor:yv,isInstancedInterleavedBuffer:!0,copy:function(e){return Ff.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),bv.prototype=Object.assign(Object.create(kc.prototype),{constructor:bv,isInstancedBufferAttribute:!0,copy:function(e){return kc.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(_v.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return wv(e,this,r,t),r.sort(xv),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)wv(e[i],this,r,t);return r.sort(xv),r}}),Object.assign((function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}).prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign((function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}).prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Hl.clamp(e.y/this.radius,-1,1))),this}}),Object.assign((function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}).prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Ev.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Wl;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Wl),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Wl),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Wl),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Wl),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Wl;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Mv.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Ql),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Ql),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Ql),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Km=new Ql,$m=new Ql,function(e,t){Km.subVectors(e,this.start),$m.subVectors(this.end,this.start);var n=$m.dot($m),r=$m.dot(Km)/n;return t&&(r=Hl.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Ql),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),(Tv.prototype=Object.create(Sc.prototype)).constructor=Tv,Tv.prototype.isImmediateRenderObject=!0,(Sv.prototype=Object.create(Xf.prototype)).constructor=Sv,Sv.prototype.update=function(){var e=new Ql,t=new Ql,n=new Yl;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=f.vertexNormals[d];e.copy(s[f[r[d]]]).applyMatrix4(i),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,g=a.attributes.normal;for(l=0,d=0,p=v.count;d<p;d++)e.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),t.set(g.getX(d),g.getY(d),g.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),o.setXYZ(l+=1,t.x,t.y,t.z),l+=1}o.needsUpdate=!0}}(),(Av.prototype=Object.create(Sc.prototype)).constructor=Av,Av.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Av.prototype.update=function(){var e=new Ql,t=new Ql;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(Cv.prototype=Object.create(Xf.prototype)).constructor=Cv,Cv.prototype.updateMatrixWorld=function(){var e=new Ql,t=new ql,n=new ql;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u+1,e.x,e.y,e.z),u+=2)}o.getAttribute("position").needsUpdate=!0,Sc.prototype.updateMatrixWorld.call(this,r)}}(),(Rv.prototype=Object.create(mh.prototype)).constructor=Rv,Rv.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Rv.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(Lv.prototype=Object.create(Sc.prototype)).constructor=Lv,Lv.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Lv.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(Pv.prototype=Object.create(Sc.prototype)).constructor=Pv,Pv.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Pv.prototype.update=function(){var e=new Ql,t=new pc,n=new pc;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(Ov.prototype=Object.create(Xf.prototype)).constructor=Ov,(Iv.prototype=Object.create(Xf.prototype)).constructor=Iv,(kv.prototype=Object.create(Xf.prototype)).constructor=kv,kv.prototype.update=function(){var e=new Ql,t=new Ql,n=new Yl;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),i.setXYZ(u+=1,t.x,t.y,t.z),u+=1}i.needsUpdate=!0}}(),(Nv.prototype=Object.create(Sc.prototype)).constructor=Nv,Nv.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Nv.prototype.update=function(){var e=new Ql,t=new Ql,n=new Ql;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),(Dv.prototype=Object.create(Xf.prototype)).constructor=Dv,Dv.prototype.update=function(){var e,t,n=new Ql,r=new Ac;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=t[i];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),(Fv.prototype=Object.create(Xf.prototype)).constructor=Fv,Fv.prototype.update=function(){var e=new sc;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Fv.prototype.setFromObject=function(e){return this.object=e,this.update(),this},(Uv.prototype=Object.create(Xf.prototype)).constructor=Uv,Uv.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Sc.prototype.updateMatrixWorld.call(this,e))},(Bv.prototype=Object.create(qf.prototype)).constructor=Bv,Bv.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Ns:ks,this.lookAt(this.plane.normal),Sc.prototype.updateMatrixWorld.call(this,e)},(jv.prototype=Object.create(Sc.prototype)).constructor=jv,jv.prototype.setDirection=(rv=new Ql,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(rv.set(e.z,0,-e.x).normalize(),nv=Math.acos(e.y),this.quaternion.setFromAxisAngle(rv,nv))}),jv.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},jv.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(zv.prototype=Object.create(Xf.prototype)).constructor=zv,Pp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Pp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Jp.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Ic,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Ql(i.x,i.y,i.z||0))}return t}}),Object.assign(Kp.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Bp.prototype),Object.create(Bp.prototype),Gv.prototype=Object.create(Bp.prototype),Object.assign(Gv.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Ov.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Cv.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Om.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Im(e)}}),Object.assign(Ev.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(sc.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Mv.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Hl,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Hl.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Hl.ceilPowerOfTwo(e)}}),Object.assign(Yl.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(ql.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Ql),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),lc.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Xl.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(dh.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ph.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ph,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ph.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ph.getNormal(e,t,n,r)}}),Object.assign($p.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Hd(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new np(this,e)}}),Object.assign(Wl.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ql.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(rc.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ic.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Sc.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Sc.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(zf.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Gf.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Pp.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Lf.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(em.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(kc.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Xc.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Xc.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Wd.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(vv.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ch.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pc}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(gp.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fh.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(If.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(If.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ic.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Of.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),uv.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new ov).load(e,function(e){t.setBuffer(e)}),this},cv.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},av.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},ec.crossOrigin=void 0,ec.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Lp;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},ec.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Rp;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},ec.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ec.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Vv=n("3aoN"),Hv=n.n(Vv),Wv=n("c7F3"),qv=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n},Xv=qv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Qv=(qv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),qv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),qv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),qv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),qv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),qv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),function(e,t,n){e.prototype=t.prototype=n,n.constructor=e});function Yv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zv(){}var Jv="\\s*([+-]?\\d+)\\s*",Kv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",$v="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eg=/^#([0-9a-f]{3})$/,tg=/^#([0-9a-f]{6})$/,ng=new RegExp("^rgb\\("+[Jv,Jv,Jv]+"\\)$"),rg=new RegExp("^rgb\\("+[$v,$v,$v]+"\\)$"),ig=new RegExp("^rgba\\("+[Jv,Jv,Jv,Kv]+"\\)$"),og=new RegExp("^rgba\\("+[$v,$v,$v,Kv]+"\\)$"),ag=new RegExp("^hsl\\("+[Kv,$v,$v]+"\\)$"),sg=new RegExp("^hsla\\("+[Kv,$v,$v,Kv]+"\\)$"),ug={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lg(e){var t;return e=(e+"").trim().toLowerCase(),(t=eg.exec(e))?new pg((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=tg.exec(e))?cg(parseInt(t[1],16)):(t=ng.exec(e))?new pg(t[1],t[2],t[3],1):(t=rg.exec(e))?new pg(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ig.exec(e))?hg(t[1],t[2],t[3],t[4]):(t=og.exec(e))?hg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ag.exec(e))?vg(t[1],t[2]/100,t[3]/100,1):(t=sg.exec(e))?vg(t[1],t[2]/100,t[3]/100,t[4]):ug.hasOwnProperty(e)?cg(ug[e]):"transparent"===e?new pg(NaN,NaN,NaN,0):null}function cg(e){return new pg(e>>16&255,e>>8&255,255&e,1)}function hg(e,t,n,r){return r<=0&&(e=t=n=NaN),new pg(e,t,n,r)}function fg(e){return e instanceof Zv||(e=lg(e)),e?new pg((e=e.rgb()).r,e.g,e.b,e.opacity):new pg}function dg(e,t,n,r){return 1===arguments.length?fg(e):new pg(e,t,n,null==r?1:r)}function pg(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mg(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function vg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yg(e,t,n,r)}function gg(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof yg)return new yg(e.h,e.s,e.l,e.opacity);if(e instanceof Zv||(e=lg(e)),!e)return new yg;if(e instanceof yg)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new yg(a,s,u,e.opacity)}(e):new yg(e,t,n,null==r?1:r)}function yg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function bg(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Qv(Zv,lg,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Qv(pg,dg,Yv(Zv,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new pg(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new pg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+mg(this.r)+mg(this.g)+mg(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Qv(yg,gg,Yv(Zv,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new yg(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new yg(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pg(bg(e>=240?e-240:e+120,i,r),bg(e,i,r),bg(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var _g=Math.PI/180,xg=180/Math.PI,wg=.96422,Eg=1,Mg=.82521,Tg=4/29,Sg=6/29,Ag=3*Sg*Sg,Cg=Sg*Sg*Sg;function Rg(e){if(e instanceof Lg)return new Lg(e.l,e.a,e.b,e.opacity);if(e instanceof Dg){if(isNaN(e.h))return new Lg(e.l,0,0,e.opacity);var t=e.h*_g;return new Lg(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof pg||(e=fg(e));var n,r,i=kg(e.r),o=kg(e.g),a=kg(e.b),s=Pg((.2225045*i+.7168786*o+.0606169*a)/Eg);return i===o&&o===a?n=r=s:(n=Pg((.4360747*i+.3850649*o+.1430804*a)/wg),r=Pg((.0139322*i+.0971045*o+.7141733*a)/Mg)),new Lg(116*s-16,500*(n-s),200*(s-r),e.opacity)}function Lg(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Pg(e){return e>Cg?Math.pow(e,1/3):e/Ag+Tg}function Og(e){return e>Sg?e*e*e:Ag*(e-Tg)}function Ig(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function kg(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ng(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Dg)return new Dg(e.h,e.c,e.l,e.opacity);if(e instanceof Lg||(e=Rg(e)),0===e.a&&0===e.b)return new Dg(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xg;return new Dg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Dg(e,t,n,null==r?1:r)}function Dg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}Qv(Lg,function(e,t,n,r){return 1===arguments.length?Rg(e):new Lg(e,t,n,null==r?1:r)},Yv(Zv,{brighter:function(e){return new Lg(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Lg(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new pg(Ig(3.1338561*(t=wg*Og(t))-1.6168667*(e=Eg*Og(e))-.4906146*(n=Mg*Og(n))),Ig(-.9787684*t+1.9161415*e+.033454*n),Ig(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Qv(Dg,Ng,Yv(Zv,{brighter:function(e){return new Dg(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Dg(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Rg(this).rgb()}}));var Fg=-.29227,Ug=-.90649,Bg=1.97294,jg=Bg*Ug,zg=1.78277*Bg,Gg=1.78277*Fg- -.14861*Ug;function Vg(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Hg)return new Hg(e.h,e.s,e.l,e.opacity);e instanceof pg||(e=fg(e));var t=e.g/255,n=e.b/255,r=(Gg*n+jg*(e.r/255)-zg*t)/(Gg+jg-zg),i=n-r,o=(Bg*(t-r)-Fg*i)/Ug,a=Math.sqrt(o*o+i*i)/(Bg*r*(1-r)),s=a?Math.atan2(o,i)*xg-120:NaN;return new Hg(s<0?s+360:s,a,r,e.opacity)}(e):new Hg(e,t,n,null==r?1:r)}function Hg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wg(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Qv(Hg,Vg,Yv(Zv,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Hg(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Hg(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*_g,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new pg(255*(t+n*(-.14861*r+1.78277*i)),255*(t+n*(Fg*r+Ug*i)),255*(t+n*(Bg*r)),this.opacity)}}));var qg=function(e){return function(){return e}};function Xg(e,t){return function(n){return e+n*t}}function Qg(e,t){var n=t-e;return n?Xg(e,n>180||n<-180?n-360*Math.round(n/360):n):qg(isNaN(e)?t:e)}function Yg(e,t){var n=t-e;return n?Xg(e,n):qg(isNaN(e)?t:e)}function Zg(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=dg(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}!function e(t){var n=function(e){return 1==(e=+e)?Yg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):qg(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=dg(e)).r,(t=dg(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Yg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);var Jg=Zg(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1];return Wg((n-r/t)*t,r>0?e[r-1]:2*i-o,i,o,r<t-1?e[r+2]:2*o-i)}}),Kg=(Zg(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return Wg((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}}),function(e,t){return t-=e=+e,function(n){return e+t*n}});new RegExp(/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g.source,"g");var $g,ey,ty,ny,ry=180/Math.PI,iy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},oy=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ry,skewX:Math.atan(u)*ry,scaleX:a,scaleY:s}};function ay(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:Kg(e,i)},{i:u-2,x:Kg(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Kg(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Kg(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Kg(e,n)},{i:s-2,x:Kg(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}function sy(e){return function(t,n){var r=e((t=gg(t)).h,(n=gg(n)).h),i=Yg(t.s,n.s),o=Yg(t.l,n.l),a=Yg(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}function uy(e){return function(t,n){var r=e((t=Ng(t)).h,(n=Ng(n)).h),i=Yg(t.c,n.c),o=Yg(t.l,n.l),a=Yg(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}function ly(e){return function t(n){function r(t,r){var i=e((t=Vg(t)).h,(r=Vg(r)).h),o=Yg(t.s,r.s),a=Yg(t.l,r.l),s=Yg(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}ay(function(e){return"none"===e?iy:($g||($g=document.createElement("DIV"),ey=document.documentElement,ty=document.defaultView),$g.style.transform=e,e=ty.getComputedStyle(ey.appendChild($g),null).getPropertyValue("transform"),ey.removeChild($g),e=e.slice(7,-1).split(","),oy(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),ay(function(e){return null==e?iy:(ny||(ny=document.createElementNS("http://www.w3.org/2000/svg","g")),ny.setAttribute("transform",e),(e=ny.transform.baseVal.consolidate())?oy((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):iy)},", ",")",")"),Math,sy(Qg),sy(Yg),uy(Qg),uy(Yg),ly(Qg);var cy=ly(Yg),hy=function(e){return Jg(e[e.length-1])};function fy(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}hy(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(qv)),hy(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(qv)),hy(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(qv)),hy(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(qv)),hy(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(qv)),hy(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(qv)),hy(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(qv)),hy(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(qv)),hy(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(qv)),hy(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(qv)),hy(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(qv)),hy(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(qv)),hy(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(qv)),hy(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(qv)),hy(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(qv)),hy(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(qv)),hy(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(qv)),hy(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(qv)),hy(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(qv)),hy(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(qv)),hy(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(qv)),hy(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(qv)),hy(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(qv)),hy(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(qv)),hy(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(qv)),hy(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(qv)),hy(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(qv)),cy(Vg(300,.5,0),Vg(-240,.5,1)),cy(Vg(-100,.75,.35),Vg(80,1.5,.8)),cy(Vg(260,.75,.35),Vg(80,1.5,.8)),Vg(),dg(),Math,Math,fy(qv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),fy(qv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),fy(qv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fy(qv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var dy=function(){function e(){this.calculateScaleFactor=function(e,t){return new Promise(function(n,r){var i=new Ql;e.getSize(i);var o=[];i.toArray(o);var a=Math.max.apply(Math,Object(d.__spread)(o));n(t/a)})},this.calculateOffsetFactors=function(e,t,n){return new Promise(function(r,i){var o=new Ql;e.getCenter(o);var a=[];o.toArray(a),a=a.map(function(e){return e*t}),r([n/2-a[0],n/2-a[1],n/2-a[2]])})},this.getBoundingBox=function(e){return new Promise(function(t,n){var r=new Yf({size:2,color:new pc("#000000")}),i=new sc;e.forEach(function(e){e.geometry&&e.geometry.split("\n").filter(function(e){return e.startsWith("v ")}).forEach(function(e){var t=new Ql((e=e.split(" "))[1],e[2],e[3]),n=new Ic;n.vertices.push(t);var o=new Zf(n,r);i.expandByObject(o)})}),t(i)})}}return e.prototype.processOBJ=function(e){return Object(d.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return Object(d.__generator)(this,function(s){switch(s.label){case 0:return t=1,[4,this.getBoundingBox(e)];case 1:return n=s.sent(),[4,this.calculateScaleFactor(n,t)];case 2:return r=s.sent(),[4,this.calculateOffsetFactors(n,r,t)];case 3:return i=s.sent(),o=[],a=[],e.map(function(e){var t=e.geometry.split("\n").map(function(e){if(e.startsWith("v ")){var t=e.split(" ");e="v "+(t[1]*r+i[0])+" "+(t[2]*r+i[1])+" "+(t[3]*r+i[2])}return e}).join("\n");e.geometry=t,"Zone"==e.type?o.push(e):"Element"==e.type&&a.push(e)}),[2,{zones:o,elements:a,geometryPreprocessing:{scaleFactor:r,offset:i}}]}})})},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),py=function(){function e(e){this._s=e,this.clickedRoom=new r.EventEmitter,this.clickedCanvas=new r.EventEmitter,this.showCentroids=!0,this.showBoundingBox=!0,this.centroid=new Ql(.5,.5,.5),this.highlightMaterial=new hh({color:8129026,opacity:1}),this.hoverMaterial=new hh({color:0,opacity:.2}),this.spaceObjects=[],this.canvasClass="default",this.render=this.render.bind(this)}return e.prototype.ngOnInit=function(){this.createScene(),this.createRenderer(),this.createCamera(),this.createControls(),this.render()},e.prototype.ngOnChanges=function(e){var t=this;Array.isArray(e.data.currentValue)&&(this.clearGeometry(),this._s.processOBJ(this.data).then(function(e){t.zones=e.zones,t.elements=e.elements,t.appendMeshes(t.zones,"zone"),t.appendMeshes(t.elements,"element")}))},e.prototype.clearGeometry=function(){this.scene.children=this.scene.children.filter(function(e){return"Group"!=e.type})},e.prototype.render=function(){this.renderer.render(this.scene,this.camera)},e.prototype.createScene=function(){this.scene=new Df;var e,t=new um(1052720);return this.scene.add(t),(e=new om(16777215,1,1e3)).position.set(0,0,1),this.scene.add(e),(e=new om(16777215,1,1e3)).position.set(0,1,1),this.scene.add(e),this.scene},e.prototype.createRenderer=function(){return this.renderer=new If({canvas:this.canvasRef.nativeElement,antialias:!0,alpha:!0}),this.renderer.setClearColor(16777215,0),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer},e.prototype.appendMeshes=function(e,t){var n=this;Array.isArray(e)||(e=[e]);var r,i,o=[];try{for(var a=Object(d.__values)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if("zone"==t){var l=u.opacity?u.opacity:.5;if(l<1)var c=!0;var h=Xv,f=Math.floor(10*Math.random()),p=u.color?u.color:h[f],m=new hh({color:p=new pc(p),side:Ds,opacity:l,transparent:c,depthWrite:!1})}else"element"==t&&(m=null);var v=this.loadOBJ(u.geometry,u.uri,m);o.push(v)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}o.forEach(function(e){e.then(function(e){n.scene.add(e.object),"zone"==t&&n.spaceObjects.push(e.object),n.render()}).catch(function(e){return console.log(e)})})},e.prototype.loadOBJ=function(e,t,n){var r=new Hv.a;return new Promise(function(i,o){try{var a=r.parse(e);a.name=t,a.traverse(function(e){"Mesh"==e.type&&(e.name=t,n&&(e.material=n))}),i({object:a,edges:void 0})}catch(e){o(e)}})},e.prototype.createCamera=function(){var e=this.getAspectRatio();return this.camera=new Lf(75,e,.1,1e3),this.camera.up.set(0,0,1),this.camera.lookAt(this.centroid),this.camera.position.set(1.1,.5,1.1),this.camera.fov=2*Math.atan(2)*(180/Math.PI),this.camera},e.prototype.createControls=function(){return this.controls=new Wv.OrbitControls(this.camera,this.renderer.domElement),this.controls.minPolarAngle=0,this.controls.maxPolarAngle=Math.PI,this.controls.minDistance=0,this.controls.maxDistance=10,this.controls.target=this.centroid,this.controls.addEventListener("change",this.render),this.controls},e.prototype.getAspectRatio=function(){var e=this.canvasRef.nativeElement;return 0===e.clientHeight?0:e.clientWidth/e.clientHeight},e.prototype.onMouseDown=function(e){e.preventDefault(),this.selected&&(this.selected.material=this.previousMaterial,this.selected=null);var t=new Wl;t.x=e.clientX/this.renderer.domElement.clientWidth*2-1,t.y=-e.clientY/this.renderer.domElement.clientHeight*2+1;var n=this.intersectingMesh(t);n&&(this.selected=n,this.previousMaterial=n.material,n.material=this.highlightMaterial,this.clickedRoom.emit({uri:n.name})),this.render()},e.prototype.onMouseMove=function(e){if(e.preventDefault(),this.renderer){var t=new Wl;t.x=e.clientX/this.renderer.domElement.clientWidth*2-1,t.y=-e.clientY/this.renderer.domElement.clientHeight*2+1;var n=this.intersectingMesh(t);n?n!=this.previousHovered&&(this.canvasClass="clickable",this.previousHovered=n):this.previousHovered&&(this.canvasClass="default",this.previousHovered=null),this.render()}},e.prototype.findAllObjects=function(e,t){var n=this;t.children.length>0&&t.children.forEach(function(t){e.push(t),n.findAllObjects(e,t)})},e.prototype.intersectingMesh=function(e){var t=[];this.findAllObjects(t,this.scene);var n=new _v;n.setFromCamera(e,this.camera);var r=n.intersectObjects(t);if(r){var i=r.filter(function(e){return"Mesh"==e.object.type})[0];if(i)return i.object}return null},e.prototype.onMouseUp=function(e){},e.prototype.onResize=function(e){this.canvasRef.nativeElement.style.width="100%",this.canvasRef.nativeElement.style.height="100%",console.log("onResize: "+this.canvasRef.nativeElement.clientWidth+", "+this.canvasRef.nativeElement.clientHeight),this.camera.aspect=this.getAspectRatio(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.canvasRef.nativeElement.clientWidth,this.canvasRef.nativeElement.clientHeight),this.render()},e}(),my=function(){},vy=r["\u0275crt"]({encapsulation:0,styles:["canvas[_ngcontent-%COMP%]{width:100%;height:100%}.button-row[_ngcontent-%COMP%]{position:absolute;z-index:100;float:right}.clickable[_ngcontent-%COMP%]{cursor:pointer}.default[_ngcontent-%COMP%]{cursor:default}"],data:{}});function gy(e){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{canvasRef:0}),(e()(),r["\u0275eld"](1,0,[[1,0],["canvas",1]],null,1,"canvas",[],null,[[null,"mousemove"],[null,"mousedown"],[null,"mouseup"]],function(e,t,n){var r=!0,i=e.component;return"mousemove"===t&&(r=!1!==i.onMouseMove(n)&&r),"mousedown"===t&&(r=!1!==i.onMouseDown(n)&&r),"mouseup"===t&&(r=!1!==i.onMouseUp(n)&&r),r},null,null)),r["\u0275did"](2,278528,null,0,S,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngClass:[0,"ngClass"]},null)],function(e,t){e(t,2,0,t.component.canvasClass)},null)}var yy=r["\u0275crt"]({encapsulation:0,styles:[[".button-row[_ngcontent-%COMP%]{position:absolute;width:245px;left:5px;top:5px;z-index:100}.button-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.item[_ngcontent-%COMP%]{padding-top:10px;width:100%}.selected[_ngcontent-%COMP%]{color:red}.drag-card[_ngcontent-%COMP%]{position:absolute;left:100px;top:100px;background-color:rgba(220,220,220,.6);border-radius:5px;font-family:roboto;font-size:.7em;padding:0;z-index:110}.msg[_ngcontent-%COMP%]{position:absolute;left:5px;bottom:5px;border-radius:5px;background-color:#eee;font-family:consolas;font-size:.8em;padding-left:15px;padding-right:15px}"]],data:{}});function by(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.switchModule(e.context.$implicit)&&r),r},li,ui)),r["\u0275did"](1,180224,null,0,qr,[r.ElementRef,X,nn,[2,ai]],{disabled:[0,"disabled"]},null),(e()(),r["\u0275ted"](2,0,[" "," "]))],function(e,t){e(t,1,0,t.context.$implicit==t.component.selectedButton)},function(e,t){e(t,0,0,r["\u0275nov"](t,1).disabled||null,"NoopAnimations"===r["\u0275nov"](t,1)._animationMode),e(t,2,0,t.context.$implicit)})}function _y(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==r["\u0275nov"](e,1)._handleKeydown(n)&&i),i},fi,ci)),r["\u0275did"](1,8568832,[[8,4]],0,Dr,[r.ElementRef,r.ChangeDetectorRef,[2,Nr],[2,Ir]],{value:[0,"value"]},null),(e()(),r["\u0275ted"](2,0,[" "," "]))],function(e,t){e(t,1,0,t.context.$implicit)},function(e,t){e(t,0,0,r["\u0275nov"](t,1)._getTabIndex(),r["\u0275nov"](t,1).selected,r["\u0275nov"](t,1).multiple,r["\u0275nov"](t,1).active,r["\u0275nov"](t,1).id,r["\u0275nov"](t,1).selected.toString(),r["\u0275nov"](t,1).disabled.toString(),r["\u0275nov"](t,1).disabled),e(t,2,0,t.context.$implicit.name.value)})}function xy(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,17,"mat-form-field",[["class","item mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,ki,wi)),r["\u0275did"](1,7389184,null,7,_i,[r.ElementRef,r.ChangeDetectorRef,[2,Br],[2,Ht],[2,bi],X,r.NgZone,[2,ai]],null,null),r["\u0275qud"](335544320,1,{_control:0}),r["\u0275qud"](335544320,2,{_placeholderChild:0}),r["\u0275qud"](335544320,3,{_labelChild:0}),r["\u0275qud"](603979776,4,{_errorChildren:1}),r["\u0275qud"](603979776,5,{_hintChildren:1}),r["\u0275qud"](603979776,6,{_prefixChildren:1}),r["\u0275qud"](603979776,7,{_suffixChildren:1}),(e()(),r["\u0275eld"](9,0,null,1,8,"mat-select",[["class","mat-select"],["placeholder","Select level"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null]],[[null,"selectionChange"],[null,"valueChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0,o=e.component;return"keydown"===t&&(i=!1!==r["\u0275nov"](e,11)._handleKeydown(n)&&i),"focus"===t&&(i=!1!==r["\u0275nov"](e,11)._onFocus()&&i),"blur"===t&&(i=!1!==r["\u0275nov"](e,11)._onBlur()&&i),"selectionChange"===t&&(i=!1!==o.onLevelChange(n.value)&&i),"valueChange"===t&&(i=!1!==(o.selectedLevel=n)&&i),i},ea,Qo)),r["\u0275prd"](6144,null,Nr,null,[Wi]),r["\u0275did"](11,2080768,null,3,Wi,[ze,r.ChangeDetectorRef,r.NgZone,xr,r.ElementRef,[2,Ht],[2,jo],[2,Wo],[2,_i],[8,null],[8,null],Vi],{placeholder:[0,"placeholder"],value:[1,"value"]},{selectionChange:"selectionChange",valueChange:"valueChange"}),r["\u0275qud"](603979776,8,{options:1}),r["\u0275qud"](603979776,9,{optionGroups:1}),r["\u0275qud"](335544320,10,{customTrigger:0}),r["\u0275prd"](2048,[[1,4]],mi,null,[Wi]),(e()(),r["\u0275and"](16777216,null,1,1,null,_y)),r["\u0275did"](17,278528,null,0,C,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,11,0,"Select level",n.selectedLevel),e(t,17,0,n.levels)},function(e,t){e(t,0,1,["standard"==r["\u0275nov"](t,1).appearance,"fill"==r["\u0275nov"](t,1).appearance,"outline"==r["\u0275nov"](t,1).appearance,"legacy"==r["\u0275nov"](t,1).appearance,r["\u0275nov"](t,1)._control.errorState,r["\u0275nov"](t,1)._canLabelFloat,r["\u0275nov"](t,1)._shouldLabelFloat(),r["\u0275nov"](t,1)._hideControlPlaceholder(),r["\u0275nov"](t,1)._control.disabled,r["\u0275nov"](t,1)._control.autofilled,r["\u0275nov"](t,1)._control.focused,"accent"==r["\u0275nov"](t,1).color,"warn"==r["\u0275nov"](t,1).color,r["\u0275nov"](t,1)._shouldForward("untouched"),r["\u0275nov"](t,1)._shouldForward("touched"),r["\u0275nov"](t,1)._shouldForward("pristine"),r["\u0275nov"](t,1)._shouldForward("dirty"),r["\u0275nov"](t,1)._shouldForward("valid"),r["\u0275nov"](t,1)._shouldForward("invalid"),r["\u0275nov"](t,1)._shouldForward("pending"),!r["\u0275nov"](t,1)._animationsEnabled]),e(t,9,1,[r["\u0275nov"](t,11).id,r["\u0275nov"](t,11).tabIndex,r["\u0275nov"](t,11)._getAriaLabel(),r["\u0275nov"](t,11)._getAriaLabelledby(),r["\u0275nov"](t,11).required.toString(),r["\u0275nov"](t,11).disabled.toString(),r["\u0275nov"](t,11).errorState,r["\u0275nov"](t,11).panelOpen?r["\u0275nov"](t,11)._optionIds:null,r["\u0275nov"](t,11).multiple,r["\u0275nov"](t,11)._ariaDescribedby||null,r["\u0275nov"](t,11)._getAriaActiveDescendant(),r["\u0275nov"](t,11).disabled,r["\u0275nov"](t,11).errorState,r["\u0275nov"](t,11).required])})}function wy(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,18,"mat-radio-group",[["class","mat-radio-group"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(e,t,n){var r=!0,i=e.component;return"ngModelChange"===t&&(r=!1!==(i.mode3D=n)&&r),"change"===t&&(r=!1!==i.on3DModeChange()&&r),r},null,null)),r["\u0275did"](1,1064960,null,1,ra,[r.ChangeDetectorRef],null,{change:"change"}),r["\u0275qud"](603979776,11,{_radios:1}),r["\u0275prd"](1024,null,ro,function(e){return[e]},[ra]),r["\u0275did"](4,671744,null,0,Ho,[[8,null],[8,null],[8,null],[6,ro]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,co,null,[Ho]),r["\u0275did"](6,16384,null,0,Po,[[4,co]],null,null),(e()(),r["\u0275eld"](7,0,null,null,2,"mat-radio-button",[["class","item mat-radio-button"],["value","1"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[1,"id",0]],[[null,"focus"]],function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r["\u0275nov"](e,8)._inputElement.nativeElement.focus()&&i),i},sa,aa)),r["\u0275did"](8,4440064,[[11,4]],0,ia,[[2,ra],r.ElementRef,r.ChangeDetectorRef,nn,Di,[2,ai]],{value:[0,"value"]},null),(e()(),r["\u0275ted"](-1,0,["Spaces"])),(e()(),r["\u0275eld"](10,0,null,null,2,"mat-radio-button",[["class","item mat-radio-button"],["value","2"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[1,"id",0]],[[null,"focus"]],function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r["\u0275nov"](e,11)._inputElement.nativeElement.focus()&&i),i},sa,aa)),r["\u0275did"](11,4440064,[[11,4]],0,ia,[[2,ra],r.ElementRef,r.ChangeDetectorRef,nn,Di,[2,ai]],{value:[0,"value"]},null),(e()(),r["\u0275ted"](-1,0,["Windows"])),(e()(),r["\u0275eld"](13,0,null,null,2,"mat-radio-button",[["class","item mat-radio-button"],["value","3"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[1,"id",0]],[[null,"focus"]],function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r["\u0275nov"](e,14)._inputElement.nativeElement.focus()&&i),i},sa,aa)),r["\u0275did"](14,4440064,[[11,4]],0,ia,[[2,ra],r.ElementRef,r.ChangeDetectorRef,nn,Di,[2,ai]],{value:[0,"value"]},null),(e()(),r["\u0275ted"](-1,0,["Elements"])),(e()(),r["\u0275eld"](16,0,null,null,2,"mat-radio-button",[["class","item mat-radio-button"],["value","4"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[1,"id",0]],[[null,"focus"]],function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r["\u0275nov"](e,17)._inputElement.nativeElement.focus()&&i),i},sa,aa)),r["\u0275did"](17,4440064,[[11,4]],0,ia,[[2,ra],r.ElementRef,r.ChangeDetectorRef,nn,Di,[2,ai]],{value:[0,"value"]},null),(e()(),r["\u0275ted"](-1,0,["Contained in a space"]))],function(e,t){e(t,4,0,t.component.mode3D),e(t,8,0,"1"),e(t,11,0,"2"),e(t,14,0,"3"),e(t,17,0,"4")},function(e,t){e(t,0,0,r["\u0275nov"](t,6).ngClassUntouched,r["\u0275nov"](t,6).ngClassTouched,r["\u0275nov"](t,6).ngClassPristine,r["\u0275nov"](t,6).ngClassDirty,r["\u0275nov"](t,6).ngClassValid,r["\u0275nov"](t,6).ngClassInvalid,r["\u0275nov"](t,6).ngClassPending),e(t,7,0,r["\u0275nov"](t,8).checked,r["\u0275nov"](t,8).disabled,"NoopAnimations"===r["\u0275nov"](t,8)._animationMode,r["\u0275nov"](t,8).id),e(t,10,0,r["\u0275nov"](t,11).checked,r["\u0275nov"](t,11).disabled,"NoopAnimations"===r["\u0275nov"](t,11)._animationMode,r["\u0275nov"](t,11).id),e(t,13,0,r["\u0275nov"](t,14).checked,r["\u0275nov"](t,14).disabled,"NoopAnimations"===r["\u0275nov"](t,14)._animationMode,r["\u0275nov"](t,14).id),e(t,16,0,r["\u0275nov"](t,17).checked,r["\u0275nov"](t,17).disabled,"NoopAnimations"===r["\u0275nov"](t,17)._animationMode,r["\u0275nov"](t,17).id)})}function Ey(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,6,"div",[["class","drag-card"],["ngDraggable",""]],null,[[null,"mousedown"],[null,"touchstart"],["document","mouseup"],["document","mouseleave"],["document","touchend"],["document","touchcancel"],["document","mousemove"],["document","touchmove"]],function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseDown(n)&&i),"touchstart"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseDown(n)&&i),"document:mouseup"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseLeave()&&i),"document:mouseleave"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseLeave()&&i),"document:touchend"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseLeave()&&i),"document:touchcancel"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseLeave()&&i),"document:mousemove"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseMove(n)&&i),"document:touchmove"===t&&(i=!1!==r["\u0275nov"](e,1).onMouseMove(n)&&i),i},null,null)),r["\u0275did"](1,4931584,null,0,ca,[r.ElementRef,r.Renderer2],{ngDraggable:[0,"ngDraggable"]},null),(e()(),r["\u0275eld"](2,0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),r["\u0275ppd"](3,1),(e()(),r["\u0275eld"](4,0,null,null,2,"button",[["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==(e.component.query=null)&&r),r},li,ui)),r["\u0275did"](5,180224,null,0,qr,[r.ElementRef,X,nn,[2,ai]],null,null),(e()(),r["\u0275ted"](-1,0,["Got it!"]))],function(e,t){e(t,1,0,"")},function(e,t){var n=t.component;e(t,2,0,r["\u0275unv"](t,2,0,e(t,3,0,r["\u0275nov"](t.parent,0),n.query))),e(t,4,0,r["\u0275nov"](t,5).disabled||null,"NoopAnimations"===r["\u0275nov"](t,5)._animationMode)})}function My(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,2,"div",[["class","msg"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r["\u0275ted"](2,null,["",""]))],null,function(e,t){e(t,2,0,t.component.msg)})}function Ty(e){return r["\u0275vid"](0,[r["\u0275pid"](0,fa.MarkdownToHtmlPipe,[]),(e()(),r["\u0275eld"](1,0,null,null,6,"div",[["class","button-row"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,by)),r["\u0275did"](3,278528,null,0,C,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,xy)),r["\u0275did"](5,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,wy)),r["\u0275did"](7,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](8,0,null,null,1,"ng-plan",[["toolbar","true"]],[[8,"hidden",0]],[[null,"clickedRoom"],[null,"clickedCanvas"]],function(e,t,n){var r=!0,i=e.component;return"clickedRoom"===t&&(r=!1!==i.roomClick(n)&&r),"clickedCanvas"===t&&(r=!1!==i.canvasClick()&&r),r},gs,fs)),r["\u0275did"](9,4767744,null,0,pa,[os,rr],{data:[0,"data"],toolbar:[1,"toolbar"],selected:[2,"selected"]},{clickedRoom:"clickedRoom",clickedCanvas:"clickedCanvas"}),(e()(),r["\u0275eld"](10,0,null,null,2,"ng-mesh-viewer",[],[[8,"hidden",0]],[[null,"clickedRoom"],["window","resize"]],function(e,t,n){var i=!0,o=e.component;return"window:resize"===t&&(i=!1!==r["\u0275nov"](e,12).onResize(n)&&i),"clickedRoom"===t&&(i=!1!==o.log(n)&&i),i},gy,vy)),r["\u0275prd"](512,null,dy,dy,[]),r["\u0275did"](12,638976,null,0,py,[dy],{data:[0,"data"],showCentroids:[1,"showCentroids"]},{clickedRoom:"clickedRoom"}),(e()(),r["\u0275and"](16777216,null,null,1,null,Ey)),r["\u0275did"](14,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,My)),r["\u0275did"](16,16384,null,0,L,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,n.buttons),e(t,5,0,"ng-plan"==n.selectedButton),e(t,7,0,"ng-plan"!=n.selectedButton),e(t,9,0,n.data,"true",n.selectedSpaces),e(t,12,0,n.data,!0),e(t,14,0,n.query),e(t,16,0,n.msg&&n.showInfo)},function(e,t){var n=t.component;e(t,8,0,"ng-plan"!=n.selectedButton),e(t,10,0,"ng-mesh-viewer"!=n.selectedButton)})}var Sy=r["\u0275ccf"]("app-root",h,function(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,2,"app-root",[],null,null,null,Ty,yy)),r["\u0275prd"](512,null,c,c,[ka]),r["\u0275did"](2,114688,null,0,h,[ka,c],null,null)],function(e,t){e(t,2,0)},null)},{},{},[]),Ay=n("fLnf"),Cy=r["\u0275cmf"](i,[h],function(e){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[Gr,Sy]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](5120,r.LOCALE_ID,r["\u0275angular_packages_core_core_k"],[[3,r.LOCALE_ID]]),r["\u0275mpd"](4608,E,M,[r.LOCALE_ID,[2,w]]),r["\u0275mpd"](4608,r.Compiler,r.Compiler,[]),r["\u0275mpd"](5120,r.APP_ID,r["\u0275angular_packages_core_core_f"],[]),r["\u0275mpd"](5120,r.IterableDiffers,r["\u0275angular_packages_core_core_i"],[]),r["\u0275mpd"](5120,r.KeyValueDiffers,r["\u0275angular_packages_core_core_j"],[]),r["\u0275mpd"](4608,rr,ir,[V]),r["\u0275mpd"](6144,r.Sanitizer,null,[rr]),r["\u0275mpd"](4608,Zn,Kn,[]),r["\u0275mpd"](5120,En,function(e,t,n,r,i,o,a,s){return[new Qn(e,t,n),new nr(r),new $n(i,o,a,s)]},[V,r.NgZone,r.PLATFORM_ID,V,V,Zn,r["\u0275Console"],[2,Jn]]),r["\u0275mpd"](4608,Mn,Mn,[En,r.NgZone]),r["\u0275mpd"](135680,An,An,[V]),r["\u0275mpd"](4608,kn,kn,[Mn,An]),r["\u0275mpd"](5120,Qr.a,ri,[]),r["\u0275mpd"](5120,Qr.c,ii,[]),r["\u0275mpd"](4608,Qr.b,ni,[V,Qr.a,Qr.c]),r["\u0275mpd"](5120,r.RendererFactory2,oi,[kn,Qr.b,r.NgZone]),r["\u0275mpd"](6144,Sn,null,[An]),r["\u0275mpd"](4608,r.Testability,r.Testability,[r.NgZone]),r["\u0275mpd"](4608,f.b,Yr,[r.RendererFactory2,pn]),r["\u0275mpd"](4608,Ha,Wa,[V,r.PLATFORM_ID,Ga]),r["\u0275mpd"](4608,qa,qa,[Ha,Va]),r["\u0275mpd"](5120,Da,function(e){return[e]},[qa]),r["\u0275mpd"](4608,ja,ja,[]),r["\u0275mpd"](6144,Ba,null,[ja]),r["\u0275mpd"](4608,za,za,[Ba]),r["\u0275mpd"](6144,ba,null,[za]),r["\u0275mpd"](4608,ya,Xa,[ba,r.Injector]),r["\u0275mpd"](4608,ka,ka,[ya]),r["\u0275mpd"](4608,ho,ho,[]),r["\u0275mpd"](4608,Bt,Bt,[]),r["\u0275mpd"](4608,_t,_t,[ct,ft,r.ComponentFactoryResolver,yt,ht,r.Injector,r.NgZone,V,Ht]),r["\u0275mpd"](5120,wt,Tt,[_t]),r["\u0275mpd"](5120,Rt,Lt,[_t]),r["\u0275mpd"](5120,Vi,Hi,[_t]),r["\u0275mpd"](1073742336,G,G,[]),r["\u0275mpd"](1024,r.ErrorHandler,dr,[]),r["\u0275mpd"](1024,r.APP_INITIALIZER,function(e){return[(t=e,_n("probe",wn),_n("coreTokens",Object(d.__assign)({},xn,(t||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return wn})];var t},[[2,r.NgProbeToken]]),r["\u0275mpd"](512,r.ApplicationInitStatus,r.ApplicationInitStatus,[[2,r.APP_INITIALIZER]]),r["\u0275mpd"](131584,r.ApplicationRef,r.ApplicationRef,[r.NgZone,r["\u0275Console"],r.Injector,r.ErrorHandler,r.ComponentFactoryResolver,r.ApplicationInitStatus]),r["\u0275mpd"](1073742336,r.ApplicationModule,r.ApplicationModule,[r.ApplicationRef]),r["\u0275mpd"](1073742336,pr,pr,[[3,pr]]),r["\u0275mpd"](1073742336,si,si,[]),r["\u0275mpd"](1073742336,Qa,Qa,[]),r["\u0275mpd"](1073742336,Ya,Ya,[]),r["\u0275mpd"](1073742336,qo,qo,[]),r["\u0275mpd"](1073742336,Xo,Xo,[]),r["\u0275mpd"](1073742336,Wt,Wt,[]),r["\u0275mpd"](1073742336,vr,vr,[[2,mr]]),r["\u0275mpd"](1073742336,ls,ls,[]),r["\u0275mpd"](1073742336,Y,Y,[]),r["\u0275mpd"](1073742336,Gt,Gt,[]),r["\u0275mpd"](1073742336,rn,rn,[]),r["\u0275mpd"](1073742336,$e,$e,[]),r["\u0275mpd"](1073742336,Ge,Ge,[]),r["\u0275mpd"](1073742336,St,St,[]),r["\u0275mpd"](1073742336,kt,kt,[]),r["\u0275mpd"](1073742336,va,va,[]),r["\u0275mpd"](1073742336,my,my,[]),r["\u0275mpd"](1073742336,ha,ha,[]),r["\u0275mpd"](1073742336,Ay.MarkdownToHtmlModule,Ay.MarkdownToHtmlModule,[]),r["\u0275mpd"](1073742336,Rr,Rr,[]),r["\u0275mpd"](1073742336,Xr,Xr,[]),r["\u0275mpd"](1073742336,Pr,Pr,[]),r["\u0275mpd"](1073742336,Ur,Ur,[]),r["\u0275mpd"](1073742336,xi,xi,[]),r["\u0275mpd"](1073742336,qi,qi,[]),r["\u0275mpd"](1073742336,oa,oa,[]),r["\u0275mpd"](1073742336,i,i,[]),r["\u0275mpd"](256,r["\u0275APP_ROOT"],!0,[]),r["\u0275mpd"](256,ai,"BrowserAnimations",[]),r["\u0275mpd"](256,Ga,"XSRF-TOKEN",[]),r["\u0275mpd"](256,Va,"X-XSRF-TOKEN",[])])});Object(r.enableProdMode)(),fr().bootstrapModuleFactory(Cy).catch(function(e){return console.log(e)})},zotm:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("rPjj"),i=n("Fxb1");function o(e,t,n,o,a){if(void 0===a&&(a=new r.a(e,n,o)),!a.closed)return Object(i.a)(t)(a)}}},[[6,0]]]);